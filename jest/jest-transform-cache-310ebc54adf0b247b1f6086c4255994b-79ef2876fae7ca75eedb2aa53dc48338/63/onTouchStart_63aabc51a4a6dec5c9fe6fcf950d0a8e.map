{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/node_modules/swiper/core/events/onTouchStart.js"],"sourcesContent":["import { getWindow, getDocument } from 'ssr-window';\nimport { now } from '../../shared/utils.js';\n\n// Modified from https://stackoverflow.com/questions/54520554/custom-element-getrootnode-closest-function-crossing-multiple-parent-shadowd\nfunction closestElement(selector, base = this) {\n  function __closestFrom(el) {\n    if (!el || el === getDocument() || el === getWindow()) return null;\n    if (el.assignedSlot) el = el.assignedSlot;\n    const found = el.closest(selector);\n    if (!found && !el.getRootNode) {\n      return null;\n    }\n    return found || __closestFrom(el.getRootNode().host);\n  }\n  return __closestFrom(base);\n}\nexport default function onTouchStart(event) {\n  const swiper = this;\n  const document = getDocument();\n  const window = getWindow();\n  const data = swiper.touchEventsData;\n  data.evCache.push(event);\n  const {\n    params,\n    touches,\n    enabled\n  } = swiper;\n  if (!enabled) return;\n  if (!params.simulateTouch && event.pointerType === 'mouse') return;\n  if (swiper.animating && params.preventInteractionOnTransition) {\n    return;\n  }\n  if (!swiper.animating && params.cssMode && params.loop) {\n    swiper.loopFix();\n  }\n  let e = event;\n  if (e.originalEvent) e = e.originalEvent;\n  let targetEl = e.target;\n  if (params.touchEventsTarget === 'wrapper') {\n    if (!swiper.wrapperEl.contains(targetEl)) return;\n  }\n  if ('which' in e && e.which === 3) return;\n  if ('button' in e && e.button > 0) return;\n  if (data.isTouched && data.isMoved) return;\n\n  // change target el for shadow root component\n  const swipingClassHasValue = !!params.noSwipingClass && params.noSwipingClass !== '';\n  // eslint-disable-next-line\n  const eventPath = event.composedPath ? event.composedPath() : event.path;\n  if (swipingClassHasValue && e.target && e.target.shadowRoot && eventPath) {\n    targetEl = eventPath[0];\n  }\n  const noSwipingSelector = params.noSwipingSelector ? params.noSwipingSelector : `.${params.noSwipingClass}`;\n  const isTargetShadow = !!(e.target && e.target.shadowRoot);\n\n  // use closestElement for shadow root element to get the actual closest for nested shadow root element\n  if (params.noSwiping && (isTargetShadow ? closestElement(noSwipingSelector, targetEl) : targetEl.closest(noSwipingSelector))) {\n    swiper.allowClick = true;\n    return;\n  }\n  if (params.swipeHandler) {\n    if (!targetEl.closest(params.swipeHandler)) return;\n  }\n  touches.currentX = e.pageX;\n  touches.currentY = e.pageY;\n  const startX = touches.currentX;\n  const startY = touches.currentY;\n\n  // Do NOT start if iOS edge swipe is detected. Otherwise iOS app cannot swipe-to-go-back anymore\n\n  const edgeSwipeDetection = params.edgeSwipeDetection || params.iOSEdgeSwipeDetection;\n  const edgeSwipeThreshold = params.edgeSwipeThreshold || params.iOSEdgeSwipeThreshold;\n  if (edgeSwipeDetection && (startX <= edgeSwipeThreshold || startX >= window.innerWidth - edgeSwipeThreshold)) {\n    if (edgeSwipeDetection === 'prevent') {\n      event.preventDefault();\n    } else {\n      return;\n    }\n  }\n  Object.assign(data, {\n    isTouched: true,\n    isMoved: false,\n    allowTouchCallbacks: true,\n    isScrolling: undefined,\n    startMoving: undefined\n  });\n  touches.startX = startX;\n  touches.startY = startY;\n  data.touchStartTime = now();\n  swiper.allowClick = true;\n  swiper.updateSize();\n  swiper.swipeDirection = undefined;\n  if (params.threshold > 0) data.allowThresholdMove = false;\n  let preventDefault = true;\n  if (targetEl.matches(data.focusableElements)) {\n    preventDefault = false;\n    if (targetEl.nodeName === 'SELECT') {\n      data.isTouched = false;\n    }\n  }\n  if (document.activeElement && document.activeElement.matches(data.focusableElements) && document.activeElement !== targetEl) {\n    document.activeElement.blur();\n  }\n  const shouldPreventDefault = preventDefault && swiper.allowTouchMove && params.touchStartPreventDefault;\n  if ((params.touchStartForcePreventDefault || shouldPreventDefault) && !targetEl.isContentEditable) {\n    e.preventDefault();\n  }\n  if (params.freeMode && params.freeMode.enabled && swiper.freeMode && swiper.animating && !params.cssMode) {\n    swiper.freeMode.onTouchStart();\n  }\n  swiper.emit('touchStart', e);\n}"],"names":["onTouchStart","closestElement","selector","base","__closestFrom","el","getDocument","getWindow","assignedSlot","found","closest","getRootNode","host","event","swiper","document","window","data","touchEventsData","evCache","push","params","touches","enabled","simulateTouch","pointerType","animating","preventInteractionOnTransition","cssMode","loop","loopFix","e","originalEvent","targetEl","target","touchEventsTarget","wrapperEl","contains","which","button","isTouched","isMoved","swipingClassHasValue","noSwipingClass","eventPath","composedPath","path","shadowRoot","noSwipingSelector","isTargetShadow","noSwiping","allowClick","swipeHandler","currentX","pageX","currentY","pageY","startX","startY","edgeSwipeDetection","iOSEdgeSwipeDetection","edgeSwipeThreshold","iOSEdgeSwipeThreshold","innerWidth","preventDefault","Object","assign","allowTouchCallbacks","isScrolling","undefined","startMoving","touchStartTime","now","updateSize","swipeDirection","threshold","allowThresholdMove","matches","focusableElements","nodeName","activeElement","blur","shouldPreventDefault","allowTouchMove","touchStartPreventDefault","touchStartForcePreventDefault","isContentEditable","freeMode","emit"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"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"}