{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/hooks/src/useElementRect.ts"],"sourcesContent":["import { useEffect, useState } from \"react\"\n\nconst observeElementSize = (fixedRef: Element, onResize: ResizeObserverCallback) => {\n  const resizeObserver = new ResizeObserver(onResize)\n  resizeObserver.observe(fixedRef)\n  return () => resizeObserver.unobserve(fixedRef)\n}\n\ntype Options = {\n  resize?: boolean\n}\n\nconst useElementRect = (element: Element | null, { resize = false }: Options = {}) => {\n  const rect = element?.getBoundingClientRect()\n  const [height, setHeight] = useState<number | undefined>(element?.clientHeight)\n  const [width, setWidth] = useState<number | undefined>(element?.clientWidth)\n  const [top, setTop] = useState<number | undefined>(rect?.top)\n  const [left, setLeft] = useState<number | undefined>(rect?.left)\n\n  useEffect(() => {\n    if (!resize) return\n    const onResize = () => {\n      const rect = element?.getBoundingClientRect()\n      if (rect) {\n        setHeight(rect.height)\n        setWidth(rect.width)\n        setTop(rect.top)\n        setLeft(rect.left)\n      }\n    }\n    window.addEventListener(\"resize\", onResize)\n    onResize()\n    return () => {\n      window.removeEventListener(\"resize\", onResize)\n    }\n  }, [element, resize])\n\n  useEffect(() => {\n    if (!element) return\n    setHeight(element.clientHeight)\n    setWidth(element.clientWidth)\n    return observeElementSize(element, () => {\n      setHeight(element.clientHeight)\n      setWidth(element.clientWidth)\n    })\n  }, [element])\n\n  return { height, width, left, top }\n}\n\nexport { useElementRect }\n"],"names":["useElementRect","observeElementSize","fixedRef","onResize","resizeObserver","ResizeObserver","observe","unobserve","element","resize","rect","getBoundingClientRect","height","setHeight","useState","clientHeight","width","setWidth","clientWidth","top","setTop","left","setLeft","useEffect","window","addEventListener","removeEventListener"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAkDSA;;;eAAAA;;;uBAlD2B;AAEpC,MAAMC,qBAAqB,CAACC,UAAmBC;IAC7C,MAAMC,iBAAiB,IAAIC,eAAeF;IAC1CC,eAAeE,OAAO,CAACJ;IACvB,OAAO,IAAME,eAAeG,SAAS,CAACL;AACxC;AAMA,MAAMF,iBAAiB,CAACQ,SAAyB,EAAEC,SAAS,KAAK,EAAW,GAAG,CAAC,CAAC;IAC/E,MAAMC,OAAOF,oBAAAA,8BAAAA,QAASG,qBAAqB;IAC3C,MAAM,CAACC,QAAQC,UAAU,GAAGC,IAAAA,eAAQ,EAAqBN,oBAAAA,8BAAAA,QAASO,YAAY;IAC9E,MAAM,CAACC,OAAOC,SAAS,GAAGH,IAAAA,eAAQ,EAAqBN,oBAAAA,8BAAAA,QAASU,WAAW;IAC3E,MAAM,CAACC,KAAKC,OAAO,GAAGN,IAAAA,eAAQ,EAAqBJ,iBAAAA,2BAAAA,KAAMS,GAAG;IAC5D,MAAM,CAACE,MAAMC,QAAQ,GAAGR,IAAAA,eAAQ,EAAqBJ,iBAAAA,2BAAAA,KAAMW,IAAI;IAE/DE,IAAAA,gBAAS,EAAC;QACR,IAAI,CAACd,QAAQ;QACb,MAAMN,WAAW;YACf,MAAMO,OAAOF,oBAAAA,8BAAAA,QAASG,qBAAqB;YAC3C,IAAID,MAAM;gBACRG,UAAUH,KAAKE,MAAM;gBACrBK,SAASP,KAAKM,KAAK;gBACnBI,OAAOV,KAAKS,GAAG;gBACfG,QAAQZ,KAAKW,IAAI;YACnB;QACF;QACAG,OAAOC,gBAAgB,CAAC,UAAUtB;QAClCA;QACA,OAAO;YACLqB,OAAOE,mBAAmB,CAAC,UAAUvB;QACvC;IACF,GAAG;QAACK;QAASC;KAAO;IAEpBc,IAAAA,gBAAS,EAAC;QACR,IAAI,CAACf,SAAS;QACdK,UAAUL,QAAQO,YAAY;QAC9BE,SAAST,QAAQU,WAAW;QAC5B,OAAOjB,mBAAmBO,SAAS;YACjCK,UAAUL,QAAQO,YAAY;YAC9BE,SAAST,QAAQU,WAAW;QAC9B;IACF,GAAG;QAACV;KAAQ;IAEZ,OAAO;QAAEI;QAAQI;QAAOK;QAAMF;IAAI;AACpC"}