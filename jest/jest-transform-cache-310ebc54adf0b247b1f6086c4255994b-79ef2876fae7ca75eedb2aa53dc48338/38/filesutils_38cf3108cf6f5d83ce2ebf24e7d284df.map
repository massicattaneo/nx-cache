{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/files/src/lib/files.utils.ts"],"sourcesContent":["import {\n  FileRowType,\n  FileSize,\n  Uploadable,\n  mapServerFilesForTable,\n  mapUploadingFilesForTable,\n} from \"@rp/common/utils\"\n\nconst getSizeAndUnit = (bytes: FileSize, failed: boolean) => {\n  if (failed) return \"0 bytes\"\n  if (bytes / 1024 / 1024 > 999.9) return `${(bytes / 1024 / 1024 / 1024).toFixed(2)} GB`\n  if (bytes / 1024 > 999.9) return `${(bytes / 1024 / 1024).toFixed(1)} MB`\n  if (bytes > 999) return `${(bytes / 1024).toFixed(1)} KB`\n  return `${bytes} bytes`\n}\n\nfunction removeDuplicates<TItem>(items: Array<TItem>, key: keyof TItem): Array<TItem> {\n  const map = new Map<TItem[keyof TItem], TItem>()\n  for (const item of items) {\n    map.set(item[key], item)\n  }\n  return Array.from(map.values())\n}\n\nconst checkForDuplicates = (\n  serverFiles: Array<FileRowType>,\n  uploading: Array<Uploadable>,\n  fn: (file: Uploadable) => void,\n) => {\n  uploading.forEach(uploadingFile => {\n    serverFiles.forEach(serverFile => {\n      if (serverFile.id === uploadingFile.fileId) {\n        fn(uploadingFile)\n      }\n    })\n  })\n}\n\nexport {\n  getSizeAndUnit,\n  checkForDuplicates,\n  mapServerFilesForTable,\n  mapUploadingFilesForTable,\n  removeDuplicates,\n}\n"],"names":["checkForDuplicates","getSizeAndUnit","mapServerFilesForTable","mapUploadingFilesForTable","removeDuplicates","bytes","failed","toFixed","items","key","map","Map","item","set","Array","from","values","serverFiles","uploading","fn","forEach","uploadingFile","serverFile","id","fileId"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;IAwCEA,kBAAkB;eAAlBA;;IADAC,cAAc;eAAdA;;IAEAC,sBAAsB;eAAtBA,6BAAsB;;IACtBC,yBAAyB;eAAzBA,gCAAyB;;IACzBC,gBAAgB;eAAhBA;;;uBArCK;AAEP,MAAMH,iBAAiB,CAACI,OAAiBC;IACvC,IAAIA,QAAQ,OAAO;IACnB,IAAID,QAAQ,OAAO,OAAO,OAAO,OAAO,CAAC,EAAE,AAACA,CAAAA,QAAQ,OAAO,OAAO,IAAG,EAAGE,OAAO,CAAC,GAAG,GAAG,CAAC;IACvF,IAAIF,QAAQ,OAAO,OAAO,OAAO,CAAC,EAAE,AAACA,CAAAA,QAAQ,OAAO,IAAG,EAAGE,OAAO,CAAC,GAAG,GAAG,CAAC;IACzE,IAAIF,QAAQ,KAAK,OAAO,CAAC,EAAE,AAACA,CAAAA,QAAQ,IAAG,EAAGE,OAAO,CAAC,GAAG,GAAG,CAAC;IACzD,OAAO,CAAC,EAAEF,MAAM,MAAM,CAAC;AACzB;AAEA,SAASD,iBAAwBI,KAAmB,EAAEC,GAAgB;IACpE,MAAMC,MAAM,IAAIC;IAChB,KAAK,MAAMC,QAAQJ,MAAO;QACxBE,IAAIG,GAAG,CAACD,IAAI,CAACH,IAAI,EAAEG;IACrB;IACA,OAAOE,MAAMC,IAAI,CAACL,IAAIM,MAAM;AAC9B;AAEA,MAAMhB,qBAAqB,CACzBiB,aACAC,WACAC;IAEAD,UAAUE,OAAO,CAACC,CAAAA;QAChBJ,YAAYG,OAAO,CAACE,CAAAA;YAClB,IAAIA,WAAWC,EAAE,KAAKF,cAAcG,MAAM,EAAE;gBAC1CL,GAAGE;YACL;QACF;IACF;AACF"}