{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/discovery-sidebar/src/hooks/useMentionPreview.ts"],"sourcesContent":["import { CqsItem } from \"@rp/common/api-types\"\nimport { RpqlLogicalGroupFilter } from \"@rp/common/api-types\"\nimport { useCQSPreview, useQueryContext } from \"@rp/react/web/common/providers\"\nimport { convertDiscoveryPanelItem } from \"@rp/react/web/cqs-query-context\"\n\nconst useMentionPreview = (mention: CqsItem, useClusterApi = false) => {\n  const { searchQuery } = useQueryContext()\n  const queryItem = convertDiscoveryPanelItem(mention)\n\n  const enabled = searchQuery !== undefined\n\n  const expression: RpqlLogicalGroupFilter = {\n    type: \"and\",\n    value: [{ type: queryItem.type, operation: \"in\", value: [queryItem.value] }],\n  }\n  if (enabled && searchQuery.expression !== undefined) {\n    expression.value.push(searchQuery.expression)\n  }\n\n  const queryData = useCQSPreview({ ...searchQuery, expression }, \"mention-preview\", {\n    enabled,\n    useClusterApi,\n  })\n\n  return { ...queryData, expression }\n}\n\nexport { useMentionPreview }\n"],"names":["useMentionPreview","mention","useClusterApi","searchQuery","useQueryContext","queryItem","convertDiscoveryPanelItem","enabled","undefined","expression","type","value","operation","push","queryData","useCQSPreview"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA2BSA;;;eAAAA;;;2BAzBsC;iCACL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAE1C,MAAMA,oBAAoB,CAACC,SAAkBC,gBAAgB,KAAK;IAChE,MAAM,EAAEC,WAAW,EAAE,GAAGC,IAAAA,0BAAe;IACvC,MAAMC,YAAYC,IAAAA,0CAAyB,EAACL;IAE5C,MAAMM,UAAUJ,gBAAgBK;IAEhC,MAAMC,aAAqC;QACzCC,MAAM;QACNC,OAAO;YAAC;gBAAED,MAAML,UAAUK,IAAI;gBAAEE,WAAW;gBAAMD,OAAO;oBAACN,UAAUM,KAAK;iBAAC;YAAC;SAAE;IAC9E;IACA,IAAIJ,WAAWJ,YAAYM,UAAU,KAAKD,WAAW;QACnDC,WAAWE,KAAK,CAACE,IAAI,CAACV,YAAYM,UAAU;IAC9C;IAEA,MAAMK,YAAYC,IAAAA,wBAAa,EAAC,wCAAKZ;QAAaM;QAAc,mBAAmB;QACjFF;QACAL;IACF;IAEA,OAAO,wCAAKY;QAAWL;;AACzB"}