{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/brief/src/components/briefSteps/BriefWatchlistSelectionStep/BriefWatchlistSelectionStep.tsx"],"sourcesContent":["import React, { useMemo, useState } from \"react\"\nimport { useUser } from \"@clerk/clerk-react\"\nimport { useAccount } from \"@rp/react/common/providers\"\nimport { useAllWatchlists } from \"@rp/react/tanstack-api/watchlist\"\nimport { BriefStepsLegend } from \"@rp/react/web/common/composite-components\"\nimport { Box } from \"@rp/react/web/mui/core\"\nimport { Typography } from \"@rp/react/web/mui/core\"\nimport { InfoOutlined } from \"@rp/react/web/mui/icons\"\nimport { WatchlistsTab } from \"@rp/react/web/watchlists\"\nimport { BriefStepsContent } from \"../BriefStepsContent\"\nimport { BriefUserWatchlists } from \"./BriefUserWatchlists\"\nimport { BriefWatchlistsSubheader } from \"./BriefWatchlistsSubheader\"\nimport { DEFAULT_WATCHLIST_TAB, EMPTY_WATCHLISTS } from \"./constants\"\nimport { useWatchlistFiltering } from \"./hooks/useWatchlistFiltering\"\nimport { useWatchlistSearch } from \"./hooks/useWatchlistSearch\"\n\nfunction BriefWatchlistSelectionStep() {\n  const { user } = useUser()\n  const { canShare } = useAccount()\n  const userId = user?.id\n  const [activeTab, setActiveTab] = useState<WatchlistsTab>(DEFAULT_WATCHLIST_TAB)\n\n  const { filterTerm, setFilterTerm, isSearching } = useWatchlistSearch()\n\n  const { isLoading: isLoadingAllWatchlists, data: allWatchlists = EMPTY_WATCHLISTS } =\n    useAllWatchlists()\n\n  const { filteredWatchlists } = useWatchlistFiltering({\n    allWatchlists,\n    activeTab,\n    userId,\n    isSearching,\n  })\n\n  // Calculate filtered results count (applies search filter)\n  const filteredResultsCount = useMemo(() => {\n    if (isSearching) {\n      return filteredWatchlists.filter(item =>\n        item.name.toLowerCase().includes(filterTerm.toLowerCase()),\n      ).length\n    }\n    return filteredWatchlists.length\n  }, [filteredWatchlists, filterTerm, isSearching])\n\n  const shouldHideFilter = isLoadingAllWatchlists\n  const hasNoResults = filteredResultsCount === 0 && !isLoadingAllWatchlists\n\n  return (\n    <>\n      <BriefStepsLegend>\n        <Typography>Select a watchlist to schedule a brief and stay up to date:</Typography>\n      </BriefStepsLegend>\n      <Box sx={{ backgroundColor: \"grey.800\", p: 1.5, borderRadius: 2, marginTop: 1.5 }}>\n        <Typography fontSize=\"13px\" color=\"text.200\">\n          <InfoOutlined\n            style={{\n              marginBottom: \"-3.5px\",\n              marginRight: \"8px\",\n              color: \"text.200\",\n              width: \"16px\",\n              height: \"16px\",\n            }}\n          />\n          This feature currently supports only{\" \"}\n          <span style={{ fontWeight: 700 }}>company watchlists</span>. Up to{\" \"}\n          <span style={{ fontWeight: 700 }}>100</span> companies will be included in the brief.\n        </Typography>\n      </Box>\n      <BriefStepsContent>\n        <BriefWatchlistsSubheader\n          shouldHideFilter={shouldHideFilter}\n          activeTab={isSearching ? null : activeTab}\n          onTabChange={setActiveTab}\n          canShare={canShare}\n          filterTerm={filterTerm}\n          setFilterTerm={setFilterTerm}\n          filteredResultsCount={filteredResultsCount}\n          isSearching={isSearching}\n          hasNoResults={hasNoResults}\n        />\n\n        <BriefUserWatchlists\n          userWatchlists={filteredWatchlists}\n          isLoadingUserWatchlists={isLoadingAllWatchlists}\n          activeTab={activeTab}\n        />\n      </BriefStepsContent>\n    </>\n  )\n}\n\nexport { BriefWatchlistSelectionStep }\n"],"names":["BriefWatchlistSelectionStep","user","useUser","canShare","useAccount","userId","id","activeTab","setActiveTab","useState","DEFAULT_WATCHLIST_TAB","filterTerm","setFilterTerm","isSearching","useWatchlistSearch","isLoading","isLoadingAllWatchlists","data","allWatchlists","EMPTY_WATCHLISTS","useAllWatchlists","filteredWatchlists","useWatchlistFiltering","filteredResultsCount","useMemo","filter","item","name","toLowerCase","includes","length","shouldHideFilter","hasNoResults","BriefStepsLegend","Typography","Box","sx","backgroundColor","p","borderRadius","marginTop","fontSize","color","InfoOutlined","style","marginBottom","marginRight","width","height","span","fontWeight","BriefStepsContent","BriefWatchlistsSubheader","onTabChange","BriefUserWatchlists","userWatchlists","isLoadingUserWatchlists"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA2FSA;;;eAAAA;;;;+DA3FgC;4BACjB;2BACG;2BACM;qCACA;sBACb;uBAES;mCAEK;qCACE;0CACK;2BACe;uCAClB;oCACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEnC,SAASA;IACP,MAAM,EAAEC,IAAI,EAAE,GAAGC,IAAAA,mBAAO;IACxB,MAAM,EAAEC,QAAQ,EAAE,GAAGC,IAAAA,qBAAU;IAC/B,MAAMC,SAASJ,iBAAAA,2BAAAA,KAAMK,EAAE;IACvB,MAAM,CAACC,WAAWC,aAAa,GAAGC,IAAAA,eAAQ,EAAgBC,gCAAqB;IAE/E,MAAM,EAAEC,UAAU,EAAEC,aAAa,EAAEC,WAAW,EAAE,GAAGC,IAAAA,sCAAkB;IAErE,MAAM,EAAEC,WAAWC,sBAAsB,EAAEC,MAAMC,gBAAgBC,2BAAgB,EAAE,GACjFC,IAAAA,2BAAgB;IAElB,MAAM,EAAEC,kBAAkB,EAAE,GAAGC,IAAAA,4CAAqB,EAAC;QACnDJ;QACAX;QACAF;QACAQ;IACF;IAEA,2DAA2D;IAC3D,MAAMU,uBAAuBC,IAAAA,cAAO,EAAC;QACnC,IAAIX,aAAa;YACf,OAAOQ,mBAAmBI,MAAM,CAACC,CAAAA,OAC/BA,KAAKC,IAAI,CAACC,WAAW,GAAGC,QAAQ,CAAClB,WAAWiB,WAAW,KACvDE,MAAM;QACV;QACA,OAAOT,mBAAmBS,MAAM;IAClC,GAAG;QAACT;QAAoBV;QAAYE;KAAY;IAEhD,MAAMkB,mBAAmBf;IACzB,MAAMgB,eAAeT,yBAAyB,KAAK,CAACP;IAEpD,qBACE;;0BACE,qBAACiB,qCAAgB;0BACf,cAAA,qBAACC,gBAAU;8BAAC;;;0BAEd,qBAACC,SAAG;gBAACC,IAAI;oBAAEC,iBAAiB;oBAAYC,GAAG;oBAAKC,cAAc;oBAAGC,WAAW;gBAAI;0BAC9E,cAAA,sBAACN,gBAAU;oBAACO,UAAS;oBAAOC,OAAM;;sCAChC,qBAACC,mBAAY;4BACXC,OAAO;gCACLC,cAAc;gCACdC,aAAa;gCACbJ,OAAO;gCACPK,OAAO;gCACPC,QAAQ;4BACV;;wBACA;wBACmC;sCACrC,qBAACC;4BAAKL,OAAO;gCAAEM,YAAY;4BAAI;sCAAG;;wBAAyB;wBAAQ;sCACnE,qBAACD;4BAAKL,OAAO;gCAAEM,YAAY;4BAAI;sCAAG;;wBAAU;;;;0BAGhD,sBAACC,oCAAiB;;kCAChB,qBAACC,kDAAwB;wBACvBrB,kBAAkBA;wBAClBxB,WAAWM,cAAc,OAAON;wBAChC8C,aAAa7C;wBACbL,UAAUA;wBACVQ,YAAYA;wBACZC,eAAeA;wBACfW,sBAAsBA;wBACtBV,aAAaA;wBACbmB,cAAcA;;kCAGhB,qBAACsB,wCAAmB;wBAClBC,gBAAgBlC;wBAChBmC,yBAAyBxC;wBACzBT,WAAWA;;;;;;AAKrB"}