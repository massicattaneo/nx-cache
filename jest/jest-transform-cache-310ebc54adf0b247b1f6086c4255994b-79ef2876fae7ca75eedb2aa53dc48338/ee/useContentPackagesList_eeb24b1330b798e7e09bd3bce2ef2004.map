{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/common/source-selector/src/hooks/useContentPackagesList.ts"],"sourcesContent":["import { useEffect, useMemo } from \"react\"\nimport { useFlags } from \"launchdarkly-react-client-sdk\"\nimport { ContentPackage, useInfiniteContentPackages } from \"@rp/react/tanstack-api/content\"\nimport { useSnackbar } from \"@rp/react/web/common/providers\"\nimport { getAllContentPackagesFromResponsePages } from \"../utils/getAllContentPackagesFromResponsePages\"\n\ntype UseContentPackagesListState = {\n  isLoadingContentPackages: boolean\n  allContentPackages: Array<ContentPackage>\n  isFetchingNextPage: boolean\n  hasNextPage: boolean\n  fetchNextPage: () => void\n  hasError: boolean\n}\n\nfunction useContentPackagesList(): UseContentPackagesListState {\n  const { data, isLoading, isFetchingNextPage, hasNextPage, fetchNextPage, isError } =\n    useInfiniteContentPackages()\n  const { enqueueError } = useSnackbar()\n\n  const { enableContentPackagesFullCatalog } = useFlags<{\n    enableContentPackagesFullCatalog: boolean\n  }>()\n\n  useEffect(() => {\n    if (isError) {\n      enqueueError(\"There was an error while loading packages\")\n    }\n  }, [enqueueError, isError])\n\n  const allContentPackages: Array<ContentPackage> = useMemo(\n    () =>\n      getAllContentPackagesFromResponsePages({\n        pages: data?.pages,\n        isPermittedFullCatalog: enableContentPackagesFullCatalog,\n      }),\n    [data?.pages, enableContentPackagesFullCatalog],\n  )\n\n  return {\n    isLoadingContentPackages: isLoading,\n    allContentPackages,\n    isFetchingNextPage,\n    hasNextPage,\n    fetchNextPage,\n    hasError: isError,\n  }\n}\n\nexport { useContentPackagesList }\nexport type { UseContentPackagesListState }\n"],"names":["useContentPackagesList","data","isLoading","isFetchingNextPage","hasNextPage","fetchNextPage","isError","useInfiniteContentPackages","enqueueError","useSnackbar","enableContentPackagesFullCatalog","useFlags","useEffect","allContentPackages","useMemo","getAllContentPackagesFromResponsePages","pages","isPermittedFullCatalog","isLoadingContentPackages","hasError"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAiDSA;;;eAAAA;;;uBAjD0B;4CACV;yBACkC;2BAC/B;wDAC2B;AAWvD,SAASA;IACP,MAAM,EAAEC,IAAI,EAAEC,SAAS,EAAEC,kBAAkB,EAAEC,WAAW,EAAEC,aAAa,EAAEC,OAAO,EAAE,GAChFC,IAAAA,mCAA0B;IAC5B,MAAM,EAAEC,YAAY,EAAE,GAAGC,IAAAA,sBAAW;IAEpC,MAAM,EAAEC,gCAAgC,EAAE,GAAGC,IAAAA,oCAAQ;IAIrDC,IAAAA,gBAAS,EAAC;QACR,IAAIN,SAAS;YACXE,aAAa;QACf;IACF,GAAG;QAACA;QAAcF;KAAQ;IAE1B,MAAMO,qBAA4CC,IAAAA,cAAO,EACvD,IACEC,IAAAA,8EAAsC,EAAC;YACrCC,KAAK,EAAEf,iBAAAA,2BAAAA,KAAMe,KAAK;YAClBC,wBAAwBP;QAC1B,IACF;QAACT,iBAAAA,2BAAAA,KAAMe,KAAK;QAAEN;KAAiC;IAGjD,OAAO;QACLQ,0BAA0BhB;QAC1BW;QACAV;QACAC;QACAC;QACAc,UAAUb;IACZ;AACF"}