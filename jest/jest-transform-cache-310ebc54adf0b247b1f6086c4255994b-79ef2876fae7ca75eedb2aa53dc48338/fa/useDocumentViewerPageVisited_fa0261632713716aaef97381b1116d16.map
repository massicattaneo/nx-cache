{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/document-viewer/src/lib/DocumentViewerPage/hooks/useDocumentViewerPageVisited.ts"],"sourcesContent":["import { useEffect } from \"react\"\nimport { useAtom } from \"jotai\"\nimport { useUser } from \"@clerk/clerk-react\"\nimport { VisitedDocument, visitedDocumentAtom } from \"@rp/react/web/common/hooks\"\n\ntype UseDocumentViewerPageVisitedProps = {\n  documentId: string\n}\n\nconst useDocumentViewerPageVisited = ({ documentId }: UseDocumentViewerPageVisitedProps): void => {\n  const { user } = useUser()\n  const [_, setVisitedDocuments] = useAtom(visitedDocumentAtom)\n\n  useEffect(() => {\n    const visitedDoc: VisitedDocument | null | undefined = user?.primaryEmailAddress && {\n      [documentId]: { timestamp: Date.now(), userId: user.primaryEmailAddress.emailAddress },\n    }\n\n    if (visitedDoc) {\n      setVisitedDocuments(docs => ({ ...docs, ...visitedDoc }))\n    }\n  }, [setVisitedDocuments, documentId, user?.primaryEmailAddress])\n}\n\nexport { useDocumentViewerPageVisited }\n"],"names":["useDocumentViewerPageVisited","documentId","user","useUser","_","setVisitedDocuments","useAtom","visitedDocumentAtom","useEffect","visitedDoc","primaryEmailAddress","timestamp","Date","now","userId","emailAddress","docs"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAwBSA;;;eAAAA;;;uBAxBiB;uBACF;4BACA;uBAC6B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMrD,MAAMA,+BAA+B,CAAC,EAAEC,UAAU,EAAqC;IACrF,MAAM,EAAEC,IAAI,EAAE,GAAGC,IAAAA,mBAAO;IACxB,MAAM,CAACC,GAAGC,oBAAoB,GAAGC,IAAAA,cAAO,EAACC,0BAAmB;IAE5DC,IAAAA,gBAAS,EAAC;QACR,MAAMC,aAAiDP,CAAAA,iBAAAA,2BAAAA,KAAMQ,mBAAmB,KAAI;YAClF,CAACT,WAAW,EAAE;gBAAEU,WAAWC,KAAKC,GAAG;gBAAIC,QAAQZ,KAAKQ,mBAAmB,CAACK,YAAY;YAAC;QACvF;QAEA,IAAIN,YAAY;YACdJ,oBAAoBW,CAAAA,OAAS,mBAAKA,MAASP;QAC7C;IACF,GAAG;QAACJ;QAAqBJ;QAAYC,iBAAAA,2BAAAA,KAAMQ,mBAAmB;KAAC;AACjE"}