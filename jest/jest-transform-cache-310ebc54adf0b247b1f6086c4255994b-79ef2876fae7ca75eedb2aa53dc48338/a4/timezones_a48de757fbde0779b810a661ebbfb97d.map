{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/web/utils/src/lib/timezones.ts"],"sourcesContent":["import { intervalToDuration } from \"date-fns\"\nimport { USER_TIMEZONE } from \"@rp/common/utils\"\nimport { timezonesRawList } from \"./timezonesRawList\"\n\ntype Timezone = { id: string; label: string; abbreviation: string; value: string; offset: number }\n\nconst getOffset = (timeZone = \"UTC\", date = new Date()) => {\n  const utcDate = new Date(date.toLocaleString(\"en-US\", { timeZone: \"UTC\" }))\n  const tzDate = new Date(date.toLocaleString(\"en-US\", { timeZone }))\n  return tzDate.getTime() - utcDate.getTime()\n}\n\nconst timezoneToLabel = (timezone: Timezone) => {\n  if (timezone.offset === 0) return `(${timezone.abbreviation})`\n  const duration = intervalToDuration({ start: 0, end: timezone.offset })\n  const hours = duration.hours?.toString()\n  const minutes = duration.minutes?.toString().padStart(2, \"0\")\n  return timezone.offset >= 0 ? `(UTC+${hours}:${minutes})` : `(UTC-${hours}:${minutes})`\n}\n\nconst LIST: Array<Timezone> = timezonesRawList.map((tz, index) => {\n  const offset = getOffset(tz.value)\n  return {\n    ...tz,\n    id: index.toString(),\n    offset,\n  }\n})\n\nconst HUMAN_READABLE_OFFSET_USER_TIMEZONE: Timezone = {\n  ...USER_TIMEZONE,\n  offset: USER_TIMEZONE.offset * -1,\n}\n\nconst TIMEZONES = [HUMAN_READABLE_OFFSET_USER_TIMEZONE]\n  .concat(LIST.filter(tz => tz.value !== USER_TIMEZONE.value))\n  .sort((first, second) => {\n    if (first.offset === second.offset) {\n      return first.label.localeCompare(second.label)\n    }\n    return first.offset - second.offset\n  })\n\nexport { TIMEZONES, timezoneToLabel }\nexport type { Timezone }\n"],"names":["TIMEZONES","timezoneToLabel","getOffset","timeZone","date","Date","utcDate","toLocaleString","tzDate","getTime","timezone","duration","offset","abbreviation","intervalToDuration","start","end","hours","toString","minutes","padStart","LIST","timezonesRawList","map","tz","index","value","id","HUMAN_READABLE_OFFSET_USER_TIMEZONE","USER_TIMEZONE","concat","filter","sort","first","second","label","localeCompare"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;IA2CSA,SAAS;eAATA;;IAAWC,eAAe;eAAfA;;;yBA3Ce;uBACL;kCACG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIjC,MAAMC,YAAY,CAACC,WAAW,KAAK,EAAEC,OAAO,IAAIC,MAAM;IACpD,MAAMC,UAAU,IAAID,KAAKD,KAAKG,cAAc,CAAC,SAAS;QAAEJ,UAAU;IAAM;IACxE,MAAMK,SAAS,IAAIH,KAAKD,KAAKG,cAAc,CAAC,SAAS;QAAEJ;IAAS;IAChE,OAAOK,OAAOC,OAAO,KAAKH,QAAQG,OAAO;AAC3C;AAEA,MAAMR,kBAAkB,CAACS;QAGTC,iBACEA;IAHhB,IAAID,SAASE,MAAM,KAAK,GAAG,OAAO,CAAC,CAAC,EAAEF,SAASG,YAAY,CAAC,CAAC,CAAC;IAC9D,MAAMF,WAAWG,IAAAA,2BAAkB,EAAC;QAAEC,OAAO;QAAGC,KAAKN,SAASE,MAAM;IAAC;IACrE,MAAMK,SAAQN,kBAAAA,SAASM,KAAK,cAAdN,sCAAAA,gBAAgBO,QAAQ;IACtC,MAAMC,WAAUR,oBAAAA,SAASQ,OAAO,cAAhBR,wCAAAA,kBAAkBO,QAAQ,GAAGE,QAAQ,CAAC,GAAG;IACzD,OAAOV,SAASE,MAAM,IAAI,IAAI,CAAC,KAAK,EAAEK,MAAM,CAAC,EAAEE,QAAQ,CAAC,CAAC,GAAG,CAAC,KAAK,EAAEF,MAAM,CAAC,EAAEE,QAAQ,CAAC,CAAC;AACzF;AAEA,MAAME,OAAwBC,kCAAgB,CAACC,GAAG,CAAC,CAACC,IAAIC;IACtD,MAAMb,SAASV,UAAUsB,GAAGE,KAAK;IACjC,OAAO,wCACFF;QACHG,IAAIF,MAAMP,QAAQ;QAClBN;;AAEJ;AAEA,MAAMgB,sCAAgD,wCACjDC,oBAAa;IAChBjB,QAAQiB,oBAAa,CAACjB,MAAM,GAAG,CAAC;;AAGlC,MAAMZ,YAAY;IAAC4B;CAAoC,CACpDE,MAAM,CAACT,KAAKU,MAAM,CAACP,CAAAA,KAAMA,GAAGE,KAAK,KAAKG,oBAAa,CAACH,KAAK,GACzDM,IAAI,CAAC,CAACC,OAAOC;IACZ,IAAID,MAAMrB,MAAM,KAAKsB,OAAOtB,MAAM,EAAE;QAClC,OAAOqB,MAAME,KAAK,CAACC,aAAa,CAACF,OAAOC,KAAK;IAC/C;IACA,OAAOF,MAAMrB,MAAM,GAAGsB,OAAOtB,MAAM;AACrC"}