{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/chat/src/lib/Chat/ChatInput/ChatInputFilters/ChatInputFilters.tsx"],"sourcesContent":["import { Dispatch, useCallback } from \"react\"\nimport { SetStateAction } from \"jotai\"\nimport { DatasetScope } from \"@rp/common/api-types\"\nimport { FileRowType } from \"@rp/common/utils\"\nimport { ScrollCarousel } from \"@rp/react/web/common/composite-components\"\nimport { useDeviceInfo } from \"@rp/react/web/common/hooks\"\nimport { Box, IconButton, useTheme } from \"@rp/react/web/mui/core\"\nimport { Close } from \"@rp/react/web/mui/icons\"\nimport { ChatFilesChip } from \"./ChatFilesChip\"\nimport { ChatWatchlistChip } from \"./ChatWatchlistChip\"\nimport { ScopeChip } from \"./ScopeChip\"\n\ntype Props = {\n  className?: string\n  // Scope\n  scope?: DatasetScope\n  setScope: (scope: DatasetScope | undefined) => void\n  removeFiles: (ids: Array<string>) => void\n  setWatchlistId: Dispatch<SetStateAction<string | undefined>>\n  openScopeModal: () => void\n  // Watchlist\n  watchlistId?: string\n  openWatchlistModal: () => void\n  // Files\n  onFileClick: (file: FileRowType) => void\n  filesIds: Array<string>\n  openFilesModal: () => void\n  onRemovePills: () => void\n  isHomePageChat?: boolean\n}\nconst ChatInputFilters = ({\n  className,\n  scope,\n  setScope,\n  watchlistId,\n  setWatchlistId,\n  onFileClick,\n  removeFiles,\n  filesIds,\n  openWatchlistModal,\n  openFilesModal,\n  openScopeModal,\n  onRemovePills,\n  isHomePageChat = false,\n}: Props) => {\n  const clearAll = useCallback(() => {\n    setScope(undefined)\n    setWatchlistId(undefined)\n    removeFiles(filesIds)\n    onRemovePills()\n  }, [filesIds, onRemovePills, removeFiles, setScope, setWatchlistId])\n\n  const { isMobile } = useDeviceInfo()\n  const theme = useTheme()\n\n  return (\n    <Box\n      sx={{\n        width: isHomePageChat ? \"100%\" : null,\n        ml: isHomePageChat ? 1.5 : 0,\n        backgroundColor: \"overlay.surface\",\n        height: 52,\n        px: 1,\n        display: \"flex\",\n        alignItems: \"center\",\n        border: \"2px solid\",\n        borderColor: \"transparent\",\n        borderTopLeftRadius: 8,\n        borderTopRightRadius: 8,\n        borderBottom: 1,\n        borderBottomColor: \"rgba(255, 255, 255, 0.3)\",\n        transition: \"border-color 0.2s\",\n        \"& .swiper-arrow-wrapper, & .swiper-arrow-wrapper:after, & .swiper-arrow-wrapper:before\": {\n          height: 32,\n        },\n        \"& .swiper-arrow-wrapper svg\": { height: 32 },\n        \"& .swiper .swiper-slide:nth-of-type(1)\": {\n          marginLeft: 0,\n        },\n      }}\n      className={className}\n    >\n      <Box sx={{ position: \"relative\", flexGrow: 1, overflow: \"hidden\", pr: isMobile ? 0 : 1 }}>\n        <ScrollCarousel\n          bgColor={theme.palette.elevation.dp03}\n          sx={{\n            \"& > div\": {\n              paddingRight: isMobile ? 4 : 0,\n              gap: 1,\n            },\n          }}\n        >\n          {scope ? (\n            <ScopeChip\n              scope={scope}\n              onRemove={() => {\n                onRemovePills()\n                setScope(undefined)\n              }}\n              onClick={openScopeModal}\n            />\n          ) : null}\n          {watchlistId ? (\n            <ChatWatchlistChip\n              watchlistId={watchlistId}\n              onRemove={() => {\n                onRemovePills()\n                setWatchlistId(undefined)\n              }}\n              openWatchlistModal={openWatchlistModal}\n            />\n          ) : null}\n          {filesIds.length ? (\n            <ChatFilesChip\n              filesIds={filesIds}\n              removeFiles={ids => {\n                onRemovePills()\n                removeFiles(ids)\n              }}\n              onFileClick={onFileClick}\n              openFilesModal={openFilesModal}\n            />\n          ) : null}\n        </ScrollCarousel>\n      </Box>\n      <IconButton\n        onClick={clearAll}\n        sx={\n          isMobile\n            ? {\n                position: \"absolute\",\n                right: 0,\n                width: \"40px\",\n                zIndex: 1,\n              }\n            : {}\n        }\n      >\n        <Close sx={{ fontSize: isMobile ? 20 : 16, color: \"text.secondary\" }} />\n      </IconButton>\n    </Box>\n  )\n}\nexport { ChatInputFilters }\n"],"names":["ChatInputFilters","className","scope","setScope","watchlistId","setWatchlistId","onFileClick","removeFiles","filesIds","openWatchlistModal","openFilesModal","openScopeModal","onRemovePills","isHomePageChat","clearAll","useCallback","undefined","isMobile","useDeviceInfo","theme","useTheme","Box","sx","width","ml","backgroundColor","height","px","display","alignItems","border","borderColor","borderTopLeftRadius","borderTopRightRadius","borderBottom","borderBottomColor","transition","marginLeft","position","flexGrow","overflow","pr","ScrollCarousel","bgColor","palette","elevation","dp03","paddingRight","gap","ScopeChip","onRemove","onClick","ChatWatchlistChip","length","ChatFilesChip","ids","IconButton","right","zIndex","Close","fontSize","color"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA+ISA;;;eAAAA;;;;uBA/I6B;qCAIP;uBACD;sBACY;uBACpB;+BACQ;mCACI;2BACR;AAoB1B,MAAMA,mBAAmB,CAAC,EACxBC,SAAS,EACTC,KAAK,EACLC,QAAQ,EACRC,WAAW,EACXC,cAAc,EACdC,WAAW,EACXC,WAAW,EACXC,QAAQ,EACRC,kBAAkB,EAClBC,cAAc,EACdC,cAAc,EACdC,aAAa,EACbC,iBAAiB,KAAK,EAChB;IACN,MAAMC,WAAWC,IAAAA,kBAAW,EAAC;QAC3BZ,SAASa;QACTX,eAAeW;QACfT,YAAYC;QACZI;IACF,GAAG;QAACJ;QAAUI;QAAeL;QAAaJ;QAAUE;KAAe;IAEnE,MAAM,EAAEY,QAAQ,EAAE,GAAGC,IAAAA,oBAAa;IAClC,MAAMC,QAAQC,IAAAA,cAAQ;IAEtB,qBACE,sBAACC,SAAG;QACFC,IAAI;YACFC,OAAOV,iBAAiB,SAAS;YACjCW,IAAIX,iBAAiB,MAAM;YAC3BY,iBAAiB;YACjBC,QAAQ;YACRC,IAAI;YACJC,SAAS;YACTC,YAAY;YACZC,QAAQ;YACRC,aAAa;YACbC,qBAAqB;YACrBC,sBAAsB;YACtBC,cAAc;YACdC,mBAAmB;YACnBC,YAAY;YACZ,0FAA0F;gBACxFV,QAAQ;YACV;YACA,+BAA+B;gBAAEA,QAAQ;YAAG;YAC5C,0CAA0C;gBACxCW,YAAY;YACd;QACF;QACApC,WAAWA;;0BAEX,qBAACoB,SAAG;gBAACC,IAAI;oBAAEgB,UAAU;oBAAYC,UAAU;oBAAGC,UAAU;oBAAUC,IAAIxB,WAAW,IAAI;gBAAE;0BACrF,cAAA,sBAACyB,mCAAc;oBACbC,SAASxB,MAAMyB,OAAO,CAACC,SAAS,CAACC,IAAI;oBACrCxB,IAAI;wBACF,WAAW;4BACTyB,cAAc9B,WAAW,IAAI;4BAC7B+B,KAAK;wBACP;oBACF;;wBAEC9C,sBACC,qBAAC+C,oBAAS;4BACR/C,OAAOA;4BACPgD,UAAU;gCACRtC;gCACAT,SAASa;4BACX;4BACAmC,SAASxC;6BAET;wBACHP,4BACC,qBAACgD,oCAAiB;4BAChBhD,aAAaA;4BACb8C,UAAU;gCACRtC;gCACAP,eAAeW;4BACjB;4BACAP,oBAAoBA;6BAEpB;wBACHD,SAAS6C,MAAM,iBACd,qBAACC,4BAAa;4BACZ9C,UAAUA;4BACVD,aAAagD,CAAAA;gCACX3C;gCACAL,YAAYgD;4BACd;4BACAjD,aAAaA;4BACbI,gBAAgBA;6BAEhB;;;;0BAGR,qBAAC8C,gBAAU;gBACTL,SAASrC;gBACTQ,IACEL,WACI;oBACEqB,UAAU;oBACVmB,OAAO;oBACPlC,OAAO;oBACPmC,QAAQ;gBACV,IACA,CAAC;0BAGP,cAAA,qBAACC,YAAK;oBAACrC,IAAI;wBAAEsC,UAAU3C,WAAW,KAAK;wBAAI4C,OAAO;oBAAiB;;;;;AAI3E"}