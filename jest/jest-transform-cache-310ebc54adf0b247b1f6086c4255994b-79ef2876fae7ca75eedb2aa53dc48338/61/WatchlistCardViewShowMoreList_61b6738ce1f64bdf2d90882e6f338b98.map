{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/watchlists/src/WatchlistCardViewShowMoreList.tsx"],"sourcesContent":["import { Fragment, ReactElement, useEffect, useState } from \"react\"\nimport { Watchlist } from \"@rp/common/api-types\"\nimport { AutoAnimateHeight } from \"@rp/react/web/common/composite-components\"\nimport { useItemsPerLine } from \"@rp/react/web/common/hooks\"\nimport { Box, Typography } from \"@rp/react/web/mui/core\"\nimport { WatchlistCard } from \"./WatchlistCard/WatchlistCard\"\nimport { WATCHLIST_CARD_HEIGHT, WATCHLIST_CARD_WIDTH } from \"./WatchlistCard/WatchlistCardContainer\"\n\ntype Props = {\n  data: Array<Watchlist> | undefined\n  lastElement?: ReactElement\n  initialLines?: number\n  containerEl: HTMLDivElement | null\n  onCardClick: (watchlist: Watchlist) => void\n}\n\nexport const WatchlistCardViewShowMoreList = ({\n  data,\n  lastElement,\n  initialLines = 1,\n  containerEl,\n  onCardClick,\n}: Props) => {\n  const itemsPerLines = useItemsPerLine({\n    containerEl,\n    width: WATCHLIST_CARD_WIDTH,\n    gap: 16,\n  })\n  const defData: Array<undefined> = new Array(itemsPerLines * initialLines).fill(undefined)\n  const displayData = data ?? defData\n  const [showItems, setShowItems] = useState(itemsPerLines * initialLines)\n\n  useEffect(() => {\n    setShowItems(itemsPerLines * initialLines)\n  }, [initialLines, itemsPerLines])\n\n  const shouldShowLastElement =\n    lastElement && displayData.length + (lastElement ? 1 : 0) > showItems\n  const shouldShowMoreButton = displayData.length > showItems\n\n  return (\n    <Box sx={{ mb: 10, display: \"flex\", alignItems: \"center\", flexDirection: \"column\" }}>\n      <AutoAnimateHeight\n        minHeight={WATCHLIST_CARD_HEIGHT * initialLines}\n        sx={{\n          \"& > div\": {\n            display: \"flex\",\n            gap: 2,\n            maxWidth: \"100%\",\n            flexWrap: \"wrap\",\n            justifyContent: \"center\",\n          },\n        }}\n      >\n        {displayData.slice(0, showItems).map((watchlist, index, arr) => {\n          if (shouldShowLastElement && index === arr.length - 1) {\n            return <Fragment key={\"new-watchlist\"}>{lastElement}</Fragment>\n          }\n          return (\n            <WatchlistCard\n              showPerformance\n              key={watchlist?.id ?? index}\n              watchlist={watchlist}\n              onClick={() => watchlist && onCardClick(watchlist)}\n            />\n          )\n        })}\n        {!shouldShowLastElement && lastElement}\n      </AutoAnimateHeight>\n      {shouldShowMoreButton && (\n        <Typography\n          onClick={() => setShowItems(prev => prev + itemsPerLines)}\n          sx={{\n            color: \"text.secondary\",\n            mt: 2,\n            cursor: \"pointer\",\n            \"&:hover\": { textDecoration: \"underline\" },\n          }}\n        >\n          Show more\n        </Typography>\n      )}\n    </Box>\n  )\n}\n"],"names":["WatchlistCardViewShowMoreList","data","lastElement","initialLines","containerEl","onCardClick","itemsPerLines","useItemsPerLine","width","WATCHLIST_CARD_WIDTH","gap","defData","Array","fill","undefined","displayData","showItems","setShowItems","useState","useEffect","shouldShowLastElement","length","shouldShowMoreButton","Box","sx","mb","display","alignItems","flexDirection","AutoAnimateHeight","minHeight","WATCHLIST_CARD_HEIGHT","maxWidth","flexWrap","justifyContent","slice","map","watchlist","index","arr","Fragment","WatchlistCard","showPerformance","onClick","id","Typography","prev","color","mt","cursor","textDecoration"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAgBaA;;;eAAAA;;;;uBAhB+C;qCAE1B;uBACF;sBACA;+BACF;wCAC8B;AAUrD,MAAMA,gCAAgC,CAAC,EAC5CC,IAAI,EACJC,WAAW,EACXC,eAAe,CAAC,EAChBC,WAAW,EACXC,WAAW,EACL;IACN,MAAMC,gBAAgBC,IAAAA,sBAAe,EAAC;QACpCH;QACAI,OAAOC,4CAAoB;QAC3BC,KAAK;IACP;IACA,MAAMC,UAA4B,IAAIC,MAAMN,gBAAgBH,cAAcU,IAAI,CAACC;IAC/E,MAAMC,cAAcd,iBAAAA,kBAAAA,OAAQU;IAC5B,MAAM,CAACK,WAAWC,aAAa,GAAGC,IAAAA,eAAQ,EAACZ,gBAAgBH;IAE3DgB,IAAAA,gBAAS,EAAC;QACRF,aAAaX,gBAAgBH;IAC/B,GAAG;QAACA;QAAcG;KAAc;IAEhC,MAAMc,wBACJlB,eAAea,YAAYM,MAAM,GAAInB,CAAAA,cAAc,IAAI,CAAA,IAAKc;IAC9D,MAAMM,uBAAuBP,YAAYM,MAAM,GAAGL;IAElD,qBACE,sBAACO,SAAG;QAACC,IAAI;YAAEC,IAAI;YAAIC,SAAS;YAAQC,YAAY;YAAUC,eAAe;QAAS;;0BAChF,sBAACC,sCAAiB;gBAChBC,WAAWC,6CAAqB,GAAG5B;gBACnCqB,IAAI;oBACF,WAAW;wBACTE,SAAS;wBACThB,KAAK;wBACLsB,UAAU;wBACVC,UAAU;wBACVC,gBAAgB;oBAClB;gBACF;;oBAECnB,YAAYoB,KAAK,CAAC,GAAGnB,WAAWoB,GAAG,CAAC,CAACC,WAAWC,OAAOC;wBACtD,IAAInB,yBAAyBkB,UAAUC,IAAIlB,MAAM,GAAG,GAAG;4BACrD,qBAAO,qBAACmB,eAAQ;0CAAwBtC;+BAAlB;wBACxB;4BAISmC;wBAHT,qBACE,qBAACI,4BAAa;4BACZC,eAAe;4BAEfL,WAAWA;4BACXM,SAAS,IAAMN,aAAahC,YAAYgC;2BAFnCA,CAAAA,gBAAAA,sBAAAA,gCAAAA,UAAWO,EAAE,cAAbP,2BAAAA,gBAAiBC;oBAK5B;oBACC,CAAClB,yBAAyBlB;;;YAE5BoB,sCACC,qBAACuB,gBAAU;gBACTF,SAAS,IAAM1B,aAAa6B,CAAAA,OAAQA,OAAOxC;gBAC3CkB,IAAI;oBACFuB,OAAO;oBACPC,IAAI;oBACJC,QAAQ;oBACR,WAAW;wBAAEC,gBAAgB;oBAAY;gBAC3C;0BACD;;;;AAMT"}