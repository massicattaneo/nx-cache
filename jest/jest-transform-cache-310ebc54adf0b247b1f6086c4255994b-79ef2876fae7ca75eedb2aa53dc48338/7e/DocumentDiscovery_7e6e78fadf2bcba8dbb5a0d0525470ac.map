{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/discovery-sidebar/document-discovery/src/lib/DocumentDiscovery.tsx"],"sourcesContent":["import { CqsItem } from \"@rp/common/api-types\"\nimport { Watchlist } from \"@rp/common/api-types\"\nimport { RpqlFilter } from \"@rp/common/api-types\"\nimport { Appearance } from \"@rp/react/rpjson/types\"\nimport { RpJsonDocument } from \"@rp/react/rpjson/types\"\nimport { AutoAnimateHeight } from \"@rp/react/web/common/composite-components\"\nimport {\n  LoadingFilter,\n  PanelWrapper,\n  useDocumentDiscoveryWidgetCategories,\n} from \"@rp/react/web/common/discovery-sidebar\"\nimport { useDocumentViewerData } from \"@rp/react/web/common/providers\"\nimport { Box } from \"@rp/react/web/mui/core\"\nimport { DocumentDiscoveryWidget } from \"./DocumentDiscoveryWidget\"\n\ntype DocumentDiscoveryProps = {\n  isLoading: boolean\n  rpjsonDocument: RpJsonDocument | undefined\n  disableCheckbox?: boolean\n  disableWatchlist?: boolean\n  expression?: RpqlFilter\n  onChange?: (item: CqsItem) => void\n  onExclude?: (item: CqsItem) => void\n  selectedDetection?: { pnum: number; snum: number }\n  onDetectionClick: (detection: Appearance) => void\n  onAddToWatchlist?: (watchlist: Watchlist) => void\n}\n\nfunction DocumentDiscovery({\n  isLoading,\n  rpjsonDocument,\n  disableCheckbox,\n  disableWatchlist,\n  expression,\n  onChange,\n  onExclude,\n  selectedDetection,\n  onDetectionClick,\n  onAddToWatchlist,\n}: DocumentDiscoveryProps) {\n  const { documentData } = useDocumentViewerData()\n\n  const {\n    widgetActions,\n    categories,\n    labels,\n    isLoading: isDocDiscLoading,\n  } = useDocumentDiscoveryWidgetCategories(\n    rpjsonDocument,\n    expression || documentData.query?.expression,\n  )\n\n  const loading = isLoading || isDocDiscLoading\n  const groups = loading ? labels : Object.keys(categories)\n\n  return (\n    <PanelWrapper>\n      {groups.map(type => {\n        return (\n          <AutoAnimateHeight duration={isLoading ? 0 : 0.3} key={type} margin={16}>\n            <Box\n              data-testid={`dd-section-${type}`}\n              sx={{\n                \"& legend\": {\n                  opacity: 0,\n                  transition: \"opacity 0.2s ease-in-out\",\n                },\n                \"&:hover\": {\n                  \"& legend\": {\n                    opacity: 1,\n                  },\n                },\n              }}\n            >\n              {loading ? (\n                <LoadingFilter />\n              ) : (\n                <DocumentDiscoveryWidget\n                  isLoading={isLoading}\n                  rpjsonDocument={rpjsonDocument}\n                  disableCheckbox={disableCheckbox}\n                  disableWatchlist={disableWatchlist}\n                  onChange={onChange}\n                  selectedDetection={selectedDetection}\n                  onDetectionClick={onDetectionClick}\n                  widgetActions={widgetActions}\n                  widgetCategory={categories[type]}\n                  onAddToWatchlist={onAddToWatchlist}\n                  onExclude={onExclude}\n                />\n              )}\n            </Box>\n          </AutoAnimateHeight>\n        )\n      })}\n    </PanelWrapper>\n  )\n}\n\nexport { DocumentDiscovery }\n"],"names":["DocumentDiscovery","isLoading","rpjsonDocument","disableCheckbox","disableWatchlist","expression","onChange","onExclude","selectedDetection","onDetectionClick","onAddToWatchlist","documentData","useDocumentViewerData","widgetActions","categories","labels","isDocDiscLoading","useDocumentDiscoveryWidgetCategories","query","loading","groups","Object","keys","PanelWrapper","map","type","AutoAnimateHeight","duration","margin","Box","data-testid","sx","opacity","transition","LoadingFilter","DocumentDiscoveryWidget","widgetCategory"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAmGSA;;;eAAAA;;;;qCA9FyB;kCAK3B;2BAC+B;sBAClB;yCACoB;AAexC,SAASA,kBAAkB,EACzBC,SAAS,EACTC,cAAc,EACdC,eAAe,EACfC,gBAAgB,EAChBC,UAAU,EACVC,QAAQ,EACRC,SAAS,EACTC,iBAAiB,EACjBC,gBAAgB,EAChBC,gBAAgB,EACO;QAUPC;IAThB,MAAM,EAAEA,YAAY,EAAE,GAAGC,IAAAA,gCAAqB;IAE9C,MAAM,EACJC,aAAa,EACbC,UAAU,EACVC,MAAM,EACNd,WAAWe,gBAAgB,EAC5B,GAAGC,IAAAA,sDAAoC,EACtCf,gBACAG,gBAAcM,sBAAAA,aAAaO,KAAK,cAAlBP,0CAAAA,oBAAoBN,UAAU;IAG9C,MAAMc,UAAUlB,aAAae;IAC7B,MAAMI,SAASD,UAAUJ,SAASM,OAAOC,IAAI,CAACR;IAE9C,qBACE,qBAACS,8BAAY;kBACVH,OAAOI,GAAG,CAACC,CAAAA;YACV,qBACE,qBAACC,sCAAiB;gBAACC,UAAU1B,YAAY,IAAI;gBAAgB2B,QAAQ;0BACnE,cAAA,qBAACC,SAAG;oBACFC,eAAa,CAAC,WAAW,EAAEL,KAAK,CAAC;oBACjCM,IAAI;wBACF,YAAY;4BACVC,SAAS;4BACTC,YAAY;wBACd;wBACA,WAAW;4BACT,YAAY;gCACVD,SAAS;4BACX;wBACF;oBACF;8BAECb,wBACC,qBAACe,+BAAa,sBAEd,qBAACC,gDAAuB;wBACtBlC,WAAWA;wBACXC,gBAAgBA;wBAChBC,iBAAiBA;wBACjBC,kBAAkBA;wBAClBE,UAAUA;wBACVE,mBAAmBA;wBACnBC,kBAAkBA;wBAClBI,eAAeA;wBACfuB,gBAAgBtB,UAAU,CAACW,KAAK;wBAChCf,kBAAkBA;wBAClBH,WAAWA;;;eA7BoCkB;QAmC3D;;AAGN"}