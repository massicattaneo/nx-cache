{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/brief/src/components/BriefReport/BriefReportSection/BriefReportSection.tsx"],"sourcesContent":["import React, { useCallback } from \"react\"\nimport ReactMarkdown from \"react-markdown\"\nimport remarkGfm from \"remark-gfm\"\nimport { BriefReportCompanyReport, BriefSources } from \"@rp/react/tanstack-api/brief\"\nimport { Box, Typography } from \"@rp/react/web/mui/core\"\nimport { ChatBubbleOutline } from \"@rp/react/web/mui/icons\"\nimport { briefsInlineAttributionRenderer } from \"./BriefsInlineAttribution\"\n\ntype BriefReportSectionProps = {\n  title: string\n  body: string\n  sources: BriefSources\n  onAddPrompt: (text: string, entityInfo?: BriefReportCompanyReport[\"entityInfo\"]) => void\n  entityInfo?: BriefReportCompanyReport[\"entityInfo\"]\n}\n\nconst CONTENT_CLASS_NAME = \"li-content\"\n\nconst BriefReportSection = ({\n  title,\n  body,\n  sources,\n  entityInfo,\n  onAddPrompt,\n}: BriefReportSectionProps) => {\n  const onClick = useCallback(\n    (event: React.MouseEvent) => {\n      event.stopPropagation()\n      if (event.target instanceof Element) {\n        const li = event.target.closest(\"li\")\n        if (li && li instanceof HTMLLIElement) {\n          const content = li.querySelector(`.${CONTENT_CLASS_NAME}`)\n          if (content && content instanceof HTMLDivElement) {\n            onAddPrompt?.(content.innerText, entityInfo)\n          }\n        }\n      }\n    },\n    [entityInfo, onAddPrompt],\n  )\n  if (!body) return null\n\n  return (\n    <Box sx={{ my: \"38px\" }}>\n      <Typography\n        sx={{\n          fontWeight: 700,\n          fontSize: \"24px\",\n          margin: 0,\n          padding: 0,\n          lineHeight: \"24px\",\n        }}\n      >\n        {title}\n      </Typography>\n\n      <Box sx={{ ul: { listStyle: \"none\" } }}>\n        <ReactMarkdown\n          remarkPlugins={[remarkGfm]}\n          components={{\n            code: briefsInlineAttributionRenderer({\n              sources,\n            }),\n            li: ({ children }) => {\n              return (\n                <Box\n                  component={\"li\"}\n                  sx={{\n                    py: 0.5,\n                    pl: 4,\n                    ml: -5,\n                    mb: 1,\n                    cursor: \"pointer\",\n                    fontSize: \"18px\",\n                    lineHeight: \"32px\",\n                    borderRadius: 2,\n                    \"&:hover\": {\n                      backgroundColor: \"elevation.dp24\",\n                      \"& svg\": {\n                        visibility: \"visible\",\n                      },\n                    },\n                  }}\n                  onClick={onClick}\n                >\n                  <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 2 }}>\n                    <Box sx={{ alignSelf: \"flex-start\", ml: -2 }}>â–ª</Box>\n                    <Box sx={{ flexGrow: 1 }} className={CONTENT_CLASS_NAME}>\n                      {children}\n                    </Box>\n                    <ChatBubbleOutline\n                      sx={{ mr: 2, visibility: \"hidden\", color: \"text.secondary\" }}\n                    />\n                  </Box>\n                </Box>\n              )\n            },\n          }}\n        >\n          {body ?? \"No new developments\"}\n        </ReactMarkdown>\n      </Box>\n    </Box>\n  )\n}\n\nexport { BriefReportSection }\n"],"names":["BriefReportSection","CONTENT_CLASS_NAME","title","body","sources","entityInfo","onAddPrompt","onClick","useCallback","event","stopPropagation","target","Element","li","closest","HTMLLIElement","content","querySelector","HTMLDivElement","innerText","Box","sx","my","Typography","fontWeight","fontSize","margin","padding","lineHeight","ul","listStyle","ReactMarkdown","remarkPlugins","remarkGfm","components","code","briefsInlineAttributionRenderer","children","component","py","pl","ml","mb","cursor","borderRadius","backgroundColor","visibility","display","alignItems","gap","alignSelf","flexGrow","className","ChatBubbleOutline","mr","color"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA0GSA;;;eAAAA;;;;+DA1G0B;sEACT;kEACJ;sBAEU;uBACE;yCACc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUhD,MAAMC,qBAAqB;AAE3B,MAAMD,qBAAqB,CAAC,EAC1BE,KAAK,EACLC,IAAI,EACJC,OAAO,EACPC,UAAU,EACVC,WAAW,EACa;IACxB,MAAMC,UAAUC,IAAAA,kBAAW,EACzB,CAACC;QACCA,MAAMC,eAAe;QACrB,IAAID,MAAME,MAAM,YAAYC,SAAS;YACnC,MAAMC,KAAKJ,MAAME,MAAM,CAACG,OAAO,CAAC;YAChC,IAAID,MAAMA,cAAcE,eAAe;gBACrC,MAAMC,UAAUH,GAAGI,aAAa,CAAC,CAAC,CAAC,EAAEhB,mBAAmB,CAAC;gBACzD,IAAIe,WAAWA,mBAAmBE,gBAAgB;oBAChDZ,wBAAAA,kCAAAA,YAAcU,QAAQG,SAAS,EAAEd;gBACnC;YACF;QACF;IACF,GACA;QAACA;QAAYC;KAAY;IAE3B,IAAI,CAACH,MAAM,OAAO;IAElB,qBACE,sBAACiB,SAAG;QAACC,IAAI;YAAEC,IAAI;QAAO;;0BACpB,qBAACC,gBAAU;gBACTF,IAAI;oBACFG,YAAY;oBACZC,UAAU;oBACVC,QAAQ;oBACRC,SAAS;oBACTC,YAAY;gBACd;0BAEC1B;;0BAGH,qBAACkB,SAAG;gBAACC,IAAI;oBAAEQ,IAAI;wBAAEC,WAAW;oBAAO;gBAAE;0BACnC,cAAA,qBAACC,sBAAa;oBACZC,eAAe;wBAACC,kBAAS;qBAAC;oBAC1BC,YAAY;wBACVC,MAAMC,IAAAA,wDAA+B,EAAC;4BACpChC;wBACF;wBACAS,IAAI,CAAC,EAAEwB,QAAQ,EAAE;4BACf,qBACE,qBAACjB,SAAG;gCACFkB,WAAW;gCACXjB,IAAI;oCACFkB,IAAI;oCACJC,IAAI;oCACJC,IAAI,CAAC;oCACLC,IAAI;oCACJC,QAAQ;oCACRlB,UAAU;oCACVG,YAAY;oCACZgB,cAAc;oCACd,WAAW;wCACTC,iBAAiB;wCACjB,SAAS;4CACPC,YAAY;wCACd;oCACF;gCACF;gCACAvC,SAASA;0CAET,cAAA,sBAACa,SAAG;oCAACC,IAAI;wCAAE0B,SAAS;wCAAQC,YAAY;wCAAUC,KAAK;oCAAE;;sDACvD,qBAAC7B,SAAG;4CAACC,IAAI;gDAAE6B,WAAW;gDAAcT,IAAI,CAAC;4CAAE;sDAAG;;sDAC9C,qBAACrB,SAAG;4CAACC,IAAI;gDAAE8B,UAAU;4CAAE;4CAAGC,WAAWnD;sDAClCoC;;sDAEH,qBAACgB,wBAAiB;4CAChBhC,IAAI;gDAAEiC,IAAI;gDAAGR,YAAY;gDAAUS,OAAO;4CAAiB;;;;;wBAKrE;oBACF;8BAECpD,iBAAAA,kBAAAA,OAAQ;;;;;AAKnB"}