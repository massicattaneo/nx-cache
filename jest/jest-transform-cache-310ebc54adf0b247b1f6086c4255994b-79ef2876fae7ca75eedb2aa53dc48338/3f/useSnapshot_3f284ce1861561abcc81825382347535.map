{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/providers/src/FeedbackContext/useSnapshot.tsx"],"sourcesContent":["import { Typography } from \"@mui/material\"\nimport { CqsSearchQuery } from \"@rp/common/api-types\"\nimport { axiosClient } from \"@rp/react/axios-client\"\nimport { useMutation } from \"@tanstack/react-query\"\nimport { useSnackbar } from \"../Snackbar\"\n\ntype SnapshotProps = {\n  snapshotData: {\n    name: string | undefined\n    query: CqsSearchQuery\n    queryId: string\n  }\n}\n\nconst postSnapshot = async ({ snapshotData }: SnapshotProps) => {\n  const { name, query, queryId } = snapshotData\n\n  const { data } = await axiosClient.post(\n    `cqs/annotate-query?&query_id=${queryId}&query_name=${name}`,\n    {\n      ...query,\n    },\n  )\n  return data\n}\n\nconst useSnapshot = () => {\n  const { enqueueSuccess, enqueueError } = useSnackbar()\n  return useMutation({\n    mutationFn: postSnapshot,\n    onSuccess: () => {\n      enqueueSuccess(\n        <div>\n          <Typography variant=\"subtitle2\">Your dataset has been generated in Argilla.</Typography>\n          <Typography variant=\"subtitle2\">\n            In a few minutes it will be available for annotation at the&nbsp;\n            <a\n              style={{ fontWeight: \"bold\", color: \"blue\" }}\n              href=\"https://argilla.dev.nvirginia.ml.ravenpack.com/datasets/?workspace=query_annotations\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n            >\n              link.\n            </a>\n          </Typography>\n        </div>,\n        { autoHideDuration: 5000 },\n      )\n    },\n    onError: () => {\n      enqueueError(\"An error occurred generating the snapshot, please try again\")\n    },\n  })\n}\n\nexport { useSnapshot }\nexport type { SnapshotProps }\n"],"names":["useSnapshot","postSnapshot","snapshotData","name","query","queryId","data","axiosClient","post","enqueueSuccess","enqueueError","useSnackbar","useMutation","mutationFn","onSuccess","div","Typography","variant","a","style","fontWeight","color","href","target","rel","autoHideDuration","onError"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAuDSA;;;eAAAA;;;;0BAvDkB;6BAEC;4BACA;0BACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAU5B,MAAMC,eAAe,OAAO,EAAEC,YAAY,EAAiB;IACzD,MAAM,EAAEC,IAAI,EAAEC,KAAK,EAAEC,OAAO,EAAE,GAAGH;IAEjC,MAAM,EAAEI,IAAI,EAAE,GAAG,MAAMC,wBAAW,CAACC,IAAI,CACrC,CAAC,6BAA6B,EAAEH,QAAQ,YAAY,EAAEF,KAAK,CAAC,EAC5D,mBACKC;IAGP,OAAOE;AACT;AAEA,MAAMN,cAAc;IAClB,MAAM,EAAES,cAAc,EAAEC,YAAY,EAAE,GAAGC,IAAAA,qBAAW;IACpD,OAAOC,IAAAA,uBAAW,EAAC;QACjBC,YAAYZ;QACZa,WAAW;YACTL,6BACE,sBAACM;;kCACC,qBAACC,oBAAU;wBAACC,SAAQ;kCAAY;;kCAChC,sBAACD,oBAAU;wBAACC,SAAQ;;4BAAY;0CAE9B,qBAACC;gCACCC,OAAO;oCAAEC,YAAY;oCAAQC,OAAO;gCAAO;gCAC3CC,MAAK;gCACLC,QAAO;gCACPC,KAAI;0CACL;;;;;gBAKL;gBAAEC,kBAAkB;YAAK;QAE7B;QACAC,SAAS;YACPhB,aAAa;QACf;IACF;AACF"}