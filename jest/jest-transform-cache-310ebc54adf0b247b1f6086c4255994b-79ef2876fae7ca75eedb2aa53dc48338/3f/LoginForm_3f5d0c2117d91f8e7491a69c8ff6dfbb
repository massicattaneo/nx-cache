96b8b0c8eaaa7ba54003e427a0ec9456
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    DEFAULT_ERROR_MESSAGE: function() {
        return DEFAULT_ERROR_MESSAGE;
    },
    LoginForm: function() {
        return LoginForm;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _axios = require("axios");
const _reacthookform = require("react-hook-form");
const _hooks = require("@rp/react/web/common/hooks");
const _core = require("@rp/react/web/mui/core");
const _LoginFormstyles = require("./LoginForm.styles");
const _loginutils = require("./login-utils");
function _define_property(obj, key, value) {
    if (key in obj) {
        Object.defineProperty(obj, key, {
            value: value,
            enumerable: true,
            configurable: true,
            writable: true
        });
    } else {
        obj[key] = value;
    }
    return obj;
}
function _object_spread(target) {
    for(var i = 1; i < arguments.length; i++){
        var source = arguments[i] != null ? arguments[i] : {};
        var ownKeys = Object.keys(source);
        if (typeof Object.getOwnPropertySymbols === "function") {
            ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {
                return Object.getOwnPropertyDescriptor(source, sym).enumerable;
            }));
        }
        ownKeys.forEach(function(key) {
            _define_property(target, key, source[key]);
        });
    }
    return target;
}
const DEFAULT_ERROR_MESSAGE = "An unknown error has occurred";
// Helpers
const displayError = (error)=>{
    if (error instanceof _axios.AxiosError) {
        var _error_response_data, _error_response;
        var _error_response_data_error;
        return (_error_response_data_error = (_error_response = error.response) === null || _error_response === void 0 ? void 0 : (_error_response_data = _error_response.data) === null || _error_response_data === void 0 ? void 0 : _error_response_data.error) !== null && _error_response_data_error !== void 0 ? _error_response_data_error : DEFAULT_ERROR_MESSAGE;
    } else if (typeof error === "string" && error !== "") {
        return error;
    }
    return DEFAULT_ERROR_MESSAGE;
};
const LoginForm = ({ onSubmit, isPending, isError, error })=>{
    const { isIOS, isSafari } = (0, _hooks.useDeviceInfo)();
    const isIOSAutofill = isIOS && isSafari;
    const { register, handleSubmit, formState: { errors } } = (0, _reacthookform.useForm)();
    const hasEmailError = errors.email !== undefined;
    const hasPasswordError = errors.password !== undefined;
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)(_LoginFormstyles.FormWrapper, {
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("form", {
                onSubmit: handleSubmit(onSubmit),
                noValidate: true,
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_core.InputLabel, {
                        children: "Email Address"
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_core.TextField, _object_spread({
                        autoComplete: "email",
                        autoFocus: true,
                        error: hasEmailError,
                        fullWidth: true,
                        helperText: hasEmailError ? "Please enter a valid email address" : "",
                        margin: "normal",
                        style: {
                            backgroundColor: "transparent"
                        },
                        type: "email",
                        variant: "outlined",
                        inputProps: {
                            "data-testid": "login-email",
                            sx: {
                                "&:autofill": {
                                    WebkitTextFillColor: isIOSAutofill ? "black" : undefined
                                }
                            }
                        }
                    }, register("email", {
                        required: true,
                        validate: _loginutils.isValidEmail
                    }))),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_core.InputLabel, {
                        children: "Password"
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_core.TextField, _object_spread({
                        autoComplete: "current-password",
                        error: hasPasswordError,
                        fullWidth: true,
                        helperText: hasPasswordError ? "Please enter a password" : "",
                        margin: "normal",
                        style: {
                            backgroundColor: "transparent"
                        },
                        type: "password",
                        variant: "outlined",
                        role: "password",
                        inputProps: {
                            "data-testid": "login-password",
                            sx: {
                                "&:autofill": {
                                    WebkitTextFillColor: isIOSAutofill ? "black" : undefined
                                }
                            }
                        }
                    }, register("password", {
                        required: true
                    }))),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_LoginFormstyles.SubmitButton, {
                        disabled: isPending,
                        fullWidth: true,
                        type: "submit",
                        variant: "contained",
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_core.Typography, {
                            children: isPending ? "Logging in..." : "Log in"
                        })
                    })
                ]
            }),
            isError ? /*#__PURE__*/ (0, _jsxruntime.jsx)(_core.Typography, {
                color: "error",
                children: displayError(error)
            }) : null
        ]
    });
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tY2F0dGFuZW8vd29ya3NwYWNlL2Zyb250ZW5kL2xpYnMvcmVhY3Qvd2ViL2NvbW1vbi9jb21wb3NpdGUtY29tcG9uZW50cy9zcmMvTG9naW5Gb3JtL0xvZ2luRm9ybS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXhpb3NFcnJvciB9IGZyb20gXCJheGlvc1wiXG5pbXBvcnQgeyB1c2VGb3JtIH0gZnJvbSBcInJlYWN0LWhvb2stZm9ybVwiXG5pbXBvcnQgeyB1c2VEZXZpY2VJbmZvIH0gZnJvbSBcIkBycC9yZWFjdC93ZWIvY29tbW9uL2hvb2tzXCJcbmltcG9ydCB7IElucHV0TGFiZWwsIFRleHRGaWVsZCwgVHlwb2dyYXBoeSB9IGZyb20gXCJAcnAvcmVhY3Qvd2ViL211aS9jb3JlXCJcbmltcG9ydCB7IEZvcm1XcmFwcGVyLCBTdWJtaXRCdXR0b24gfSBmcm9tIFwiLi9Mb2dpbkZvcm0uc3R5bGVzXCJcbmltcG9ydCB7IGlzVmFsaWRFbWFpbCB9IGZyb20gXCIuL2xvZ2luLXV0aWxzXCJcblxuY29uc3QgREVGQVVMVF9FUlJPUl9NRVNTQUdFID0gXCJBbiB1bmtub3duIGVycm9yIGhhcyBvY2N1cnJlZFwiXG5cbnR5cGUgRm9ybURhdGEgPSB7XG4gIGVtYWlsOiBzdHJpbmdcbiAgcGFzc3dvcmQ6IHN0cmluZ1xufVxuXG4vLyBIZWxwZXJzXG5jb25zdCBkaXNwbGF5RXJyb3IgPSAoZXJyb3I6IHVua25vd24pID0+IHtcbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgQXhpb3NFcnJvcikge1xuICAgIHJldHVybiBlcnJvci5yZXNwb25zZT8uZGF0YT8uZXJyb3IgPz8gREVGQVVMVF9FUlJPUl9NRVNTQUdFXG4gIH0gZWxzZSBpZiAodHlwZW9mIGVycm9yID09PSBcInN0cmluZ1wiICYmIGVycm9yICE9PSBcIlwiKSB7XG4gICAgcmV0dXJuIGVycm9yXG4gIH1cbiAgcmV0dXJuIERFRkFVTFRfRVJST1JfTUVTU0FHRVxufVxuXG50eXBlIFByb3BzID0ge1xuICBvblN1Ym1pdDogKHsgZW1haWwsIHBhc3N3b3JkIH06IEZvcm1EYXRhKSA9PiB2b2lkXG4gIGlzUGVuZGluZzogYm9vbGVhblxuICBpc0Vycm9yOiBib29sZWFuXG4gIGVycm9yOiB1bmtub3duXG59XG5cbmNvbnN0IExvZ2luRm9ybSA9ICh7IG9uU3VibWl0LCBpc1BlbmRpbmcsIGlzRXJyb3IsIGVycm9yIH06IFByb3BzKSA9PiB7XG4gIGNvbnN0IHsgaXNJT1MsIGlzU2FmYXJpIH0gPSB1c2VEZXZpY2VJbmZvKClcbiAgY29uc3QgaXNJT1NBdXRvZmlsbCA9IGlzSU9TICYmIGlzU2FmYXJpXG4gIGNvbnN0IHtcbiAgICByZWdpc3RlcixcbiAgICBoYW5kbGVTdWJtaXQsXG4gICAgZm9ybVN0YXRlOiB7IGVycm9ycyB9LFxuICB9ID0gdXNlRm9ybTxGb3JtRGF0YT4oKVxuXG4gIGNvbnN0IGhhc0VtYWlsRXJyb3IgPSBlcnJvcnMuZW1haWwgIT09IHVuZGVmaW5lZFxuICBjb25zdCBoYXNQYXNzd29yZEVycm9yID0gZXJyb3JzLnBhc3N3b3JkICE9PSB1bmRlZmluZWRcblxuICByZXR1cm4gKFxuICAgIDxGb3JtV3JhcHBlcj5cbiAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXQob25TdWJtaXQpfSBub1ZhbGlkYXRlPlxuICAgICAgICA8SW5wdXRMYWJlbD5FbWFpbCBBZGRyZXNzPC9JbnB1dExhYmVsPlxuICAgICAgICA8VGV4dEZpZWxkXG4gICAgICAgICAgYXV0b0NvbXBsZXRlPVwiZW1haWxcIlxuICAgICAgICAgIGF1dG9Gb2N1c1xuICAgICAgICAgIGVycm9yPXtoYXNFbWFpbEVycm9yfVxuICAgICAgICAgIGZ1bGxXaWR0aFxuICAgICAgICAgIGhlbHBlclRleHQ9e2hhc0VtYWlsRXJyb3IgPyBcIlBsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsIGFkZHJlc3NcIiA6IFwiXCJ9XG4gICAgICAgICAgbWFyZ2luPVwibm9ybWFsXCJcbiAgICAgICAgICBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6IFwidHJhbnNwYXJlbnRcIiB9fVxuICAgICAgICAgIHR5cGU9XCJlbWFpbFwiXG4gICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVkXCJcbiAgICAgICAgICBpbnB1dFByb3BzPXt7XG4gICAgICAgICAgICBcImRhdGEtdGVzdGlkXCI6IFwibG9naW4tZW1haWxcIixcbiAgICAgICAgICAgIHN4OiB7XG4gICAgICAgICAgICAgIFwiJjphdXRvZmlsbFwiOiB7XG4gICAgICAgICAgICAgICAgV2Via2l0VGV4dEZpbGxDb2xvcjogaXNJT1NBdXRvZmlsbCA/IFwiYmxhY2tcIiA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfX1cbiAgICAgICAgICB7Li4ucmVnaXN0ZXIoXCJlbWFpbFwiLCB7IHJlcXVpcmVkOiB0cnVlLCB2YWxpZGF0ZTogaXNWYWxpZEVtYWlsIH0pfVxuICAgICAgICAvPlxuICAgICAgICA8SW5wdXRMYWJlbD5QYXNzd29yZDwvSW5wdXRMYWJlbD5cbiAgICAgICAgPFRleHRGaWVsZFxuICAgICAgICAgIGF1dG9Db21wbGV0ZT1cImN1cnJlbnQtcGFzc3dvcmRcIlxuICAgICAgICAgIGVycm9yPXtoYXNQYXNzd29yZEVycm9yfVxuICAgICAgICAgIGZ1bGxXaWR0aFxuICAgICAgICAgIGhlbHBlclRleHQ9e2hhc1Bhc3N3b3JkRXJyb3IgPyBcIlBsZWFzZSBlbnRlciBhIHBhc3N3b3JkXCIgOiBcIlwifVxuICAgICAgICAgIG1hcmdpbj1cIm5vcm1hbFwiXG4gICAgICAgICAgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiBcInRyYW5zcGFyZW50XCIgfX1cbiAgICAgICAgICB0eXBlPVwicGFzc3dvcmRcIlxuICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lZFwiXG4gICAgICAgICAgcm9sZT1cInBhc3N3b3JkXCJcbiAgICAgICAgICBpbnB1dFByb3BzPXt7XG4gICAgICAgICAgICBcImRhdGEtdGVzdGlkXCI6IFwibG9naW4tcGFzc3dvcmRcIixcbiAgICAgICAgICAgIHN4OiB7XG4gICAgICAgICAgICAgIFwiJjphdXRvZmlsbFwiOiB7XG4gICAgICAgICAgICAgICAgV2Via2l0VGV4dEZpbGxDb2xvcjogaXNJT1NBdXRvZmlsbCA/IFwiYmxhY2tcIiA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfX1cbiAgICAgICAgICB7Li4ucmVnaXN0ZXIoXCJwYXNzd29yZFwiLCB7IHJlcXVpcmVkOiB0cnVlIH0pfVxuICAgICAgICAvPlxuICAgICAgICA8U3VibWl0QnV0dG9uIGRpc2FibGVkPXtpc1BlbmRpbmd9IGZ1bGxXaWR0aCB0eXBlPVwic3VibWl0XCIgdmFyaWFudD1cImNvbnRhaW5lZFwiPlxuICAgICAgICAgIDxUeXBvZ3JhcGh5Pntpc1BlbmRpbmcgPyBcIkxvZ2dpbmcgaW4uLi5cIiA6IFwiTG9nIGluXCJ9PC9UeXBvZ3JhcGh5PlxuICAgICAgICA8L1N1Ym1pdEJ1dHRvbj5cbiAgICAgIDwvZm9ybT5cbiAgICAgIHtpc0Vycm9yID8gPFR5cG9ncmFwaHkgY29sb3I9XCJlcnJvclwiPntkaXNwbGF5RXJyb3IoZXJyb3IpfTwvVHlwb2dyYXBoeT4gOiBudWxsfVxuICAgIDwvRm9ybVdyYXBwZXI+XG4gIClcbn1cblxuZXhwb3J0IHsgTG9naW5Gb3JtLCBERUZBVUxUX0VSUk9SX01FU1NBR0UgfVxuIl0sIm5hbWVzIjpbIkRFRkFVTFRfRVJST1JfTUVTU0FHRSIsIkxvZ2luRm9ybSIsImRpc3BsYXlFcnJvciIsImVycm9yIiwiQXhpb3NFcnJvciIsInJlc3BvbnNlIiwiZGF0YSIsIm9uU3VibWl0IiwiaXNQZW5kaW5nIiwiaXNFcnJvciIsImlzSU9TIiwiaXNTYWZhcmkiLCJ1c2VEZXZpY2VJbmZvIiwiaXNJT1NBdXRvZmlsbCIsInJlZ2lzdGVyIiwiaGFuZGxlU3VibWl0IiwiZm9ybVN0YXRlIiwiZXJyb3JzIiwidXNlRm9ybSIsImhhc0VtYWlsRXJyb3IiLCJlbWFpbCIsInVuZGVmaW5lZCIsImhhc1Bhc3N3b3JkRXJyb3IiLCJwYXNzd29yZCIsIkZvcm1XcmFwcGVyIiwiZm9ybSIsIm5vVmFsaWRhdGUiLCJJbnB1dExhYmVsIiwiVGV4dEZpZWxkIiwiYXV0b0NvbXBsZXRlIiwiYXV0b0ZvY3VzIiwiZnVsbFdpZHRoIiwiaGVscGVyVGV4dCIsIm1hcmdpbiIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwidHlwZSIsInZhcmlhbnQiLCJpbnB1dFByb3BzIiwic3giLCJXZWJraXRUZXh0RmlsbENvbG9yIiwicmVxdWlyZWQiLCJ2YWxpZGF0ZSIsImlzVmFsaWRFbWFpbCIsInJvbGUiLCJTdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsIlR5cG9ncmFwaHkiLCJjb2xvciJdLCJyYW5nZU1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0lBaUdvQkEscUJBQXFCO2VBQXJCQTs7SUFBWEMsU0FBUztlQUFUQTs7Ozt1QkFqR2tCOytCQUNIO3VCQUNNO3NCQUNvQjtpQ0FDUjs0QkFDYjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFN0IsTUFBTUQsd0JBQXdCO0FBTzlCLFVBQVU7QUFDVixNQUFNRSxlQUFlLENBQUNDO0lBQ3BCLElBQUlBLGlCQUFpQkMsaUJBQVUsRUFBRTtZQUN4QkQsc0JBQUFBO1lBQUFBO1FBQVAsT0FBT0EsQ0FBQUEsOEJBQUFBLGtCQUFBQSxNQUFNRSxRQUFRLGNBQWRGLHVDQUFBQSx1QkFBQUEsZ0JBQWdCRyxJQUFJLGNBQXBCSCwyQ0FBQUEscUJBQXNCQSxLQUFLLGNBQTNCQSx3Q0FBQUEsNkJBQStCSDtJQUN4QyxPQUFPLElBQUksT0FBT0csVUFBVSxZQUFZQSxVQUFVLElBQUk7UUFDcEQsT0FBT0E7SUFDVDtJQUNBLE9BQU9IO0FBQ1Q7QUFTQSxNQUFNQyxZQUFZLENBQUMsRUFBRU0sUUFBUSxFQUFFQyxTQUFTLEVBQUVDLE9BQU8sRUFBRU4sS0FBSyxFQUFTO0lBQy9ELE1BQU0sRUFBRU8sS0FBSyxFQUFFQyxRQUFRLEVBQUUsR0FBR0MsSUFBQUEsb0JBQWE7SUFDekMsTUFBTUMsZ0JBQWdCSCxTQUFTQztJQUMvQixNQUFNLEVBQ0pHLFFBQVEsRUFDUkMsWUFBWSxFQUNaQyxXQUFXLEVBQUVDLE1BQU0sRUFBRSxFQUN0QixHQUFHQyxJQUFBQSxzQkFBTztJQUVYLE1BQU1DLGdCQUFnQkYsT0FBT0csS0FBSyxLQUFLQztJQUN2QyxNQUFNQyxtQkFBbUJMLE9BQU9NLFFBQVEsS0FBS0Y7SUFFN0MscUJBQ0Usc0JBQUNHLDRCQUFXOzswQkFDVixzQkFBQ0M7Z0JBQUtsQixVQUFVUSxhQUFhUjtnQkFBV21CLFVBQVU7O2tDQUNoRCxxQkFBQ0MsZ0JBQVU7a0NBQUM7O2tDQUNaLHFCQUFDQyxlQUFTO3dCQUNSQyxjQUFhO3dCQUNiQyxTQUFTO3dCQUNUM0IsT0FBT2dCO3dCQUNQWSxTQUFTO3dCQUNUQyxZQUFZYixnQkFBZ0IsdUNBQXVDO3dCQUNuRWMsUUFBTzt3QkFDUEMsT0FBTzs0QkFBRUMsaUJBQWlCO3dCQUFjO3dCQUN4Q0MsTUFBSzt3QkFDTEMsU0FBUTt3QkFDUkMsWUFBWTs0QkFDVixlQUFlOzRCQUNmQyxJQUFJO2dDQUNGLGNBQWM7b0NBQ1pDLHFCQUFxQjNCLGdCQUFnQixVQUFVUTtnQ0FDakQ7NEJBQ0Y7d0JBQ0Y7dUJBQ0lQLFNBQVMsU0FBUzt3QkFBRTJCLFVBQVU7d0JBQU1DLFVBQVVDLHdCQUFZO29CQUFDO2tDQUVqRSxxQkFBQ2hCLGdCQUFVO2tDQUFDOztrQ0FDWixxQkFBQ0MsZUFBUzt3QkFDUkMsY0FBYTt3QkFDYjFCLE9BQU9tQjt3QkFDUFMsU0FBUzt3QkFDVEMsWUFBWVYsbUJBQW1CLDRCQUE0Qjt3QkFDM0RXLFFBQU87d0JBQ1BDLE9BQU87NEJBQUVDLGlCQUFpQjt3QkFBYzt3QkFDeENDLE1BQUs7d0JBQ0xDLFNBQVE7d0JBQ1JPLE1BQUs7d0JBQ0xOLFlBQVk7NEJBQ1YsZUFBZTs0QkFDZkMsSUFBSTtnQ0FDRixjQUFjO29DQUNaQyxxQkFBcUIzQixnQkFBZ0IsVUFBVVE7Z0NBQ2pEOzRCQUNGO3dCQUNGO3VCQUNJUCxTQUFTLFlBQVk7d0JBQUUyQixVQUFVO29CQUFLO2tDQUU1QyxxQkFBQ0ksNkJBQVk7d0JBQUNDLFVBQVV0Qzt3QkFBV3VCLFNBQVM7d0JBQUNLLE1BQUs7d0JBQVNDLFNBQVE7a0NBQ2pFLGNBQUEscUJBQUNVLGdCQUFVO3NDQUFFdkMsWUFBWSxrQkFBa0I7Ozs7O1lBRzlDQyx3QkFBVSxxQkFBQ3NDLGdCQUFVO2dCQUFDQyxPQUFNOzBCQUFTOUMsYUFBYUM7aUJBQXVCOzs7QUFHaEYifQ==