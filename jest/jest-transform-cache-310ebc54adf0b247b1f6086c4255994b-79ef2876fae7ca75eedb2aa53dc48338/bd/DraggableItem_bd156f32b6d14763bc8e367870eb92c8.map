{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/composite-components/src/ReOrderableList/DraggableItem.tsx"],"sourcesContent":["import { JSX, useEffect, useRef } from \"react\"\nimport { getEmptyImage } from \"react-dnd-html5-backend\"\nimport { useDragRowItems } from \"./useDragRowItems\"\n\ntype MoveCard = (dragIndex: number, hoverIndex: number) => void\n\nenum ItemTypes {\n  \"MOBILE_CARD\" = \"mobileCard\",\n  \"HUB_TABLE_ROW\" = \"hubTableRow\",\n}\nexport type ItemWithId = { id: string }\n\ntype DnDProps<RowType extends ItemWithId> = {\n  moveCard: MoveCard\n  index: number\n  onDrop: () => void\n  type: ItemTypes\n  item: RowType\n}\n\ntype DragOptions = {\n  disableDrag?: boolean\n  isDragging?: boolean\n}\n\ntype DraggerProps<RowType extends ItemWithId> = DnDProps<RowType> & {\n  renderItem: (\n    dragRef?: React.MutableRefObject<HTMLDivElement | null>,\n    dragOptions?: DragOptions,\n  ) => JSX.Element\n  disableDrag?: boolean\n}\n\nconst DraggableItem = <RowType extends ItemWithId>({\n  renderItem,\n  moveCard,\n  index,\n  item,\n  onDrop,\n  type,\n  disableDrag,\n}: DraggerProps<RowType>) => {\n  const dragRef = useRef(null)\n  const dropRef = useRef(null)\n\n  const { drag, drop, isDragging, handlerId, preview } = useDragRowItems({\n    ref: dropRef,\n    moveCard,\n    index,\n    item,\n    onDrop,\n    type,\n    disableDrag,\n  })\n  const opacity = isDragging ? 0 : 1\n  drag(dragRef)\n  drop(dropRef)\n\n  useEffect(() => {\n    preview(getEmptyImage(), { captureDraggingState: true })\n  }, [preview])\n\n  return (\n    <div ref={dropRef} style={{ opacity }} data-handler-id={handlerId}>\n      {renderItem(dragRef, { disableDrag })}\n    </div>\n  )\n}\n\nexport { DraggableItem, ItemTypes }\nexport type { DnDProps, DragOptions }\n"],"names":["DraggableItem","ItemTypes","renderItem","moveCard","index","item","onDrop","type","disableDrag","dragRef","useRef","dropRef","drag","drop","isDragging","handlerId","preview","useDragRowItems","ref","opacity","useEffect","getEmptyImage","captureDraggingState","div","style","data-handler-id"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;IAqESA,aAAa;eAAbA;;IAAeC,SAAS;eAATA;;;;uBArEe;sCACT;iCACE;;UAI3BA;;;GAAAA,cAAAA;AA2BL,MAAMD,gBAAgB,CAA6B,EACjDE,UAAU,EACVC,QAAQ,EACRC,KAAK,EACLC,IAAI,EACJC,MAAM,EACNC,IAAI,EACJC,WAAW,EACW;IACtB,MAAMC,UAAUC,IAAAA,aAAM,EAAC;IACvB,MAAMC,UAAUD,IAAAA,aAAM,EAAC;IAEvB,MAAM,EAAEE,IAAI,EAAEC,IAAI,EAAEC,UAAU,EAAEC,SAAS,EAAEC,OAAO,EAAE,GAAGC,IAAAA,gCAAe,EAAC;QACrEC,KAAKP;QACLR;QACAC;QACAC;QACAC;QACAC;QACAC;IACF;IACA,MAAMW,UAAUL,aAAa,IAAI;IACjCF,KAAKH;IACLI,KAAKF;IAELS,IAAAA,gBAAS,EAAC;QACRJ,QAAQK,IAAAA,mCAAa,KAAI;YAAEC,sBAAsB;QAAK;IACxD,GAAG;QAACN;KAAQ;IAEZ,qBACE,qBAACO;QAAIL,KAAKP;QAASa,OAAO;YAAEL;QAAQ;QAAGM,mBAAiBV;kBACrDb,WAAWO,SAAS;YAAED;QAAY;;AAGzC"}