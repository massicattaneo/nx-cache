{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/common/source-selector/src/hooks/useSourceSelectorSourcesFlags.ts"],"sourcesContent":["import { useMemo } from \"react\"\nimport { useFlags } from \"launchdarkly-react-client-sdk\"\nimport { AutosuggestSource, ContentCategory, ContentPackage } from \"@rp/react/tanstack-api/content\"\nimport { CONTENT_PACKAGES_WITHOUT_SELECT_ALL } from \"../sourceSelector.constants\"\nimport { SourceSelectorFeatureFlags } from \"../sourceSelector.types\"\n\ntype UseSourceSelectorSourcesFlagsProps = {\n  isLoadingAutosuggestSources: boolean\n  parentItem: ContentPackage | ContentCategory | null\n  isInitializingState: boolean\n  isFetchingNextPage: boolean\n  allAutosuggestSources: Array<AutosuggestSource>\n  hasError: boolean\n}\n\ntype UseSourceSelectorSourcesFlagsState = {\n  isDataLoading: boolean\n  isDataNoResults: boolean\n  isDataToShow: boolean\n  shouldHaveSelectAll: boolean\n}\nfunction useSourceSelectorSourcesFlags({\n  isLoadingAutosuggestSources,\n  parentItem,\n  isInitializingState,\n  isFetchingNextPage,\n  allAutosuggestSources,\n  hasError,\n}: UseSourceSelectorSourcesFlagsProps): UseSourceSelectorSourcesFlagsState {\n  const { enableWebFeSourceSelectorV1SelectAll } = useFlags<SourceSelectorFeatureFlags>()\n\n  return useMemo(() => {\n    if (hasError) {\n      return {\n        isDataLoading: false,\n        isDataNoResults: false,\n        isDataToShow: false,\n        shouldHaveSelectAll: false,\n      }\n    }\n\n    const shouldHaveSelectAll =\n      !!enableWebFeSourceSelectorV1SelectAll &&\n      !!parentItem?.id &&\n      !CONTENT_PACKAGES_WITHOUT_SELECT_ALL.includes(parentItem.id)\n\n    if (isLoadingAutosuggestSources || isFetchingNextPage || isInitializingState || !parentItem) {\n      return {\n        isDataLoading: true,\n        isDataNoResults: false,\n        isDataToShow: false,\n        shouldHaveSelectAll,\n      }\n    }\n\n    const isDataToShow = allAutosuggestSources.length !== 0\n    const isDataNoResults = !isDataToShow\n\n    return {\n      isDataLoading: false,\n      isDataNoResults,\n      isDataToShow,\n      shouldHaveSelectAll,\n    }\n  }, [\n    isLoadingAutosuggestSources,\n    parentItem,\n    isInitializingState,\n    isFetchingNextPage,\n    allAutosuggestSources,\n    hasError,\n    enableWebFeSourceSelectorV1SelectAll,\n  ])\n}\n\nexport { useSourceSelectorSourcesFlags }\nexport type { UseSourceSelectorSourcesFlagsProps, UseSourceSelectorSourcesFlagsState }\n"],"names":["useSourceSelectorSourcesFlags","isLoadingAutosuggestSources","parentItem","isInitializingState","isFetchingNextPage","allAutosuggestSources","hasError","enableWebFeSourceSelectorV1SelectAll","useFlags","useMemo","isDataLoading","isDataNoResults","isDataToShow","shouldHaveSelectAll","id","CONTENT_PACKAGES_WITHOUT_SELECT_ALL","includes","length"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA2ESA;;;eAAAA;;;uBA3Ee;4CACC;yCAE2B;AAkBpD,SAASA,8BAA8B,EACrCC,2BAA2B,EAC3BC,UAAU,EACVC,mBAAmB,EACnBC,kBAAkB,EAClBC,qBAAqB,EACrBC,QAAQ,EAC2B;IACnC,MAAM,EAAEC,oCAAoC,EAAE,GAAGC,IAAAA,oCAAQ;IAEzD,OAAOC,IAAAA,cAAO,EAAC;QACb,IAAIH,UAAU;YACZ,OAAO;gBACLI,eAAe;gBACfC,iBAAiB;gBACjBC,cAAc;gBACdC,qBAAqB;YACvB;QACF;QAEA,MAAMA,sBACJ,CAAC,CAACN,wCACF,CAAC,EAACL,uBAAAA,iCAAAA,WAAYY,EAAE,KAChB,CAACC,4DAAmC,CAACC,QAAQ,CAACd,WAAWY,EAAE;QAE7D,IAAIb,+BAA+BG,sBAAsBD,uBAAuB,CAACD,YAAY;YAC3F,OAAO;gBACLQ,eAAe;gBACfC,iBAAiB;gBACjBC,cAAc;gBACdC;YACF;QACF;QAEA,MAAMD,eAAeP,sBAAsBY,MAAM,KAAK;QACtD,MAAMN,kBAAkB,CAACC;QAEzB,OAAO;YACLF,eAAe;YACfC;YACAC;YACAC;QACF;IACF,GAAG;QACDZ;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;KACD;AACH"}