{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/common/source-selector/src/utils/getSourceSelectionTotals.ts"],"sourcesContent":["import {\n  SourceSelectionTotals,\n  SourceSelectorSelectedPackageInfo,\n  SourceSelectorSelectedSourceInfo,\n} from \"../sourceSelector.types\"\n\nfunction getSourceSelectionTotals({\n  selectedAllPackages,\n  selectedSources,\n}: {\n  selectedAllPackages: Array<SourceSelectorSelectedPackageInfo>\n  selectedSources: Array<SourceSelectorSelectedSourceInfo>\n}): SourceSelectionTotals {\n  if (!selectedAllPackages.length && !selectedSources.length) {\n    return {}\n  }\n\n  const sourceSelectionTotals: SourceSelectionTotals = {}\n  let allSourceSelectedCount = 0\n\n  // set all \"select all\" packages\n\n  selectedAllPackages.forEach(contentPackage => {\n    sourceSelectionTotals[contentPackage.id] = \"All\"\n    allSourceSelectedCount += contentPackage.sourceCount\n  })\n\n  // add selected sources not in selected packages\n\n  selectedSources.forEach(contentSource => {\n    let hasBeenAddedToAll = false\n    contentSource.packageIDs.forEach(packageID => {\n      if (packageID === \"all\") return\n\n      const isSourceAlreadyCountedInSelectedPackage = sourceSelectionTotals[packageID] === \"All\"\n\n      if (isSourceAlreadyCountedInSelectedPackage) return\n\n      sourceSelectionTotals[packageID] = +(sourceSelectionTotals[packageID] ?? 0) + 1\n\n      if (!hasBeenAddedToAll) {\n        allSourceSelectedCount++\n        hasBeenAddedToAll = true\n      }\n    })\n  })\n\n  // set \"all\" package count\n\n  sourceSelectionTotals[\"all\"] = allSourceSelectedCount\n\n  return sourceSelectionTotals\n}\n\nexport { getSourceSelectionTotals }\n"],"names":["getSourceSelectionTotals","selectedAllPackages","selectedSources","length","sourceSelectionTotals","allSourceSelectedCount","forEach","contentPackage","id","sourceCount","contentSource","hasBeenAddedToAll","packageIDs","packageID","isSourceAlreadyCountedInSelectedPackage"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAsDSA;;;eAAAA;;;AAhDT,SAASA,yBAAyB,EAChCC,mBAAmB,EACnBC,eAAe,EAIhB;IACC,IAAI,CAACD,oBAAoBE,MAAM,IAAI,CAACD,gBAAgBC,MAAM,EAAE;QAC1D,OAAO,CAAC;IACV;IAEA,MAAMC,wBAA+C,CAAC;IACtD,IAAIC,yBAAyB;IAE7B,gCAAgC;IAEhCJ,oBAAoBK,OAAO,CAACC,CAAAA;QAC1BH,qBAAqB,CAACG,eAAeC,EAAE,CAAC,GAAG;QAC3CH,0BAA0BE,eAAeE,WAAW;IACtD;IAEA,gDAAgD;IAEhDP,gBAAgBI,OAAO,CAACI,CAAAA;QACtB,IAAIC,oBAAoB;QACxBD,cAAcE,UAAU,CAACN,OAAO,CAACO,CAAAA;YAC/B,IAAIA,cAAc,OAAO;YAEzB,MAAMC,0CAA0CV,qBAAqB,CAACS,UAAU,KAAK;YAErF,IAAIC,yCAAyC;gBAERV;YAArCA,qBAAqB,CAACS,UAAU,GAAG,CAAET,CAAAA,CAAAA,mCAAAA,qBAAqB,CAACS,UAAU,cAAhCT,8CAAAA,mCAAoC,CAAA,IAAK;YAE9E,IAAI,CAACO,mBAAmB;gBACtBN;gBACAM,oBAAoB;YACtB;QACF;IACF;IAEA,0BAA0B;IAE1BP,qBAAqB,CAAC,MAAM,GAAGC;IAE/B,OAAOD;AACT"}