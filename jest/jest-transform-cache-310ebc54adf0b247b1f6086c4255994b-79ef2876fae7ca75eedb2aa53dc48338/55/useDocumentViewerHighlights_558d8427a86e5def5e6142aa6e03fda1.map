{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/document-viewer/src/lib/hooks/useDocumentViewerHighlights.tsx"],"sourcesContent":["import { CSSProperties, useMemo } from \"react\"\nimport { RpqlFilter } from \"@rp/common/api-types\"\nimport { getExpressionIds } from \"@rp/react/tanstack-api/user-data-queries\"\nimport { useEntitiesFromWatchlists } from \"@rp/react/tanstack-api/watchlist\"\nimport { RPThemeProps } from \"@rp/react/theme\"\nimport { useEntitiesStyles, useKeywordStyles } from \"@rp/react/web/common/document-viewer\"\n\nconst useDocumentViewerHighlights = (\n  expression: RpqlFilter | undefined,\n  getHighlightStyle?: (theme: RPThemeProps) => CSSProperties,\n) => {\n  // Get the keywords from the expression\n  const keywords: Array<string> = useMemo(\n    () =>\n      expression ? getExpressionIds(expression, { types: [\"keyword\"], excludeNot: true }) : [],\n    [expression],\n  )\n\n  // Get the entities from the expression\n  const queryEntities = expression\n    ? getExpressionIds(expression, { types: [\"entity\", \"rp_topic\"], excludeNot: true })\n    : []\n\n  // Get the entities from the watchlists\n  const entitiesInWatchlist = useEntitiesFromWatchlists(expression)\n\n  // All the entities to highlight\n  const entities = [...queryEntities, ...entitiesInWatchlist]\n\n  // Get the styles for the keywords and entities\n  const keywordsStyles = useKeywordStyles(keywords, \"\", getHighlightStyle)\n  const entitiesStyles = useEntitiesStyles(entities, true, getHighlightStyle)\n  const highlights = [...keywordsStyles, ...entitiesStyles]\n\n  return { highlights, keywords, entities }\n}\n\nexport { useDocumentViewerHighlights }\n"],"names":["useDocumentViewerHighlights","expression","getHighlightStyle","keywords","useMemo","getExpressionIds","types","excludeNot","queryEntities","entitiesInWatchlist","useEntitiesFromWatchlists","entities","keywordsStyles","useKeywordStyles","entitiesStyles","useEntitiesStyles","highlights"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAqCSA;;;eAAAA;;;uBArC8B;iCAEN;2BACS;gCAEU;AAEpD,MAAMA,8BAA8B,CAClCC,YACAC;IAEA,uCAAuC;IACvC,MAAMC,WAA0BC,IAAAA,cAAO,EACrC,IACEH,aAAaI,IAAAA,iCAAgB,EAACJ,YAAY;YAAEK,OAAO;gBAAC;aAAU;YAAEC,YAAY;QAAK,KAAK,EAAE,EAC1F;QAACN;KAAW;IAGd,uCAAuC;IACvC,MAAMO,gBAAgBP,aAClBI,IAAAA,iCAAgB,EAACJ,YAAY;QAAEK,OAAO;YAAC;YAAU;SAAW;QAAEC,YAAY;IAAK,KAC/E,EAAE;IAEN,uCAAuC;IACvC,MAAME,sBAAsBC,IAAAA,oCAAyB,EAACT;IAEtD,gCAAgC;IAChC,MAAMU,WAAW;WAAIH;WAAkBC;KAAoB;IAE3D,+CAA+C;IAC/C,MAAMG,iBAAiBC,IAAAA,gCAAgB,EAACV,UAAU,IAAID;IACtD,MAAMY,iBAAiBC,IAAAA,iCAAiB,EAACJ,UAAU,MAAMT;IACzD,MAAMc,aAAa;WAAIJ;WAAmBE;KAAe;IAEzD,OAAO;QAAEE;QAAYb;QAAUQ;IAAS;AAC1C"}