{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/apps/client-web/src/app/components/Hub/Watchlists/PortfolioView/WatchlistsTable.tsx"],"sourcesContent":["import { CqsItem } from \"@rp/common/api-types\"\nimport { useAccount } from \"@rp/react/common/providers\"\nimport { styled } from \"@rp/react/theme\"\nimport { LoadingSpinner } from \"@rp/react/web/common/base-components\"\nimport { AdvancedTable } from \"@rp/react/web/common/composite-components\"\nimport { useUserSettings } from \"@rp/react/web/common/hooks\"\nimport { useDeviceInfo } from \"@rp/react/web/common/hooks\"\nimport { Box, IconButton, Typography } from \"@rp/react/web/mui/core\"\nimport { ChatBubbleOutline, FileCopy } from \"@rp/react/web/mui/icons\"\nimport { ShareSearchButton } from \"./ShareSearchButton\"\nimport { WatchlistTableStyled } from \"./WatchlistTable.styles\"\nimport { WatchlistTableRow } from \"./WatchlistTableRow\"\n\nconst HubTableContainer = styled(\"div\", { name: \"HubTableContainer\" })({\n  width: \"100%\",\n  flexGrow: 1,\n  overflow: \"auto\",\n})\n\ntype WatchlistTableProps = {\n  loading: boolean\n  selectedEntities: Array<CqsItem>\n  filterTerm: string\n  totalEntities: number\n  isPublic: boolean\n  onDelete?: (id: string) => void\n  onShare?: () => void\n  onCopy?: () => void\n  onChat?: () => void\n}\n\nconst ItemsCount = ({ items, total }: { items: Array<CqsItem>; total: number }) => {\n  if (items.length === total) {\n    return (\n      <>\n        {items.length} {items.length === 1 ? \"item in your Watchlist\" : \"items in your Watchlist\"}\n      </>\n    )\n  }\n  return (\n    <>\n      {items.length} of {total} {total === 1 ? \"item in your Watchlist\" : \"items in your Watchlist\"}\n    </>\n  )\n}\n\nconst WatchlistsTable = ({\n  loading,\n  selectedEntities,\n  filterTerm,\n  totalEntities,\n  isPublic,\n  onDelete,\n  onShare,\n  onCopy,\n  onChat,\n}: WatchlistTableProps) => {\n  const headCells = [\n    { id: \"name\", label: \"name\" },\n    { id: \"category\", label: \"Type\" },\n  ]\n  const emptyTable = selectedEntities.length === 0\n  const { isMobile } = useDeviceInfo()\n  const account = useAccount()\n\n  const {\n    userSettings,\n    actions: { setSorting },\n  } = useUserSettings()\n\n  if (loading) {\n    return <LoadingSpinner />\n  }\n\n  if (emptyTable && filterTerm !== \"\") {\n    return (\n      <HubTableContainer>\n        <Typography variant=\"subtitle2\" color=\"textSecondary\" ml={isMobile ? 0 : 2}>\n          <span>\n            We couldn't find any results that match your search criteria. Please try again with\n            different keywords.\n          </span>\n        </Typography>\n      </HubTableContainer>\n    )\n  }\n\n  const canShare = onShare && isMobile && account.canShare\n  const canCopy = onCopy && isMobile\n  const canChat = onChat && isMobile && account.hasEntitlement(\"chat:watchlist\")\n\n  return (\n    <HubTableContainer>\n      <Typography\n        variant=\"subtitle2\"\n        color=\"textSecondary\"\n        ml={isMobile ? 0 : 2}\n        mb={3}\n        display=\"flex\"\n        alignItems=\"center\"\n        justifyContent=\"space-between\"\n      >\n        {isMobile ? <ItemsCount items={selectedEntities} total={totalEntities} /> : null}\n        <Box sx={{ display: \"flex\", alignItems: \"center\" }}>\n          {canShare && <ShareSearchButton isPublic={isPublic} onClick={onShare} />}\n          {canCopy && (\n            <IconButton onClick={onCopy}>\n              <FileCopy sx={{ height: 20, width: 20 }} />\n            </IconButton>\n          )}\n          {canChat && (\n            <IconButton onClick={onChat}>\n              <ChatBubbleOutline sx={{ height: 20, width: 20 }} />\n            </IconButton>\n          )}\n        </Box>\n      </Typography>\n\n      {totalEntities > 0 ? (\n        <WatchlistTableStyled>\n          <AdvancedTable\n            columns={onDelete ? [...headCells, { id: \"Delete\", label: \"\" }] : headCells}\n            initialOrderBy={userSettings.sorting.watchlistTable.field}\n            initialOrderDirection={userSettings.sorting.watchlistTable.direction}\n            onOrderChange={(field, direction) => setSorting(\"watchlistTable\", { field, direction })}\n            rows={selectedEntities}\n            renderRow={item => (\n              <WatchlistTableRow\n                key={item.key}\n                item={item}\n                filterTerm={filterTerm}\n                onDelete={onDelete}\n              />\n            )}\n          />\n        </WatchlistTableStyled>\n      ) : null}\n    </HubTableContainer>\n  )\n}\n\nexport { ItemsCount, WatchlistsTable }\n"],"names":["ItemsCount","WatchlistsTable","HubTableContainer","styled","name","width","flexGrow","overflow","items","total","length","loading","selectedEntities","filterTerm","totalEntities","isPublic","onDelete","onShare","onCopy","onChat","headCells","id","label","emptyTable","isMobile","useDeviceInfo","account","useAccount","userSettings","actions","setSorting","useUserSettings","LoadingSpinner","Typography","variant","color","ml","span","canShare","canCopy","canChat","hasEntitlement","mb","display","alignItems","justifyContent","Box","sx","ShareSearchButton","onClick","IconButton","FileCopy","height","ChatBubbleOutline","WatchlistTableStyled","AdvancedTable","columns","initialOrderBy","sorting","watchlistTable","field","initialOrderDirection","direction","onOrderChange","rows","renderRow","item","WatchlistTableRow","key"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"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"}