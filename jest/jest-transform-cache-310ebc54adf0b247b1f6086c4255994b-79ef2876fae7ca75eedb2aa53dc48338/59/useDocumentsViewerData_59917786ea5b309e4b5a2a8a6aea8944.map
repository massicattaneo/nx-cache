{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/document-viewer/src/lib/hooks/useDocumentsViewerData/useDocumentsViewerData.ts"],"sourcesContent":["import { useMemo } from \"react\"\nimport {\n  DocumentsCollectionAPIResponse,\n  DocumentsCollectionAudioItem,\n  DocumentsCollectionEventInfo,\n  DocumentsCollectionRPJSONItem,\n} from \"@rp/react/tanstack-api/documents\"\nimport { getEventEntityInfo } from \"../../utils/getEventEntityInfo\"\nimport { getSortedVisualItems } from \"../../utils/getSortedVisualItems\"\nimport { parseEventName } from \"../../utils/parseEventName\"\n\ntype UseDocumentsViewerDataProps = {\n  collectionDocuments: DocumentsCollectionAPIResponse | undefined\n  documentId: string | undefined\n}\n\ntype UseDocumentsViewerDataState = {\n  audioItem: DocumentsCollectionAudioItem | null\n  visualItems: Array<DocumentsCollectionRPJSONItem> | null\n  eventInfo: DocumentsCollectionEventInfo | null\n}\n\nconst useDocumentsViewerData = ({\n  collectionDocuments,\n  documentId,\n}: UseDocumentsViewerDataProps): UseDocumentsViewerDataState => {\n  const { audioItem, visualItems, eventInfo } = useMemo(() => {\n    if (!collectionDocuments) return { audioItem: null, visualItems: null, eventInfo: null }\n\n    const audioData = collectionDocuments.documents.find(doc =>\n      [\"NEWS\", \"TRANSCRIPT-AUDIO\"].includes(doc.rpDocumentType),\n    )\n    const audioItem = audioData ? { label: \"Audio\", data: audioData } : null\n\n    const visualData = collectionDocuments.documents.filter(\n      doc => ![\"NEWS\", \"TRANSCRIPT-AUDIO\"].includes(doc.rpDocumentType),\n    )\n\n    const visualItems = getSortedVisualItems(visualData, documentId)\n\n    const eventInfo: DocumentsCollectionEventInfo = {\n      event: parseEventName(collectionDocuments),\n      entity: getEventEntityInfo(collectionDocuments.entities),\n    }\n\n    return { audioItem, visualItems, eventInfo }\n  }, [collectionDocuments, documentId])\n\n  return { audioItem, visualItems, eventInfo }\n}\n\nexport { useDocumentsViewerData }\nexport type { UseDocumentsViewerDataState, UseDocumentsViewerDataProps }\n"],"names":["useDocumentsViewerData","collectionDocuments","documentId","audioItem","visualItems","eventInfo","useMemo","audioData","documents","find","doc","includes","rpDocumentType","label","data","visualData","filter","getSortedVisualItems","event","parseEventName","entity","getEventEntityInfo","entities"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAmDSA;;;eAAAA;;;uBAnDe;oCAOW;sCACE;gCACN;AAa/B,MAAMA,yBAAyB,CAAC,EAC9BC,mBAAmB,EACnBC,UAAU,EACkB;IAC5B,MAAM,EAAEC,SAAS,EAAEC,WAAW,EAAEC,SAAS,EAAE,GAAGC,IAAAA,cAAO,EAAC;QACpD,IAAI,CAACL,qBAAqB,OAAO;YAAEE,WAAW;YAAMC,aAAa;YAAMC,WAAW;QAAK;QAEvF,MAAME,YAAYN,oBAAoBO,SAAS,CAACC,IAAI,CAACC,CAAAA,MACnD;gBAAC;gBAAQ;aAAmB,CAACC,QAAQ,CAACD,IAAIE,cAAc;QAE1D,MAAMT,YAAYI,YAAY;YAAEM,OAAO;YAASC,MAAMP;QAAU,IAAI;QAEpE,MAAMQ,aAAad,oBAAoBO,SAAS,CAACQ,MAAM,CACrDN,CAAAA,MAAO,CAAC;gBAAC;gBAAQ;aAAmB,CAACC,QAAQ,CAACD,IAAIE,cAAc;QAGlE,MAAMR,cAAca,IAAAA,0CAAoB,EAACF,YAAYb;QAErD,MAAMG,YAA0C;YAC9Ca,OAAOC,IAAAA,8BAAc,EAAClB;YACtBmB,QAAQC,IAAAA,sCAAkB,EAACpB,oBAAoBqB,QAAQ;QACzD;QAEA,OAAO;YAAEnB;YAAWC;YAAaC;QAAU;IAC7C,GAAG;QAACJ;QAAqBC;KAAW;IAEpC,OAAO;QAAEC;QAAWC;QAAaC;IAAU;AAC7C"}