{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/tanstack-api/file/src/services/getAll.ts"],"sourcesContent":["import isEmpty from \"lodash/isEmpty\"\nimport qs from \"qs\"\nimport { FileCollection, FilesInfiniteOwnership } from \"@rp/common/utils\"\nimport { axiosClient } from \"@rp/react/axios-client\"\nimport { FILES_BASE_URL, FILES_ROOT, PAGE_SIZE } from \"../file.constants\"\nimport { InfiniteFilesParams } from \"../file.types\"\n\ntype GetAllParams = Partial<InfiniteFilesParams> & {\n  pageSize?: number\n  offset?: number\n  ownership?: FilesInfiniteOwnership // when ownership defined, overrides shared\n  owners?: Array<string>\n}\n\nconst serverSorting = {\n  name: \"file_name\",\n  date: \"upload_ts\",\n  size: \"raw_size\",\n}\n\nconst getAll = async ({\n  offset = 0,\n  pageSize = PAGE_SIZE,\n  sortBy,\n  direction,\n  shared,\n  fileName,\n  ownership,\n  owners,\n}: GetAllParams = {}) => {\n  const query = qs.stringify(\n    {\n      page_size: pageSize,\n      trashed: false,\n      offset: offset * pageSize,\n      sort_by: sortBy ? serverSorting[sortBy] : undefined,\n      sort_dir: direction ? direction : undefined,\n      shared: shared ? true : undefined,\n      file_name: fileName ? fileName : undefined,\n      ownership,\n      owners: isEmpty(owners) ? undefined : owners,\n    },\n    { arrayFormat: \"repeat\" },\n  )\n\n  const url = `${FILES_BASE_URL}${FILES_ROOT}/?${query}`\n  const { data } = await axiosClient.get<FileCollection>(url)\n  return data\n}\n\nexport { getAll }\n"],"names":["getAll","serverSorting","name","date","size","offset","pageSize","PAGE_SIZE","sortBy","direction","shared","fileName","ownership","owners","query","qs","stringify","page_size","trashed","sort_by","undefined","sort_dir","file_name","isEmpty","arrayFormat","url","FILES_BASE_URL","FILES_ROOT","data","axiosClient","get"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAkDSA;;;eAAAA;;;gEAlDW;2DACL;6BAEa;+BAC0B;;;;;;AAUtD,MAAMC,gBAAgB;IACpBC,MAAM;IACNC,MAAM;IACNC,MAAM;AACR;AAEA,MAAMJ,SAAS,OAAO,EACpBK,SAAS,CAAC,EACVC,WAAWC,wBAAS,EACpBC,MAAM,EACNC,SAAS,EACTC,MAAM,EACNC,QAAQ,EACRC,SAAS,EACTC,MAAM,EACO,GAAG,CAAC,CAAC;IAClB,MAAMC,QAAQC,WAAE,CAACC,SAAS,CACxB;QACEC,WAAWX;QACXY,SAAS;QACTb,QAAQA,SAASC;QACjBa,SAASX,SAASP,aAAa,CAACO,OAAO,GAAGY;QAC1CC,UAAUZ,YAAYA,YAAYW;QAClCV,QAAQA,SAAS,OAAOU;QACxBE,WAAWX,WAAWA,WAAWS;QACjCR;QACAC,QAAQU,IAAAA,gBAAO,EAACV,UAAUO,YAAYP;IACxC,GACA;QAAEW,aAAa;IAAS;IAG1B,MAAMC,MAAM,CAAC,EAAEC,6BAAc,CAAC,EAAEC,yBAAU,CAAC,EAAE,EAAEb,MAAM,CAAC;IACtD,MAAM,EAAEc,IAAI,EAAE,GAAG,MAAMC,wBAAW,CAACC,GAAG,CAAiBL;IACvD,OAAOG;AACT"}