{"version":3,"sources":["../../src/utils/offsets.ts"],"sourcesContent":["import type { XYCoord } from 'dnd-core'\n\nimport { isTouchEvent } from './predicates.js'\n\nconst ELEMENT_NODE = 1\n\nexport function getNodeClientOffset(node: Element): XYCoord | undefined {\n\tconst el = node.nodeType === ELEMENT_NODE ? node : node.parentElement\n\tif (!el) {\n\t\treturn undefined\n\t}\n\tconst { top, left } = el.getBoundingClientRect()\n\treturn { x: left, y: top }\n}\n\nexport function getEventClientTouchOffset(\n\te: TouchEvent,\n\tlastTargetTouchFallback?: Touch,\n): XYCoord | undefined {\n\tif (e.targetTouches.length === 1) {\n\t\treturn getEventClientOffset(e.targetTouches[0] as Touch)\n\t} else if (lastTargetTouchFallback && e.touches.length === 1) {\n\t\tif ((e.touches[0] as Touch).target === lastTargetTouchFallback.target) {\n\t\t\treturn getEventClientOffset(e.touches[0] as Touch)\n\t\t}\n\t}\n\treturn\n}\n\nexport function getEventClientOffset(\n\te: TouchEvent | Touch | MouseEvent,\n\tlastTargetTouchFallback?: Touch,\n): XYCoord | undefined {\n\tif (isTouchEvent(e)) {\n\t\treturn getEventClientTouchOffset(e, lastTargetTouchFallback)\n\t} else {\n\t\treturn {\n\t\t\tx: e.clientX,\n\t\t\ty: e.clientY,\n\t\t}\n\t}\n}\n"],"names":["getEventClientOffset","getEventClientTouchOffset","getNodeClientOffset","ELEMENT_NODE","node","el","nodeType","parentElement","undefined","top","left","getBoundingClientRect","x","y","e","lastTargetTouchFallback","targetTouches","length","touches","target","isTouchEvent","clientX","clientY"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;IA6BgBA,oBAAoB;eAApBA;;IAdAC,yBAAyB;eAAzBA;;IATAC,mBAAmB;eAAnBA;;;4BAJa;AAE7B,MAAMC,eAAe;AAEd,SAASD,oBAAoBE,IAAa;IAChD,MAAMC,KAAKD,KAAKE,QAAQ,KAAKH,eAAeC,OAAOA,KAAKG,aAAa;IACrE,IAAI,CAACF,IAAI;QACR,OAAOG;;IAER,MAAM,EAAEC,GAAG,EAAEC,IAAI,EAAE,GAAGL,GAAGM,qBAAqB;IAC9C,OAAO;QAAEC,GAAGF;QAAMG,GAAGJ;;;AAGf,SAASR,0BACfa,CAAa,EACbC,uBAA+B;IAE/B,IAAID,EAAEE,aAAa,CAACC,MAAM,KAAK,GAAG;QACjC,OAAOjB,qBAAqBc,EAAEE,aAAa,CAAC,EAAE;WACxC,IAAID,2BAA2BD,EAAEI,OAAO,CAACD,MAAM,KAAK,GAAG;QAC7D,IAAIH,EAAGI,OAAO,CAAC,EAAE,CAAWC,MAAM,KAAKJ,wBAAwBI,MAAM,EAAE;YACtE,OAAOnB,qBAAqBc,EAAEI,OAAO,CAAC,EAAE;;;IAG1C;;AAGM,SAASlB,qBACfc,CAAkC,EAClCC,uBAA+B;IAE/B,IAAIK,IAAAA,wBAAY,EAACN,IAAI;QACpB,OAAOb,0BAA0Ba,GAAGC;WAC9B;QACN,OAAO;YACNH,GAAGE,EAAEO,OAAO;YACZR,GAAGC,EAAEQ,OAAO"}