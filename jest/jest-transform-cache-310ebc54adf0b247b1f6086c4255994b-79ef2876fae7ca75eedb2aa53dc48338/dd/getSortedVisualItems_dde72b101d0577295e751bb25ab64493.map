{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/document-viewer/src/lib/utils/getSortedVisualItems.ts"],"sourcesContent":["import {\n  DocumentsCollectionInfo,\n  DocumentsCollectionRPJSONItem,\n} from \"@rp/react/tanstack-api/documents\"\nimport { parseTabLabel } from \"./parseTabLabel\"\n\nconst getSortedVisualItems = (\n  visualData: Array<DocumentsCollectionInfo>,\n  documentId: string | undefined,\n): Array<DocumentsCollectionRPJSONItem> => {\n  const mappedVisualItems = visualData.map(datum => ({\n    label: parseTabLabel(datum),\n    info: datum,\n  }))\n\n  if (!documentId) {\n    return mappedVisualItems\n  }\n\n  const itemIdx = mappedVisualItems.findIndex(item => item.info.rpDocumentId === documentId)\n\n  if (itemIdx === -1) {\n    return mappedVisualItems\n  }\n\n  const firstItem = mappedVisualItems[itemIdx]\n  mappedVisualItems.splice(itemIdx, 1)\n\n  const fullItems = [firstItem, ...mappedVisualItems]\n\n  // remove extra transcripts until b/e can figure it out, we only need one\n\n  const transcriptCount = fullItems.reduce(\n    (acc, cur) => acc + (cur.info.rpDocumentType === \"TRANSCRIPT\" ? 1 : 0),\n    0,\n  )\n\n  if (transcriptCount < 2) {\n    return fullItems\n  }\n\n  const firstTranscriptIndex = fullItems.findIndex(\n    item => item.info.rpDocumentType === \"TRANSCRIPT\",\n  )\n\n  const filteredItems = fullItems.filter(\n    (item, idx) => idx === firstTranscriptIndex || item.info.rpDocumentType !== \"TRANSCRIPT\",\n  )\n\n  return filteredItems\n}\n\nexport { getSortedVisualItems }\n"],"names":["getSortedVisualItems","visualData","documentId","mappedVisualItems","map","datum","label","parseTabLabel","info","itemIdx","findIndex","item","rpDocumentId","firstItem","splice","fullItems","transcriptCount","reduce","acc","cur","rpDocumentType","firstTranscriptIndex","filteredItems","filter","idx"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAoDSA;;;eAAAA;;;+BAhDqB;AAE9B,MAAMA,uBAAuB,CAC3BC,YACAC;IAEA,MAAMC,oBAAoBF,WAAWG,GAAG,CAACC,CAAAA,QAAU,CAAA;YACjDC,OAAOC,IAAAA,4BAAa,EAACF;YACrBG,MAAMH;QACR,CAAA;IAEA,IAAI,CAACH,YAAY;QACf,OAAOC;IACT;IAEA,MAAMM,UAAUN,kBAAkBO,SAAS,CAACC,CAAAA,OAAQA,KAAKH,IAAI,CAACI,YAAY,KAAKV;IAE/E,IAAIO,YAAY,CAAC,GAAG;QAClB,OAAON;IACT;IAEA,MAAMU,YAAYV,iBAAiB,CAACM,QAAQ;IAC5CN,kBAAkBW,MAAM,CAACL,SAAS;IAElC,MAAMM,YAAY;QAACF;WAAcV;KAAkB;IAEnD,yEAAyE;IAEzE,MAAMa,kBAAkBD,UAAUE,MAAM,CACtC,CAACC,KAAKC,MAAQD,MAAOC,CAAAA,IAAIX,IAAI,CAACY,cAAc,KAAK,eAAe,IAAI,CAAA,GACpE;IAGF,IAAIJ,kBAAkB,GAAG;QACvB,OAAOD;IACT;IAEA,MAAMM,uBAAuBN,UAAUL,SAAS,CAC9CC,CAAAA,OAAQA,KAAKH,IAAI,CAACY,cAAc,KAAK;IAGvC,MAAME,gBAAgBP,UAAUQ,MAAM,CACpC,CAACZ,MAAMa,MAAQA,QAAQH,wBAAwBV,KAAKH,IAAI,CAACY,cAAc,KAAK;IAG9E,OAAOE;AACT"}