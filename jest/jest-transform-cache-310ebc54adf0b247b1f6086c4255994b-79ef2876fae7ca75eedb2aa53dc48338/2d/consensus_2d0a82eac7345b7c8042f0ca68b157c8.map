{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/watchlists/src/lib/WatchlistDataTabs/endpoints/companyAnalystRatings/consensus.tsx"],"sourcesContent":["import { AnalystRatingsDistributionTooltip } from \"../../WatchlistDataTableCells/AnalystRatingsDistributionTooltip\"\nimport { WatchlistDataTableColoredCell } from \"../../WatchlistDataTableCells/WatchlistDataTableColoredCell\"\nimport { genericColumn } from \"../../genericColumn\"\n\nfunction consensus(tableName: string) {\n  const title = \"Consensus\"\n  return genericColumn({\n    endpoint: \"companyAnalystRatings\",\n    columnKeys: [\"consensus\"],\n    size: 90,\n    title,\n    enableSorting: true,\n    enableHiding: true,\n    tooltip:\n      \"Summarizes analyst views into an actionable signal for investors. (Strong Buy/Buy/Hold/Sell/Strong Sell)\",\n    cell: info => {\n      const rawValue =\n        info.row.original.financialData.companyAnalystRatings?.data?.consensus ?? \"Hold\"\n      const numValue = rawValue === \"Hold\" ? 0 : [\"Sell\", \"Strong Sell\"].includes(rawValue) ? -1 : 1\n      const ratingsData = info.row.original.financialData.companyAnalystRatings?.data\n\n      return (\n        <WatchlistDataTableColoredCell\n          queryResult={info.row.original.financialData.companyAnalystRatings}\n          tooltip={\n            ratingsData ? <AnalystRatingsDistributionTooltip data={ratingsData} /> : undefined\n          }\n          onClick={() => {\n            info.row.original.onChatWithCell?.({\n              prompt: `Explain how market conditions in the Medium-term support the ${rawValue} for ${info.row.original.entityInfo.name}`,\n              value: rawValue,\n              entityInfo: info.row.original.entityInfo,\n              columnName: `${tableName}: ${title}`,\n            })\n          }}\n          value={\n            info.row.original.financialData.companyAnalystRatings?.data?.consensus\n              ? numValue\n              : undefined\n          }\n        >\n          {rawValue}\n        </WatchlistDataTableColoredCell>\n      )\n    },\n  })\n}\n\nexport { consensus }\n"],"names":["consensus","tableName","title","genericColumn","endpoint","columnKeys","size","enableSorting","enableHiding","tooltip","cell","info","rawValue","row","original","financialData","companyAnalystRatings","data","numValue","includes","ratingsData","WatchlistDataTableColoredCell","queryResult","AnalystRatingsDistributionTooltip","undefined","onClick","onChatWithCell","prompt","entityInfo","name","value","columnName"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAgDSA;;;eAAAA;;;;mDAhDyC;+CACJ;+BAChB;AAE9B,SAASA,UAAUC,SAAiB;IAClC,MAAMC,QAAQ;IACd,OAAOC,IAAAA,4BAAa,EAAC;QACnBC,UAAU;QACVC,YAAY;YAAC;SAAY;QACzBC,MAAM;QACNJ;QACAK,eAAe;QACfC,cAAc;QACdC,SACE;QACFC,MAAMC,CAAAA;gBAEFA,6DAAAA,wDAEkBA,yDAiBdA,8DAAAA;gBAnBJA;YADF,MAAMC,WACJD,CAAAA,yEAAAA,yDAAAA,KAAKE,GAAG,CAACC,QAAQ,CAACC,aAAa,CAACC,qBAAqB,cAArDL,8EAAAA,8DAAAA,uDAAuDM,IAAI,cAA3DN,kFAAAA,4DAA6DX,SAAS,cAAtEW,mFAAAA,wEAA0E;YAC5E,MAAMO,WAAWN,aAAa,SAAS,IAAI;gBAAC;gBAAQ;aAAc,CAACO,QAAQ,CAACP,YAAY,CAAC,IAAI;YAC7F,MAAMQ,eAAcT,0DAAAA,KAAKE,GAAG,CAACC,QAAQ,CAACC,aAAa,CAACC,qBAAqB,cAArDL,8EAAAA,wDAAuDM,IAAI;YAE/E,qBACE,qBAACI,4DAA6B;gBAC5BC,aAAaX,KAAKE,GAAG,CAACC,QAAQ,CAACC,aAAa,CAACC,qBAAqB;gBAClEP,SACEW,4BAAc,qBAACG,oEAAiC;oBAACN,MAAMG;qBAAkBI;gBAE3EC,SAAS;wBACPd,mCAAAA;qBAAAA,oCAAAA,CAAAA,qBAAAA,KAAKE,GAAG,CAACC,QAAQ,EAACY,cAAc,cAAhCf,wDAAAA,uCAAAA,oBAAmC;wBACjCgB,QAAQ,CAAC,6DAA6D,EAAEf,SAAS,KAAK,EAAED,KAAKE,GAAG,CAACC,QAAQ,CAACc,UAAU,CAACC,IAAI,CAAC,CAAC;wBAC3HC,OAAOlB;wBACPgB,YAAYjB,KAAKE,GAAG,CAACC,QAAQ,CAACc,UAAU;wBACxCG,YAAY,CAAC,EAAE9B,UAAU,EAAE,EAAEC,MAAM,CAAC;oBACtC;gBACF;gBACA4B,OACEnB,EAAAA,0DAAAA,KAAKE,GAAG,CAACC,QAAQ,CAACC,aAAa,CAACC,qBAAqB,cAArDL,+EAAAA,+DAAAA,wDAAuDM,IAAI,cAA3DN,mFAAAA,6DAA6DX,SAAS,IAClEkB,WACAM;0BAGLZ;;QAGP;IACF;AACF"}