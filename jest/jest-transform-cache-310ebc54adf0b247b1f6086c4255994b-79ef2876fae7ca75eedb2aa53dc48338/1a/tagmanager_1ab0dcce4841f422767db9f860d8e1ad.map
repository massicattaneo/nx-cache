{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/vendors/utils/src/utils/tag-manager.ts"],"sourcesContent":["import TagManager from \"react-gtm-module\"\nimport { adapters } from \"@rp/adapters\"\nimport { EVENT_TYPES } from \"./constants\"\nimport {\n  DocumentClosedData,\n  DocumentOutboundData,\n  DocumentReadingData,\n  DpGroupingData,\n  EventData,\n  EventTypes,\n  FeedViewData,\n  QueryInitData,\n  QueryRefinementData,\n  QueryRevisitData,\n  QuerySavedData,\n  StoryCardData,\n  TagManagerConfig,\n} from \"./types\"\n\nexport const initTagManager = (config: TagManagerConfig) => {\n  if (config.enabled) {\n    const tagManagerArgs = {\n      gtmId: config.gtmId,\n    }\n\n    TagManager.initialize(tagManagerArgs)\n  }\n}\n\nconst triggerEvent = (eventId: EventTypes, data: EventData = {}) => {\n  TagManager.dataLayer({\n    dataLayer: {\n      event: eventId,\n      ...data,\n    },\n  })\n}\n\n// Authentication\ntype LoginUser = Parameters<typeof adapters.customerIo.identify>[0]\nconst login = (user: LoginUser) => {\n  triggerEvent(EVENT_TYPES.login, user)\n  userAuthenticated(user)\n  adapters.customerIo.identify(user)\n}\n\nconst logout = () => {\n  triggerEvent(EVENT_TYPES.logout)\n}\n\nconst userAuthenticated = (user: LoginUser) => {\n  triggerEvent(EVENT_TYPES.userAuthenticated, user)\n}\n\n// Story Card\nconst storyCard = (storyCardData: StoryCardData) => {\n  triggerEvent(EVENT_TYPES.storyCard, storyCardData)\n}\n\n// Document Reader\nconst documentOutbound = (outboundData: DocumentOutboundData) => {\n  triggerEvent(EVENT_TYPES.outbound, outboundData)\n}\n\nconst documentReading = (readingData: DocumentReadingData) => {\n  triggerEvent(EVENT_TYPES.documentReading, readingData)\n}\n\nconst documentClosed = (closedData: DocumentClosedData) => {\n  triggerEvent(EVENT_TYPES.documentClosed, closedData)\n}\n\n// Intercom\nconst error = (sentryErrorId: string) => {\n  triggerEvent(EVENT_TYPES.error, { sentryErrorId })\n}\n\nconst contactSupport = () => {\n  triggerEvent(EVENT_TYPES.contactSupport)\n}\n\n// Device\nconst isMobile = () => {\n  triggerEvent(EVENT_TYPES.isMobile)\n}\nconst isDesktop = () => {\n  triggerEvent(EVENT_TYPES.isDesktop)\n}\n\n// Query Interactions\nconst queryRefinement = (data: QueryRefinementData) => {\n  triggerEvent(EVENT_TYPES.queryRefinement, data)\n}\n\nconst queryInit = (data: QueryInitData) => {\n  triggerEvent(EVENT_TYPES.queryInit, data)\n}\n\nconst queryRevisit = (data: QueryRevisitData) => {\n  triggerEvent(EVENT_TYPES.queryRevisit, data)\n}\n\nconst querySaved = (data: QuerySavedData) => {\n  triggerEvent(EVENT_TYPES.querySaved, data)\n}\n\n// Panel Grouping\nconst dpGrouping = (data: DpGroupingData) => {\n  triggerEvent(EVENT_TYPES.dpGrouping, data)\n}\n\n// Feeds\nconst feedView = (data: FeedViewData) => {\n  triggerEvent(EVENT_TYPES.feedView, data)\n}\n\nexport const tagManagerEvents = {\n  login,\n  logout,\n  error,\n  contactSupport,\n  isMobile,\n  isDesktop,\n  storyCard,\n  documentOutbound,\n  documentReading,\n  documentClosed,\n  queryRefinement,\n  queryInit,\n  queryRevisit,\n  querySaved,\n  dpGrouping,\n  feedView,\n}\n"],"names":["initTagManager","tagManagerEvents","config","enabled","tagManagerArgs","gtmId","TagManager","initialize","triggerEvent","eventId","data","dataLayer","event","login","user","EVENT_TYPES","userAuthenticated","adapters","customerIo","identify","logout","storyCard","storyCardData","documentOutbound","outboundData","outbound","documentReading","readingData","documentClosed","closedData","error","sentryErrorId","contactSupport","isMobile","isDesktop","queryRefinement","queryInit","queryRevisit","querySaved","dpGrouping","feedView"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;IAmBaA,cAAc;eAAdA;;IAiGAC,gBAAgB;eAAhBA;;;uEApHU;0BACE;2BACG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiBrB,MAAMD,iBAAiB,CAACE;IAC7B,IAAIA,OAAOC,OAAO,EAAE;QAClB,MAAMC,iBAAiB;YACrBC,OAAOH,OAAOG,KAAK;QACrB;QAEAC,uBAAU,CAACC,UAAU,CAACH;IACxB;AACF;AAEA,MAAMI,eAAe,CAACC,SAAqBC,OAAkB,CAAC,CAAC;IAC7DJ,uBAAU,CAACK,SAAS,CAAC;QACnBA,WAAW;YACTC,OAAOH;WACJC;IAEP;AACF;AAIA,MAAMG,QAAQ,CAACC;IACbN,aAAaO,sBAAW,CAACF,KAAK,EAAEC;IAChCE,kBAAkBF;IAClBG,kBAAQ,CAACC,UAAU,CAACC,QAAQ,CAACL;AAC/B;AAEA,MAAMM,SAAS;IACbZ,aAAaO,sBAAW,CAACK,MAAM;AACjC;AAEA,MAAMJ,oBAAoB,CAACF;IACzBN,aAAaO,sBAAW,CAACC,iBAAiB,EAAEF;AAC9C;AAEA,aAAa;AACb,MAAMO,YAAY,CAACC;IACjBd,aAAaO,sBAAW,CAACM,SAAS,EAAEC;AACtC;AAEA,kBAAkB;AAClB,MAAMC,mBAAmB,CAACC;IACxBhB,aAAaO,sBAAW,CAACU,QAAQ,EAAED;AACrC;AAEA,MAAME,kBAAkB,CAACC;IACvBnB,aAAaO,sBAAW,CAACW,eAAe,EAAEC;AAC5C;AAEA,MAAMC,iBAAiB,CAACC;IACtBrB,aAAaO,sBAAW,CAACa,cAAc,EAAEC;AAC3C;AAEA,WAAW;AACX,MAAMC,QAAQ,CAACC;IACbvB,aAAaO,sBAAW,CAACe,KAAK,EAAE;QAAEC;IAAc;AAClD;AAEA,MAAMC,iBAAiB;IACrBxB,aAAaO,sBAAW,CAACiB,cAAc;AACzC;AAEA,SAAS;AACT,MAAMC,WAAW;IACfzB,aAAaO,sBAAW,CAACkB,QAAQ;AACnC;AACA,MAAMC,YAAY;IAChB1B,aAAaO,sBAAW,CAACmB,SAAS;AACpC;AAEA,qBAAqB;AACrB,MAAMC,kBAAkB,CAACzB;IACvBF,aAAaO,sBAAW,CAACoB,eAAe,EAAEzB;AAC5C;AAEA,MAAM0B,YAAY,CAAC1B;IACjBF,aAAaO,sBAAW,CAACqB,SAAS,EAAE1B;AACtC;AAEA,MAAM2B,eAAe,CAAC3B;IACpBF,aAAaO,sBAAW,CAACsB,YAAY,EAAE3B;AACzC;AAEA,MAAM4B,aAAa,CAAC5B;IAClBF,aAAaO,sBAAW,CAACuB,UAAU,EAAE5B;AACvC;AAEA,iBAAiB;AACjB,MAAM6B,aAAa,CAAC7B;IAClBF,aAAaO,sBAAW,CAACwB,UAAU,EAAE7B;AACvC;AAEA,QAAQ;AACR,MAAM8B,WAAW,CAAC9B;IAChBF,aAAaO,sBAAW,CAACyB,QAAQ,EAAE9B;AACrC;AAEO,MAAMT,mBAAmB;IAC9BY;IACAO;IACAU;IACAE;IACAC;IACAC;IACAb;IACAE;IACAG;IACAE;IACAO;IACAC;IACAC;IACAC;IACAC;IACAC;AACF"}