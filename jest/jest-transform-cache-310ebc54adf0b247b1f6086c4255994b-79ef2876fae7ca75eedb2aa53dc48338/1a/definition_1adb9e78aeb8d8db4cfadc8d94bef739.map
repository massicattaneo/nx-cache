{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/node_modules/mdast-util-to-markdown/lib/handle/definition.js"],"sourcesContent":["/**\n * @typedef {import('mdast').Definition} Definition\n * @typedef {import('mdast').Parents} Parents\n * @typedef {import('../types.js').Info} Info\n * @typedef {import('../types.js').State} State\n */\n\nimport {checkQuote} from '../util/check-quote.js'\n\n/**\n * @param {Definition} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function definition(node, _, state, info) {\n  const quote = checkQuote(state)\n  const suffix = quote === '\"' ? 'Quote' : 'Apostrophe'\n  const exit = state.enter('definition')\n  let subexit = state.enter('label')\n  const tracker = state.createTracker(info)\n  let value = tracker.move('[')\n  value += tracker.move(\n    state.safe(state.associationId(node), {\n      before: value,\n      after: ']',\n      ...tracker.current()\n    })\n  )\n  value += tracker.move(']: ')\n\n  subexit()\n\n  if (\n    // If there’s no url, or…\n    !node.url ||\n    // If there are control characters or whitespace.\n    /[\\0- \\u007F]/.test(node.url)\n  ) {\n    subexit = state.enter('destinationLiteral')\n    value += tracker.move('<')\n    value += tracker.move(\n      state.safe(node.url, {before: value, after: '>', ...tracker.current()})\n    )\n    value += tracker.move('>')\n  } else {\n    // No whitespace, raw is prettier.\n    subexit = state.enter('destinationRaw')\n    value += tracker.move(\n      state.safe(node.url, {\n        before: value,\n        after: node.title ? ' ' : '\\n',\n        ...tracker.current()\n      })\n    )\n  }\n\n  subexit()\n\n  if (node.title) {\n    subexit = state.enter(`title${suffix}`)\n    value += tracker.move(' ' + quote)\n    value += tracker.move(\n      state.safe(node.title, {\n        before: value,\n        after: quote,\n        ...tracker.current()\n      })\n    )\n    value += tracker.move(quote)\n    subexit()\n  }\n\n  exit()\n\n  return value\n}\n"],"names":["definition","node","_","state","info","quote","checkQuote","suffix","exit","enter","subexit","tracker","createTracker","value","move","safe","associationId","before","after","current","url","test","title"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"AAAA;;;;;CAKC;;;;+BAWeA;;;eAAAA;;;4BATS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASlB,SAASA,WAAWC,IAAI,EAAEC,CAAC,EAAEC,KAAK,EAAEC,IAAI;IAC7C,MAAMC,QAAQC,IAAAA,sBAAU,EAACH;IACzB,MAAMI,SAASF,UAAU,MAAM,UAAU;IACzC,MAAMG,OAAOL,MAAMM,KAAK,CAAC;IACzB,IAAIC,UAAUP,MAAMM,KAAK,CAAC;IAC1B,MAAME,UAAUR,MAAMS,aAAa,CAACR;IACpC,IAAIS,QAAQF,QAAQG,IAAI,CAAC;IACzBD,SAASF,QAAQG,IAAI,CACnBX,MAAMY,IAAI,CAACZ,MAAMa,aAAa,CAACf,OAAO;QACpCgB,QAAQJ;QACRK,OAAO;OACJP,QAAQQ,OAAO;IAGtBN,SAASF,QAAQG,IAAI,CAAC;IAEtBJ;IAEA,IACE,yBAAyB;IACzB,CAACT,KAAKmB,GAAG,IACT,iDAAiD;IACjD,eAAeC,IAAI,CAACpB,KAAKmB,GAAG,GAC5B;QACAV,UAAUP,MAAMM,KAAK,CAAC;QACtBI,SAASF,QAAQG,IAAI,CAAC;QACtBD,SAASF,QAAQG,IAAI,CACnBX,MAAMY,IAAI,CAACd,KAAKmB,GAAG,EAAE;YAACH,QAAQJ;YAAOK,OAAO;WAAQP,QAAQQ,OAAO;QAErEN,SAASF,QAAQG,IAAI,CAAC;IACxB,OAAO;QACL,kCAAkC;QAClCJ,UAAUP,MAAMM,KAAK,CAAC;QACtBI,SAASF,QAAQG,IAAI,CACnBX,MAAMY,IAAI,CAACd,KAAKmB,GAAG,EAAE;YACnBH,QAAQJ;YACRK,OAAOjB,KAAKqB,KAAK,GAAG,MAAM;WACvBX,QAAQQ,OAAO;IAGxB;IAEAT;IAEA,IAAIT,KAAKqB,KAAK,EAAE;QACdZ,UAAUP,MAAMM,KAAK,CAAC,CAAC,KAAK,EAAEF,OAAO,CAAC;QACtCM,SAASF,QAAQG,IAAI,CAAC,MAAMT;QAC5BQ,SAASF,QAAQG,IAAI,CACnBX,MAAMY,IAAI,CAACd,KAAKqB,KAAK,EAAE;YACrBL,QAAQJ;YACRK,OAAOb;WACJM,QAAQQ,OAAO;QAGtBN,SAASF,QAAQG,IAAI,CAACT;QACtBK;IACF;IAEAF;IAEA,OAAOK;AACT"}