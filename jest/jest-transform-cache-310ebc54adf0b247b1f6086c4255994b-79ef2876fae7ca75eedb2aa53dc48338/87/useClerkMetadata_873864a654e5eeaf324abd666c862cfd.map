{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/common/hooks/src/lib/useClerkMetadata.ts"],"sourcesContent":["import { useClerk } from \"@clerk/clerk-react\"\nimport {\n  UnsafeClerkMetadata,\n  transformPublicMetadata,\n  transformUnsafeMetadata,\n} from \"@rp/common/utils\"\nimport { useMutation } from \"@tanstack/react-query\"\n\nconst useClerkUnsafeMetadata = () => {\n  const { user, loaded } = useClerk()\n\n  if (!loaded) {\n    return { data: undefined, isLoading: true, user: undefined }\n  }\n\n  if (!user) {\n    return { data: undefined, isLoading: false, user: null }\n  }\n\n  return { data: transformUnsafeMetadata(user.unsafeMetadata), isLoading: false, user }\n}\n\nconst useClerkPublicMetadata = () => {\n  const { user, loaded } = useClerk()\n\n  if (!loaded) {\n    return { data: undefined, isLoading: true, user: undefined }\n  }\n\n  if (!user) {\n    return { data: undefined, isLoading: false, user: null }\n  }\n\n  return { data: transformPublicMetadata(user.publicMetadata), isLoading: false, user }\n}\n\nconst useUpdateClerkUnsafeMetadata = () => {\n  const { user, data } = useClerkUnsafeMetadata()\n  return useMutation({\n    mutationFn: async (metadata: Partial<UnsafeClerkMetadata>) => {\n      if (!user || !data) return\n      await user.update({\n        unsafeMetadata: {\n          ...user.unsafeMetadata,\n          ...metadata,\n        },\n      })\n    },\n  })\n}\n\nexport { useClerkUnsafeMetadata, useClerkPublicMetadata, useUpdateClerkUnsafeMetadata }\n"],"names":["useClerkPublicMetadata","useClerkUnsafeMetadata","useUpdateClerkUnsafeMetadata","user","loaded","useClerk","data","undefined","isLoading","transformUnsafeMetadata","unsafeMetadata","transformPublicMetadata","publicMetadata","useMutation","mutationFn","metadata","update"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;IAmDiCA,sBAAsB;eAAtBA;;IAAxBC,sBAAsB;eAAtBA;;IAAgDC,4BAA4B;eAA5BA;;;4BAnDhC;uBAKlB;4BACqB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAE5B,MAAMD,yBAAyB;IAC7B,MAAM,EAAEE,IAAI,EAAEC,MAAM,EAAE,GAAGC,IAAAA,oBAAQ;IAEjC,IAAI,CAACD,QAAQ;QACX,OAAO;YAAEE,MAAMC;YAAWC,WAAW;YAAML,MAAMI;QAAU;IAC7D;IAEA,IAAI,CAACJ,MAAM;QACT,OAAO;YAAEG,MAAMC;YAAWC,WAAW;YAAOL,MAAM;QAAK;IACzD;IAEA,OAAO;QAAEG,MAAMG,IAAAA,8BAAuB,EAACN,KAAKO,cAAc;QAAGF,WAAW;QAAOL;IAAK;AACtF;AAEA,MAAMH,yBAAyB;IAC7B,MAAM,EAAEG,IAAI,EAAEC,MAAM,EAAE,GAAGC,IAAAA,oBAAQ;IAEjC,IAAI,CAACD,QAAQ;QACX,OAAO;YAAEE,MAAMC;YAAWC,WAAW;YAAML,MAAMI;QAAU;IAC7D;IAEA,IAAI,CAACJ,MAAM;QACT,OAAO;YAAEG,MAAMC;YAAWC,WAAW;YAAOL,MAAM;QAAK;IACzD;IAEA,OAAO;QAAEG,MAAMK,IAAAA,8BAAuB,EAACR,KAAKS,cAAc;QAAGJ,WAAW;QAAOL;IAAK;AACtF;AAEA,MAAMD,+BAA+B;IACnC,MAAM,EAAEC,IAAI,EAAEG,IAAI,EAAE,GAAGL;IACvB,OAAOY,IAAAA,uBAAW,EAAC;QACjBC,YAAY,OAAOC;YACjB,IAAI,CAACZ,QAAQ,CAACG,MAAM;YACpB,MAAMH,KAAKa,MAAM,CAAC;gBAChBN,gBAAgB,mBACXP,KAAKO,cAAc,EACnBK;YAEP;QACF;IACF;AACF"}