{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/document-viewer/src/lib/DocumentViewerPage/hooks/usePageSourceHighlight.ts"],"sourcesContent":["import { useEffect, useState } from \"react\"\nimport { BoundingBox } from \"@rp/common/api-types\"\nimport { useFeatureAtom } from \"@rp/react/web/router\"\nimport { drawSourceHighlight, getIsHighlightValid } from \"./documentViewerPage.utils\"\n\ntype UsePageSourceHighlightProps = {\n  boundingBox: BoundingBox\n  page: HTMLCanvasElement | null\n  pageNumber: number\n  isPageLoading: boolean\n}\n\nconst usePageSourceHighlight = ({\n  boundingBox,\n  page,\n  pageNumber,\n  isPageLoading,\n}: UsePageSourceHighlightProps): void => {\n  const [hasHighlighted, setHasHighlighted] = useState(false)\n  const [enablePDFHighlight] = useFeatureAtom(\"enablePDFHighlight\")\n\n  useEffect(() => {\n    if (\n      hasHighlighted ||\n      isPageLoading ||\n      !enablePDFHighlight ||\n      !page ||\n      pageNumber !== boundingBox.page ||\n      !getIsHighlightValid(boundingBox)\n    )\n      return\n\n    setHasHighlighted(true)\n\n    drawSourceHighlight(page, boundingBox)\n  }, [pageNumber, boundingBox, hasHighlighted, page, enablePDFHighlight, isPageLoading])\n}\n\nexport { usePageSourceHighlight }\n"],"names":["usePageSourceHighlight","boundingBox","page","pageNumber","isPageLoading","hasHighlighted","setHasHighlighted","useState","enablePDFHighlight","useFeatureAtom","useEffect","getIsHighlightValid","drawSourceHighlight"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAsCSA;;;eAAAA;;;uBAtC2B;wBAEL;yCAC0B;AASzD,MAAMA,yBAAyB,CAAC,EAC9BC,WAAW,EACXC,IAAI,EACJC,UAAU,EACVC,aAAa,EACe;IAC5B,MAAM,CAACC,gBAAgBC,kBAAkB,GAAGC,IAAAA,eAAQ,EAAC;IACrD,MAAM,CAACC,mBAAmB,GAAGC,IAAAA,sBAAc,EAAC;IAE5CC,IAAAA,gBAAS,EAAC;QACR,IACEL,kBACAD,iBACA,CAACI,sBACD,CAACN,QACDC,eAAeF,YAAYC,IAAI,IAC/B,CAACS,IAAAA,4CAAmB,EAACV,cAErB;QAEFK,kBAAkB;QAElBM,IAAAA,4CAAmB,EAACV,MAAMD;IAC5B,GAAG;QAACE;QAAYF;QAAaI;QAAgBH;QAAMM;QAAoBJ;KAAc;AACvF"}