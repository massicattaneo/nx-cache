{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/watchlist-editor/src/FullScreenSuggestions.tsx"],"sourcesContent":["import { useState } from \"react\"\nimport { Watchlist } from \"@rp/common/api-types\"\nimport { useDebouncedState } from \"@rp/react/common/hooks\"\nimport { getAllWatchlistCategories } from \"@rp/react/common/watchlists\"\nimport { PanelConfig } from \"@rp/react/tanstack-api/discovery-panel-config\"\nimport { useWatchlistSuggestions } from \"@rp/react/tanstack-api/suggestion\"\nimport { BOTTOM_NAV_HEIGHT } from \"@rp/react/web/common/composite-components\"\nimport { useDeviceInfo } from \"@rp/react/web/common/hooks\"\nimport { Box, IconButton, TextField } from \"@rp/react/web/mui/core\"\nimport { ArrowBack, Close } from \"@rp/react/web/mui/icons\"\nimport { WatchlistCategoryFilter } from \"./WatchlistCategoryFilter\"\nimport { WatchlistSuggestionListMobile } from \"./WatchlistSuggestionList.mobile\"\n\ntype Props = {\n  onClose: () => void\n  included: Array<string>\n  onAddSuggestions: (ids: Array<string>) => void\n  categories: PanelConfig[\"discoveryPanelCategories\"]\n  isPatching: boolean\n  watchlist: Watchlist | undefined\n}\n\nconst FullScreenSuggestions = ({\n  onClose,\n  included,\n  onAddSuggestions,\n  categories,\n  isPatching,\n  watchlist,\n}: Props) => {\n  const [filter, setFilter] = useState<string | undefined>(undefined)\n  const [searchTerm, setSearchTerm, currentSearchTerm] = useDebouncedState(\"\")\n  const {\n    data,\n    isLoading: areSuggestionsLoading,\n    hasNextPage: hasMore,\n    fetchNextPage,\n  } = useWatchlistSuggestions({\n    query: searchTerm,\n    category: filter ? [filter] : getAllWatchlistCategories(searchTerm, categories),\n  })\n\n  const { safeArea } = useDeviceInfo()\n\n  return (\n    <>\n      <Box\n        sx={{\n          position: \"fixed\",\n          width: \"100vw\",\n          height: \"100vh\",\n          top: 0,\n          backgroundColor: \"surface.main\",\n          zIndex: 3,\n        }}\n      />\n      <Box\n        sx={{\n          minHeight: `calc(100vh - ${BOTTOM_NAV_HEIGHT}px - ${safeArea.bottom})`,\n          display: \"flex\",\n          flexDirection: \"column\",\n          width: \"100%\",\n          paddingBottom: `${BOTTOM_NAV_HEIGHT}px`,\n          zIndex: 3,\n          backgroundColor: \"surface.main\",\n        }}\n      >\n        <Box\n          sx={{\n            position: \"sticky\",\n            top: 0,\n            display: \"flex\",\n            flexDirection: \"column\",\n            gap: 1,\n            zIndex: 10,\n            backgroundColor: \"surface.main\",\n            pb: 2,\n          }}\n        >\n          <TextField\n            variant=\"filled\"\n            value={currentSearchTerm}\n            onChange={ev => setSearchTerm(ev.target.value)}\n            fullWidth\n            placeholder=\"Search for entities\"\n            autoFocus\n            InputProps={{\n              disableUnderline: true,\n              startAdornment: (\n                <IconButton onClick={onClose}>\n                  <ArrowBack />\n                </IconButton>\n              ),\n              endAdornment: currentSearchTerm ? (\n                <IconButton onClick={() => setSearchTerm(\"\")}>\n                  <Close />\n                </IconButton>\n              ) : undefined,\n              sx: { pl: 1, borderRadius: 0 },\n            }}\n            sx={{\n              \"& input\": {\n                py: 2,\n              },\n            }}\n          />\n          <WatchlistCategoryFilter\n            categories={categories}\n            counts={{}}\n            onChange={category => setFilter(category)}\n          />\n        </Box>\n        <Box\n          sx={{\n            flexGrow: 1,\n            display: \"flex\",\n            // The FAB will change to the other style, replace the pb with the constant when update it.\n            pb: 2,\n          }}\n        >\n          <WatchlistSuggestionListMobile\n            watchlist={watchlist}\n            hasFilter={Boolean(filter)}\n            hasMore={hasMore}\n            fetchNextPage={fetchNextPage}\n            pages={data?.pages ?? []}\n            included={included}\n            isLoading={areSuggestionsLoading}\n            onAddSuggestions={onAddSuggestions}\n            isPatching={isPatching}\n          />\n        </Box>\n      </Box>\n    </>\n  )\n}\n\nexport { FullScreenSuggestions }\n"],"names":["FullScreenSuggestions","onClose","included","onAddSuggestions","categories","isPatching","watchlist","filter","setFilter","useState","undefined","searchTerm","setSearchTerm","currentSearchTerm","useDebouncedState","data","isLoading","areSuggestionsLoading","hasNextPage","hasMore","fetchNextPage","useWatchlistSuggestions","query","category","getAllWatchlistCategories","safeArea","useDeviceInfo","Box","sx","position","width","height","top","backgroundColor","zIndex","minHeight","BOTTOM_NAV_HEIGHT","bottom","display","flexDirection","paddingBottom","gap","pb","TextField","variant","value","onChange","ev","target","fullWidth","placeholder","autoFocus","InputProps","disableUnderline","startAdornment","IconButton","onClick","ArrowBack","endAdornment","Close","pl","borderRadius","py","WatchlistCategoryFilter","counts","flexGrow","WatchlistSuggestionListMobile","hasFilter","Boolean","pages"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAyISA;;;eAAAA;;;;uBAzIgB;uBAES;4BACQ;4BAEF;qCACN;wBACJ;sBACa;uBACV;yCACO;+CACM;AAW9C,MAAMA,wBAAwB,CAAC,EAC7BC,OAAO,EACPC,QAAQ,EACRC,gBAAgB,EAChBC,UAAU,EACVC,UAAU,EACVC,SAAS,EACH;IACN,MAAM,CAACC,QAAQC,UAAU,GAAGC,IAAAA,eAAQ,EAAqBC;IACzD,MAAM,CAACC,YAAYC,eAAeC,kBAAkB,GAAGC,IAAAA,wBAAiB,EAAC;IACzE,MAAM,EACJC,IAAI,EACJC,WAAWC,qBAAqB,EAChCC,aAAaC,OAAO,EACpBC,aAAa,EACd,GAAGC,IAAAA,mCAAuB,EAAC;QAC1BC,OAAOX;QACPY,UAAUhB,SAAS;YAACA;SAAO,GAAGiB,IAAAA,qCAAyB,EAACb,YAAYP;IACtE;IAEA,MAAM,EAAEqB,QAAQ,EAAE,GAAGC,IAAAA,qBAAa;QAmFjBX;IAjFjB,qBACE;;0BACE,qBAACY,SAAG;gBACFC,IAAI;oBACFC,UAAU;oBACVC,OAAO;oBACPC,QAAQ;oBACRC,KAAK;oBACLC,iBAAiB;oBACjBC,QAAQ;gBACV;;0BAEF,sBAACP,SAAG;gBACFC,IAAI;oBACFO,WAAW,CAAC,aAAa,EAAEC,sCAAiB,CAAC,KAAK,EAAEX,SAASY,MAAM,CAAC,CAAC,CAAC;oBACtEC,SAAS;oBACTC,eAAe;oBACfT,OAAO;oBACPU,eAAe,CAAC,EAAEJ,sCAAiB,CAAC,EAAE,CAAC;oBACvCF,QAAQ;oBACRD,iBAAiB;gBACnB;;kCAEA,sBAACN,SAAG;wBACFC,IAAI;4BACFC,UAAU;4BACVG,KAAK;4BACLM,SAAS;4BACTC,eAAe;4BACfE,KAAK;4BACLP,QAAQ;4BACRD,iBAAiB;4BACjBS,IAAI;wBACN;;0CAEA,qBAACC,eAAS;gCACRC,SAAQ;gCACRC,OAAOhC;gCACPiC,UAAUC,CAAAA,KAAMnC,cAAcmC,GAAGC,MAAM,CAACH,KAAK;gCAC7CI,SAAS;gCACTC,aAAY;gCACZC,SAAS;gCACTC,YAAY;oCACVC,kBAAkB;oCAClBC,8BACE,qBAACC,gBAAU;wCAACC,SAASvD;kDACnB,cAAA,qBAACwD,gBAAS;;oCAGdC,cAAc7C,kCACZ,qBAAC0C,gBAAU;wCAACC,SAAS,IAAM5C,cAAc;kDACvC,cAAA,qBAAC+C,YAAK;yCAENjD;oCACJkB,IAAI;wCAAEgC,IAAI;wCAAGC,cAAc;oCAAE;gCAC/B;gCACAjC,IAAI;oCACF,WAAW;wCACTkC,IAAI;oCACN;gCACF;;0CAEF,qBAACC,gDAAuB;gCACtB3D,YAAYA;gCACZ4D,QAAQ,CAAC;gCACTlB,UAAUvB,CAAAA,WAAYf,UAAUe;;;;kCAGpC,qBAACI,SAAG;wBACFC,IAAI;4BACFqC,UAAU;4BACV3B,SAAS;4BACT,2FAA2F;4BAC3FI,IAAI;wBACN;kCAEA,cAAA,qBAACwB,4DAA6B;4BAC5B5D,WAAWA;4BACX6D,WAAWC,QAAQ7D;4BACnBY,SAASA;4BACTC,eAAeA;4BACfiD,OAAOtD,CAAAA,cAAAA,iBAAAA,2BAAAA,KAAMsD,KAAK,cAAXtD,yBAAAA,cAAe,EAAE;4BACxBb,UAAUA;4BACVc,WAAWC;4BACXd,kBAAkBA;4BAClBE,YAAYA;;;;;;;AAMxB"}