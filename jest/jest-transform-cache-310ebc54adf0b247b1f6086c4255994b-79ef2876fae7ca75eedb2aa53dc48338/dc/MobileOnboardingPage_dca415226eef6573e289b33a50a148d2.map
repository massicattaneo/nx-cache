{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/apps/client-web/src/app/pages/MobileOnboardingPage/MobileOnboardingPage.tsx"],"sourcesContent":["import { useLayoutEffect, useState } from \"react\"\nimport { useTranslation } from \"react-i18next\"\nimport { MOBILE_ONBOARDING_BANNER_KEY } from \"@rp/common/utils\"\nimport { BigdataLogoWhite } from \"@rp/react/common/assets\"\nimport { promptMobileWebCustomerIo } from \"@rp/react/common/customer-io\"\nimport {\n  shouldShowMobileOnboardingComponent,\n  useDeviceInfo,\n  useMobileNativePopup,\n} from \"@rp/react/web/common/hooks\"\nimport { Box, Button, Container, Typography, useTheme } from \"@rp/react/web/mui/core\"\nimport { Android, Apple } from \"@rp/react/web/mui/icons\"\nimport GridSVG from \"./assets/grid.svg\"\nimport IconsGridSVG from \"./assets/iconsGrid.svg\"\n\ntype Props = {\n  onPressContinueWeb: () => void\n  deepLinkURL: string\n}\n\nfunction MobileOnboardingPage({ onPressContinueWeb, deepLinkURL }: Props) {\n  const theme = useTheme()\n  const { t } = useTranslation()\n  const { isAndroid, isIOS } = useDeviceInfo()\n  //only for animation purposes\n  const [isUnmounting, setIsUnmounting] = useState(false)\n  const { setDisplayState } = useMobileNativePopup(MOBILE_ONBOARDING_BANNER_KEY)\n\n  useLayoutEffect(() => {\n    promptMobileWebCustomerIo.sendPromptMobileWebInteraction({\n      action: \"promptShown\",\n      promptType: \"modal\",\n    })\n    //set invisible the banner in this screen only\n    setDisplayState(false)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const OSSwitchHandler = () => {\n    if (isAndroid) {\n      return {\n        title: t(\"mobileOnboardingPage.android\"),\n        iconButtonComponent: <Android sx={{ color: \"#34A853\" }} />,\n      }\n    }\n    if (isIOS) {\n      return {\n        title: t(\"mobileOnboardingPage.ios\"),\n        iconButtonComponent: <Apple sx={{ color: theme.palette.surface.background }} />,\n      }\n    }\n  }\n\n  const handleContinue = () => {\n    setIsUnmounting(true)\n    setTimeout(() => {\n      onPressContinueWeb()\n      promptMobileWebCustomerIo.sendPromptMobileWebInteraction({\n        action: \"dismiss\",\n        promptType: \"modal\",\n      })\n      //shows banner if the condition is met\n      setDisplayState(shouldShowMobileOnboardingComponent(MOBILE_ONBOARDING_BANNER_KEY))\n    }, 500)\n  }\n\n  const handleGetAppButtonClick = () => {\n    promptMobileWebCustomerIo.sendPromptMobileWebInteraction({\n      action: \"getApp\",\n      promptType: \"modal\",\n    })\n    window.open(deepLinkURL, \"_blank\", \"noopener,noreferrer\")\n  }\n\n  return (\n    <Box\n      minHeight={\"100svh\"}\n      display={\"flex\"}\n      flexDirection={\"column\"}\n      position={\"relative\"}\n      sx={{\n        background: theme.palette.surface.background,\n        animation: isUnmounting ? \"fadeOut 0.5s ease-out forwards\" : \"none\",\n        \"@keyframes fadeOut\": {\n          from: {\n            opacity: 1,\n          },\n          to: {\n            opacity: 0,\n          },\n        },\n      }}\n    >\n      {/* Grid Background */}\n      <Box component={GridSVG} position={\"absolute\"} zIndex={1} width={\"100%\"} height={\"90%\"} />\n      {/* Shadow on top of grid */}\n      <Box\n        position={\"absolute\"}\n        top={0}\n        left={0}\n        right={0}\n        height={\"50%\"}\n        zIndex={1}\n        sx={{\n          background: `linear-gradient(${theme.palette.surface.background} 0%, rgba(0,0,0,0) 100%)`,\n        }}\n      />\n      {/* Background Icons on the right*/}\n      <Box component={IconsGridSVG} position={\"absolute\"} top={\"20%\"} left={\"75%\"} zIndex={2} />\n\n      <Container\n        maxWidth=\"sm\"\n        sx={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          alignItems: \"center\",\n          justifyContent: \"space-between\",\n          py: 4,\n          flex: 1,\n          position: \"relative\",\n          zIndex: 2,\n        }}\n      >\n        {/* Logo */}\n        <BigdataLogoWhite width={194} />\n\n        {/* Main Content */}\n        <Box textAlign={\"center\"}>\n          <Typography mt={2} lineHeight={\"41px\"} fontSize={\"34px\"} variant=\"moderno\">\n            {`${t(\"mobileOnboardingPage.title\", { SO: OSSwitchHandler()?.title })}`}\n          </Typography>\n        </Box>\n        <Box textAlign={\"center\"} px={\"16px\"}>\n          <Button\n            component=\"button\"\n            onClick={handleGetAppButtonClick}\n            variant=\"contained\"\n            startIcon={OSSwitchHandler()?.iconButtonComponent}\n            size=\"large\"\n            fullWidth\n            sx={{\n              fontFamily: \"'Hanken Grotesk', sans-serif !important\",\n              fontSize: \"16px\",\n              textTransform: \"none\",\n              bgcolor: theme.palette.text.primary,\n              color: theme.palette.surface.background,\n              borderRadius: \"50px\",\n              px: 4,\n              py: 1.5,\n              \"&:active\": {\n                bgcolor: theme.palette.text.primary,\n              },\n              \"&:hover\": {\n                bgcolor: theme.palette.text.primary,\n              },\n              \"&:visited\": {\n                color: theme.palette.surface.background,\n              },\n            }}\n          >\n            {t(\"mobileOnboardingPage.getAppButton\", { SO: OSSwitchHandler()?.title })}\n          </Button>\n\n          <Button\n            fullWidth\n            variant=\"text\"\n            onClick={handleContinue}\n            size=\"large\"\n            sx={{\n              color: theme.palette.textColor[700],\n              mt: 2,\n              fontFamily: \"'Hanken Grotesk', sans-serif !important\",\n              textTransform: \"none\",\n              fontSize: \"16px\",\n            }}\n          >\n            {t(\"mobileOnboardingPage.continueWebVersionButton\")}\n          </Button>\n        </Box>\n      </Container>\n    </Box>\n  )\n}\n\nexport { MobileOnboardingPage }\n"],"names":["MobileOnboardingPage","onPressContinueWeb","deepLinkURL","OSSwitchHandler","theme","useTheme","t","useTranslation","isAndroid","isIOS","useDeviceInfo","isUnmounting","setIsUnmounting","useState","setDisplayState","useMobileNativePopup","MOBILE_ONBOARDING_BANNER_KEY","useLayoutEffect","promptMobileWebCustomerIo","sendPromptMobileWebInteraction","action","promptType","title","iconButtonComponent","Android","sx","color","Apple","palette","surface","background","handleContinue","setTimeout","shouldShowMobileOnboardingComponent","handleGetAppButtonClick","window","open","Box","minHeight","display","flexDirection","position","animation","from","opacity","to","component","GridSVG","zIndex","width","height","top","left","right","IconsGridSVG","Container","maxWidth","alignItems","justifyContent","py","flex","BigdataLogoWhite","textAlign","Typography","mt","lineHeight","fontSize","variant","SO","px","Button","onClick","startIcon","size","fullWidth","fontFamily","textTransform","bgcolor","text","primary","borderRadius","textColor"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"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"}