{"version":3,"sources":["../../src/internals/DragSourceMonitorImpl.ts"],"sourcesContent":["import { invariant } from '@react-dnd/invariant'\nimport type {\n\tDragDropManager,\n\tDragDropMonitor,\n\tIdentifier,\n\tListener,\n\tUnsubscribe,\n\tXYCoord,\n} from 'dnd-core'\n\nimport type { DragSourceMonitor } from '../types/index.js'\n\nlet isCallingCanDrag = false\nlet isCallingIsDragging = false\n\nexport class DragSourceMonitorImpl implements DragSourceMonitor {\n\tprivate internalMonitor: DragDropMonitor\n\tprivate sourceId: Identifier | null = null\n\n\tpublic constructor(manager: DragDropManager) {\n\t\tthis.internalMonitor = manager.getMonitor()\n\t}\n\n\tpublic receiveHandlerId(sourceId: Identifier | null): void {\n\t\tthis.sourceId = sourceId\n\t}\n\n\tpublic getHandlerId(): Identifier | null {\n\t\treturn this.sourceId\n\t}\n\n\tpublic canDrag(): boolean {\n\t\tinvariant(\n\t\t\t!isCallingCanDrag,\n\t\t\t'You may not call monitor.canDrag() inside your canDrag() implementation. ' +\n\t\t\t\t'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor',\n\t\t)\n\n\t\ttry {\n\t\t\tisCallingCanDrag = true\n\t\t\treturn this.internalMonitor.canDragSource(this.sourceId as Identifier)\n\t\t} finally {\n\t\t\tisCallingCanDrag = false\n\t\t}\n\t}\n\n\tpublic isDragging(): boolean {\n\t\tif (!this.sourceId) {\n\t\t\treturn false\n\t\t}\n\t\tinvariant(\n\t\t\t!isCallingIsDragging,\n\t\t\t'You may not call monitor.isDragging() inside your isDragging() implementation. ' +\n\t\t\t\t'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor',\n\t\t)\n\n\t\ttry {\n\t\t\tisCallingIsDragging = true\n\t\t\treturn this.internalMonitor.isDraggingSource(this.sourceId)\n\t\t} finally {\n\t\t\tisCallingIsDragging = false\n\t\t}\n\t}\n\n\tpublic subscribeToStateChange(\n\t\tlistener: Listener,\n\t\toptions?: { handlerIds?: Identifier[] },\n\t): Unsubscribe {\n\t\treturn this.internalMonitor.subscribeToStateChange(listener, options)\n\t}\n\n\tpublic isDraggingSource(sourceId: Identifier): boolean {\n\t\treturn this.internalMonitor.isDraggingSource(sourceId)\n\t}\n\n\tpublic isOverTarget(\n\t\ttargetId: Identifier,\n\t\toptions?: { shallow: boolean },\n\t): boolean {\n\t\treturn this.internalMonitor.isOverTarget(targetId, options)\n\t}\n\n\tpublic getTargetIds(): Identifier[] {\n\t\treturn this.internalMonitor.getTargetIds()\n\t}\n\n\tpublic isSourcePublic(): boolean | null {\n\t\treturn this.internalMonitor.isSourcePublic()\n\t}\n\n\tpublic getSourceId(): Identifier | null {\n\t\treturn this.internalMonitor.getSourceId()\n\t}\n\n\tpublic subscribeToOffsetChange(listener: Listener): Unsubscribe {\n\t\treturn this.internalMonitor.subscribeToOffsetChange(listener)\n\t}\n\n\tpublic canDragSource(sourceId: Identifier): boolean {\n\t\treturn this.internalMonitor.canDragSource(sourceId)\n\t}\n\n\tpublic canDropOnTarget(targetId: Identifier): boolean {\n\t\treturn this.internalMonitor.canDropOnTarget(targetId)\n\t}\n\n\tpublic getItemType(): Identifier | null {\n\t\treturn this.internalMonitor.getItemType()\n\t}\n\n\tpublic getItem(): any {\n\t\treturn this.internalMonitor.getItem()\n\t}\n\n\tpublic getDropResult(): any {\n\t\treturn this.internalMonitor.getDropResult()\n\t}\n\n\tpublic didDrop(): boolean {\n\t\treturn this.internalMonitor.didDrop()\n\t}\n\n\tpublic getInitialClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getInitialClientOffset()\n\t}\n\n\tpublic getInitialSourceClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getInitialSourceClientOffset()\n\t}\n\n\tpublic getSourceClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getSourceClientOffset()\n\t}\n\n\tpublic getClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getClientOffset()\n\t}\n\n\tpublic getDifferenceFromInitialOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getDifferenceFromInitialOffset()\n\t}\n}\n"],"names":["DragSourceMonitorImpl","isCallingCanDrag","isCallingIsDragging","receiveHandlerId","sourceId","getHandlerId","canDrag","invariant","internalMonitor","canDragSource","isDragging","isDraggingSource","subscribeToStateChange","listener","options","isOverTarget","targetId","getTargetIds","isSourcePublic","getSourceId","subscribeToOffsetChange","canDropOnTarget","getItemType","getItem","getDropResult","didDrop","getInitialClientOffset","getInitialSourceClientOffset","getSourceClientOffset","getClientOffset","getDifferenceFromInitialOffset","constructor","manager","getMonitor"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAeaA;;;eAAAA;;;2BAfa;AAY1B,IAAIC,mBAAmB;AACvB,IAAIC,sBAAsB;AAEnB,MAAMF;IAQZG,iBAAwBC,QAA2B,EAAQ;QAC1D,IAAI,CAACA,QAAQ,GAAGA;;IAGjBC,eAAyC;QACxC,OAAO,IAAI,CAACD,QAAQ;;IAGrBE,UAA0B;QACzBC,IAAAA,oBAAS,EACR,CAACN,kBACD,8EACC;QAGF,IAAI;YACHA,mBAAmB;YACnB,OAAO,IAAI,CAACO,eAAe,CAACC,aAAa,CAAC,IAAI,CAACL,QAAQ;iBAC9C;YACTH,mBAAmB;;;IAIrBS,aAA6B;QAC5B,IAAI,CAAC,IAAI,CAACN,QAAQ,EAAE;YACnB,OAAO;;QAERG,IAAAA,oBAAS,EACR,CAACL,qBACD,oFACC;QAGF,IAAI;YACHA,sBAAsB;YACtB,OAAO,IAAI,CAACM,eAAe,CAACG,gBAAgB,CAAC,IAAI,CAACP,QAAQ;iBACjD;YACTF,sBAAsB;;;IAIxBU,uBACCC,QAAkB,EAClBC,OAAuC,EACzB;QACd,OAAO,IAAI,CAACN,eAAe,CAACI,sBAAsB,CAACC,UAAUC;;IAG9DH,iBAAwBP,QAAoB,EAAW;QACtD,OAAO,IAAI,CAACI,eAAe,CAACG,gBAAgB,CAACP;;IAG9CW,aACCC,QAAoB,EACpBF,OAA8B,EACpB;QACV,OAAO,IAAI,CAACN,eAAe,CAACO,YAAY,CAACC,UAAUF;;IAGpDG,eAAoC;QACnC,OAAO,IAAI,CAACT,eAAe,CAACS,YAAY;;IAGzCC,iBAAwC;QACvC,OAAO,IAAI,CAACV,eAAe,CAACU,cAAc;;IAG3CC,cAAwC;QACvC,OAAO,IAAI,CAACX,eAAe,CAACW,WAAW;;IAGxCC,wBAA+BP,QAAkB,EAAe;QAC/D,OAAO,IAAI,CAACL,eAAe,CAACY,uBAAuB,CAACP;;IAGrDJ,cAAqBL,QAAoB,EAAW;QACnD,OAAO,IAAI,CAACI,eAAe,CAACC,aAAa,CAACL;;IAG3CiB,gBAAuBL,QAAoB,EAAW;QACrD,OAAO,IAAI,CAACR,eAAe,CAACa,eAAe,CAACL;;IAG7CM,cAAwC;QACvC,OAAO,IAAI,CAACd,eAAe,CAACc,WAAW;;IAGxCC,UAAsB;QACrB,OAAO,IAAI,CAACf,eAAe,CAACe,OAAO;;IAGpCC,gBAA4B;QAC3B,OAAO,IAAI,CAAChB,eAAe,CAACgB,aAAa;;IAG1CC,UAA0B;QACzB,OAAO,IAAI,CAACjB,eAAe,CAACiB,OAAO;;IAGpCC,yBAAgD;QAC/C,OAAO,IAAI,CAAClB,eAAe,CAACkB,sBAAsB;;IAGnDC,+BAAsD;QACrD,OAAO,IAAI,CAACnB,eAAe,CAACmB,4BAA4B;;IAGzDC,wBAA+C;QAC9C,OAAO,IAAI,CAACpB,eAAe,CAACoB,qBAAqB;;IAGlDC,kBAAyC;QACxC,OAAO,IAAI,CAACrB,eAAe,CAACqB,eAAe;;IAG5CC,iCAAwD;QACvD,OAAO,IAAI,CAACtB,eAAe,CAACsB,8BAA8B;;IAxH3DC,YAAmBC,OAAwB,CAAE;QAF7C,IAAA,CAAQ5B,QAAQ,GAAsB;QAGrC,IAAI,CAACI,eAAe,GAAGwB,QAAQC,UAAU"}