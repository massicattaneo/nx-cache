{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/development/src/lib/database/generators/generateAgentChat.ts"],"sourcesContent":["import { z } from \"zod\"\nimport { bigdataSchemas } from \"@rp/common/contracts\"\nimport { generateDate } from \"./generateDate\"\nimport { generateId } from \"./generateId\"\n\ntype Messages = {\n  requestId: string\n  content: string\n}\n\ntype Query = {\n  query: string\n  documents: Array<{ hd: string }>\n}\n\nconst generateAgentChatMessages = (props: Messages) => {\n  return {\n    complete: (): z.infer<typeof bigdataSchemas.st_agents_CompleteWSResponse> => ({\n      type: \"COMPLETE\",\n      requestId: props.requestId,\n      \"x-amz-requestid\": null,\n    }),\n    answer: (\n      getParts = (content: string) => [{ content }],\n    ): Array<z.infer<typeof bigdataSchemas.st_agents_AnswerWSResponse>> => {\n      return getParts(props.content).map(({ content }) => ({\n        type: \"ANSWER\",\n        requestId: props.requestId,\n        text: content,\n        \"x-amz-requestid\": null,\n        answerId: \"1\",\n      }))\n    },\n    thinking: (\n      thinkingId: string,\n      thinkingContent: string,\n    ): z.infer<typeof bigdataSchemas.st_agents_ThinkingWSResponse> => ({\n      type: \"THINKING\",\n      requestId: props.requestId,\n      thinkingId,\n      text: thinkingContent,\n      \"x-amz-requestid\": null,\n    }),\n\n    action: (\n      actionId: string,\n      toolName: string,\n    ): z.infer<typeof bigdataSchemas.st_agents_ActionWSResponse> => ({\n      type: \"ACTION\",\n      requestId: props.requestId,\n      actionAuditsId: actionId,\n      toolName,\n      \"x-amz-requestid\": null,\n    }),\n\n    actionAudit: (\n      actionAuditId: string,\n      toolName: string,\n      query: Query,\n    ): z.infer<typeof bigdataSchemas.st_agents_ToolAuditWSResponse> => ({\n      type: \"AUDIT\",\n      actionAuditsId: actionAuditId,\n      requestId: props.requestId,\n      \"x-amz-requestid\": null,\n      trace: {\n        auditType: \"SearchAuditV1\",\n        query: { text: query.query },\n        toolId: toolName,\n        results: [\n          {\n            type: \"CQS\",\n            values: query.documents.map(document => ({\n              documentScope: \"news\",\n              hd: document.hd,\n              id: generateId(),\n              language: \"English\",\n              srcKey: \"5A5702\",\n              srcName: \"Benzinga\",\n              chunks: [\n                {\n                  cnum: 1,\n                  id: generateId(),\n                  sentences: [{ pnum: 1, snum: 1 }],\n                  text: \"Test sentence\",\n                  relevance: 0,\n                },\n              ],\n              rpProviderId: \"BZG\",\n              ts: generateDate(),\n            })),\n          },\n        ],\n      },\n    }),\n  }\n}\n\nexport { generateAgentChatMessages }\n"],"names":["generateAgentChatMessages","props","complete","type","requestId","answer","getParts","content","map","text","answerId","thinking","thinkingId","thinkingContent","action","actionId","toolName","actionAuditsId","actionAudit","actionAuditId","query","trace","auditType","toolId","results","values","documents","document","documentScope","hd","id","generateId","language","srcKey","srcName","chunks","cnum","sentences","pnum","snum","relevance","rpProviderId","ts","generateDate"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAiGSA;;;eAAAA;;;8BA/FoB;4BACF;AAY3B,MAAMA,4BAA4B,CAACC;IACjC,OAAO;QACLC,UAAU,IAAoE,CAAA;gBAC5EC,MAAM;gBACNC,WAAWH,MAAMG,SAAS;gBAC1B,mBAAmB;YACrB,CAAA;QACAC,QAAQ,CACNC,WAAW,CAACC,UAAoB;gBAAC;oBAAEA;gBAAQ;aAAE;YAE7C,OAAOD,SAASL,MAAMM,OAAO,EAAEC,GAAG,CAAC,CAAC,EAAED,OAAO,EAAE,GAAM,CAAA;oBACnDJ,MAAM;oBACNC,WAAWH,MAAMG,SAAS;oBAC1BK,MAAMF;oBACN,mBAAmB;oBACnBG,UAAU;gBACZ,CAAA;QACF;QACAC,UAAU,CACRC,YACAC,kBACiE,CAAA;gBACjEV,MAAM;gBACNC,WAAWH,MAAMG,SAAS;gBAC1BQ;gBACAH,MAAMI;gBACN,mBAAmB;YACrB,CAAA;QAEAC,QAAQ,CACNC,UACAC,WAC+D,CAAA;gBAC/Db,MAAM;gBACNC,WAAWH,MAAMG,SAAS;gBAC1Ba,gBAAgBF;gBAChBC;gBACA,mBAAmB;YACrB,CAAA;QAEAE,aAAa,CACXC,eACAH,UACAI,QACkE,CAAA;gBAClEjB,MAAM;gBACNc,gBAAgBE;gBAChBf,WAAWH,MAAMG,SAAS;gBAC1B,mBAAmB;gBACnBiB,OAAO;oBACLC,WAAW;oBACXF,OAAO;wBAAEX,MAAMW,MAAMA,KAAK;oBAAC;oBAC3BG,QAAQP;oBACRQ,SAAS;wBACP;4BACErB,MAAM;4BACNsB,QAAQL,MAAMM,SAAS,CAAClB,GAAG,CAACmB,CAAAA,WAAa,CAAA;oCACvCC,eAAe;oCACfC,IAAIF,SAASE,EAAE;oCACfC,IAAIC,IAAAA,sBAAU;oCACdC,UAAU;oCACVC,QAAQ;oCACRC,SAAS;oCACTC,QAAQ;wCACN;4CACEC,MAAM;4CACNN,IAAIC,IAAAA,sBAAU;4CACdM,WAAW;gDAAC;oDAAEC,MAAM;oDAAGC,MAAM;gDAAE;6CAAE;4CACjC9B,MAAM;4CACN+B,WAAW;wCACb;qCACD;oCACDC,cAAc;oCACdC,IAAIC,IAAAA,0BAAY;gCAClB,CAAA;wBACF;qBACD;gBACH;YACF,CAAA;IACF;AACF"}