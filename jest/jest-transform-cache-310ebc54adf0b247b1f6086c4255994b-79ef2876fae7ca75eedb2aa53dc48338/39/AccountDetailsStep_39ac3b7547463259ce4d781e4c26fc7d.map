{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/apps/client-web/src/app/pages/SignUp/Steps/AccountDetailsStep.tsx"],"sourcesContent":["import { useForm } from \"react-hook-form\"\nimport { Link } from \"react-router-dom\"\nimport { z } from \"zod\"\nimport { useSignUp } from \"@clerk/clerk-react\"\nimport { zodResolver } from \"@hookform/resolvers/zod\"\nimport { displayError } from \"@rp/common/utils\"\nimport {\n  LoginContainer,\n  LoginEmailField,\n  SocialSignInButtons,\n} from \"@rp/react/web/common/composite-components\"\nimport { useFromNative } from \"@rp/react/web/common/hooks\"\nimport { useSnackbar } from \"@rp/react/web/common/providers\"\nimport { reportError } from \"@rp/react/web/common/vendors/utils\"\nimport { Button, Divider, Typography } from \"@rp/react/web/mui/core\"\nimport { PRIVACY_POLICIES_ROUTE, TERMS_OF_USE_ROUTE } from \"@rp/react/web/router\"\nimport { SignUpStepProps } from \"../context\"\nimport { MissingRequirements } from \"./MissingRequirements\"\n\nconst formSchema = z.object({\n  email: z.string().email().max(70, \"Your email can be at most 70 characters.\"),\n})\n\ntype FormValues = z.infer<typeof formSchema>\n\nconst AccountDetailsStep = (props: SignUpStepProps) => {\n  const { enqueueError } = useSnackbar()\n  const { signUp, isLoaded } = useSignUp()\n  const { setFromNative, isFromNative } = useFromNative()\n\n  const form = useForm<FormValues>({\n    resolver: zodResolver(formSchema),\n  })\n\n  const handleSubmit = async (values: FormValues) => {\n    if (!isLoaded) {\n      return\n    }\n    setFromNative(values.email)\n    try {\n      await signUp.create({ emailAddress: values.email })\n      props.onComplete()\n    } catch (error: unknown) {\n      reportError(error as Error, {}, () => {})\n      enqueueError(displayError(error))\n      return\n    }\n  }\n\n  if (signUp?.status === \"missing_requirements\" && signUp.emailAddress) {\n    return (\n      <MissingRequirements\n        onComplete={() => {\n          props.onComplete()\n          props.onComplete()\n        }}\n      />\n    )\n  }\n\n  return (\n    <LoginContainer pageTitle=\"Create your account\" title=\"Create your account\" hidePolicies>\n      <form\n        key=\"sign-up-form\"\n        onSubmit={form.handleSubmit(handleSubmit)}\n        style={{ width: \"100%\", display: \"flex\", flexDirection: \"column\", gap: 16 }}\n      >\n        <LoginEmailField\n          {...form.register(\"email\")}\n          error={form.formState.errors.email !== undefined}\n          helperText={form.formState.errors.email?.message}\n        />\n        <Button\n          variant=\"contained\"\n          sx={{ fontSize: 16 }}\n          type=\"submit\"\n          fullWidth\n          disabled={Object.keys(form.formState.errors).length > 0}\n        >\n          Continue\n        </Button>\n      </form>\n      {!isFromNative && (\n        <>\n          <Divider sx={{ width: \"100%\", marginBottom: 2 }}>or</Divider>\n          <SocialSignInButtons />\n          <Typography\n            variant=\"caption\"\n            color=\"text.secondary\"\n            mt={2}\n            maxWidth=\"300px\"\n            textAlign=\"center\"\n            fontSize={14}\n            lineHeight={2}\n          >\n            By signing up, you agree to Bigdata's <br />\n            <Link\n              to={TERMS_OF_USE_ROUTE}\n              target=\"_blank\"\n              rel=\"nopener\"\n              style={{ color: \"inherit\" }}\n            >\n              Terms and Conditions\n            </Link>{\" \"}\n            &{\" \"}\n            <Link\n              to={PRIVACY_POLICIES_ROUTE}\n              target=\"_blank\"\n              rel=\"nopener\"\n              style={{ color: \"inherit\" }}\n            >\n              Privacy Policy\n            </Link>\n            .\n          </Typography>\n        </>\n      )}\n    </LoginContainer>\n  )\n}\n\nexport { AccountDetailsStep }\n"],"names":["AccountDetailsStep","formSchema","z","object","email","string","max","props","form","enqueueError","useSnackbar","signUp","isLoaded","useSignUp","setFromNative","isFromNative","useFromNative","useForm","resolver","zodResolver","handleSubmit","values","create","emailAddress","onComplete","error","reportError","displayError","status","MissingRequirements","LoginContainer","pageTitle","title","hidePolicies","onSubmit","style","width","display","flexDirection","gap","LoginEmailField","register","formState","errors","undefined","helperText","message","Button","variant","sx","fontSize","type","fullWidth","disabled","Object","keys","length","Divider","marginBottom","SocialSignInButtons","Typography","color","mt","maxWidth","textAlign","lineHeight","br","Link","to","TERMS_OF_USE_ROUTE","target","rel","PRIVACY_POLICIES_ROUTE"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAyHSA;;;eAAAA;;;;+BAzHe;gCACH;qBACH;4BACQ;sBACE;uBACC;qCAKtB;uBACuB;2BACF;wBACA;sBACgB;wBACe;qCAEvB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEpC,MAAMC,aAAaC,MAAC,CAACC,MAAM,CAAC;IAC1BC,OAAOF,MAAC,CAACG,MAAM,GAAGD,KAAK,GAAGE,GAAG,CAAC,IAAI;AACpC;AAIA,MAAMN,qBAAqB,CAACO;QA6CNC;IA5CpB,MAAM,EAAEC,YAAY,EAAE,GAAGC,IAAAA,sBAAW;IACpC,MAAM,EAAEC,MAAM,EAAEC,QAAQ,EAAE,GAAGC,IAAAA,qBAAS;IACtC,MAAM,EAAEC,aAAa,EAAEC,YAAY,EAAE,GAAGC,IAAAA,oBAAa;IAErD,MAAMR,OAAOS,IAAAA,sBAAO,EAAa;QAC/BC,UAAUC,IAAAA,iBAAW,EAAClB;IACxB;IAEA,MAAMmB,eAAe,OAAOC;QAC1B,IAAI,CAACT,UAAU;YACb;QACF;QACAE,cAAcO,OAAOjB,KAAK;QAC1B,IAAI;YACF,MAAMO,OAAOW,MAAM,CAAC;gBAAEC,cAAcF,OAAOjB,KAAK;YAAC;YACjDG,MAAMiB,UAAU;QAClB,EAAE,OAAOC,OAAgB;YACvBC,IAAAA,mBAAW,EAACD,OAAgB,CAAC,GAAG,KAAO;YACvChB,aAAakB,IAAAA,mBAAY,EAACF;YAC1B;QACF;IACF;IAEA,IAAId,CAAAA,mBAAAA,6BAAAA,OAAQiB,MAAM,MAAK,0BAA0BjB,OAAOY,YAAY,EAAE;QACpE,qBACE,qBAACM,wCAAmB;YAClBL,YAAY;gBACVjB,MAAMiB,UAAU;gBAChBjB,MAAMiB,UAAU;YAClB;;IAGN;IAEA,qBACE,sBAACM,mCAAc;QAACC,WAAU;QAAsBC,OAAM;QAAsBC,YAAY;;0BACtF,sBAACzB;gBAEC0B,UAAU1B,KAAKY,YAAY,CAACA;gBAC5Be,OAAO;oBAAEC,OAAO;oBAAQC,SAAS;oBAAQC,eAAe;oBAAUC,KAAK;gBAAG;;kCAE1E,qBAACC,oCAAe,0CACVhC,KAAKiC,QAAQ,CAAC;wBAClBhB,OAAOjB,KAAKkC,SAAS,CAACC,MAAM,CAACvC,KAAK,KAAKwC;wBACvCC,UAAU,GAAErC,+BAAAA,KAAKkC,SAAS,CAACC,MAAM,CAACvC,KAAK,cAA3BI,mDAAAA,6BAA6BsC,OAAO;;kCAElD,qBAACC,YAAM;wBACLC,SAAQ;wBACRC,IAAI;4BAAEC,UAAU;wBAAG;wBACnBC,MAAK;wBACLC,SAAS;wBACTC,UAAUC,OAAOC,IAAI,CAAC/C,KAAKkC,SAAS,CAACC,MAAM,EAAEa,MAAM,GAAG;kCACvD;;;eAfG;YAmBL,CAACzC,8BACA;;kCACE,qBAAC0C,aAAO;wBAACR,IAAI;4BAAEb,OAAO;4BAAQsB,cAAc;wBAAE;kCAAG;;kCACjD,qBAACC,wCAAmB;kCACpB,sBAACC,gBAAU;wBACTZ,SAAQ;wBACRa,OAAM;wBACNC,IAAI;wBACJC,UAAS;wBACTC,WAAU;wBACVd,UAAU;wBACVe,YAAY;;4BACb;0CACuC,qBAACC;0CACvC,qBAACC,oBAAI;gCACHC,IAAIC,0BAAkB;gCACtBC,QAAO;gCACPC,KAAI;gCACJpC,OAAO;oCAAE0B,OAAO;gCAAU;0CAC3B;;4BAEO;4BAAI;4BACV;0CACF,qBAACM,oBAAI;gCACHC,IAAII,8BAAsB;gCAC1BF,QAAO;gCACPC,KAAI;gCACJpC,OAAO;oCAAE0B,OAAO;gCAAU;0CAC3B;;4BAEM;;;;;;;AAOnB"}