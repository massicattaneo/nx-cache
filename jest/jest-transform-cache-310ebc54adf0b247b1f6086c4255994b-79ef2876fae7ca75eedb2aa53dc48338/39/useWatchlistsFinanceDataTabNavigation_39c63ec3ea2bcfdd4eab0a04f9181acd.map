{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/watchlists/src/lib/hooks/useWatchlistsFinanceDataTabNavigation.ts"],"sourcesContent":["import { useCallback, useState } from \"react\"\nimport { useSearchParams } from \"react-router-dom\"\nimport { z } from \"zod\"\nimport { useReplaceSearchParam } from \"@rp/react/web/common/hooks\"\nimport { financeDataTabTablesSchema } from \"../financeDataTabTablesSchema\"\nimport { useWatchlistsDataTabsFeatureFlag } from \"./useWatchlistsDataTabsFeatureFlag\"\n\nexport type FinanceDataTabs = z.infer<typeof financeDataTabTablesSchema>\n\nconst getTabParamValue = (tab: string, active: Array<FinanceDataTabs>): FinanceDataTabs => {\n  const parse = financeDataTabTablesSchema.safeParse(tab)\n  if (parse.success && active.includes(parse.data)) return parse.data\n  return \"pricing\"\n}\n\nconst change = () => {}\n\nexport const useWatchlistsFinanceDataTabNavigation = (defaultTab?: FinanceDataTabs) => {\n  const [active] = useWatchlistsDataTabsFeatureFlag()\n  const [searchParams] = useSearchParams()\n  const tabParam = searchParams.get(\"tab\") ?? \"\"\n  const replace = useReplaceSearchParam()\n  const tabFromParam = getTabParamValue(tabParam, active)\n  const [tabValue, setTabValue] = useState<FinanceDataTabs>(\n    defaultTab !== undefined && tabFromParam === \"pricing\" ? defaultTab : tabFromParam,\n  )\n  const handleChange = useCallback(\n    (newValue: FinanceDataTabs) => {\n      if (newValue === \"pricing\") {\n        replace(() => undefined)\n      } else {\n        financeDataTabTablesSchema.options.forEach(key => {\n          if (newValue === key) replace(() => key)\n        })\n      }\n      setTabValue(newValue)\n    },\n    [replace],\n  )\n\n  financeDataTabTablesSchema.options.forEach(key => {\n    if (!active.includes(key) && tabValue === key)\n      return { tabValue: \"pricing\" as const, handleChange: change }\n  })\n\n  return { tabValue, handleChange }\n}\n"],"names":["useWatchlistsFinanceDataTabNavigation","getTabParamValue","tab","active","parse","financeDataTabTablesSchema","safeParse","success","includes","data","change","defaultTab","useWatchlistsDataTabsFeatureFlag","searchParams","useSearchParams","tabParam","get","replace","useReplaceSearchParam","tabFromParam","tabValue","setTabValue","useState","undefined","handleChange","useCallback","newValue","options","forEach","key"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAiBaA;;;eAAAA;;;uBAjByB;gCACN;uBAEM;4CACK;kDACM;AAIjD,MAAMC,mBAAmB,CAACC,KAAaC;IACrC,MAAMC,QAAQC,sDAA0B,CAACC,SAAS,CAACJ;IACnD,IAAIE,MAAMG,OAAO,IAAIJ,OAAOK,QAAQ,CAACJ,MAAMK,IAAI,GAAG,OAAOL,MAAMK,IAAI;IACnE,OAAO;AACT;AAEA,MAAMC,SAAS,KAAO;AAEf,MAAMV,wCAAwC,CAACW;IACpD,MAAM,CAACR,OAAO,GAAGS,IAAAA,kEAAgC;IACjD,MAAM,CAACC,aAAa,GAAGC,IAAAA,+BAAe;QACrBD;IAAjB,MAAME,WAAWF,CAAAA,oBAAAA,aAAaG,GAAG,CAAC,oBAAjBH,+BAAAA,oBAA2B;IAC5C,MAAMI,UAAUC,IAAAA,4BAAqB;IACrC,MAAMC,eAAelB,iBAAiBc,UAAUZ;IAChD,MAAM,CAACiB,UAAUC,YAAY,GAAGC,IAAAA,eAAQ,EACtCX,eAAeY,aAAaJ,iBAAiB,YAAYR,aAAaQ;IAExE,MAAMK,eAAeC,IAAAA,kBAAW,EAC9B,CAACC;QACC,IAAIA,aAAa,WAAW;YAC1BT,QAAQ,IAAMM;QAChB,OAAO;YACLlB,sDAA0B,CAACsB,OAAO,CAACC,OAAO,CAACC,CAAAA;gBACzC,IAAIH,aAAaG,KAAKZ,QAAQ,IAAMY;YACtC;QACF;QACAR,YAAYK;IACd,GACA;QAACT;KAAQ;IAGXZ,sDAA0B,CAACsB,OAAO,CAACC,OAAO,CAACC,CAAAA;QACzC,IAAI,CAAC1B,OAAOK,QAAQ,CAACqB,QAAQT,aAAaS,KACxC,OAAO;YAAET,UAAU;YAAoBI,cAAcd;QAAO;IAChE;IAEA,OAAO;QAAEU;QAAUI;IAAa;AAClC"}