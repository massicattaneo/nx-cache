aa6ca31f1a59284a6fcc03f4ca4c1473
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "useAgentEvents", {
    enumerable: true,
    get: function() {
        return useAgentEvents;
    }
});
const _react = require("react");
const _utils = require("@rp/common/utils");
const _customerio = require("@rp/react/common/customer-io");
const _useSSE = require("../useSSE");
const _handlers = require("./handlers");
const _getPromptWithContext = require("./utils/getPromptWithContext");
function _define_property(obj, key, value) {
    if (key in obj) {
        Object.defineProperty(obj, key, {
            value: value,
            enumerable: true,
            configurable: true,
            writable: true
        });
    } else {
        obj[key] = value;
    }
    return obj;
}
function _object_spread(target) {
    for(var i = 1; i < arguments.length; i++){
        var source = arguments[i] != null ? arguments[i] : {};
        var ownKeys = Object.keys(source);
        if (typeof Object.getOwnPropertySymbols === "function") {
            ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {
                return Object.getOwnPropertyDescriptor(source, sym).enumerable;
            }));
        }
        ownKeys.forEach(function(key) {
            _define_property(target, key, source[key]);
        });
    }
    return target;
}
function ownKeys(object, enumerableOnly) {
    var keys = Object.keys(object);
    if (Object.getOwnPropertySymbols) {
        var symbols = Object.getOwnPropertySymbols(object);
        if (enumerableOnly) {
            symbols = symbols.filter(function(sym) {
                return Object.getOwnPropertyDescriptor(object, sym).enumerable;
            });
        }
        keys.push.apply(keys, symbols);
    }
    return keys;
}
function _object_spread_props(target, source) {
    source = source != null ? source : {};
    if (Object.getOwnPropertyDescriptors) {
        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
        ownKeys(Object(source)).forEach(function(key) {
            Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
        });
    }
    return target;
}
var _getApiEnvironmentConfig_url;
const EVENT_SOURCE_URL = (_getApiEnvironmentConfig_url = (0, _utils.getApiEnvironmentConfig)("agents").url) !== null && _getApiEnvironmentConfig_url !== void 0 ? _getApiEnvironmentConfig_url : "";
const PATH = "/bff/v1/agent/execute";
const defaultAgentData = {
    frames: [],
    answerStream: [],
    closed: false,
    isLoading: true,
    error: undefined,
    requestId: "",
    references: {}
};
function useAgentEvents(props) {
    const { chatId, onComplete, agentEnabled, onError } = props;
    const onCompleteCallbackExecuted = (0, _react.useRef)(false);
    const [agentData, setAgentData] = (0, _react.useState)(defaultAgentData);
    const [isFrameCompleted, setFrameCompleted] = (0, _react.useState)(false);
    const handleErrorMessage = (0, _react.useCallback)(function handleErrorMessage(disposeConnection, data) {
        if (data) {
            setAgentData((prevState)=>{
                var _data_requestId;
                return _object_spread_props(_object_spread({}, prevState), {
                    error: data.error,
                    requestId: (_data_requestId = data.requestId) !== null && _data_requestId !== void 0 ? _data_requestId : prevState.requestId
                });
            });
        }
        var _data_error;
        onError === null || onError === void 0 ? void 0 : onError({
            response: "",
            responseBlocks: [],
            timings: {
                start: Date.now()
            },
            auditTraces: [],
            originSources: [],
            interactionType: "user_message",
            statusData: {
                step: "completed",
                queries: []
            },
            auditBlocks: []
        }, {
            message: (_data_error = data === null || data === void 0 ? void 0 : data.error) !== null && _data_error !== void 0 ? _data_error : "WebSocket connection error",
            type: "ERROR"
        });
        disposeConnection();
    }, [
        onError
    ]);
    const getBody = (0, _react.useCallback)(function getBody() {
        const requestId = `${Date.now()}`;
        setAgentData(_object_spread_props(_object_spread({}, defaultAgentData), {
            requestId
        }));
        var _props_executionMode;
        _customerio.chatCustomerIo.inputAgentPromptSubmit({
            chatId: props.chatId,
            executionMode: (_props_executionMode = props.executionMode) !== null && _props_executionMode !== void 0 ? _props_executionMode : "research",
            requestId
        });
        return JSON.stringify({
            requestId,
            chat_id: props.chatId,
            message: (0, _getPromptWithContext.getPromptWithContext)(props.inputMessage, props.context),
            mode: props.executionMode
        });
    }, [
        props.chatId,
        props.context,
        props.executionMode,
        props.inputMessage
    ]);
    const handleAgentEvent = (0, _react.useCallback)(function handleAgentEvent(event, disposeConnection) {
        const data = JSON.parse(event.data);
        switch(data.type){
            case "THINKING":
                setAgentData((prev)=>(0, _handlers.handleThinkingMessage)(prev, data));
                break;
            case "ACTION":
                setAgentData((prev)=>(0, _handlers.handleActionMessage)(prev, data));
                break;
            case "AUDIT":
                setAgentData((prev)=>(0, _handlers.handleAuditMessage)(prev, data));
                break;
            case "ANSWER":
                setAgentData((prev)=>(0, _handlers.handleAnswerMessage)(prev, data));
                break;
            case "GROUNDING":
                if (!props.enableAgentGrounding) {
                    break;
                }
                setAgentData((prev)=>(0, _handlers.handleGroundingMessage)(prev, data));
                break;
            case "COMPLETE":
                setFrameCompleted(true);
                setAgentData((prev)=>(0, _handlers.handleCompleteMessage)(prev, {
                        executionMode: props.executionMode,
                        chatId
                    }));
                break;
            case "ERROR":
                handleErrorMessage(disposeConnection, data);
                break;
            default:
                break;
        }
    }, [
        chatId,
        handleErrorMessage,
        props.executionMode,
        props.enableAgentGrounding
    ]);
    (0, _react.useEffect)(()=>{
        if (isFrameCompleted && agentEnabled && !onCompleteCallbackExecuted.current) {
            onComplete(agentData);
            onCompleteCallbackExecuted.current = true;
        }
    }, [
        isFrameCompleted,
        agentData,
        agentEnabled,
        onComplete
    ]);
    var _props_agentEndpointUrl;
    (0, _useSSE.useSSE)({
        url: `${(_props_agentEndpointUrl = props.agentEndpointUrl) !== null && _props_agentEndpointUrl !== void 0 ? _props_agentEndpointUrl : EVENT_SOURCE_URL}${PATH}`,
        enabled: agentEnabled !== null && agentEnabled !== void 0 ? agentEnabled : false,
        getBody,
        onError: handleErrorMessage,
        onMessage: handleAgentEvent
    });
    return {
        agentData
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tY2F0dGFuZW8vd29ya3NwYWNlL2Zyb250ZW5kL2xpYnMvcmVhY3QvY29tbW9uL2hvb2tzL3NyYy9saWIvdXNlQWdlbnQvdXNlQWdlbnRFdmVudHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiXG5pbXBvcnQgeyBnZXRBcGlFbnZpcm9ubWVudENvbmZpZyB9IGZyb20gXCJAcnAvY29tbW9uL3V0aWxzXCJcbmltcG9ydCB7IGNoYXRDdXN0b21lcklvIH0gZnJvbSBcIkBycC9yZWFjdC9jb21tb24vY3VzdG9tZXItaW9cIlxuaW1wb3J0IHsgTGxtU3VtbWFyeUVycm9yIH0gZnJvbSBcIi4uL3VzZUNoYXQvdXNlQ2hhdC50eXBlc1wiXG5pbXBvcnQgeyB1c2VTU0UgfSBmcm9tIFwiLi4vdXNlU1NFXCJcbmltcG9ydCB7XG4gIGhhbmRsZUFjdGlvbk1lc3NhZ2UsXG4gIGhhbmRsZUFuc3dlck1lc3NhZ2UsXG4gIGhhbmRsZUF1ZGl0TWVzc2FnZSxcbiAgaGFuZGxlQ29tcGxldGVNZXNzYWdlLFxuICBoYW5kbGVHcm91bmRpbmdNZXNzYWdlLFxuICBoYW5kbGVUaGlua2luZ01lc3NhZ2UsXG59IGZyb20gXCIuL2hhbmRsZXJzXCJcbmltcG9ydCB7IFN1bW1hcnlTdGF0ZSB9IGZyb20gXCIuL3VzZUFnZW50XCJcbmltcG9ydCB7XG4gIEFnZW50TWVzc2FnZSxcbiAgQWdlbnRNZXNzYWdlU3RhdGUsXG4gIENoYXRJbnRlcmFjdGlvbkNvbnRleHQsXG4gIEVycm9yTWVzc2FnZSxcbn0gZnJvbSBcIi4vdXNlQWdlbnQudHlwZXNcIlxuaW1wb3J0IHsgZ2V0UHJvbXB0V2l0aENvbnRleHQgfSBmcm9tIFwiLi91dGlscy9nZXRQcm9tcHRXaXRoQ29udGV4dFwiXG5cbmNvbnN0IEVWRU5UX1NPVVJDRV9VUkwgPSBnZXRBcGlFbnZpcm9ubWVudENvbmZpZyhcImFnZW50c1wiKS51cmwgPz8gXCJcIlxuY29uc3QgUEFUSCA9IFwiL2JmZi92MS9hZ2VudC9leGVjdXRlXCJcblxudHlwZSBQcm9wcyA9IHtcbiAgY2hhdElkOiBzdHJpbmdcbiAgYWdlbnRFbmFibGVkPzogYm9vbGVhblxuICBleGVjdXRpb25Nb2RlPzogXCJjaGF0XCIgfCBcInJlc2VhcmNoXCJcbiAgaW5wdXRNZXNzYWdlOiBzdHJpbmdcbiAgb25Db21wbGV0ZTogKG1lc3NhZ2VzOiBBZ2VudE1lc3NhZ2VTdGF0ZSkgPT4gdm9pZFxuICBvbkVycm9yPzogKGRhdGE6IFN1bW1hcnlTdGF0ZSwgZXJyb3I6IExsbVN1bW1hcnlFcnJvcikgPT4gdm9pZFxuICBhZ2VudEVuZHBvaW50VXJsPzogc3RyaW5nXG4gIHJlZnJlc2hBZ2VudERhdGE/OiBib29sZWFuXG4gIGNvbnRleHQ/OiBBcnJheTxDaGF0SW50ZXJhY3Rpb25Db250ZXh0PlxuICBlbmFibGVBZ2VudEdyb3VuZGluZz86IGJvb2xlYW5cbiAgZW5hYmxlQ29tcGFueVRlYXJzaGVldD86IGJvb2xlYW5cbn1cblxuY29uc3QgZGVmYXVsdEFnZW50RGF0YTogQWdlbnRNZXNzYWdlU3RhdGUgPSB7XG4gIGZyYW1lczogW10sXG4gIGFuc3dlclN0cmVhbTogW10sXG4gIGNsb3NlZDogZmFsc2UsXG4gIGlzTG9hZGluZzogdHJ1ZSxcbiAgZXJyb3I6IHVuZGVmaW5lZCxcbiAgcmVxdWVzdElkOiBcIlwiLFxuICByZWZlcmVuY2VzOiB7fSxcbn1cblxuZnVuY3Rpb24gdXNlQWdlbnRFdmVudHMocHJvcHM6IFByb3BzKSB7XG4gIGNvbnN0IHsgY2hhdElkLCBvbkNvbXBsZXRlLCBhZ2VudEVuYWJsZWQsIG9uRXJyb3IgfSA9IHByb3BzXG5cbiAgY29uc3Qgb25Db21wbGV0ZUNhbGxiYWNrRXhlY3V0ZWQgPSB1c2VSZWY8Ym9vbGVhbj4oZmFsc2UpXG4gIGNvbnN0IFthZ2VudERhdGEsIHNldEFnZW50RGF0YV0gPSB1c2VTdGF0ZTxBZ2VudE1lc3NhZ2VTdGF0ZT4oZGVmYXVsdEFnZW50RGF0YSlcbiAgY29uc3QgW2lzRnJhbWVDb21wbGV0ZWQsIHNldEZyYW1lQ29tcGxldGVkXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKVxuXG4gIGNvbnN0IGhhbmRsZUVycm9yTWVzc2FnZSA9IHVzZUNhbGxiYWNrKFxuICAgIGZ1bmN0aW9uIGhhbmRsZUVycm9yTWVzc2FnZShkaXNwb3NlQ29ubmVjdGlvbjogKCkgPT4gdm9pZCwgZGF0YT86IEVycm9yTWVzc2FnZSk6IHZvaWQge1xuICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgc2V0QWdlbnREYXRhKHByZXZTdGF0ZSA9PiAoe1xuICAgICAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgICAgICBlcnJvcjogZGF0YS5lcnJvcixcbiAgICAgICAgICByZXF1ZXN0SWQ6IGRhdGEucmVxdWVzdElkID8/IHByZXZTdGF0ZS5yZXF1ZXN0SWQsXG4gICAgICAgIH0pKVxuICAgICAgfVxuICAgICAgb25FcnJvcj8uKFxuICAgICAgICB7XG4gICAgICAgICAgcmVzcG9uc2U6IFwiXCIsXG4gICAgICAgICAgcmVzcG9uc2VCbG9ja3M6IFtdLFxuICAgICAgICAgIHRpbWluZ3M6IHsgc3RhcnQ6IERhdGUubm93KCkgfSxcbiAgICAgICAgICBhdWRpdFRyYWNlczogW10sXG4gICAgICAgICAgb3JpZ2luU291cmNlczogW10sXG4gICAgICAgICAgaW50ZXJhY3Rpb25UeXBlOiBcInVzZXJfbWVzc2FnZVwiLFxuICAgICAgICAgIHN0YXR1c0RhdGE6IHsgc3RlcDogXCJjb21wbGV0ZWRcIiwgcXVlcmllczogW10gfSxcbiAgICAgICAgICBhdWRpdEJsb2NrczogW10sXG4gICAgICAgIH0sXG4gICAgICAgIHsgbWVzc2FnZTogZGF0YT8uZXJyb3IgPz8gXCJXZWJTb2NrZXQgY29ubmVjdGlvbiBlcnJvclwiLCB0eXBlOiBcIkVSUk9SXCIgfSxcbiAgICAgIClcbiAgICAgIGRpc3Bvc2VDb25uZWN0aW9uKClcbiAgICB9LFxuICAgIFtvbkVycm9yXSxcbiAgKVxuXG4gIGNvbnN0IGdldEJvZHkgPSB1c2VDYWxsYmFjayhcbiAgICBmdW5jdGlvbiBnZXRCb2R5KCkge1xuICAgICAgY29uc3QgcmVxdWVzdElkID0gYCR7RGF0ZS5ub3coKX1gXG4gICAgICBzZXRBZ2VudERhdGEoe1xuICAgICAgICAuLi5kZWZhdWx0QWdlbnREYXRhLFxuICAgICAgICByZXF1ZXN0SWQsXG4gICAgICB9KVxuXG4gICAgICBjaGF0Q3VzdG9tZXJJby5pbnB1dEFnZW50UHJvbXB0U3VibWl0KHtcbiAgICAgICAgY2hhdElkOiBwcm9wcy5jaGF0SWQsXG4gICAgICAgIGV4ZWN1dGlvbk1vZGU6IHByb3BzLmV4ZWN1dGlvbk1vZGUgPz8gXCJyZXNlYXJjaFwiLFxuICAgICAgICByZXF1ZXN0SWQsXG4gICAgICB9KVxuXG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICByZXF1ZXN0SWQsXG4gICAgICAgIGNoYXRfaWQ6IHByb3BzLmNoYXRJZCxcbiAgICAgICAgbWVzc2FnZTogZ2V0UHJvbXB0V2l0aENvbnRleHQocHJvcHMuaW5wdXRNZXNzYWdlLCBwcm9wcy5jb250ZXh0KSxcbiAgICAgICAgbW9kZTogcHJvcHMuZXhlY3V0aW9uTW9kZSxcbiAgICAgIH0pXG4gICAgfSxcbiAgICBbcHJvcHMuY2hhdElkLCBwcm9wcy5jb250ZXh0LCBwcm9wcy5leGVjdXRpb25Nb2RlLCBwcm9wcy5pbnB1dE1lc3NhZ2VdLFxuICApXG5cbiAgY29uc3QgaGFuZGxlQWdlbnRFdmVudCA9IHVzZUNhbGxiYWNrKFxuICAgIGZ1bmN0aW9uIGhhbmRsZUFnZW50RXZlbnQoZXZlbnQ6IE1lc3NhZ2VFdmVudCwgZGlzcG9zZUNvbm5lY3Rpb246ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgIGNvbnN0IGRhdGE6IEFnZW50TWVzc2FnZSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSlcblxuICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcbiAgICAgICAgY2FzZSBcIlRISU5LSU5HXCI6XG4gICAgICAgICAgc2V0QWdlbnREYXRhKHByZXYgPT4gaGFuZGxlVGhpbmtpbmdNZXNzYWdlKHByZXYsIGRhdGEpKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgXCJBQ1RJT05cIjpcbiAgICAgICAgICBzZXRBZ2VudERhdGEocHJldiA9PiBoYW5kbGVBY3Rpb25NZXNzYWdlKHByZXYsIGRhdGEpKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgXCJBVURJVFwiOlxuICAgICAgICAgIHNldEFnZW50RGF0YShwcmV2ID0+IGhhbmRsZUF1ZGl0TWVzc2FnZShwcmV2LCBkYXRhKSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIFwiQU5TV0VSXCI6XG4gICAgICAgICAgc2V0QWdlbnREYXRhKHByZXYgPT4gaGFuZGxlQW5zd2VyTWVzc2FnZShwcmV2LCBkYXRhKSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIFwiR1JPVU5ESU5HXCI6XG4gICAgICAgICAgaWYgKCFwcm9wcy5lbmFibGVBZ2VudEdyb3VuZGluZykge1xuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0QWdlbnREYXRhKHByZXYgPT4gaGFuZGxlR3JvdW5kaW5nTWVzc2FnZShwcmV2LCBkYXRhKSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIFwiQ09NUExFVEVcIjpcbiAgICAgICAgICBzZXRGcmFtZUNvbXBsZXRlZCh0cnVlKVxuICAgICAgICAgIHNldEFnZW50RGF0YShwcmV2ID0+XG4gICAgICAgICAgICBoYW5kbGVDb21wbGV0ZU1lc3NhZ2UocHJldiwgeyBleGVjdXRpb25Nb2RlOiBwcm9wcy5leGVjdXRpb25Nb2RlLCBjaGF0SWQgfSksXG4gICAgICAgICAgKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgXCJFUlJPUlwiOlxuICAgICAgICAgIGhhbmRsZUVycm9yTWVzc2FnZShkaXNwb3NlQ29ubmVjdGlvbiwgZGF0YSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfSxcbiAgICBbY2hhdElkLCBoYW5kbGVFcnJvck1lc3NhZ2UsIHByb3BzLmV4ZWN1dGlvbk1vZGUsIHByb3BzLmVuYWJsZUFnZW50R3JvdW5kaW5nXSxcbiAgKVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzRnJhbWVDb21wbGV0ZWQgJiYgYWdlbnRFbmFibGVkICYmICFvbkNvbXBsZXRlQ2FsbGJhY2tFeGVjdXRlZC5jdXJyZW50KSB7XG4gICAgICBvbkNvbXBsZXRlKGFnZW50RGF0YSlcbiAgICAgIG9uQ29tcGxldGVDYWxsYmFja0V4ZWN1dGVkLmN1cnJlbnQgPSB0cnVlXG4gICAgfVxuICB9LCBbaXNGcmFtZUNvbXBsZXRlZCwgYWdlbnREYXRhLCBhZ2VudEVuYWJsZWQsIG9uQ29tcGxldGVdKVxuXG4gIHVzZVNTRSh7XG4gICAgdXJsOiBgJHtwcm9wcy5hZ2VudEVuZHBvaW50VXJsID8/IEVWRU5UX1NPVVJDRV9VUkx9JHtQQVRIfWAsXG4gICAgZW5hYmxlZDogYWdlbnRFbmFibGVkID8/IGZhbHNlLFxuICAgIGdldEJvZHksXG4gICAgb25FcnJvcjogaGFuZGxlRXJyb3JNZXNzYWdlLFxuICAgIG9uTWVzc2FnZTogaGFuZGxlQWdlbnRFdmVudCxcbiAgfSlcblxuICByZXR1cm4geyBhZ2VudERhdGEgfVxufVxuXG5leHBvcnQgeyB1c2VBZ2VudEV2ZW50cyB9XG4iXSwibmFtZXMiOlsidXNlQWdlbnRFdmVudHMiLCJnZXRBcGlFbnZpcm9ubWVudENvbmZpZyIsIkVWRU5UX1NPVVJDRV9VUkwiLCJ1cmwiLCJQQVRIIiwiZGVmYXVsdEFnZW50RGF0YSIsImZyYW1lcyIsImFuc3dlclN0cmVhbSIsImNsb3NlZCIsImlzTG9hZGluZyIsImVycm9yIiwidW5kZWZpbmVkIiwicmVxdWVzdElkIiwicmVmZXJlbmNlcyIsInByb3BzIiwiY2hhdElkIiwib25Db21wbGV0ZSIsImFnZW50RW5hYmxlZCIsIm9uRXJyb3IiLCJvbkNvbXBsZXRlQ2FsbGJhY2tFeGVjdXRlZCIsInVzZVJlZiIsImFnZW50RGF0YSIsInNldEFnZW50RGF0YSIsInVzZVN0YXRlIiwiaXNGcmFtZUNvbXBsZXRlZCIsInNldEZyYW1lQ29tcGxldGVkIiwiaGFuZGxlRXJyb3JNZXNzYWdlIiwidXNlQ2FsbGJhY2siLCJkaXNwb3NlQ29ubmVjdGlvbiIsImRhdGEiLCJwcmV2U3RhdGUiLCJyZXNwb25zZSIsInJlc3BvbnNlQmxvY2tzIiwidGltaW5ncyIsInN0YXJ0IiwiRGF0ZSIsIm5vdyIsImF1ZGl0VHJhY2VzIiwib3JpZ2luU291cmNlcyIsImludGVyYWN0aW9uVHlwZSIsInN0YXR1c0RhdGEiLCJzdGVwIiwicXVlcmllcyIsImF1ZGl0QmxvY2tzIiwibWVzc2FnZSIsInR5cGUiLCJnZXRCb2R5IiwiY2hhdEN1c3RvbWVySW8iLCJpbnB1dEFnZW50UHJvbXB0U3VibWl0IiwiZXhlY3V0aW9uTW9kZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjaGF0X2lkIiwiZ2V0UHJvbXB0V2l0aENvbnRleHQiLCJpbnB1dE1lc3NhZ2UiLCJjb250ZXh0IiwibW9kZSIsImhhbmRsZUFnZW50RXZlbnQiLCJldmVudCIsInBhcnNlIiwicHJldiIsImhhbmRsZVRoaW5raW5nTWVzc2FnZSIsImhhbmRsZUFjdGlvbk1lc3NhZ2UiLCJoYW5kbGVBdWRpdE1lc3NhZ2UiLCJoYW5kbGVBbnN3ZXJNZXNzYWdlIiwiZW5hYmxlQWdlbnRHcm91bmRpbmciLCJoYW5kbGVHcm91bmRpbmdNZXNzYWdlIiwiaGFuZGxlQ29tcGxldGVNZXNzYWdlIiwidXNlRWZmZWN0IiwiY3VycmVudCIsInVzZVNTRSIsImFnZW50RW5kcG9pbnRVcmwiLCJlbmFibGVkIiwib25NZXNzYWdlIl0sInJhbmdlTWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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