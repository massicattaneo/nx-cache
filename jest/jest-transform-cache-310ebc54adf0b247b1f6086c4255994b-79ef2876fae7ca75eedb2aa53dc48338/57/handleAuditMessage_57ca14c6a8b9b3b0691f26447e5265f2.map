{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/common/hooks/src/lib/useAgent/handlers/handleAuditMessage.ts"],"sourcesContent":["import { AgentMessageState, AuditMessage } from \"../useAgent.types\"\n\nfunction handleAuditMessage(agentState: AgentMessageState, data: AuditMessage): AgentMessageState {\n  // Update audit traces to an existing action\n  const lastActionIndex = agentState.frames.findIndex(\n    frame => frame.type === \"action\" && frame.actionId === data.actionAuditsId,\n  )\n  if (lastActionIndex === -1) return agentState\n  const updatedFrames = [...agentState.frames]\n  const lastAction = updatedFrames[lastActionIndex]\n\n  if (lastAction.type !== \"action\") {\n    return agentState\n  }\n\n  switch (data.trace.auditType) {\n    case \"MarkdownAuditV1\":\n    case \"NotEntitledAuditV1\":\n      updatedFrames[lastActionIndex] = {\n        ...lastAction,\n        traces: [data.trace],\n      }\n      break\n    case \"SearchAuditV1\":\n      updatedFrames[lastActionIndex] = {\n        ...lastAction,\n        traces: [...lastAction.traces, data.trace],\n      }\n  }\n\n  return {\n    ...agentState,\n    frames: updatedFrames,\n    error: undefined,\n    requestId: data.requestId ?? agentState.requestId,\n  }\n}\n\nexport { handleAuditMessage }\n"],"names":["handleAuditMessage","agentState","data","lastActionIndex","frames","findIndex","frame","type","actionId","actionAuditsId","updatedFrames","lastAction","trace","auditType","traces","error","undefined","requestId"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAsCSA;;;eAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AApCT,SAASA,mBAAmBC,UAA6B,EAAEC,IAAkB;IAC3E,4CAA4C;IAC5C,MAAMC,kBAAkBF,WAAWG,MAAM,CAACC,SAAS,CACjDC,CAAAA,QAASA,MAAMC,IAAI,KAAK,YAAYD,MAAME,QAAQ,KAAKN,KAAKO,cAAc;IAE5E,IAAIN,oBAAoB,CAAC,GAAG,OAAOF;IACnC,MAAMS,gBAAgB;WAAIT,WAAWG,MAAM;KAAC;IAC5C,MAAMO,aAAaD,aAAa,CAACP,gBAAgB;IAEjD,IAAIQ,WAAWJ,IAAI,KAAK,UAAU;QAChC,OAAON;IACT;IAEA,OAAQC,KAAKU,KAAK,CAACC,SAAS;QAC1B,KAAK;QACL,KAAK;YACHH,aAAa,CAACP,gBAAgB,GAAG,wCAC5BQ;gBACHG,QAAQ;oBAACZ,KAAKU,KAAK;iBAAC;;YAEtB;QACF,KAAK;YACHF,aAAa,CAACP,gBAAgB,GAAG,wCAC5BQ;gBACHG,QAAQ;uBAAIH,WAAWG,MAAM;oBAAEZ,KAAKU,KAAK;iBAAC;;IAEhD;QAMaV;IAJb,OAAO,wCACFD;QACHG,QAAQM;QACRK,OAAOC;QACPC,WAAWf,CAAAA,kBAAAA,KAAKe,SAAS,cAAdf,6BAAAA,kBAAkBD,WAAWgB,SAAS;;AAErD"}