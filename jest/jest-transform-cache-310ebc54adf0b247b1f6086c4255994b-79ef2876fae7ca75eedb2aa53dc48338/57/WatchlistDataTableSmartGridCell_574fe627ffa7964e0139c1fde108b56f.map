{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/watchlists/src/lib/WatchlistDataTabs/WatchlistDataTableCells/WatchlistDataTableSmartGridCell.tsx"],"sourcesContent":["import ReactMarkdown from \"react-markdown\"\nimport { createChunkMap } from \"@rp/react/common/hooks\"\nimport { inlineAttributionRenderer } from \"@rp/react/web/chat\"\nimport { Box, CircularProgress, Typography } from \"@rp/react/web/mui/core\"\nimport { remarkGfmNoAutoLink } from \"@rp/web/utils\"\nimport { WatchlistDataTableClickableCell } from \"./WatchlistDataTableClickableCell\"\n\ntype ChunkMap = ReturnType<typeof createChunkMap>[\"chunkMap\"]\ntype ExternalMap = ReturnType<typeof createChunkMap>[\"externalMap\"]\n\ntype Props = {\n  isLoading: boolean\n  isError: boolean\n  value: string | undefined\n  chunkMap: ChunkMap\n  externalMap: ExternalMap\n  entityName: string\n  onClick?: () => void\n}\n\nfunction WatchlistDataTableSmartGridCell({\n  isLoading,\n  isError,\n  value,\n  chunkMap,\n  externalMap,\n  onClick,\n}: Props) {\n  if (isLoading) {\n    return (\n      <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1, py: \"10px\" }}>\n        <CircularProgress size={16} />\n        Thinking\n      </Box>\n    )\n  }\n  if (isError) {\n    return <Box sx={{ color: \"error.main\", fontSize: 12 }}>Error generating summary</Box>\n  }\n\n  return (\n    <Box\n      sx={{\n        \"& ul\": { listStyleType: \"none\", p: 1, m: 0 },\n        \"& li\": { p: 0 },\n        \"& p\": { p: 0, m: 0 },\n      }}\n    >\n      <WatchlistDataTableClickableCell\n        onClick={\n          value\n            ? ev => {\n                if (ev.target instanceof HTMLElement) {\n                  let el: HTMLElement | null = ev.target\n                  while (el && !(el instanceof HTMLTableCellElement)) {\n                    el = el.parentElement\n                  }\n                  onClick?.()\n                }\n              }\n            : undefined\n        }\n        hoverBackgroundColor={theme => (value ? theme.palette.action.hover : undefined)}\n      >\n        {value ? (\n          <ReactMarkdown\n            remarkPlugins={[remarkGfmNoAutoLink]}\n            components={{\n              code: inlineAttributionRenderer({\n                chunkMap,\n                externalMap,\n                disabled: false,\n                onUserInteraction: () => {},\n              }),\n            }}\n          >\n            {value}\n          </ReactMarkdown>\n        ) : (\n          <Typography color={\"text.secondary\"} sx={{ fontStyle: \"italic\", fontSize: 13 }}>\n            N/A\n          </Typography>\n        )}\n      </WatchlistDataTableClickableCell>\n    </Box>\n  )\n}\n\nexport { WatchlistDataTableSmartGridCell }\n"],"names":["WatchlistDataTableSmartGridCell","isLoading","isError","value","chunkMap","externalMap","onClick","Box","sx","display","alignItems","gap","py","CircularProgress","size","color","fontSize","listStyleType","p","m","WatchlistDataTableClickableCell","ev","target","HTMLElement","el","HTMLTableCellElement","parentElement","undefined","hoverBackgroundColor","theme","palette","action","hover","ReactMarkdown","remarkPlugins","remarkGfmNoAutoLink","components","code","inlineAttributionRenderer","disabled","onUserInteraction","Typography","fontStyle"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAwFSA;;;eAAAA;;;;sEAxFiB;sBAEgB;sBACQ;uBACd;iDACY;;;;;;AAehD,SAASA,gCAAgC,EACvCC,SAAS,EACTC,OAAO,EACPC,KAAK,EACLC,QAAQ,EACRC,WAAW,EACXC,OAAO,EACD;IACN,IAAIL,WAAW;QACb,qBACE,sBAACM,SAAG;YAACC,IAAI;gBAAEC,SAAS;gBAAQC,YAAY;gBAAUC,KAAK;gBAAGC,IAAI;YAAO;;8BACnE,qBAACC,sBAAgB;oBAACC,MAAM;;gBAAM;;;IAIpC;IACA,IAAIZ,SAAS;QACX,qBAAO,qBAACK,SAAG;YAACC,IAAI;gBAAEO,OAAO;gBAAcC,UAAU;YAAG;sBAAG;;IACzD;IAEA,qBACE,qBAACT,SAAG;QACFC,IAAI;YACF,QAAQ;gBAAES,eAAe;gBAAQC,GAAG;gBAAGC,GAAG;YAAE;YAC5C,QAAQ;gBAAED,GAAG;YAAE;YACf,OAAO;gBAAEA,GAAG;gBAAGC,GAAG;YAAE;QACtB;kBAEA,cAAA,qBAACC,gEAA+B;YAC9Bd,SACEH,QACIkB,CAAAA;gBACE,IAAIA,GAAGC,MAAM,YAAYC,aAAa;oBACpC,IAAIC,KAAyBH,GAAGC,MAAM;oBACtC,MAAOE,MAAM,CAAEA,CAAAA,cAAcC,oBAAmB,EAAI;wBAClDD,KAAKA,GAAGE,aAAa;oBACvB;oBACApB,oBAAAA,8BAAAA;gBACF;YACF,IACAqB;YAENC,sBAAsBC,CAAAA,QAAU1B,QAAQ0B,MAAMC,OAAO,CAACC,MAAM,CAACC,KAAK,GAAGL;sBAEpExB,sBACC,qBAAC8B,sBAAa;gBACZC,eAAe;oBAACC,0BAAmB;iBAAC;gBACpCC,YAAY;oBACVC,MAAMC,IAAAA,+BAAyB,EAAC;wBAC9BlC;wBACAC;wBACAkC,UAAU;wBACVC,mBAAmB,KAAO;oBAC5B;gBACF;0BAECrC;+BAGH,qBAACsC,gBAAU;gBAAC1B,OAAO;gBAAkBP,IAAI;oBAAEkC,WAAW;oBAAU1B,UAAU;gBAAG;0BAAG;;;;AAO1F"}