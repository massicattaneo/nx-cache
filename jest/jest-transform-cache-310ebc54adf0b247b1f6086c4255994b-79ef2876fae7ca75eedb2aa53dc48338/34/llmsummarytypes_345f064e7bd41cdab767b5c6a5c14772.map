{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/tanstack-api/llm-summary/src/llm-summary.types.ts"],"sourcesContent":["import { CqsChunkStory } from \"@rp/common/api-types\"\n\ntype LlmSummarySource = {\n  id: string\n  srcKey: string\n  srcName: string\n  hd: string\n  imageUrls?: Array<string> | null\n  chunks?: CqsChunkStory[\"chunks\"]\n}\n\ntype LlmSummaryCqsStory = Pick<\n  CqsChunkStory,\n  | \"chunks\"\n  | \"documentScope\"\n  | \"hd\"\n  | \"id\"\n  | \"language\"\n  | \"srcKey\"\n  | \"srcName\"\n  | \"ts\"\n  | \"contentType\"\n  | \"rpProviderId\"\n  | \"url\"\n> & { documentType: string | null }\ntype LlmExternalStory = {\n  id?: string\n  hd: string\n  text: string\n  action: {\n    type: \"EXTERNAL\"\n    name: string\n    hd: string\n    url: string\n    faviconUrl: string\n  }\n  ts?: string\n  metadata?: unknown\n}\n\ntype LlmEngineSource = {\n  type: \"ENGINE\"\n  name: string\n  faviconUrl: string\n  srcKey: string\n}\n\ntype LlmExternalSource = {\n  type: \"EXTERNAL\"\n  name: string\n  hd: string\n  url: string\n  faviconUrl: string\n}\n\ntype LlmDocumentSource = {\n  type: \"DOCUMENT\"\n  name: string\n  hd: string\n  id: string\n  srcKey: string\n  rpProviderId?: string\n  imageUrls?: Array<string> | null\n  url?: string\n}\n\ntype LlmSourcesMessage = {\n  type: \"SOURCES\"\n  originSources: Array<LlmExternalSource | LlmDocumentSource | LlmEngineSource>\n  sources: Array<LlmSummarySource> // This is used by the old cqs summary -  and it is removed from BE\n  metadata?: LlmSourcesMetadata\n}\n\ntype LlmQuestion = {\n  query: string\n  stories: Array<CqsChunkStory>\n}\n\ntype LlmCqsTrace = {\n  type: \"CQS\"\n  values: Array<LlmSummaryCqsStory>\n}\n\ntype LlmExternalTrace = {\n  type: \"EXTERNAL\"\n  values: Array<LlmExternalStory>\n}\n\ntype LlmAuditTraceMessage = {\n  type: \"AUDIT_TRACE\"\n  trace: {\n    query: { text: string; filters?: { entities?: { all_of?: Array<string> } } }\n    results: Array<LlmCqsTrace | LlmExternalTrace>\n    queryId: number\n  }\n}\n\ntype LlmProfilingMessage = {\n  type: \"PROFILING\"\n  requestId: string\n  messageDeltaMs?: null\n  \"x-amz-requestid?\": null\n  ttft: number\n  timeToCompletion: number\n  routingResponseTime: number\n  searchResponseTime: number\n  sourceImagesResponseTime: number\n  sourceImagesCount: number\n  cqsResponseTimes?: Array<number> | null\n  cqsQueryCount: number\n  serpResponseTimes?: Array<number> | null\n  serpQueryCount: number\n  summarizerTtft: number\n}\n\ntype LlmTextContent = {\n  type: \"TEXT\"\n  value: string\n}\n\n// This type does not actually exist\ntype LlmIdBlock = {\n  type: \"NEXT_ID\"\n  id: string\n  content: LlmTextContent\n}\n\ntype LlmSummaryMessage = {\n  type: \"NEXT\" | \"FAILED\" | \"NO_CONTENT\"\n  content: string\n  block?: LlmIdBlock | EngineChartContent\n}\n\ntype LlmStatusTextMessage = {\n  type: \"STATUS\"\n  message: string\n}\n\ntype LlmStatusQuery = {\n  type: \"STATUS_QUERY\"\n  queries: Array<{ query: string; queryId: number }>\n}\n\ntype LlmStatusReset = {\n  type: \"STATUS_RESET\"\n  message?: string\n}\n\ntype LlmStatusCollapse = {\n  type: \"STATUS_COLLAPSE\"\n  title: string\n  content: LlmTextContent\n}\n\ntype LlmStatusSourcesEnd = {\n  type: \"STATUS_CONCLUDING\"\n  message?: string\n}\n\ntype LlmStatusMessage =\n  | LlmStatusTextMessage\n  | LlmStatusReset\n  | LlmStatusQuery\n  | LlmStatusSourcesEnd\n  | LlmStatusCollapse\n\ntype EngineChartContent = {\n  type: \"ENGINE\"\n  answer: string\n  explainer: string\n  widgetSpec: Array<Record<string, unknown>> | null\n  widgetSpecUrl: string | null\n  isSuccessfulAnswer: boolean\n}\n\ntype LlmMetadata = {\n  imageUrls?: Array<string>\n}\n\ntype LlmSourcesMetadata = {\n  [documentId: string]: LlmMetadata\n}\n\ntype LlmCompletedSummaryMessage = {\n  type: \"COMPLETE\"\n  contentBlock?: EngineChartContent\n  auditBlocks?: StoredResponseBlockList\n  interactionTimestamp: string\n}\n\ntype LlmErrorSummaryMessage = {\n  type: undefined\n  message: string\n}\n\ntype LLMFollowUpMessage = {\n  type: \"FOLLOW_UP\"\n  followUp: {\n    queries: Array<{ query: string }>\n  }\n}\n\ntype CollapsableBlock = {\n  type: \"COLLAPSE\"\n  title: string\n  content: LlmTextContent\n}\ntype ResponseBlock = EngineChartContent | LlmTextContent\ntype StoredResponseBlockList = Array<LlmTextContent | CollapsableBlock | EngineChartContent>\n\ntype LlmMessage =\n  | LlmSourcesMessage\n  | LlmSummaryMessage\n  | LlmCompletedSummaryMessage\n  | LlmAuditTraceMessage\n  | LlmProfilingMessage\n  | LlmErrorSummaryMessage\n  | LlmStatusMessage\n  | LLMFollowUpMessage\n\nexport const isLlmErrorSummaryMessage = (msg: LlmMessage): msg is LlmErrorSummaryMessage => {\n  return msg.type === undefined\n}\n\nexport const isLlmDocumentSource = (\n  source: LlmDocumentSource | LlmExternalSource | LlmEngineSource,\n): source is LlmDocumentSource => {\n  return source.type === \"DOCUMENT\"\n}\n\nexport const isLlmExternalSource = (\n  source: LlmDocumentSource | LlmExternalSource | LlmEngineSource,\n): source is LlmExternalSource => {\n  return source.type === \"EXTERNAL\"\n}\n\nexport const isLlmEngineSource = (\n  source: LlmDocumentSource | LlmExternalSource | LlmEngineSource,\n): source is LlmEngineSource => {\n  return source.type === \"ENGINE\"\n}\n\nexport const isLlmStandardSource = (\n  source: LlmDocumentSource | LlmExternalSource | LlmEngineSource,\n): source is LlmDocumentSource | LlmExternalSource => {\n  return source.type === \"DOCUMENT\" || source.type === \"EXTERNAL\"\n}\n\nexport type {\n  LlmSummarySource,\n  LlmSourcesMessage,\n  LlmSummaryMessage,\n  LlmAuditTraceMessage,\n  LlmProfilingMessage,\n  LLMFollowUpMessage,\n  LlmMessage,\n  LlmQuestion,\n  LlmDocumentSource,\n  LlmExternalSource,\n  LlmEngineSource,\n  LlmSummaryCqsStory,\n  LlmExternalStory,\n  LlmCqsTrace,\n  LlmExternalTrace,\n  EngineChartContent,\n  LlmTextContent,\n  LlmSourcesMetadata,\n  LlmMetadata,\n  LlmStatusMessage,\n  LlmStatusTextMessage,\n  LlmStatusQuery,\n  LlmStatusReset,\n  LlmStatusSourcesEnd,\n  LlmIdBlock,\n  ResponseBlock,\n  StoredResponseBlockList,\n  CollapsableBlock,\n}\n"],"names":["isLlmDocumentSource","isLlmEngineSource","isLlmErrorSummaryMessage","isLlmExternalSource","isLlmStandardSource","msg","type","undefined","source"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;IAgOaA,mBAAmB;eAAnBA;;IAYAC,iBAAiB;eAAjBA;;IAhBAC,wBAAwB;eAAxBA;;IAUAC,mBAAmB;eAAnBA;;IAYAC,mBAAmB;eAAnBA;;;AAtBN,MAAMF,2BAA2B,CAACG;IACvC,OAAOA,IAAIC,IAAI,KAAKC;AACtB;AAEO,MAAMP,sBAAsB,CACjCQ;IAEA,OAAOA,OAAOF,IAAI,KAAK;AACzB;AAEO,MAAMH,sBAAsB,CACjCK;IAEA,OAAOA,OAAOF,IAAI,KAAK;AACzB;AAEO,MAAML,oBAAoB,CAC/BO;IAEA,OAAOA,OAAOF,IAAI,KAAK;AACzB;AAEO,MAAMF,sBAAsB,CACjCI;IAEA,OAAOA,OAAOF,IAAI,KAAK,cAAcE,OAAOF,IAAI,KAAK;AACvD"}