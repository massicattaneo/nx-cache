{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/node_modules/mdast-util-gfm-strikethrough/lib/index.js"],"sourcesContent":["/**\n * @typedef {import('mdast').Delete} Delete\n *\n * @typedef {import('mdast-util-from-markdown').CompileContext} CompileContext\n * @typedef {import('mdast-util-from-markdown').Extension} FromMarkdownExtension\n * @typedef {import('mdast-util-from-markdown').Handle} FromMarkdownHandle\n *\n * @typedef {import('mdast-util-to-markdown').ConstructName} ConstructName\n * @typedef {import('mdast-util-to-markdown').Handle} ToMarkdownHandle\n * @typedef {import('mdast-util-to-markdown').Options} ToMarkdownExtension\n */\n\n/**\n * List of constructs that occur in phrasing (paragraphs, headings), but cannot\n * contain strikethrough.\n * So they sort of cancel each other out.\n * Note: could use a better name.\n *\n * Note: keep in sync with: <https://github.com/syntax-tree/mdast-util-to-markdown/blob/8ce8dbf/lib/unsafe.js#L14>\n *\n * @type {Array<ConstructName>}\n */\nconst constructsWithoutStrikethrough = [\n  'autolink',\n  'destinationLiteral',\n  'destinationRaw',\n  'reference',\n  'titleQuote',\n  'titleApostrophe'\n]\n\nhandleDelete.peek = peekDelete\n\n/**\n * Create an extension for `mdast-util-from-markdown` to enable GFM\n * strikethrough in markdown.\n *\n * @returns {FromMarkdownExtension}\n *   Extension for `mdast-util-from-markdown` to enable GFM strikethrough.\n */\nexport function gfmStrikethroughFromMarkdown() {\n  return {\n    canContainEols: ['delete'],\n    enter: {strikethrough: enterStrikethrough},\n    exit: {strikethrough: exitStrikethrough}\n  }\n}\n\n/**\n * Create an extension for `mdast-util-to-markdown` to enable GFM\n * strikethrough in markdown.\n *\n * @returns {ToMarkdownExtension}\n *   Extension for `mdast-util-to-markdown` to enable GFM strikethrough.\n */\nexport function gfmStrikethroughToMarkdown() {\n  return {\n    unsafe: [\n      {\n        character: '~',\n        inConstruct: 'phrasing',\n        notInConstruct: constructsWithoutStrikethrough\n      }\n    ],\n    handlers: {delete: handleDelete}\n  }\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterStrikethrough(token) {\n  this.enter({type: 'delete', children: []}, token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitStrikethrough(token) {\n  this.exit(token)\n}\n\n/**\n * @type {ToMarkdownHandle}\n * @param {Delete} node\n */\nfunction handleDelete(node, _, state, info) {\n  const tracker = state.createTracker(info)\n  const exit = state.enter('strikethrough')\n  let value = tracker.move('~~')\n  value += state.containerPhrasing(node, {\n    ...tracker.current(),\n    before: value,\n    after: '~'\n  })\n  value += tracker.move('~~')\n  exit()\n  return value\n}\n\n/** @type {ToMarkdownHandle} */\nfunction peekDelete() {\n  return '~'\n}\n"],"names":["gfmStrikethroughFromMarkdown","gfmStrikethroughToMarkdown","constructsWithoutStrikethrough","handleDelete","peek","peekDelete","canContainEols","enter","strikethrough","enterStrikethrough","exit","exitStrikethrough","unsafe","character","inConstruct","notInConstruct","handlers","delete","token","type","children","node","_","state","info","tracker","createTracker","value","move","containerPhrasing","current","before","after"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"AAAA;;;;;;;;;;CAUC,GAED;;;;;;;;;CASC;;;;;;;;;;;IAmBeA,4BAA4B;eAA5BA;;IAeAC,0BAA0B;eAA1BA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAjChB,MAAMC,iCAAiC;IACrC;IACA;IACA;IACA;IACA;IACA;CACD;AAEDC,aAAaC,IAAI,GAAGC;AASb,SAASL;IACd,OAAO;QACLM,gBAAgB;YAAC;SAAS;QAC1BC,OAAO;YAACC,eAAeC;QAAkB;QACzCC,MAAM;YAACF,eAAeG;QAAiB;IACzC;AACF;AASO,SAASV;IACd,OAAO;QACLW,QAAQ;YACN;gBACEC,WAAW;gBACXC,aAAa;gBACbC,gBAAgBb;YAClB;SACD;QACDc,UAAU;YAACC,QAAQd;QAAY;IACjC;AACF;AAEA;;;CAGC,GACD,SAASM,mBAAmBS,KAAK;IAC/B,IAAI,CAACX,KAAK,CAAC;QAACY,MAAM;QAAUC,UAAU,EAAE;IAAA,GAAGF;AAC7C;AAEA;;;CAGC,GACD,SAASP,kBAAkBO,KAAK;IAC9B,IAAI,CAACR,IAAI,CAACQ;AACZ;AAEA;;;CAGC,GACD,SAASf,aAAakB,IAAI,EAAEC,CAAC,EAAEC,KAAK,EAAEC,IAAI;IACxC,MAAMC,UAAUF,MAAMG,aAAa,CAACF;IACpC,MAAMd,OAAOa,MAAMhB,KAAK,CAAC;IACzB,IAAIoB,QAAQF,QAAQG,IAAI,CAAC;IACzBD,SAASJ,MAAMM,iBAAiB,CAACR,MAAM,wCAClCI,QAAQK,OAAO;QAClBC,QAAQJ;QACRK,OAAO;;IAETL,SAASF,QAAQG,IAAI,CAAC;IACtBlB;IACA,OAAOiB;AACT;AAEA,6BAA6B,GAC7B,SAAStB;IACP,OAAO;AACT"}