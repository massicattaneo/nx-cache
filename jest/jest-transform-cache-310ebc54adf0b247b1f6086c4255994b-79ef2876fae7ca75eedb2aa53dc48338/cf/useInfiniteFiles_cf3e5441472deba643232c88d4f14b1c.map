{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/tanstack-api/file/src/hooks/useInfiniteFiles.ts"],"sourcesContent":["import { useMemo } from \"react\"\nimport { keepPreviousData, useInfiniteQuery } from \"@tanstack/react-query\"\nimport { FILES_INFINITE_PAGE_SIZE } from \"../file.constants\"\nimport { InfiniteFilesParams } from \"../file.types\"\nimport { getAll } from \"../services\"\nimport { filesQueryKeys } from \"../utils\"\nimport { getOwnersForAPI } from \"../utils/getOwnersForAPI\"\n\n// Get all files\nconst useInfiniteFiles = ({\n  sortBy,\n  direction,\n  shared = false,\n  fileName,\n  ownership,\n  ownersSelected,\n  ownersList,\n}: InfiniteFilesParams) => {\n  const owners = useMemo(\n    () => getOwnersForAPI({ ownersSelected, ownersList }),\n    [ownersSelected, ownersList],\n  )\n\n  return useInfiniteQuery({\n    queryKey: filesQueryKeys.paginated({\n      sortBy,\n      direction,\n      shared,\n      fileName,\n      ownership,\n      owners,\n    }),\n    queryFn: params => {\n      return getAll({\n        offset: params.pageParam,\n        pageSize: FILES_INFINITE_PAGE_SIZE,\n        sortBy,\n        direction,\n        shared,\n        fileName,\n        ownership,\n        owners,\n      })\n    },\n    staleTime: 60 * 1000,\n    refetchOnWindowFocus: false,\n    initialPageParam: 0,\n    placeholderData: keepPreviousData,\n    getNextPageParam: (lastPage, _allPages, lastPageParam) => {\n      if (lastPage.results.length < FILES_INFINITE_PAGE_SIZE) return undefined\n      return lastPageParam + 1\n    },\n  })\n}\n\nexport { useInfiniteFiles }\n"],"names":["useInfiniteFiles","sortBy","direction","shared","fileName","ownership","ownersSelected","ownersList","owners","useMemo","getOwnersForAPI","useInfiniteQuery","queryKey","filesQueryKeys","paginated","queryFn","params","getAll","offset","pageParam","pageSize","FILES_INFINITE_PAGE_SIZE","staleTime","refetchOnWindowFocus","initialPageParam","placeholderData","keepPreviousData","getNextPageParam","lastPage","_allPages","lastPageParam","results","length","undefined"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAuDSA;;;eAAAA;;;uBAvDe;4BAC2B;+BACV;0BAElB;uBACQ;iCACC;AAEhC,gBAAgB;AAChB,MAAMA,mBAAmB,CAAC,EACxBC,MAAM,EACNC,SAAS,EACTC,SAAS,KAAK,EACdC,QAAQ,EACRC,SAAS,EACTC,cAAc,EACdC,UAAU,EACU;IACpB,MAAMC,SAASC,IAAAA,cAAO,EACpB,IAAMC,IAAAA,gCAAe,EAAC;YAAEJ;YAAgBC;QAAW,IACnD;QAACD;QAAgBC;KAAW;IAG9B,OAAOI,IAAAA,4BAAgB,EAAC;QACtBC,UAAUC,qBAAc,CAACC,SAAS,CAAC;YACjCb;YACAC;YACAC;YACAC;YACAC;YACAG;QACF;QACAO,SAASC,CAAAA;YACP,OAAOC,IAAAA,gBAAM,EAAC;gBACZC,QAAQF,OAAOG,SAAS;gBACxBC,UAAUC,uCAAwB;gBAClCpB;gBACAC;gBACAC;gBACAC;gBACAC;gBACAG;YACF;QACF;QACAc,WAAW,KAAK;QAChBC,sBAAsB;QACtBC,kBAAkB;QAClBC,iBAAiBC,4BAAgB;QACjCC,kBAAkB,CAACC,UAAUC,WAAWC;YACtC,IAAIF,SAASG,OAAO,CAACC,MAAM,GAAGX,uCAAwB,EAAE,OAAOY;YAC/D,OAAOH,gBAAgB;QACzB;IACF;AACF"}