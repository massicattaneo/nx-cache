{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/watchlist-editor/src/WatchlistPortfolioUpload/PortfolioUploadModal.tsx"],"sourcesContent":["import { useCallback, useState } from \"react\"\nimport { Box, TextField, Typography } from \"@mui/material\"\nimport { PostByIdsRequest } from \"@rp/common/api-types\"\nimport { useCqsByIdsContext } from \"@rp/react/tanstack-api/cqs-by-ids\"\nimport { GenericModal } from \"@rp/react/web/common/composite-components\"\nimport { Info } from \"@rp/react/web/mui/icons\"\nimport { CustomWidthTooltip } from \"./CustomWidthTooltip\"\nimport { portfolioUploadModals } from \"./portfolioUploadModals\"\n\ntype Props = {\n  onClose: () => void\n  name: string\n  handleAdd: (ids: Array<string>) => void\n  type: \"json\" | \"ids\" | null\n}\n\nconst PortfolioUploadModal = ({ type, onClose, handleAdd }: Props) => {\n  const [value, setValue] = useState(\"\")\n  const [jsonIds, setJsonIds] = useState<PostByIdsRequest>([])\n  const { validateIds } = useCqsByIdsContext()\n  const info = portfolioUploadModals[type ?? \"ids\"]\n\n  const onModalClose = useCallback(() => {\n    onClose()\n    setValue(\"\")\n    setJsonIds([])\n  }, [onClose])\n\n  const onAccept = useCallback(async () => {\n    const scoped = jsonIds\n    onModalClose()\n    const valid = await validateIds(scoped)\n    handleAdd(valid.map(item => item.key))\n  }, [jsonIds, validateIds, onModalClose, handleAdd])\n\n  return (\n    <GenericModal\n      AcceptProps={{ text: \"Upload\", disabled: !jsonIds.length, variant: \"contained\" }}\n      open={!!type}\n      onClose={onModalClose}\n      onAccept={onAccept}\n      title={\n        <>\n          {info.title}\n          <CustomWidthTooltip\n            classes={{ popper: \"popper\" }}\n            placement=\"bottom-start\"\n            title={\n              <>\n                <Typography sx={{ fontWeight: 700, fontSize: 14, mt: 1 }}>\n                  {info.tooltipTile}\n                </Typography>\n                <Box sx={{ mt: 2, whiteSpace: \"pre-wrap\" }}>\n                  <code>{info.tooltipContent}</code>\n                </Box>\n              </>\n            }\n          >\n            <Info sx={{ fontSize: 16, ml: 1, color: \"grey.300\", cursor: \"pointer\" }} />\n          </CustomWidthTooltip>\n        </>\n      }\n    >\n      <Box sx={{ px: 2 }}>\n        <TextField\n          value={value}\n          onChange={event => {\n            setValue(event.target.value)\n            setJsonIds(info.validator(event.target.value))\n          }}\n          rows={8}\n          multiline\n          placeholder={info.placeholder}\n          fullWidth\n        />\n      </Box>\n    </GenericModal>\n  )\n}\n\nexport { PortfolioUploadModal }\n"],"names":["PortfolioUploadModal","type","onClose","handleAdd","value","setValue","useState","jsonIds","setJsonIds","validateIds","useCqsByIdsContext","info","portfolioUploadModals","onModalClose","useCallback","onAccept","scoped","valid","map","item","key","GenericModal","AcceptProps","text","disabled","length","variant","open","title","CustomWidthTooltip","classes","popper","placement","Typography","sx","fontWeight","fontSize","mt","tooltipTile","Box","whiteSpace","code","tooltipContent","Info","ml","color","cursor","px","TextField","onChange","event","target","validator","rows","multiline","placeholder","fullWidth"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAgFSA;;;eAAAA;;;;uBAhF6B;0BACK;0BAER;qCACN;uBACR;oCACc;uCACG;AAStC,MAAMA,uBAAuB,CAAC,EAAEC,IAAI,EAAEC,OAAO,EAAEC,SAAS,EAAS;IAC/D,MAAM,CAACC,OAAOC,SAAS,GAAGC,IAAAA,eAAQ,EAAC;IACnC,MAAM,CAACC,SAASC,WAAW,GAAGF,IAAAA,eAAQ,EAAmB,EAAE;IAC3D,MAAM,EAAEG,WAAW,EAAE,GAAGC,IAAAA,4BAAkB;IAC1C,MAAMC,OAAOC,4CAAqB,CAACX,iBAAAA,kBAAAA,OAAQ,MAAM;IAEjD,MAAMY,eAAeC,IAAAA,kBAAW,EAAC;QAC/BZ;QACAG,SAAS;QACTG,WAAW,EAAE;IACf,GAAG;QAACN;KAAQ;IAEZ,MAAMa,WAAWD,IAAAA,kBAAW,EAAC;QAC3B,MAAME,SAAST;QACfM;QACA,MAAMI,QAAQ,MAAMR,YAAYO;QAChCb,UAAUc,MAAMC,GAAG,CAACC,CAAAA,OAAQA,KAAKC,GAAG;IACtC,GAAG;QAACb;QAASE;QAAaI;QAAcV;KAAU;IAElD,qBACE,qBAACkB,iCAAY;QACXC,aAAa;YAAEC,MAAM;YAAUC,UAAU,CAACjB,QAAQkB,MAAM;YAAEC,SAAS;QAAY;QAC/EC,MAAM,CAAC,CAAC1B;QACRC,SAASW;QACTE,UAAUA;QACVa,qBACE;;gBACGjB,KAAKiB,KAAK;8BACX,qBAACC,sCAAkB;oBACjBC,SAAS;wBAAEC,QAAQ;oBAAS;oBAC5BC,WAAU;oBACVJ,qBACE;;0CACE,qBAACK,oBAAU;gCAACC,IAAI;oCAAEC,YAAY;oCAAKC,UAAU;oCAAIC,IAAI;gCAAE;0CACpD1B,KAAK2B,WAAW;;0CAEnB,qBAACC,aAAG;gCAACL,IAAI;oCAAEG,IAAI;oCAAGG,YAAY;gCAAW;0CACvC,cAAA,qBAACC;8CAAM9B,KAAK+B,cAAc;;;;;8BAKhC,cAAA,qBAACC,WAAI;wBAACT,IAAI;4BAAEE,UAAU;4BAAIQ,IAAI;4BAAGC,OAAO;4BAAYC,QAAQ;wBAAU;;;;;kBAK5E,cAAA,qBAACP,aAAG;YAACL,IAAI;gBAAEa,IAAI;YAAE;sBACf,cAAA,qBAACC,mBAAS;gBACR5C,OAAOA;gBACP6C,UAAUC,CAAAA;oBACR7C,SAAS6C,MAAMC,MAAM,CAAC/C,KAAK;oBAC3BI,WAAWG,KAAKyC,SAAS,CAACF,MAAMC,MAAM,CAAC/C,KAAK;gBAC9C;gBACAiD,MAAM;gBACNC,SAAS;gBACTC,aAAa5C,KAAK4C,WAAW;gBAC7BC,SAAS;;;;AAKnB"}