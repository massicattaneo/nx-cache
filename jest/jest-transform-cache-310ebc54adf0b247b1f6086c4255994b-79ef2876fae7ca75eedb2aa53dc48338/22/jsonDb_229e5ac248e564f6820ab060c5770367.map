{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/common/json-db/src/lib/jsonDb.ts"],"sourcesContent":["import { JsonDbTable } from \"./jsonDbTable\"\n\nexport type JsonDbBase = Record<\"id\" | string, Array<Record<string, unknown>>>\n\nexport class JsonDb<Data extends JsonDbBase> {\n  private tables: { [key in keyof Data]: JsonDbTable<Data[key]> }\n  constructor(defaultData: Data) {\n    this.tables = Object.keys(defaultData).reduce((acc, table) => {\n      return { ...acc, [table]: new JsonDbTable(defaultData[table]) }\n    }, {} as { [key in keyof Data]: JsonDbTable<Data[key]> })\n  }\n  collection<T extends keyof Data>(name: T): JsonDbTable<Data[T]> {\n    return this.tables[name]\n  }\n  restoreInitialData(): void {\n    Object.keys(this.tables).forEach(table => {\n      this.tables[table as keyof Data].restoreInitialData()\n    })\n  }\n}\n"],"names":["JsonDb","collection","name","tables","restoreInitialData","Object","keys","forEach","table","constructor","defaultData","reduce","acc","JsonDbTable"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAIaA;;;eAAAA;;;6BAJe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIrB,MAAMA;IAOXC,WAAiCC,IAAO,EAAwB;QAC9D,OAAO,IAAI,CAACC,MAAM,CAACD,KAAK;IAC1B;IACAE,qBAA2B;QACzBC,OAAOC,IAAI,CAAC,IAAI,CAACH,MAAM,EAAEI,OAAO,CAACC,CAAAA;YAC/B,IAAI,CAACL,MAAM,CAACK,MAAoB,CAACJ,kBAAkB;QACrD;IACF;IAZAK,YAAYC,WAAiB,CAAE;QAD/B,uBAAQP,UAAR,KAAA;QAEE,IAAI,CAACA,MAAM,GAAGE,OAAOC,IAAI,CAACI,aAAaC,MAAM,CAAC,CAACC,KAAKJ;YAClD,OAAO,wCAAKI;gBAAK,CAACJ,MAAM,EAAE,IAAIK,wBAAW,CAACH,WAAW,CAACF,MAAM;;QAC9D,GAAG,CAAC;IACN;AASF"}