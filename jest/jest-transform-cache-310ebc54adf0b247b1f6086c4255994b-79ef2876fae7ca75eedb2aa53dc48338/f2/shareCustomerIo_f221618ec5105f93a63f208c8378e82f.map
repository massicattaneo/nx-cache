{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/common/customer-io/src/lib/shareCustomerIo.ts"],"sourcesContent":["import { adapters } from \"@rp/adapters\"\nimport { ShareStatus, SharedData } from \"@rp/common/api-types\"\nimport { ShareLinkObject } from \"@rp/common/utils\"\n\ntype ShareWatchlistProps = {\n  shareStatus: ShareStatus\n  sharedBy: string\n}\n\nexport const shareCustomerIo = {\n  getSharedWith: (shared: SharedData) => {\n    const sharedWith: Array<string> = []\n    const { permission, organizationId } = shared.company\n    if (shared.isPublic) sharedWith.push(\"public\")\n    if (permission !== \"undefined\" && organizationId) sharedWith.push(organizationId)\n    shared.users.forEach(user => sharedWith.push(user.userId))\n    return sharedWith\n  },\n  linkGenerated: (props: ShareLinkObject) => {\n    adapters.customerIo.track({\n      name: \"share\",\n      data: {\n        action: \"link_generated\",\n        shareObjectId: props.shareObjectId,\n        shareObjectType: props.shareObjectType,\n        generatedLink: props.url,\n      },\n    })\n  },\n  shareWatchlist: (props: ShareWatchlistProps) => {\n    adapters.customerIo.track({\n      name: \"share\",\n      data: {\n        contentShared: \"watchlist\",\n        sharedPermission: props.shareStatus,\n        sharedBy: props.sharedBy,\n      },\n    })\n  },\n}\n"],"names":["shareCustomerIo","getSharedWith","shared","sharedWith","permission","organizationId","company","isPublic","push","users","forEach","user","userId","linkGenerated","props","adapters","customerIo","track","name","data","action","shareObjectId","shareObjectType","generatedLink","url","shareWatchlist","contentShared","sharedPermission","shareStatus","sharedBy"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BASaA;;;eAAAA;;;0BATY;AASlB,MAAMA,kBAAkB;IAC7BC,eAAe,CAACC;QACd,MAAMC,aAA4B,EAAE;QACpC,MAAM,EAAEC,UAAU,EAAEC,cAAc,EAAE,GAAGH,OAAOI,OAAO;QACrD,IAAIJ,OAAOK,QAAQ,EAAEJ,WAAWK,IAAI,CAAC;QACrC,IAAIJ,eAAe,eAAeC,gBAAgBF,WAAWK,IAAI,CAACH;QAClEH,OAAOO,KAAK,CAACC,OAAO,CAACC,CAAAA,OAAQR,WAAWK,IAAI,CAACG,KAAKC,MAAM;QACxD,OAAOT;IACT;IACAU,eAAe,CAACC;QACdC,kBAAQ,CAACC,UAAU,CAACC,KAAK,CAAC;YACxBC,MAAM;YACNC,MAAM;gBACJC,QAAQ;gBACRC,eAAeP,MAAMO,aAAa;gBAClCC,iBAAiBR,MAAMQ,eAAe;gBACtCC,eAAeT,MAAMU,GAAG;YAC1B;QACF;IACF;IACAC,gBAAgB,CAACX;QACfC,kBAAQ,CAACC,UAAU,CAACC,KAAK,CAAC;YACxBC,MAAM;YACNC,MAAM;gBACJO,eAAe;gBACfC,kBAAkBb,MAAMc,WAAW;gBACnCC,UAAUf,MAAMe,QAAQ;YAC1B;QACF;IACF;AACF"}