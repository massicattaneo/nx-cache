{"version":3,"sources":["../src/browser.ts"],"sourcesContent":["/**\n * Checks if the window object is defined. You can also use this to check if something is happening on the client side.\n * @returns {boolean}\n */\nexport function inBrowser(): boolean {\n  return typeof window !== 'undefined';\n}\n\nconst botAgents = [\n  'bot',\n  'spider',\n  'crawl',\n  'APIs-Google',\n  'AdsBot',\n  'Googlebot',\n  'mediapartners',\n  'Google Favicon',\n  'FeedFetcher',\n  'Google-Read-Aloud',\n  'DuplexWeb-Google',\n  'googleweblight',\n  'bing',\n  'yandex',\n  'baidu',\n  'duckduck',\n  'yahoo',\n  'ecosia',\n  'ia_archiver',\n  'facebook',\n  'instagram',\n  'pinterest',\n  'reddit',\n  'slack',\n  'twitter',\n  'whatsapp',\n  'youtube',\n  'semrush',\n];\nconst botAgentRegex = new RegExp(botAgents.join('|'), 'i');\n\n/**\n * Checks if the user agent is a bot.\n * @param userAgent - Any user agent string\n * @returns {boolean}\n */\nexport function userAgentIsRobot(userAgent: string): boolean {\n  return !userAgent ? false : botAgentRegex.test(userAgent);\n}\n\n/**\n * Checks if the current environment is a browser and the user agent is not a bot.\n * @returns {boolean}\n */\nexport function isValidBrowser(): boolean {\n  const navigator = inBrowser() ? window?.navigator : null;\n  if (!navigator) {\n    return false;\n  }\n  return !userAgentIsRobot(navigator?.userAgent) && !navigator?.webdriver;\n}\n\n/**\n * Checks if the current environment is a browser and if the navigator is online.\n * @returns {boolean}\n */\nexport function isBrowserOnline(): boolean {\n  const navigator = inBrowser() ? window?.navigator : null;\n  if (!navigator) {\n    return false;\n  }\n\n  const isNavigatorOnline = navigator?.onLine;\n\n  // Being extra safe with the experimental `connection` property, as it is not defined in all browsers\n  // https://developer.mozilla.org/en-US/docs/Web/API/Navigator/connection#browser_compatibility\n  // @ts-ignore\n  const isExperimentalConnectionOnline = navigator?.connection?.rtt !== 0 && navigator?.connection?.downlink !== 0;\n  return isExperimentalConnectionOnline && isNavigatorOnline;\n}\n\n/**\n * Runs `isBrowserOnline` and `isValidBrowser` to check if the current environment is a valid browser and if the navigator is online.\n * @returns {boolean}\n */\nexport function isValidBrowserOnline(): boolean {\n  return isBrowserOnline() && isValidBrowser();\n}\n"],"names":["browser_exports","__export","inBrowser","isBrowserOnline","isValidBrowser","isValidBrowserOnline","userAgentIsRobot","module","exports","__toCommonJS","window","botAgents","botAgentRegex","RegExp","join","userAgent","test","navigator","webdriver","isNavigatorOnline","onLine","isExperimentalConnectionOnline","connection","rtt","downlink"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAAA,kBAAA,CAAA;AAAAC,SAAAD,iBAAA;IAAAE,WAAA,IAAAA;IAAAC,iBAAA,IAAAA;IAAAC,gBAAA,IAAAA;IAAAC,sBAAA,IAAAA;IAAAC,kBAAA,IAAAA;AAAA;AAAAC,OAAAC,OAAA,GAAAC,aAAAT;AAIO,SAASE;IACd,OAAO,OAAOQ,WAAW;AAC3B;AAEA,IAAMC,YAAY;IAChB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACF;AACA,IAAMC,gBAAgB,IAAIC,OAAOF,UAAUG,IAAA,CAAK,MAAM;AAO/C,SAASR,iBAAiBS,SAAA;IAC/B,OAAO,CAACA,YAAY,QAAQH,cAAcI,IAAA,CAAKD;AACjD;AAMO,SAASX;QACkBM;IAAhC,MAAMO,YAAYf,eAAcQ,UAAAA,oBAAAA,8BAAAA,QAAQO,SAAA,GAAY;IACpD,IAAI,CAACA,WAAW;QACd,OAAO;IACT;IACA,OAAO,CAACX,iBAAiBW,sBAAAA,gCAAAA,UAAWF,SAAS,KAAK,EAACE,sBAAAA,gCAAAA,UAAWC,SAAA;AAChE;AAMO,SAASf;QACkBO,SAUOO,uBAAoCA;IAV3E,MAAMA,YAAYf,eAAcQ,UAAAA,oBAAAA,8BAAAA,QAAQO,SAAA,GAAY;IACpD,IAAI,CAACA,WAAW;QACd,OAAO;IACT;IAEA,MAAME,oBAAoBF,sBAAAA,gCAAAA,UAAWG,MAAA;IAKrC,MAAMC,iCAAiCJ,CAAAA,sBAAAA,iCAAAA,wBAAAA,UAAWK,UAAA,cAAXL,4CAAAA,sBAAuBM,GAAA,MAAQ,KAAKN,CAAAA,sBAAAA,iCAAAA,yBAAAA,UAAWK,UAAA,cAAXL,6CAAAA,uBAAuBO,QAAA,MAAa;IAC/G,OAAOH,kCAAkCF;AAC3C;AAMO,SAASd;IACd,OAAOF,qBAAqBC;AAC9B"}