5a9922fd1f33ed54d6c9c4659bbd697b
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "InfiniteList", {
    enumerable: true,
    get: function() {
        return InfiniteList;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
const _material = require("@mui/material");
const _InfiniteListItem = require("./InfiniteListItem");
function InfiniteList({ renderItem, items, fetchNextPage, loading = false, hasMore = false, rootMargin, loaderSize = 24, initialElements = 1, fragment = false, virtualized = false, state, setState, root = window.document, pageSize = 1, generateAriaLabel }) {
    const [internalState, setInternalState] = (0, _react.useState)(initialElements);
    const stateNum = state !== undefined ? state : internalState;
    const setStateNum = setState !== undefined ? setState : setInternalState;
    const observer = (0, _react.useRef)(undefined);
    (0, _react.useEffect)(()=>{
        if (state !== undefined && setState === undefined || state === undefined && setState !== undefined) {
            // eslint-disable-next-line no-console
            console.log(`%c INIFINITE LIST `, "background: #e76666; color: #222; border-radius: 5px; ", "'state' and 'setState' should be used together");
        }
    }, [
        setState,
        state
    ]);
    (0, _react.useEffect)(()=>{
        if (stateNum > items.length && hasMore && !loading) {
            fetchNextPage === null || fetchNextPage === void 0 ? void 0 : fetchNextPage();
        }
    }, [
        fetchNextPage,
        hasMore,
        items.length,
        loading,
        stateNum
    ]);
    const intersectItem = (0, _react.useCallback)((node)=>{
        if (observer.current) {
            observer.current.disconnect();
        }
        observer.current = new IntersectionObserver((entries)=>{
            if (entries.some((entry)=>entry.isIntersecting)) {
                setStateNum((prev)=>{
                    return prev + pageSize;
                });
            }
        }, {
            rootMargin,
            root
        });
        if (node) {
            observer.current.observe(node);
        }
    }, [
        rootMargin,
        root,
        setStateNum,
        pageSize
    ]);
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)(_jsxruntime.Fragment, {
        children: [
            items.slice(0, stateNum).map((item, index)=>{
                const intersect = index === stateNum - 1 ? intersectItem : undefined;
                return fragment ? /*#__PURE__*/ (0, _jsxruntime.jsx)(_react.Fragment, {
                    children: renderItem(item, index, intersect)
                }, item.id) : /*#__PURE__*/ (0, _jsxruntime.jsx)(_InfiniteListItem.InfiniteListItem, {
                    ariaLabel: generateAriaLabel === null || generateAriaLabel === void 0 ? void 0 : generateAriaLabel(item),
                    index: index,
                    item: item,
                    renderItem: renderItem,
                    intersect: intersect,
                    virtualized: virtualized
                }, `${item.id}-${index}`);
            }),
            loading || hasMore && stateNum <= items.length ? /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.CircularProgress, {
                size: loaderSize,
                "data-testid": "loader-spinner",
                sx: {
                    display: "flex",
                    margin: "20px auto"
                }
            }) : null
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tY2F0dGFuZW8vd29ya3NwYWNlL2Zyb250ZW5kL2xpYnMvcmVhY3Qvd2ViL2NvbW1vbi9jb21wb3NpdGUtY29tcG9uZW50cy9zcmMvSW5maW5pdGVMaXN0L0luZmluaXRlTGlzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGlzcGF0Y2gsIEZyYWdtZW50LCBTZXRTdGF0ZUFjdGlvbiwgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiXG5pbXBvcnQgeyBDaXJjdWxhclByb2dyZXNzIH0gZnJvbSBcIkBtdWkvbWF0ZXJpYWxcIlxuaW1wb3J0IHsgSW5maW5pdGVMaXN0SXRlbSB9IGZyb20gXCIuL0luZmluaXRlTGlzdEl0ZW1cIlxuXG50eXBlIFByb3BzPEl0ZW1UeXBlPiA9IHtcbiAgaXRlbXM6IEFycmF5PEl0ZW1UeXBlPlxuICByZW5kZXJJdGVtOiAoXG4gICAgaXRlbTogSXRlbVR5cGUsXG4gICAgaW5kZXg6IG51bWJlcixcbiAgICBpbnRlcnNlY3Q6ICg8RWxlbWVudFR5cGUgZXh0ZW5kcyBIVE1MRWxlbWVudD4obm9kZTogRWxlbWVudFR5cGUpID0+IHZvaWQpIHwgdW5kZWZpbmVkLFxuICApID0+IFJlYWN0LlJlYWN0Tm9kZVxuICBmZXRjaE5leHRQYWdlPzogKCkgPT4gdm9pZFxuICBsb2FkaW5nPzogYm9vbGVhblxuICBoYXNNb3JlPzogYm9vbGVhblxuICByb290TWFyZ2luPzogc3RyaW5nXG4gIGxvYWRlclNpemU/OiBzdHJpbmcgfCBudW1iZXJcbiAgaW5pdGlhbEVsZW1lbnRzPzogbnVtYmVyXG4gIGZyYWdtZW50PzogYm9vbGVhblxuICB2aXJ0dWFsaXplZD86IGJvb2xlYW5cbiAgc3RhdGU/OiBudW1iZXJcbiAgc2V0U3RhdGU/OiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxudW1iZXI+PlxuICByb290PzogRWxlbWVudCB8IERvY3VtZW50IHwgbnVsbFxuICBwYWdlU2l6ZT86IG51bWJlclxuICBnZW5lcmF0ZUFyaWFMYWJlbD86IChpdGVtOiBJdGVtVHlwZSkgPT4gc3RyaW5nXG59XG5cbmZ1bmN0aW9uIEluZmluaXRlTGlzdDxJdGVtVHlwZSBleHRlbmRzIHsgaWQ6IHN0cmluZyB9Pih7XG4gIHJlbmRlckl0ZW0sXG4gIGl0ZW1zLFxuICBmZXRjaE5leHRQYWdlLFxuICBsb2FkaW5nID0gZmFsc2UsXG4gIGhhc01vcmUgPSBmYWxzZSxcbiAgcm9vdE1hcmdpbixcbiAgbG9hZGVyU2l6ZSA9IDI0LFxuICBpbml0aWFsRWxlbWVudHMgPSAxLFxuICBmcmFnbWVudCA9IGZhbHNlLFxuICB2aXJ0dWFsaXplZCA9IGZhbHNlLFxuICBzdGF0ZSxcbiAgc2V0U3RhdGUsXG4gIHJvb3QgPSB3aW5kb3cuZG9jdW1lbnQsXG4gIHBhZ2VTaXplID0gMSxcbiAgZ2VuZXJhdGVBcmlhTGFiZWwsXG59OiBQcm9wczxJdGVtVHlwZT4pIHtcbiAgY29uc3QgW2ludGVybmFsU3RhdGUsIHNldEludGVybmFsU3RhdGVdID0gdXNlU3RhdGUoaW5pdGlhbEVsZW1lbnRzKVxuICBjb25zdCBzdGF0ZU51bSA9IHN0YXRlICE9PSB1bmRlZmluZWQgPyBzdGF0ZSA6IGludGVybmFsU3RhdGVcbiAgY29uc3Qgc2V0U3RhdGVOdW0gPSBzZXRTdGF0ZSAhPT0gdW5kZWZpbmVkID8gc2V0U3RhdGUgOiBzZXRJbnRlcm5hbFN0YXRlXG4gIGNvbnN0IG9ic2VydmVyID0gdXNlUmVmPEludGVyc2VjdGlvbk9ic2VydmVyPih1bmRlZmluZWQpXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoXG4gICAgICAoc3RhdGUgIT09IHVuZGVmaW5lZCAmJiBzZXRTdGF0ZSA9PT0gdW5kZWZpbmVkKSB8fFxuICAgICAgKHN0YXRlID09PSB1bmRlZmluZWQgJiYgc2V0U3RhdGUgIT09IHVuZGVmaW5lZClcbiAgICApIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgYCVjIElOSUZJTklURSBMSVNUIGAsXG4gICAgICAgIFwiYmFja2dyb3VuZDogI2U3NjY2NjsgY29sb3I6ICMyMjI7IGJvcmRlci1yYWRpdXM6IDVweDsgXCIsXG4gICAgICAgIFwiJ3N0YXRlJyBhbmQgJ3NldFN0YXRlJyBzaG91bGQgYmUgdXNlZCB0b2dldGhlclwiLFxuICAgICAgKVxuICAgIH1cbiAgfSwgW3NldFN0YXRlLCBzdGF0ZV0pXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc3RhdGVOdW0gPiBpdGVtcy5sZW5ndGggJiYgaGFzTW9yZSAmJiAhbG9hZGluZykge1xuICAgICAgZmV0Y2hOZXh0UGFnZT8uKClcbiAgICB9XG4gIH0sIFtmZXRjaE5leHRQYWdlLCBoYXNNb3JlLCBpdGVtcy5sZW5ndGgsIGxvYWRpbmcsIHN0YXRlTnVtXSlcblxuICBjb25zdCBpbnRlcnNlY3RJdGVtID0gdXNlQ2FsbGJhY2soXG4gICAgPEVsZW1lbnRUeXBlIGV4dGVuZHMgSFRNTEVsZW1lbnQ+KG5vZGU6IEVsZW1lbnRUeXBlKSA9PiB7XG4gICAgICBpZiAob2JzZXJ2ZXIuY3VycmVudCkge1xuICAgICAgICBvYnNlcnZlci5jdXJyZW50LmRpc2Nvbm5lY3QoKVxuICAgICAgfVxuICAgICAgb2JzZXJ2ZXIuY3VycmVudCA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgICAgZW50cmllcyA9PiB7XG4gICAgICAgICAgaWYgKGVudHJpZXMuc29tZShlbnRyeSA9PiBlbnRyeS5pc0ludGVyc2VjdGluZykpIHtcbiAgICAgICAgICAgIHNldFN0YXRlTnVtKHByZXYgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gcHJldiArIHBhZ2VTaXplXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgeyByb290TWFyZ2luLCByb290IH0sXG4gICAgICApXG4gICAgICBpZiAobm9kZSkge1xuICAgICAgICBvYnNlcnZlci5jdXJyZW50Lm9ic2VydmUobm9kZSlcbiAgICAgIH1cbiAgICB9LFxuICAgIFtyb290TWFyZ2luLCByb290LCBzZXRTdGF0ZU51bSwgcGFnZVNpemVdLFxuICApXG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAge2l0ZW1zLnNsaWNlKDAsIHN0YXRlTnVtKS5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGludGVyc2VjdCA9IGluZGV4ID09PSBzdGF0ZU51bSAtIDEgPyBpbnRlcnNlY3RJdGVtIDogdW5kZWZpbmVkXG4gICAgICAgIHJldHVybiBmcmFnbWVudCA/IChcbiAgICAgICAgICA8RnJhZ21lbnQga2V5PXtpdGVtLmlkfT57cmVuZGVySXRlbShpdGVtLCBpbmRleCwgaW50ZXJzZWN0KX08L0ZyYWdtZW50PlxuICAgICAgICApIDogKFxuICAgICAgICAgIDxJbmZpbml0ZUxpc3RJdGVtXG4gICAgICAgICAgICBhcmlhTGFiZWw9e2dlbmVyYXRlQXJpYUxhYmVsPy4oaXRlbSl9XG4gICAgICAgICAgICBpbmRleD17aW5kZXh9XG4gICAgICAgICAgICBrZXk9e2Ake2l0ZW0uaWR9LSR7aW5kZXh9YH1cbiAgICAgICAgICAgIGl0ZW09e2l0ZW19XG4gICAgICAgICAgICByZW5kZXJJdGVtPXtyZW5kZXJJdGVtfVxuICAgICAgICAgICAgaW50ZXJzZWN0PXtpbnRlcnNlY3R9XG4gICAgICAgICAgICB2aXJ0dWFsaXplZD17dmlydHVhbGl6ZWR9XG4gICAgICAgICAgLz5cbiAgICAgICAgKVxuICAgICAgfSl9XG4gICAgICB7bG9hZGluZyB8fCAoaGFzTW9yZSAmJiBzdGF0ZU51bSA8PSBpdGVtcy5sZW5ndGgpID8gKFxuICAgICAgICA8Q2lyY3VsYXJQcm9ncmVzc1xuICAgICAgICAgIHNpemU9e2xvYWRlclNpemV9XG4gICAgICAgICAgZGF0YS10ZXN0aWQ9XCJsb2FkZXItc3Bpbm5lclwiXG4gICAgICAgICAgc3g9e3sgZGlzcGxheTogXCJmbGV4XCIsIG1hcmdpbjogXCIyMHB4IGF1dG9cIiB9fVxuICAgICAgICAvPlxuICAgICAgKSA6IG51bGx9XG4gICAgPC8+XG4gIClcbn1cblxuZXhwb3J0IHsgSW5maW5pdGVMaXN0IH1cbiJdLCJuYW1lcyI6WyJJbmZpbml0ZUxpc3QiLCJyZW5kZXJJdGVtIiwiaXRlbXMiLCJmZXRjaE5leHRQYWdlIiwibG9hZGluZyIsImhhc01vcmUiLCJyb290TWFyZ2luIiwibG9hZGVyU2l6ZSIsImluaXRpYWxFbGVtZW50cyIsImZyYWdtZW50IiwidmlydHVhbGl6ZWQiLCJzdGF0ZSIsInNldFN0YXRlIiwicm9vdCIsIndpbmRvdyIsImRvY3VtZW50IiwicGFnZVNpemUiLCJnZW5lcmF0ZUFyaWFMYWJlbCIsImludGVybmFsU3RhdGUiLCJzZXRJbnRlcm5hbFN0YXRlIiwidXNlU3RhdGUiLCJzdGF0ZU51bSIsInVuZGVmaW5lZCIsInNldFN0YXRlTnVtIiwib2JzZXJ2ZXIiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJjb25zb2xlIiwibG9nIiwibGVuZ3RoIiwiaW50ZXJzZWN0SXRlbSIsInVzZUNhbGxiYWNrIiwibm9kZSIsImN1cnJlbnQiLCJkaXNjb25uZWN0IiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJlbnRyaWVzIiwic29tZSIsImVudHJ5IiwiaXNJbnRlcnNlY3RpbmciLCJwcmV2Iiwib2JzZXJ2ZSIsInNsaWNlIiwibWFwIiwiaXRlbSIsImluZGV4IiwiaW50ZXJzZWN0IiwiRnJhZ21lbnQiLCJpZCIsIkluZmluaXRlTGlzdEl0ZW0iLCJhcmlhTGFiZWwiLCJDaXJjdWxhclByb2dyZXNzIiwic2l6ZSIsImRhdGEtdGVzdGlkIiwic3giLCJkaXNwbGF5IiwibWFyZ2luIl0sInJhbmdlTWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsiLCJtYXBwaW5ncyI6Ijs7OzsrQkF1SFNBOzs7ZUFBQUE7Ozs7dUJBdkhvRjswQkFDNUQ7a0NBQ0E7QUF3QmpDLFNBQVNBLGFBQThDLEVBQ3JEQyxVQUFVLEVBQ1ZDLEtBQUssRUFDTEMsYUFBYSxFQUNiQyxVQUFVLEtBQUssRUFDZkMsVUFBVSxLQUFLLEVBQ2ZDLFVBQVUsRUFDVkMsYUFBYSxFQUFFLEVBQ2ZDLGtCQUFrQixDQUFDLEVBQ25CQyxXQUFXLEtBQUssRUFDaEJDLGNBQWMsS0FBSyxFQUNuQkMsS0FBSyxFQUNMQyxRQUFRLEVBQ1JDLE9BQU9DLE9BQU9DLFFBQVEsRUFDdEJDLFdBQVcsQ0FBQyxFQUNaQyxpQkFBaUIsRUFDRDtJQUNoQixNQUFNLENBQUNDLGVBQWVDLGlCQUFpQixHQUFHQyxJQUFBQSxlQUFRLEVBQUNaO0lBQ25ELE1BQU1hLFdBQVdWLFVBQVVXLFlBQVlYLFFBQVFPO0lBQy9DLE1BQU1LLGNBQWNYLGFBQWFVLFlBQVlWLFdBQVdPO0lBQ3hELE1BQU1LLFdBQVdDLElBQUFBLGFBQU0sRUFBdUJIO0lBRTlDSSxJQUFBQSxnQkFBUyxFQUFDO1FBQ1IsSUFDRSxBQUFDZixVQUFVVyxhQUFhVixhQUFhVSxhQUNwQ1gsVUFBVVcsYUFBYVYsYUFBYVUsV0FDckM7WUFDQSxzQ0FBc0M7WUFDdENLLFFBQVFDLEdBQUcsQ0FDVCxDQUFDLGtCQUFrQixDQUFDLEVBQ3BCLDBEQUNBO1FBRUo7SUFDRixHQUFHO1FBQUNoQjtRQUFVRDtLQUFNO0lBRXBCZSxJQUFBQSxnQkFBUyxFQUFDO1FBQ1IsSUFBSUwsV0FBV25CLE1BQU0yQixNQUFNLElBQUl4QixXQUFXLENBQUNELFNBQVM7WUFDbERELDBCQUFBQSxvQ0FBQUE7UUFDRjtJQUNGLEdBQUc7UUFBQ0E7UUFBZUU7UUFBU0gsTUFBTTJCLE1BQU07UUFBRXpCO1FBQVNpQjtLQUFTO0lBRTVELE1BQU1TLGdCQUFnQkMsSUFBQUEsa0JBQVcsRUFDL0IsQ0FBa0NDO1FBQ2hDLElBQUlSLFNBQVNTLE9BQU8sRUFBRTtZQUNwQlQsU0FBU1MsT0FBTyxDQUFDQyxVQUFVO1FBQzdCO1FBQ0FWLFNBQVNTLE9BQU8sR0FBRyxJQUFJRSxxQkFDckJDLENBQUFBO1lBQ0UsSUFBSUEsUUFBUUMsSUFBSSxDQUFDQyxDQUFBQSxRQUFTQSxNQUFNQyxjQUFjLEdBQUc7Z0JBQy9DaEIsWUFBWWlCLENBQUFBO29CQUNWLE9BQU9BLE9BQU94QjtnQkFDaEI7WUFDRjtRQUNGLEdBQ0E7WUFBRVY7WUFBWU87UUFBSztRQUVyQixJQUFJbUIsTUFBTTtZQUNSUixTQUFTUyxPQUFPLENBQUNRLE9BQU8sQ0FBQ1Q7UUFDM0I7SUFDRixHQUNBO1FBQUMxQjtRQUFZTztRQUFNVTtRQUFhUDtLQUFTO0lBRzNDLHFCQUNFOztZQUNHZCxNQUFNd0MsS0FBSyxDQUFDLEdBQUdyQixVQUFVc0IsR0FBRyxDQUFDLENBQUNDLE1BQU1DO2dCQUNuQyxNQUFNQyxZQUFZRCxVQUFVeEIsV0FBVyxJQUFJUyxnQkFBZ0JSO2dCQUMzRCxPQUFPYix5QkFDTCxxQkFBQ3NDLGVBQVE7OEJBQWdCOUMsV0FBVzJDLE1BQU1DLE9BQU9DO21CQUFsQ0YsS0FBS0ksRUFBRSxrQkFFdEIscUJBQUNDLGtDQUFnQjtvQkFDZkMsU0FBUyxFQUFFakMsOEJBQUFBLHdDQUFBQSxrQkFBb0IyQjtvQkFDL0JDLE9BQU9BO29CQUVQRCxNQUFNQTtvQkFDTjNDLFlBQVlBO29CQUNaNkMsV0FBV0E7b0JBQ1hwQyxhQUFhQTttQkFKUixDQUFDLEVBQUVrQyxLQUFLSSxFQUFFLENBQUMsQ0FBQyxFQUFFSCxNQUFNLENBQUM7WUFPaEM7WUFDQ3pDLFdBQVlDLFdBQVdnQixZQUFZbkIsTUFBTTJCLE1BQU0saUJBQzlDLHFCQUFDc0IsMEJBQWdCO2dCQUNmQyxNQUFNN0M7Z0JBQ044QyxlQUFZO2dCQUNaQyxJQUFJO29CQUFFQyxTQUFTO29CQUFRQyxRQUFRO2dCQUFZO2lCQUUzQzs7O0FBR1YifQ==