{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/hooks/src/useExternalLinkUrl.ts"],"sourcesContent":["import { useCallback } from \"react\"\nimport { useAtom } from \"jotai\"\nimport { useUser } from \"@clerk/clerk-react\"\nimport { getUrlWithTextFragment } from \"@rp/web/utils\"\nimport { VisitedDocument, visitedDocumentAtom } from \"./useVisitedDocument\"\n\nconst useExternalLinkUrl = (id: string) => {\n  const { user } = useUser()\n  const [, setVisitedDocuments] = useAtom(visitedDocumentAtom)\n\n  const redirectToContent = useCallback(\n    (url: string, textFragment: string) => {\n      const visitedDoc: VisitedDocument | null | undefined = user?.primaryEmailAddress && {\n        [id]: { timestamp: Date.now(), userId: user.primaryEmailAddress?.emailAddress },\n      }\n      if (visitedDoc) {\n        setVisitedDocuments(docs => ({ ...docs, ...visitedDoc }))\n      }\n\n      window.open(getUrlWithTextFragment(url, textFragment), \"_blank\", \"noopener,noreferrer\")\n    },\n    [id, setVisitedDocuments, user?.primaryEmailAddress],\n  )\n\n  return { redirectToContent }\n}\n\nexport { useExternalLinkUrl }\n"],"names":["useExternalLinkUrl","id","user","useUser","setVisitedDocuments","useAtom","visitedDocumentAtom","redirectToContent","useCallback","url","textFragment","visitedDoc","primaryEmailAddress","timestamp","Date","now","userId","emailAddress","docs","window","open","getUrlWithTextFragment"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA2BSA;;;eAAAA;;;uBA3BmB;uBACJ;4BACA;uBACe;oCACc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAErD,MAAMA,qBAAqB,CAACC;IAC1B,MAAM,EAAEC,IAAI,EAAE,GAAGC,IAAAA,mBAAO;IACxB,MAAM,GAAGC,oBAAoB,GAAGC,IAAAA,cAAO,EAACC,uCAAmB;IAE3D,MAAMC,oBAAoBC,IAAAA,kBAAW,EACnC,CAACC,KAAaC;YAE6BR;QADzC,MAAMS,aAAiDT,CAAAA,iBAAAA,2BAAAA,KAAMU,mBAAmB,KAAI;YAClF,CAACX,GAAG,EAAE;gBAAEY,WAAWC,KAAKC,GAAG;gBAAIC,MAAM,GAAEd,4BAAAA,KAAKU,mBAAmB,cAAxBV,gDAAAA,0BAA0Be,YAAY;YAAC;QAChF;QACA,IAAIN,YAAY;YACdP,oBAAoBc,CAAAA,OAAS,mBAAKA,MAASP;QAC7C;QAEAQ,OAAOC,IAAI,CAACC,IAAAA,6BAAsB,EAACZ,KAAKC,eAAe,UAAU;IACnE,GACA;QAACT;QAAIG;QAAqBF,iBAAAA,2BAAAA,KAAMU,mBAAmB;KAAC;IAGtD,OAAO;QAAEL;IAAkB;AAC7B"}