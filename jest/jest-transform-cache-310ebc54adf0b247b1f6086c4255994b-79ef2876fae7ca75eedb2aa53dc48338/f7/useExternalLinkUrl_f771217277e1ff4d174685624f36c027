72df814654b18bf98027c37e3c9d9728
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "useExternalLinkUrl", {
    enumerable: true,
    get: function() {
        return useExternalLinkUrl;
    }
});
const _react = require("react");
const _jotai = require("jotai");
const _clerkreact = require("@clerk/clerk-react");
const _utils = require("@rp/web/utils");
const _useVisitedDocument = require("./useVisitedDocument");
function _define_property(obj, key, value) {
    if (key in obj) {
        Object.defineProperty(obj, key, {
            value: value,
            enumerable: true,
            configurable: true,
            writable: true
        });
    } else {
        obj[key] = value;
    }
    return obj;
}
function _object_spread(target) {
    for(var i = 1; i < arguments.length; i++){
        var source = arguments[i] != null ? arguments[i] : {};
        var ownKeys = Object.keys(source);
        if (typeof Object.getOwnPropertySymbols === "function") {
            ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {
                return Object.getOwnPropertyDescriptor(source, sym).enumerable;
            }));
        }
        ownKeys.forEach(function(key) {
            _define_property(target, key, source[key]);
        });
    }
    return target;
}
const useExternalLinkUrl = (id)=>{
    const { user } = (0, _clerkreact.useUser)();
    const [, setVisitedDocuments] = (0, _jotai.useAtom)(_useVisitedDocument.visitedDocumentAtom);
    const redirectToContent = (0, _react.useCallback)((url, textFragment)=>{
        var _user_primaryEmailAddress;
        const visitedDoc = (user === null || user === void 0 ? void 0 : user.primaryEmailAddress) && {
            [id]: {
                timestamp: Date.now(),
                userId: (_user_primaryEmailAddress = user.primaryEmailAddress) === null || _user_primaryEmailAddress === void 0 ? void 0 : _user_primaryEmailAddress.emailAddress
            }
        };
        if (visitedDoc) {
            setVisitedDocuments((docs)=>_object_spread({}, docs, visitedDoc));
        }
        window.open((0, _utils.getUrlWithTextFragment)(url, textFragment), "_blank", "noopener,noreferrer");
    }, [
        id,
        setVisitedDocuments,
        user === null || user === void 0 ? void 0 : user.primaryEmailAddress
    ]);
    return {
        redirectToContent
    };
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tY2F0dGFuZW8vd29ya3NwYWNlL2Zyb250ZW5kL2xpYnMvcmVhY3Qvd2ViL2NvbW1vbi9ob29rcy9zcmMvdXNlRXh0ZXJuYWxMaW5rVXJsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUNhbGxiYWNrIH0gZnJvbSBcInJlYWN0XCJcbmltcG9ydCB7IHVzZUF0b20gfSBmcm9tIFwiam90YWlcIlxuaW1wb3J0IHsgdXNlVXNlciB9IGZyb20gXCJAY2xlcmsvY2xlcmstcmVhY3RcIlxuaW1wb3J0IHsgZ2V0VXJsV2l0aFRleHRGcmFnbWVudCB9IGZyb20gXCJAcnAvd2ViL3V0aWxzXCJcbmltcG9ydCB7IFZpc2l0ZWREb2N1bWVudCwgdmlzaXRlZERvY3VtZW50QXRvbSB9IGZyb20gXCIuL3VzZVZpc2l0ZWREb2N1bWVudFwiXG5cbmNvbnN0IHVzZUV4dGVybmFsTGlua1VybCA9IChpZDogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IHsgdXNlciB9ID0gdXNlVXNlcigpXG4gIGNvbnN0IFssIHNldFZpc2l0ZWREb2N1bWVudHNdID0gdXNlQXRvbSh2aXNpdGVkRG9jdW1lbnRBdG9tKVxuXG4gIGNvbnN0IHJlZGlyZWN0VG9Db250ZW50ID0gdXNlQ2FsbGJhY2soXG4gICAgKHVybDogc3RyaW5nLCB0ZXh0RnJhZ21lbnQ6IHN0cmluZykgPT4ge1xuICAgICAgY29uc3QgdmlzaXRlZERvYzogVmlzaXRlZERvY3VtZW50IHwgbnVsbCB8IHVuZGVmaW5lZCA9IHVzZXI/LnByaW1hcnlFbWFpbEFkZHJlc3MgJiYge1xuICAgICAgICBbaWRdOiB7IHRpbWVzdGFtcDogRGF0ZS5ub3coKSwgdXNlcklkOiB1c2VyLnByaW1hcnlFbWFpbEFkZHJlc3M/LmVtYWlsQWRkcmVzcyB9LFxuICAgICAgfVxuICAgICAgaWYgKHZpc2l0ZWREb2MpIHtcbiAgICAgICAgc2V0VmlzaXRlZERvY3VtZW50cyhkb2NzID0+ICh7IC4uLmRvY3MsIC4uLnZpc2l0ZWREb2MgfSkpXG4gICAgICB9XG5cbiAgICAgIHdpbmRvdy5vcGVuKGdldFVybFdpdGhUZXh0RnJhZ21lbnQodXJsLCB0ZXh0RnJhZ21lbnQpLCBcIl9ibGFua1wiLCBcIm5vb3BlbmVyLG5vcmVmZXJyZXJcIilcbiAgICB9LFxuICAgIFtpZCwgc2V0VmlzaXRlZERvY3VtZW50cywgdXNlcj8ucHJpbWFyeUVtYWlsQWRkcmVzc10sXG4gIClcblxuICByZXR1cm4geyByZWRpcmVjdFRvQ29udGVudCB9XG59XG5cbmV4cG9ydCB7IHVzZUV4dGVybmFsTGlua1VybCB9XG4iXSwibmFtZXMiOlsidXNlRXh0ZXJuYWxMaW5rVXJsIiwiaWQiLCJ1c2VyIiwidXNlVXNlciIsInNldFZpc2l0ZWREb2N1bWVudHMiLCJ1c2VBdG9tIiwidmlzaXRlZERvY3VtZW50QXRvbSIsInJlZGlyZWN0VG9Db250ZW50IiwidXNlQ2FsbGJhY2siLCJ1cmwiLCJ0ZXh0RnJhZ21lbnQiLCJ2aXNpdGVkRG9jIiwicHJpbWFyeUVtYWlsQWRkcmVzcyIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJ1c2VySWQiLCJlbWFpbEFkZHJlc3MiLCJkb2NzIiwid2luZG93Iiwib3BlbiIsImdldFVybFdpdGhUZXh0RnJhZ21lbnQiXSwicmFuZ2VNYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OyIsIm1hcHBpbmdzIjoiOzs7OytCQTJCU0E7OztlQUFBQTs7O3VCQTNCbUI7dUJBQ0o7NEJBQ0E7dUJBQ2U7b0NBQ2M7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRXJELE1BQU1BLHFCQUFxQixDQUFDQztJQUMxQixNQUFNLEVBQUVDLElBQUksRUFBRSxHQUFHQyxJQUFBQSxtQkFBTztJQUN4QixNQUFNLEdBQUdDLG9CQUFvQixHQUFHQyxJQUFBQSxjQUFPLEVBQUNDLHVDQUFtQjtJQUUzRCxNQUFNQyxvQkFBb0JDLElBQUFBLGtCQUFXLEVBQ25DLENBQUNDLEtBQWFDO1lBRTZCUjtRQUR6QyxNQUFNUyxhQUFpRFQsQ0FBQUEsaUJBQUFBLDJCQUFBQSxLQUFNVSxtQkFBbUIsS0FBSTtZQUNsRixDQUFDWCxHQUFHLEVBQUU7Z0JBQUVZLFdBQVdDLEtBQUtDLEdBQUc7Z0JBQUlDLE1BQU0sR0FBRWQsNEJBQUFBLEtBQUtVLG1CQUFtQixjQUF4QlYsZ0RBQUFBLDBCQUEwQmUsWUFBWTtZQUFDO1FBQ2hGO1FBQ0EsSUFBSU4sWUFBWTtZQUNkUCxvQkFBb0JjLENBQUFBLE9BQVMsbUJBQUtBLE1BQVNQO1FBQzdDO1FBRUFRLE9BQU9DLElBQUksQ0FBQ0MsSUFBQUEsNkJBQXNCLEVBQUNaLEtBQUtDLGVBQWUsVUFBVTtJQUNuRSxHQUNBO1FBQUNUO1FBQUlHO1FBQXFCRixpQkFBQUEsMkJBQUFBLEtBQU1VLG1CQUFtQjtLQUFDO0lBR3RELE9BQU87UUFBRUw7SUFBa0I7QUFDN0IifQ==