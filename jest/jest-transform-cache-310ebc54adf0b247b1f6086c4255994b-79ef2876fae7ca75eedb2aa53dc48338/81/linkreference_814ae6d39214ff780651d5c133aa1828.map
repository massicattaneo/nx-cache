{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/node_modules/mdast-util-to-markdown/lib/handle/link-reference.js"],"sourcesContent":["/**\n * @typedef {import('mdast').LinkReference} LinkReference\n * @typedef {import('mdast').Parents} Parents\n * @typedef {import('../types.js').Info} Info\n * @typedef {import('../types.js').State} State\n */\n\nlinkReference.peek = linkReferencePeek\n\n/**\n * @param {LinkReference} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function linkReference(node, _, state, info) {\n  const type = node.referenceType\n  const exit = state.enter('linkReference')\n  let subexit = state.enter('label')\n  const tracker = state.createTracker(info)\n  let value = tracker.move('[')\n  const text = state.containerPhrasing(node, {\n    before: value,\n    after: ']',\n    ...tracker.current()\n  })\n  value += tracker.move(text + '][')\n\n  subexit()\n  // Hide the fact that we’re in phrasing, because escapes don’t work.\n  const stack = state.stack\n  state.stack = []\n  subexit = state.enter('reference')\n  // Note: for proper tracking, we should reset the output positions when we end\n  // up making a `shortcut` reference, because then there is no brace output.\n  // Practically, in that case, there is no content, so it doesn’t matter that\n  // we’ve tracked one too many characters.\n  const reference = state.safe(state.associationId(node), {\n    before: value,\n    after: ']',\n    ...tracker.current()\n  })\n  subexit()\n  state.stack = stack\n  exit()\n\n  if (type === 'full' || !text || text !== reference) {\n    value += tracker.move(reference + ']')\n  } else if (type === 'shortcut') {\n    // Remove the unwanted `[`.\n    value = value.slice(0, -1)\n  } else {\n    value += tracker.move(']')\n  }\n\n  return value\n}\n\n/**\n * @returns {string}\n */\nfunction linkReferencePeek() {\n  return '['\n}\n"],"names":["linkReference","peek","linkReferencePeek","node","_","state","info","type","referenceType","exit","enter","subexit","tracker","createTracker","value","move","text","containerPhrasing","before","after","current","stack","reference","safe","associationId","slice"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"AAAA;;;;;CAKC;;;;+BAWeA;;;eAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAThBA,cAAcC,IAAI,GAAGC;AASd,SAASF,cAAcG,IAAI,EAAEC,CAAC,EAAEC,KAAK,EAAEC,IAAI;IAChD,MAAMC,OAAOJ,KAAKK,aAAa;IAC/B,MAAMC,OAAOJ,MAAMK,KAAK,CAAC;IACzB,IAAIC,UAAUN,MAAMK,KAAK,CAAC;IAC1B,MAAME,UAAUP,MAAMQ,aAAa,CAACP;IACpC,IAAIQ,QAAQF,QAAQG,IAAI,CAAC;IACzB,MAAMC,OAAOX,MAAMY,iBAAiB,CAACd,MAAM;QACzCe,QAAQJ;QACRK,OAAO;OACJP,QAAQQ,OAAO;IAEpBN,SAASF,QAAQG,IAAI,CAACC,OAAO;IAE7BL;IACA,oEAAoE;IACpE,MAAMU,QAAQhB,MAAMgB,KAAK;IACzBhB,MAAMgB,KAAK,GAAG,EAAE;IAChBV,UAAUN,MAAMK,KAAK,CAAC;IACtB,8EAA8E;IAC9E,2EAA2E;IAC3E,4EAA4E;IAC5E,yCAAyC;IACzC,MAAMY,YAAYjB,MAAMkB,IAAI,CAAClB,MAAMmB,aAAa,CAACrB,OAAO;QACtDe,QAAQJ;QACRK,OAAO;OACJP,QAAQQ,OAAO;IAEpBT;IACAN,MAAMgB,KAAK,GAAGA;IACdZ;IAEA,IAAIF,SAAS,UAAU,CAACS,QAAQA,SAASM,WAAW;QAClDR,SAASF,QAAQG,IAAI,CAACO,YAAY;IACpC,OAAO,IAAIf,SAAS,YAAY;QAC9B,2BAA2B;QAC3BO,QAAQA,MAAMW,KAAK,CAAC,GAAG,CAAC;IAC1B,OAAO;QACLX,SAASF,QAAQG,IAAI,CAAC;IACxB;IAEA,OAAOD;AACT;AAEA;;CAEC,GACD,SAASZ;IACP,OAAO;AACT"}