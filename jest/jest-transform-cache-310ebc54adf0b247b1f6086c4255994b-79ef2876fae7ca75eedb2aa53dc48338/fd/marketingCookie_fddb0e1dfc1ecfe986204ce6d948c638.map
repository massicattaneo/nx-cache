{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/apps/client-web/src/app/utils/marketingCookie.ts"],"sourcesContent":["import { getCookie, setCookie } from \"typescript-cookie\"\nimport { environment } from \"@rp/common/environment\"\n\nconst MARKETING_COOKIE_NAME = \"__bigdata_lks\"\nconst cookieProperties = {\n  path: \"/\",\n  domain: \".bigdata.com\",\n  secure: true,\n}\n\ntype CookieValue = {\n  [key: string]: boolean\n}\n\nconst encodeCookieValue = (value: CookieValue) => window.btoa(JSON.stringify(value))\nconst decodeCookieValue = (value: string) => JSON.parse(window.atob(value))\n\nconst getMarketingCookie = () => {\n  const cookie = getCookie(MARKETING_COOKIE_NAME)\n  return cookie ? decodeCookieValue(cookie) : {}\n}\n\nconst setMarketingCookie = (isLogged: boolean | undefined, userId: string | undefined) => {\n  const decodedCookie = getMarketingCookie()\n  const newCookieValue = encodeCookieValue({\n    ...decodedCookie,\n    [environment.name]: isLogged,\n    user: userId ? `${environment.name}|${userId}` : decodedCookie.user,\n  })\n  setCookie(MARKETING_COOKIE_NAME, newCookieValue, cookieProperties)\n}\n\nexport { getMarketingCookie, setMarketingCookie, MARKETING_COOKIE_NAME }\n"],"names":["MARKETING_COOKIE_NAME","getMarketingCookie","setMarketingCookie","cookieProperties","path","domain","secure","encodeCookieValue","value","window","btoa","JSON","stringify","decodeCookieValue","parse","atob","cookie","getCookie","isLogged","userId","decodedCookie","newCookieValue","environment","name","user","setCookie"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;IAgCiDA,qBAAqB;eAArBA;;IAAxCC,kBAAkB;eAAlBA;;IAAoBC,kBAAkB;eAAlBA;;;kCAhCQ;6BACT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAE5B,MAAMF,wBAAwB;AAC9B,MAAMG,mBAAmB;IACvBC,MAAM;IACNC,QAAQ;IACRC,QAAQ;AACV;AAMA,MAAMC,oBAAoB,CAACC,QAAuBC,OAAOC,IAAI,CAACC,KAAKC,SAAS,CAACJ;AAC7E,MAAMK,oBAAoB,CAACL,QAAkBG,KAAKG,KAAK,CAACL,OAAOM,IAAI,CAACP;AAEpE,MAAMP,qBAAqB;IACzB,MAAMe,SAASC,IAAAA,2BAAS,EAACjB;IACzB,OAAOgB,SAASH,kBAAkBG,UAAU,CAAC;AAC/C;AAEA,MAAMd,qBAAqB,CAACgB,UAA+BC;IACzD,MAAMC,gBAAgBnB;IACtB,MAAMoB,iBAAiBd,kBAAkB,wCACpCa;QACH,CAACE,wBAAW,CAACC,IAAI,CAAC,EAAEL;QACpBM,MAAML,SAAS,CAAC,EAAEG,wBAAW,CAACC,IAAI,CAAC,CAAC,EAAEJ,OAAO,CAAC,GAAGC,cAAcI,IAAI;;IAErEC,IAAAA,2BAAS,EAACzB,uBAAuBqB,gBAAgBlB;AACnD"}