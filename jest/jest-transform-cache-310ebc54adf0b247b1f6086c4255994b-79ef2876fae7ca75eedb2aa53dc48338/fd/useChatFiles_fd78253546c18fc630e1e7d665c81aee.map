{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/chat/src/lib/Chat/useChatFiles.ts"],"sourcesContent":["import { useMemo } from \"react\"\nimport { FileRowType, isDefined } from \"@rp/common/utils\"\nimport { useMultipleFiles } from \"@rp/react/tanstack-api/file\"\nimport { useFileList } from \"@rp/react/web/common/files\"\n\nexport const useChatFiles = (filesIds: Array<string>) => {\n  const { uploading } = useFileList({ filterTerm: \"\" })\n  const data = useMultipleFiles(filesIds)\n\n  const serverFiles = data.map(obj => obj.data).filter(isDefined)\n\n  const files: Array<FileRowType> = useMemo(() => {\n    const uploadingFiles = uploading\n      .filter(file => filesIds.includes(file.fileId))\n      .map(upload => {\n        const uploadingFile: FileRowType = {\n          id: upload.fileId,\n          name: upload.file.name,\n          type: upload.file.type ?? \"\",\n          status: \"processing\" as const,\n          size: upload.file.size,\n          date: new Date().toISOString(),\n          sharedWith: upload.sharedWith,\n          owner: upload.owner,\n        }\n        return uploadingFile\n      })\n\n    return [...serverFiles, ...uploadingFiles]\n  }, [filesIds, serverFiles, uploading])\n\n  const isLoading = data.some(i => i.isLoading)\n  return { files, isLoading }\n}\n"],"names":["useChatFiles","filesIds","uploading","useFileList","filterTerm","data","useMultipleFiles","serverFiles","map","obj","filter","isDefined","files","useMemo","uploadingFiles","file","includes","fileId","upload","uploadingFile","id","name","type","status","size","date","Date","toISOString","sharedWith","owner","isLoading","some","i"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAKaA;;;eAAAA;;;uBALW;uBACe;sBACN;uBACL;AAErB,MAAMA,eAAe,CAACC;IAC3B,MAAM,EAAEC,SAAS,EAAE,GAAGC,IAAAA,kBAAW,EAAC;QAAEC,YAAY;IAAG;IACnD,MAAMC,OAAOC,IAAAA,sBAAgB,EAACL;IAE9B,MAAMM,cAAcF,KAAKG,GAAG,CAACC,CAAAA,MAAOA,IAAIJ,IAAI,EAAEK,MAAM,CAACC,gBAAS;IAE9D,MAAMC,QAA4BC,IAAAA,cAAO,EAAC;QACxC,MAAMC,iBAAiBZ,UACpBQ,MAAM,CAACK,CAAAA,OAAQd,SAASe,QAAQ,CAACD,KAAKE,MAAM,GAC5CT,GAAG,CAACU,CAAAA;gBAIKA;YAHR,MAAMC,gBAA6B;gBACjCC,IAAIF,OAAOD,MAAM;gBACjBI,MAAMH,OAAOH,IAAI,CAACM,IAAI;gBACtBC,MAAMJ,CAAAA,oBAAAA,OAAOH,IAAI,CAACO,IAAI,cAAhBJ,+BAAAA,oBAAoB;gBAC1BK,QAAQ;gBACRC,MAAMN,OAAOH,IAAI,CAACS,IAAI;gBACtBC,MAAM,IAAIC,OAAOC,WAAW;gBAC5BC,YAAYV,OAAOU,UAAU;gBAC7BC,OAAOX,OAAOW,KAAK;YACrB;YACA,OAAOV;QACT;QAEF,OAAO;eAAIZ;eAAgBO;SAAe;IAC5C,GAAG;QAACb;QAAUM;QAAaL;KAAU;IAErC,MAAM4B,YAAYzB,KAAK0B,IAAI,CAACC,CAAAA,IAAKA,EAAEF,SAAS;IAC5C,OAAO;QAAElB;QAAOkB;IAAU;AAC5B"}