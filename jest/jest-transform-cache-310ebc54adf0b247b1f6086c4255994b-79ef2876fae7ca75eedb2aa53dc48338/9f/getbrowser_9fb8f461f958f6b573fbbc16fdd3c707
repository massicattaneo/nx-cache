4ef4d2e9920c5607f5c336483b731dac
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "getBrowser", {
    enumerable: true,
    get: function() {
        return getBrowser;
    }
});
const _ssrwindow = require("ssr-window");
let browser;
function calcBrowser() {
    const window = (0, _ssrwindow.getWindow)();
    let needPerspectiveFix = false;
    function isSafari() {
        const ua = window.navigator.userAgent.toLowerCase();
        return ua.indexOf('safari') >= 0 && ua.indexOf('chrome') < 0 && ua.indexOf('android') < 0;
    }
    if (isSafari()) {
        const ua = String(window.navigator.userAgent);
        if (ua.includes('Version/')) {
            const [major, minor] = ua.split('Version/')[1].split(' ')[0].split('.').map((num)=>Number(num));
            needPerspectiveFix = major < 16 || major === 16 && minor < 2;
        }
    }
    return {
        isSafari: needPerspectiveFix || isSafari(),
        needPerspectiveFix,
        isWebView: /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(window.navigator.userAgent)
    };
}
function getBrowser() {
    if (!browser) {
        browser = calcBrowser();
    }
    return browser;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tY2F0dGFuZW8vd29ya3NwYWNlL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9zd2lwZXIvc2hhcmVkL2dldC1icm93c2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldFdpbmRvdyB9IGZyb20gJ3Nzci13aW5kb3cnO1xubGV0IGJyb3dzZXI7XG5mdW5jdGlvbiBjYWxjQnJvd3NlcigpIHtcbiAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gIGxldCBuZWVkUGVyc3BlY3RpdmVGaXggPSBmYWxzZTtcbiAgZnVuY3Rpb24gaXNTYWZhcmkoKSB7XG4gICAgY29uc3QgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiB1YS5pbmRleE9mKCdzYWZhcmknKSA+PSAwICYmIHVhLmluZGV4T2YoJ2Nocm9tZScpIDwgMCAmJiB1YS5pbmRleE9mKCdhbmRyb2lkJykgPCAwO1xuICB9XG4gIGlmIChpc1NhZmFyaSgpKSB7XG4gICAgY29uc3QgdWEgPSBTdHJpbmcod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgIGlmICh1YS5pbmNsdWRlcygnVmVyc2lvbi8nKSkge1xuICAgICAgY29uc3QgW21ham9yLCBtaW5vcl0gPSB1YS5zcGxpdCgnVmVyc2lvbi8nKVsxXS5zcGxpdCgnICcpWzBdLnNwbGl0KCcuJykubWFwKG51bSA9PiBOdW1iZXIobnVtKSk7XG4gICAgICBuZWVkUGVyc3BlY3RpdmVGaXggPSBtYWpvciA8IDE2IHx8IG1ham9yID09PSAxNiAmJiBtaW5vciA8IDI7XG4gICAgfVxuICB9XG4gIHJldHVybiB7XG4gICAgaXNTYWZhcmk6IG5lZWRQZXJzcGVjdGl2ZUZpeCB8fCBpc1NhZmFyaSgpLFxuICAgIG5lZWRQZXJzcGVjdGl2ZUZpeCxcbiAgICBpc1dlYlZpZXc6IC8oaVBob25lfGlQb2R8aVBhZCkuKkFwcGxlV2ViS2l0KD8hLipTYWZhcmkpL2kudGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudClcbiAgfTtcbn1cbmZ1bmN0aW9uIGdldEJyb3dzZXIoKSB7XG4gIGlmICghYnJvd3Nlcikge1xuICAgIGJyb3dzZXIgPSBjYWxjQnJvd3NlcigpO1xuICB9XG4gIHJldHVybiBicm93c2VyO1xufVxuZXhwb3J0IHsgZ2V0QnJvd3NlciB9OyJdLCJuYW1lcyI6WyJnZXRCcm93c2VyIiwiYnJvd3NlciIsImNhbGNCcm93c2VyIiwid2luZG93IiwiZ2V0V2luZG93IiwibmVlZFBlcnNwZWN0aXZlRml4IiwiaXNTYWZhcmkiLCJ1YSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwiaW5kZXhPZiIsIlN0cmluZyIsImluY2x1ZGVzIiwibWFqb3IiLCJtaW5vciIsInNwbGl0IiwibWFwIiwibnVtIiwiTnVtYmVyIiwiaXNXZWJWaWV3IiwidGVzdCJdLCJyYW5nZU1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OyIsIm1hcHBpbmdzIjoiOzs7OytCQTRCU0E7OztlQUFBQTs7OzJCQTVCaUI7QUFDMUIsSUFBSUM7QUFDSixTQUFTQztJQUNQLE1BQU1DLFNBQVNDLElBQUFBLG9CQUFTO0lBQ3hCLElBQUlDLHFCQUFxQjtJQUN6QixTQUFTQztRQUNQLE1BQU1DLEtBQUtKLE9BQU9LLFNBQVMsQ0FBQ0MsU0FBUyxDQUFDQyxXQUFXO1FBQ2pELE9BQU9ILEdBQUdJLE9BQU8sQ0FBQyxhQUFhLEtBQUtKLEdBQUdJLE9BQU8sQ0FBQyxZQUFZLEtBQUtKLEdBQUdJLE9BQU8sQ0FBQyxhQUFhO0lBQzFGO0lBQ0EsSUFBSUwsWUFBWTtRQUNkLE1BQU1DLEtBQUtLLE9BQU9ULE9BQU9LLFNBQVMsQ0FBQ0MsU0FBUztRQUM1QyxJQUFJRixHQUFHTSxRQUFRLENBQUMsYUFBYTtZQUMzQixNQUFNLENBQUNDLE9BQU9DLE1BQU0sR0FBR1IsR0FBR1MsS0FBSyxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUNBLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDQSxLQUFLLENBQUMsS0FBS0MsR0FBRyxDQUFDQyxDQUFBQSxNQUFPQyxPQUFPRDtZQUMxRmIscUJBQXFCUyxRQUFRLE1BQU1BLFVBQVUsTUFBTUMsUUFBUTtRQUM3RDtJQUNGO0lBQ0EsT0FBTztRQUNMVCxVQUFVRCxzQkFBc0JDO1FBQ2hDRDtRQUNBZSxXQUFXLCtDQUErQ0MsSUFBSSxDQUFDbEIsT0FBT0ssU0FBUyxDQUFDQyxTQUFTO0lBQzNGO0FBQ0Y7QUFDQSxTQUFTVDtJQUNQLElBQUksQ0FBQ0MsU0FBUztRQUNaQSxVQUFVQztJQUNaO0lBQ0EsT0FBT0Q7QUFDVCJ9