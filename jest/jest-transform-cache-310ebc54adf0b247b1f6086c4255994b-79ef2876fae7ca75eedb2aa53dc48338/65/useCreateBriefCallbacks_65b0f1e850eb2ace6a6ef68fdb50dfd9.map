{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/brief/src/hooks/useCreateBriefCallbacks/useCreateBriefCallbacks.ts"],"sourcesContent":["import { useCallback } from \"react\"\nimport { useNavigate } from \"react-router-dom\"\nimport {\n  useBriefConfigForm,\n  useBriefCreateSubmission,\n  useBriefEditSubmission,\n} from \"@rp/react/common/brief\"\nimport { useSnackbar } from \"@rp/react/web/common/providers\"\nimport { BRIEF_ROUTE_CREATE_SUCCESS, BRIEF_ROUTE_EDIT_SUCCESS } from \"@rp/react/web/router\"\n\ntype UseCreateBriefCallbacksProps = {\n  initialWatchlistId: string | null\n  isEdit: boolean\n  isBriefPage?: boolean\n}\n\ntype UseCreateBriefCallbacksState = {\n  handleComplete: () => void\n  isSaving: boolean\n}\n\nconst useCreateBriefCallbacks = ({\n  initialWatchlistId,\n  isEdit,\n  isBriefPage = true,\n}: UseCreateBriefCallbacksProps): UseCreateBriefCallbacksState => {\n  const { enqueueError } = useSnackbar()\n  const navigate = useNavigate()\n  const { form } = useBriefConfigForm()\n\n  const onSubmitCreateSuccess = useCallback(\n    () =>\n      isBriefPage\n        ? navigate(BRIEF_ROUTE_CREATE_SUCCESS, {\n            replace: true,\n            state: { initialWatchlistId },\n          })\n        : null,\n    [initialWatchlistId, isBriefPage, navigate],\n  )\n\n  const onSubmitEditSuccess = useCallback(\n    () => navigate(BRIEF_ROUTE_EDIT_SUCCESS, { replace: true }),\n    [navigate],\n  )\n\n  const onSubmitError = useCallback(\n    () => enqueueError(\"Brief submission failed, please try again.\"),\n    [enqueueError],\n  )\n\n  const { submitNewBrief, isSaving: isSavingSubmitCreated } = useBriefCreateSubmission({\n    onSubmitSuccess: onSubmitCreateSuccess,\n    onSubmitError,\n  })\n\n  const { submitEditedBrief, isSaving: isSavingSubmitEdited } = useBriefEditSubmission({\n    onSubmitSuccess: onSubmitEditSuccess,\n    onSubmitError,\n  })\n\n  const handleComplete = useCallback(async () => {\n    if (isEdit) {\n      submitEditedBrief(form)\n    } else {\n      submitNewBrief(form)\n    }\n  }, [isEdit, submitEditedBrief, form, submitNewBrief])\n\n  const isSaving = isSavingSubmitCreated || isSavingSubmitEdited\n\n  return { isSaving, handleComplete }\n}\n\nexport { useCreateBriefCallbacks }\nexport type { UseCreateBriefCallbacksState, UseCreateBriefCallbacksProps }\n"],"names":["useCreateBriefCallbacks","initialWatchlistId","isEdit","isBriefPage","enqueueError","useSnackbar","navigate","useNavigate","form","useBriefConfigForm","onSubmitCreateSuccess","useCallback","BRIEF_ROUTE_CREATE_SUCCESS","replace","state","onSubmitEditSuccess","BRIEF_ROUTE_EDIT_SUCCESS","onSubmitError","submitNewBrief","isSaving","isSavingSubmitCreated","useBriefCreateSubmission","onSubmitSuccess","submitEditedBrief","isSavingSubmitEdited","useBriefEditSubmission","handleComplete"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA0ESA;;;eAAAA;;;uBA1EmB;gCACA;uBAKrB;2BACqB;wBACyC;AAarE,MAAMA,0BAA0B,CAAC,EAC/BC,kBAAkB,EAClBC,MAAM,EACNC,cAAc,IAAI,EACW;IAC7B,MAAM,EAAEC,YAAY,EAAE,GAAGC,IAAAA,sBAAW;IACpC,MAAMC,WAAWC,IAAAA,2BAAW;IAC5B,MAAM,EAAEC,IAAI,EAAE,GAAGC,IAAAA,yBAAkB;IAEnC,MAAMC,wBAAwBC,IAAAA,kBAAW,EACvC,IACER,cACIG,SAASM,kCAA0B,EAAE;YACnCC,SAAS;YACTC,OAAO;gBAAEb;YAAmB;QAC9B,KACA,MACN;QAACA;QAAoBE;QAAaG;KAAS;IAG7C,MAAMS,sBAAsBJ,IAAAA,kBAAW,EACrC,IAAML,SAASU,gCAAwB,EAAE;YAAEH,SAAS;QAAK,IACzD;QAACP;KAAS;IAGZ,MAAMW,gBAAgBN,IAAAA,kBAAW,EAC/B,IAAMP,aAAa,+CACnB;QAACA;KAAa;IAGhB,MAAM,EAAEc,cAAc,EAAEC,UAAUC,qBAAqB,EAAE,GAAGC,IAAAA,+BAAwB,EAAC;QACnFC,iBAAiBZ;QACjBO;IACF;IAEA,MAAM,EAAEM,iBAAiB,EAAEJ,UAAUK,oBAAoB,EAAE,GAAGC,IAAAA,6BAAsB,EAAC;QACnFH,iBAAiBP;QACjBE;IACF;IAEA,MAAMS,iBAAiBf,IAAAA,kBAAW,EAAC;QACjC,IAAIT,QAAQ;YACVqB,kBAAkBf;QACpB,OAAO;YACLU,eAAeV;QACjB;IACF,GAAG;QAACN;QAAQqB;QAAmBf;QAAMU;KAAe;IAEpD,MAAMC,WAAWC,yBAAyBI;IAE1C,OAAO;QAAEL;QAAUO;IAAe;AACpC"}