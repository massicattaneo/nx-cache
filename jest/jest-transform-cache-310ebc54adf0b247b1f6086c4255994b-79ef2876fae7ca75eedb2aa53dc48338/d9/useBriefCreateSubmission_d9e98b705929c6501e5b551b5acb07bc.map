{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/common/brief/src/hooks/useBriefCreateSubmission.ts"],"sourcesContent":["import { useCallback, useState } from \"react\"\nimport { useUser } from \"@clerk/clerk-react\"\nimport { type BriefConfigForm, useCreateUserBriefConfigs } from \"@rp/react/tanstack-api/brief\"\nimport { transformBriefFormToPost } from \"../utils/briefPageHooks.utils\"\n\ntype UseBriefCreateSubmissionProps = {\n  onSubmitSuccess: () => void\n  onSubmitError: () => void\n}\n\ntype UseBriefCreateSubmissionState = {\n  submitNewBrief: (brief: BriefConfigForm) => Promise<void>\n  isSaving: boolean\n}\n\nconst useBriefCreateSubmission = ({\n  onSubmitSuccess,\n  onSubmitError,\n}: UseBriefCreateSubmissionProps): UseBriefCreateSubmissionState => {\n  const { user } = useUser()\n  const { mutateAsync } = useCreateUserBriefConfigs()\n  const [isSaving, setIsSaving] = useState(false)\n\n  const submitNewBrief = useCallback(\n    async (brief: BriefConfigForm) => {\n      if (!user) return\n\n      setIsSaving(true)\n\n      try {\n        await mutateAsync(transformBriefFormToPost(brief, user.id))\n        onSubmitSuccess()\n      } catch (err) {\n        onSubmitError()\n      } finally {\n        setIsSaving(false)\n      }\n    },\n    [mutateAsync, onSubmitError, onSubmitSuccess, user],\n  )\n\n  return { submitNewBrief, isSaving }\n}\n\nexport { useBriefCreateSubmission }\nexport type { UseBriefCreateSubmissionState, UseBriefCreateSubmissionProps }\n"],"names":["useBriefCreateSubmission","onSubmitSuccess","onSubmitError","user","useUser","mutateAsync","useCreateUserBriefConfigs","isSaving","setIsSaving","useState","submitNewBrief","useCallback","brief","transformBriefFormToPost","id","err"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA4CSA;;;eAAAA;;;uBA5C6B;4BACd;uBACwC;qCACvB;AAYzC,MAAMA,2BAA2B,CAAC,EAChCC,eAAe,EACfC,aAAa,EACiB;IAC9B,MAAM,EAAEC,IAAI,EAAE,GAAGC,IAAAA,mBAAO;IACxB,MAAM,EAAEC,WAAW,EAAE,GAAGC,IAAAA,gCAAyB;IACjD,MAAM,CAACC,UAAUC,YAAY,GAAGC,IAAAA,eAAQ,EAAC;IAEzC,MAAMC,iBAAiBC,IAAAA,kBAAW,EAChC,OAAOC;QACL,IAAI,CAACT,MAAM;QAEXK,YAAY;QAEZ,IAAI;YACF,MAAMH,YAAYQ,IAAAA,6CAAwB,EAACD,OAAOT,KAAKW,EAAE;YACzDb;QACF,EAAE,OAAOc,KAAK;YACZb;QACF,SAAU;YACRM,YAAY;QACd;IACF,GACA;QAACH;QAAaH;QAAeD;QAAiBE;KAAK;IAGrD,OAAO;QAAEO;QAAgBH;IAAS;AACpC"}