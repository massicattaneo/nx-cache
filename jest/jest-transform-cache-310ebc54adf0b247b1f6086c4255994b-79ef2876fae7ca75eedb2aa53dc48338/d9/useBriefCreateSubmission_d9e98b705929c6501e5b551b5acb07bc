ebb50d47be6a4755669c3dee7aa0c99e
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "useBriefCreateSubmission", {
    enumerable: true,
    get: function() {
        return useBriefCreateSubmission;
    }
});
const _react = require("react");
const _clerkreact = require("@clerk/clerk-react");
const _brief = require("@rp/react/tanstack-api/brief");
const _briefPageHooksutils = require("../utils/briefPageHooks.utils");
const useBriefCreateSubmission = ({ onSubmitSuccess, onSubmitError })=>{
    const { user } = (0, _clerkreact.useUser)();
    const { mutateAsync } = (0, _brief.useCreateUserBriefConfigs)();
    const [isSaving, setIsSaving] = (0, _react.useState)(false);
    const submitNewBrief = (0, _react.useCallback)(async (brief)=>{
        if (!user) return;
        setIsSaving(true);
        try {
            await mutateAsync((0, _briefPageHooksutils.transformBriefFormToPost)(brief, user.id));
            onSubmitSuccess();
        } catch (err) {
            onSubmitError();
        } finally{
            setIsSaving(false);
        }
    }, [
        mutateAsync,
        onSubmitError,
        onSubmitSuccess,
        user
    ]);
    return {
        submitNewBrief,
        isSaving
    };
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tY2F0dGFuZW8vd29ya3NwYWNlL2Zyb250ZW5kL2xpYnMvcmVhY3QvY29tbW9uL2JyaWVmL3NyYy9ob29rcy91c2VCcmllZkNyZWF0ZVN1Ym1pc3Npb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCJcbmltcG9ydCB7IHVzZVVzZXIgfSBmcm9tIFwiQGNsZXJrL2NsZXJrLXJlYWN0XCJcbmltcG9ydCB7IHR5cGUgQnJpZWZDb25maWdGb3JtLCB1c2VDcmVhdGVVc2VyQnJpZWZDb25maWdzIH0gZnJvbSBcIkBycC9yZWFjdC90YW5zdGFjay1hcGkvYnJpZWZcIlxuaW1wb3J0IHsgdHJhbnNmb3JtQnJpZWZGb3JtVG9Qb3N0IH0gZnJvbSBcIi4uL3V0aWxzL2JyaWVmUGFnZUhvb2tzLnV0aWxzXCJcblxudHlwZSBVc2VCcmllZkNyZWF0ZVN1Ym1pc3Npb25Qcm9wcyA9IHtcbiAgb25TdWJtaXRTdWNjZXNzOiAoKSA9PiB2b2lkXG4gIG9uU3VibWl0RXJyb3I6ICgpID0+IHZvaWRcbn1cblxudHlwZSBVc2VCcmllZkNyZWF0ZVN1Ym1pc3Npb25TdGF0ZSA9IHtcbiAgc3VibWl0TmV3QnJpZWY6IChicmllZjogQnJpZWZDb25maWdGb3JtKSA9PiBQcm9taXNlPHZvaWQ+XG4gIGlzU2F2aW5nOiBib29sZWFuXG59XG5cbmNvbnN0IHVzZUJyaWVmQ3JlYXRlU3VibWlzc2lvbiA9ICh7XG4gIG9uU3VibWl0U3VjY2VzcyxcbiAgb25TdWJtaXRFcnJvcixcbn06IFVzZUJyaWVmQ3JlYXRlU3VibWlzc2lvblByb3BzKTogVXNlQnJpZWZDcmVhdGVTdWJtaXNzaW9uU3RhdGUgPT4ge1xuICBjb25zdCB7IHVzZXIgfSA9IHVzZVVzZXIoKVxuICBjb25zdCB7IG11dGF0ZUFzeW5jIH0gPSB1c2VDcmVhdGVVc2VyQnJpZWZDb25maWdzKClcbiAgY29uc3QgW2lzU2F2aW5nLCBzZXRJc1NhdmluZ10gPSB1c2VTdGF0ZShmYWxzZSlcblxuICBjb25zdCBzdWJtaXROZXdCcmllZiA9IHVzZUNhbGxiYWNrKFxuICAgIGFzeW5jIChicmllZjogQnJpZWZDb25maWdGb3JtKSA9PiB7XG4gICAgICBpZiAoIXVzZXIpIHJldHVyblxuXG4gICAgICBzZXRJc1NhdmluZyh0cnVlKVxuXG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBtdXRhdGVBc3luYyh0cmFuc2Zvcm1CcmllZkZvcm1Ub1Bvc3QoYnJpZWYsIHVzZXIuaWQpKVxuICAgICAgICBvblN1Ym1pdFN1Y2Nlc3MoKVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIG9uU3VibWl0RXJyb3IoKVxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgc2V0SXNTYXZpbmcoZmFsc2UpXG4gICAgICB9XG4gICAgfSxcbiAgICBbbXV0YXRlQXN5bmMsIG9uU3VibWl0RXJyb3IsIG9uU3VibWl0U3VjY2VzcywgdXNlcl0sXG4gIClcblxuICByZXR1cm4geyBzdWJtaXROZXdCcmllZiwgaXNTYXZpbmcgfVxufVxuXG5leHBvcnQgeyB1c2VCcmllZkNyZWF0ZVN1Ym1pc3Npb24gfVxuZXhwb3J0IHR5cGUgeyBVc2VCcmllZkNyZWF0ZVN1Ym1pc3Npb25TdGF0ZSwgVXNlQnJpZWZDcmVhdGVTdWJtaXNzaW9uUHJvcHMgfVxuIl0sIm5hbWVzIjpbInVzZUJyaWVmQ3JlYXRlU3VibWlzc2lvbiIsIm9uU3VibWl0U3VjY2VzcyIsIm9uU3VibWl0RXJyb3IiLCJ1c2VyIiwidXNlVXNlciIsIm11dGF0ZUFzeW5jIiwidXNlQ3JlYXRlVXNlckJyaWVmQ29uZmlncyIsImlzU2F2aW5nIiwic2V0SXNTYXZpbmciLCJ1c2VTdGF0ZSIsInN1Ym1pdE5ld0JyaWVmIiwidXNlQ2FsbGJhY2siLCJicmllZiIsInRyYW5zZm9ybUJyaWVmRm9ybVRvUG9zdCIsImlkIiwiZXJyIl0sInJhbmdlTWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsiLCJtYXBwaW5ncyI6Ijs7OzsrQkE0Q1NBOzs7ZUFBQUE7Ozt1QkE1QzZCOzRCQUNkO3VCQUN3QztxQ0FDdkI7QUFZekMsTUFBTUEsMkJBQTJCLENBQUMsRUFDaENDLGVBQWUsRUFDZkMsYUFBYSxFQUNpQjtJQUM5QixNQUFNLEVBQUVDLElBQUksRUFBRSxHQUFHQyxJQUFBQSxtQkFBTztJQUN4QixNQUFNLEVBQUVDLFdBQVcsRUFBRSxHQUFHQyxJQUFBQSxnQ0FBeUI7SUFDakQsTUFBTSxDQUFDQyxVQUFVQyxZQUFZLEdBQUdDLElBQUFBLGVBQVEsRUFBQztJQUV6QyxNQUFNQyxpQkFBaUJDLElBQUFBLGtCQUFXLEVBQ2hDLE9BQU9DO1FBQ0wsSUFBSSxDQUFDVCxNQUFNO1FBRVhLLFlBQVk7UUFFWixJQUFJO1lBQ0YsTUFBTUgsWUFBWVEsSUFBQUEsNkNBQXdCLEVBQUNELE9BQU9ULEtBQUtXLEVBQUU7WUFDekRiO1FBQ0YsRUFBRSxPQUFPYyxLQUFLO1lBQ1piO1FBQ0YsU0FBVTtZQUNSTSxZQUFZO1FBQ2Q7SUFDRixHQUNBO1FBQUNIO1FBQWFIO1FBQWVEO1FBQWlCRTtLQUFLO0lBR3JELE9BQU87UUFBRU87UUFBZ0JIO0lBQVM7QUFDcEMifQ==