{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/composite-components/src/CloneElement/CloneElement.tsx"],"sourcesContent":["import { MouseEventHandler, ReactNode, forwardRef, useEffect, useState } from \"react\"\nimport parse, { Element, HTMLReactParserOptions } from \"html-react-parser\"\nimport { useElementRect } from \"@rp/react/web/common/hooks\"\nimport { Box, SxProps } from \"@rp/react/web/mui/core\"\n\ntype Props = {\n  selector: string\n  onClick?: MouseEventHandler\n  sx?: SxProps\n}\n\nconst getOptions = (selector: string): HTMLReactParserOptions => {\n  return {\n    replace(domNode) {\n      if (domNode instanceof Element && domNode.attribs) {\n        if (domNode.attribs[\"id\"] === selector.replace(\"#\", \"\")) {\n          // eslint-disable-next-line no-param-reassign\n          delete domNode.attribs[\"id\"]\n        }\n        if (domNode.name === \"a\") {\n          // eslint-disable-next-line no-param-reassign\n          delete domNode.attribs[\"href\"]\n        }\n      }\n    },\n  }\n}\n\nconst CloneElement = forwardRef(({ selector, onClick, sx, ...props }: Props, ref) => {\n  const [element, setElement] = useState<ReactNode>(null)\n  const { width, height, top, left } = useElementRect(document.querySelector(selector), {\n    resize: true,\n  })\n\n  useEffect(() => {\n    const htmlElement = document.querySelector(selector)\n    if (htmlElement) {\n      setElement(parse(htmlElement.outerHTML, getOptions(selector)))\n    }\n  }, [selector])\n\n  return (\n    <Box\n      ref={ref}\n      {...props}\n      onClick={ev => {\n        ev.stopPropagation()\n        ev.preventDefault()\n        onClick?.(ev)\n      }}\n      sx={{\n        position: \"fixed\",\n        top: top,\n        left: left,\n        width: width,\n        height,\n        ...sx,\n      }}\n    >\n      {element}\n    </Box>\n  )\n})\n\nexport { CloneElement }\n"],"names":["CloneElement","getOptions","selector","replace","domNode","Element","attribs","name","forwardRef","ref","onClick","sx","props","element","setElement","useState","width","height","top","left","useElementRect","document","querySelector","resize","useEffect","htmlElement","parse","outerHTML","Box","ev","stopPropagation","preventDefault","position"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAgESA;;;eAAAA;;;;uBAhEqE;yEACvB;uBACxB;sBACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ7B,MAAMC,aAAa,CAACC;IAClB,OAAO;QACLC,SAAQC,OAAO;YACb,IAAIA,mBAAmBC,wBAAO,IAAID,QAAQE,OAAO,EAAE;gBACjD,IAAIF,QAAQE,OAAO,CAAC,KAAK,KAAKJ,SAASC,OAAO,CAAC,KAAK,KAAK;oBACvD,6CAA6C;oBAC7C,OAAOC,QAAQE,OAAO,CAAC,KAAK;gBAC9B;gBACA,IAAIF,QAAQG,IAAI,KAAK,KAAK;oBACxB,6CAA6C;oBAC7C,OAAOH,QAAQE,OAAO,CAAC,OAAO;gBAChC;YACF;QACF;IACF;AACF;AAEA,MAAMN,6BAAeQ,IAAAA,iBAAU,EAAC,SAA6CC;QAA5C,EAAEP,QAAQ,EAAEQ,OAAO,EAAEC,EAAE,EAAmB,WAAdC;QAA1BV;QAAUQ;QAASC;;IACpD,MAAM,CAACE,SAASC,WAAW,GAAGC,IAAAA,eAAQ,EAAY;IAClD,MAAM,EAAEC,KAAK,EAAEC,MAAM,EAAEC,GAAG,EAAEC,IAAI,EAAE,GAAGC,IAAAA,qBAAc,EAACC,SAASC,aAAa,CAACpB,WAAW;QACpFqB,QAAQ;IACV;IAEAC,IAAAA,gBAAS,EAAC;QACR,MAAMC,cAAcJ,SAASC,aAAa,CAACpB;QAC3C,IAAIuB,aAAa;YACfX,WAAWY,IAAAA,wBAAK,EAACD,YAAYE,SAAS,EAAE1B,WAAWC;QACrD;IACF,GAAG;QAACA;KAAS;IAEb,qBACE,qBAAC0B,SAAG;QACFnB,KAAKA;OACDG;QACJF,SAASmB,CAAAA;YACPA,GAAGC,eAAe;YAClBD,GAAGE,cAAc;YACjBrB,oBAAAA,8BAAAA,QAAUmB;QACZ;QACAlB,IAAI;YACFqB,UAAU;YACVd,KAAKA;YACLC,MAAMA;YACNH,OAAOA;YACPC;WACGN;kBAGJE;;AAGP"}