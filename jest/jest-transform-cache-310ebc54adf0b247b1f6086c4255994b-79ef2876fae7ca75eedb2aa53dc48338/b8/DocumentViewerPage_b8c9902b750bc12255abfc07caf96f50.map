{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/document-viewer/src/lib/DocumentViewerPage/DocumentViewerPage.tsx"],"sourcesContent":["import React from \"react\"\nimport { useNavigate } from \"react-router-dom\"\nimport { CqsItem } from \"@rp/common/api-types\"\nimport { Watchlist } from \"@rp/common/api-types\"\nimport { RpqlFilter } from \"@rp/common/api-types\"\nimport { useAccount } from \"@rp/react/common/providers\"\nimport { checkDocument, useRpjson } from \"@rp/react/common/rpjson\"\nimport { useHashParams } from \"@rp/react/web/common/hooks\"\nimport { ContainerProps } from \"@rp/react/web/mui/core\"\nimport { CONTACT_SALES_ROUTE } from \"@rp/react/web/router\"\nimport { CustomDocumentHeaderProps } from \"../DocumentViewer.types\"\nimport { DocumentsCollectionContainer } from \"../DocumentsCollectionContainer\"\nimport { DocumentViewerPageContainer } from \"./DocumentViewerPageContainer\"\nimport { DocumentViewerSelector } from \"./DocumentViewerSelector\"\nimport { useShouldUseCollectionViewer } from \"./hooks/useShouldUseCollectionViewer\"\n\ntype Props = {\n  children?: React.ReactNode\n  backTitle: string\n  disableCheckbox?: boolean\n  disableDocumentDiscovery?: boolean\n  expression?: RpqlFilter\n  onChange?: (item: CqsItem) => void\n  onExclude?: (item: CqsItem) => void\n  contentContainerProps?: ContainerProps\n  rpjsonHeaderOffset?: number\n  pdfHeaderOffset?: number\n  pdfBodyOffset?: number\n  onAddToWatchlist?: (watchlist: Watchlist) => void\n  disableBackButton?: boolean\n  isFromChat?: boolean\n  customDocumentHeaderProps?: CustomDocumentHeaderProps\n  customBackClick?: () => void\n  documentId?: string\n  customBackgroundColor?: string\n  shouldUseScrollTrigger?: boolean\n}\n\nfunction DocumentViewerPage({\n  children,\n  backTitle,\n  disableCheckbox = false,\n  disableDocumentDiscovery = false,\n  expression,\n  onChange,\n  onExclude,\n  rpjsonHeaderOffset,\n  pdfHeaderOffset,\n  pdfBodyOffset,\n  onAddToWatchlist,\n  contentContainerProps,\n  disableBackButton = false,\n  isFromChat,\n  customDocumentHeaderProps,\n  customBackClick,\n  documentId: documentIdFromProps,\n  customBackgroundColor,\n  shouldUseScrollTrigger,\n}: Props) {\n  const { hasEntitlement } = useAccount()\n  const [documentParams] = useHashParams()\n  const { document: documentIdFromParams = \"\", private: isPrivate } = documentParams\n  const documentId = documentIdFromProps || documentIdFromParams\n\n  const navigate = useNavigate()\n\n  const {\n    data: rpjsonDocument,\n    isLoading: isRpJsonLoading,\n    error,\n  } = useRpjson(documentId, isPrivate ? \"private\" : \"public\")\n  const { isLimited } = checkDocument(rpjsonDocument)\n\n  const shouldNavigateToSales = !!documentId && !isLimited && !hasEntitlement(\"content:read\")\n\n  if (shouldNavigateToSales) {\n    navigate(CONTACT_SALES_ROUTE, { replace: true })\n  }\n\n  const { shouldUseQuartrViewer, collectionId } = useShouldUseCollectionViewer({ rpjsonDocument })\n\n  if (shouldUseQuartrViewer) {\n    return (\n      <DocumentsCollectionContainer\n        documentId={documentId}\n        collectionId={collectionId}\n        isFromChat={isFromChat}\n      />\n    )\n  }\n\n  return (\n    <DocumentViewerPageContainer\n      documentId={documentId}\n      contentContainerProps={contentContainerProps}\n      documentViewer={() => (\n        <DocumentViewerSelector\n          pdfHeaderOffset={pdfHeaderOffset}\n          pdfBodyOffset={pdfBodyOffset}\n          isRpJsonLoading={isRpJsonLoading}\n          rpjsonDocument={rpjsonDocument}\n          rpjsonHeaderOffset={rpjsonHeaderOffset}\n          isPrivate={!!isPrivate}\n          documentId={documentId}\n          backTitle={backTitle}\n          disableBackButton={disableBackButton}\n          disableCheckbox={disableCheckbox}\n          disableDocumentDiscovery={disableDocumentDiscovery}\n          expression={expression}\n          onChange={onChange}\n          onExclude={onExclude}\n          onAddToWatchlist={onAddToWatchlist}\n          error={error}\n          customDocumentHeaderProps={customDocumentHeaderProps}\n          customBackClick={customBackClick}\n          customBackgroundColor={customBackgroundColor}\n          shouldUseScrollTrigger={shouldUseScrollTrigger}\n        />\n      )}\n    >\n      {children}\n    </DocumentViewerPageContainer>\n  )\n}\n\nexport { DocumentViewerPage }\n"],"names":["DocumentViewerPage","children","backTitle","disableCheckbox","disableDocumentDiscovery","expression","onChange","onExclude","rpjsonHeaderOffset","pdfHeaderOffset","pdfBodyOffset","onAddToWatchlist","contentContainerProps","disableBackButton","isFromChat","customDocumentHeaderProps","customBackClick","documentId","documentIdFromProps","customBackgroundColor","shouldUseScrollTrigger","hasEntitlement","useAccount","documentParams","useHashParams","document","documentIdFromParams","private","isPrivate","navigate","useNavigate","data","rpjsonDocument","isLoading","isRpJsonLoading","error","useRpjson","isLimited","checkDocument","shouldNavigateToSales","CONTACT_SALES_ROUTE","replace","shouldUseQuartrViewer","collectionId","useShouldUseCollectionViewer","DocumentsCollectionContainer","DocumentViewerPageContainer","documentViewer","DocumentViewerSelector"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA6HSA;;;eAAAA;;;;8DA7HS;gCACU;2BAID;wBACc;uBACX;wBAEM;8CAES;6CACD;wCACL;8CACM;;;;;;AAwB7C,SAASA,mBAAmB,EAC1BC,QAAQ,EACRC,SAAS,EACTC,kBAAkB,KAAK,EACvBC,2BAA2B,KAAK,EAChCC,UAAU,EACVC,QAAQ,EACRC,SAAS,EACTC,kBAAkB,EAClBC,eAAe,EACfC,aAAa,EACbC,gBAAgB,EAChBC,qBAAqB,EACrBC,oBAAoB,KAAK,EACzBC,UAAU,EACVC,yBAAyB,EACzBC,eAAe,EACfC,YAAYC,mBAAmB,EAC/BC,qBAAqB,EACrBC,sBAAsB,EAChB;IACN,MAAM,EAAEC,cAAc,EAAE,GAAGC,IAAAA,qBAAU;IACrC,MAAM,CAACC,eAAe,GAAGC,IAAAA,oBAAa;IACtC,MAAM,EAAEC,UAAUC,uBAAuB,EAAE,EAAEC,SAASC,SAAS,EAAE,GAAGL;IACpE,MAAMN,aAAaC,uBAAuBQ;IAE1C,MAAMG,WAAWC,IAAAA,2BAAW;IAE5B,MAAM,EACJC,MAAMC,cAAc,EACpBC,WAAWC,eAAe,EAC1BC,KAAK,EACN,GAAGC,IAAAA,iBAAS,EAACnB,YAAYW,YAAY,YAAY;IAClD,MAAM,EAAES,SAAS,EAAE,GAAGC,IAAAA,qBAAa,EAACN;IAEpC,MAAMO,wBAAwB,CAAC,CAACtB,cAAc,CAACoB,aAAa,CAAChB,eAAe;IAE5E,IAAIkB,uBAAuB;QACzBV,SAASW,2BAAmB,EAAE;YAAEC,SAAS;QAAK;IAChD;IAEA,MAAM,EAAEC,qBAAqB,EAAEC,YAAY,EAAE,GAAGC,IAAAA,0DAA4B,EAAC;QAAEZ;IAAe;IAE9F,IAAIU,uBAAuB;QACzB,qBACE,qBAACG,0DAA4B;YAC3B5B,YAAYA;YACZ0B,cAAcA;YACd7B,YAAYA;;IAGlB;IAEA,qBACE,qBAACgC,wDAA2B;QAC1B7B,YAAYA;QACZL,uBAAuBA;QACvBmC,gBAAgB,kBACd,qBAACC,8CAAsB;gBACrBvC,iBAAiBA;gBACjBC,eAAeA;gBACfwB,iBAAiBA;gBACjBF,gBAAgBA;gBAChBxB,oBAAoBA;gBACpBoB,WAAW,CAAC,CAACA;gBACbX,YAAYA;gBACZf,WAAWA;gBACXW,mBAAmBA;gBACnBV,iBAAiBA;gBACjBC,0BAA0BA;gBAC1BC,YAAYA;gBACZC,UAAUA;gBACVC,WAAWA;gBACXI,kBAAkBA;gBAClBwB,OAAOA;gBACPpB,2BAA2BA;gBAC3BC,iBAAiBA;gBACjBG,uBAAuBA;gBACvBC,wBAAwBA;;kBAI3BnB;;AAGP"}