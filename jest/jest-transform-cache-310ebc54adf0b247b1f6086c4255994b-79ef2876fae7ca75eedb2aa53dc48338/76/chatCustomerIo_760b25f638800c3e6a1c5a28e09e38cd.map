{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/common/customer-io/src/lib/chatCustomerIo.ts"],"sourcesContent":["import {\n  sendAgentChatFeedback,\n  sendAgentChatInteraction,\n  sendAgentCopyResponse,\n  sendChatAudit,\n  sendChatFeedback,\n  sendChatInlineSourceModalInteraction,\n  sendChatInteraction,\n  sendChatShareInteraction,\n  sendChatSourceInteraction,\n  sendNativeChatInputResizeInteraction,\n  sendNativeChatLeaveWhileAnswerNotCompletedInteraction,\n} from \"./customerIOChatEvents\"\nimport {\n  ChatInputResizeInteractionMessage,\n  ChatLeaveWhileAnswerNotCompletedInteraction,\n  ChatShareInteractionMessage,\n  ExternalToolsAgentChatFeedbackMessage,\n  ExternalToolsAgentCopyResponseMessage,\n  ExternalToolsChatFeedbackMessage,\n  ExternalToolsChatSourceInteractionMessage,\n} from \"./customerIOChatEvents.types\"\n\nconst transformOriginToType = (\n  origin:\n    | \"trending\"\n    | \"feed\"\n    | \"files\"\n    | \"watchlist\"\n    | \"suggestedPrompts\"\n    | \"user_message\"\n    | \"empty_message\"\n    | \"flow\"\n    | \"entity\"\n    | \"brief\",\n) => {\n  switch (origin) {\n    case \"trending\":\n      return \"trending\" as const\n    case \"feed\":\n      return \"feed\" as const\n    case \"files\":\n      return \"files\" as const\n    case \"watchlist\":\n      return \"watchlist\" as const\n    case \"suggestedPrompts\":\n      return \"suggestedPrompts\" as const\n    case \"entity\":\n      return \"entity\" as const\n    case \"brief\":\n      return \"brief\" as const\n    default:\n      return null\n  }\n}\n\ntype ChatAttachment = { id: string; ownerIsUser: boolean; ownerId: string }\n\ntype MessageTransaction = {\n  submitChatId: string\n  origin: string | null\n  index: number\n  scope: string | null\n  promptTopics: Array<string> | null\n  promptTask: string | null\n  type: \"trending\" | \"feed\" | \"files\" | \"watchlist\" | \"suggestedPrompts\" | \"entity\" | \"brief\" | null\n  status: \"edited\" | \"regenerated\" | null\n  files: Array<{ id: string; ownerIsUser: boolean; ownerId: string }>\n  watchlists: Array<{ id: string; ownerIsUser: boolean; ownerId: string }>\n  followUpSuggestionIndex: number | null\n  promptContextLevel: \"watchlist\" | \"entity\" | null\n  promptCategory: string | null\n  promptCompanyType: string | null\n  dataViewAtClick: string | null\n  clickedSuggestedPromptText: string | null\n  suggestedPromptClassification: \"workflow\" | \"structuredData\" | \"standard\" | null\n}\n\ntype AgentMessageTransaction = {\n  submitChatId: string\n  executionMode: \"chat\" | \"research\"\n  requestId: string\n}\n\nlet message: MessageTransaction | null = null\nlet agentMessage: AgentMessageTransaction | null = null\n\nexport const chatCustomerIo = {\n  toggleAuditMode(params: { isAuditMode: boolean; chatId: string }) {\n    sendChatAudit({\n      action: params.isAuditMode ? \"enableAudit\" : \"disableAudit\",\n      chatId: params.chatId,\n    })\n  },\n  chunkStoryCardClick(params: {\n    chatId: string\n    interactionTimestamp: string\n    documentId: string\n  }) {\n    sendChatAudit({\n      chatId: params.chatId,\n      interactionTimestamp: params.interactionTimestamp,\n      action: \"readDocument\",\n      documentId: params.documentId,\n    })\n  },\n  responseAuditToggleClick(params: {\n    chatId: string\n    interactionTimestamp: string\n    isAuditMode: boolean\n  }) {\n    sendChatAudit({\n      interactionTimestamp: params.interactionTimestamp,\n      action: \"showAudit\",\n      chatId: params.chatId,\n    })\n  },\n  responseAuditCopyClick(params: { chatId: string; interactionTimestamp: string }) {\n    sendChatAudit({\n      interactionTimestamp: params.interactionTimestamp,\n      action: \"copyText\",\n      chatId: params.chatId,\n    })\n  },\n  auditTrailOpenQuestionClick(params: { chatId: string; interactionTimestamp: string }) {\n    sendChatAudit({\n      interactionTimestamp: params.interactionTimestamp,\n      action: \"openQuestion\",\n      chatId: params.chatId,\n    })\n  },\n  userFeedback(params: ExternalToolsChatFeedbackMessage[\"data\"]) {\n    sendChatFeedback(params)\n  },\n  agentFeedback(params: ExternalToolsAgentChatFeedbackMessage[\"data\"]) {\n    sendAgentChatFeedback(params)\n  },\n  agentCopyResponse(params: ExternalToolsAgentCopyResponseMessage[\"data\"]) {\n    sendAgentCopyResponse(params)\n  },\n  sourceInteraction(params: ExternalToolsChatSourceInteractionMessage[\"data\"]) {\n    sendChatSourceInteraction(params)\n  },\n  sourceInlineModalInteraction(params: ExternalToolsChatSourceInteractionMessage[\"data\"]) {\n    sendChatInlineSourceModalInteraction(params)\n  },\n  shareChatInteraction(params: ChatShareInteractionMessage[\"data\"]) {\n    sendChatShareInteraction(params)\n  },\n  nativeChatInputResize(params: ChatInputResizeInteractionMessage[\"data\"]) {\n    sendNativeChatInputResizeInteraction(params)\n  },\n  nativeChatLeaveWhileAnswerNotCompleted(\n    params: ChatLeaveWhileAnswerNotCompletedInteraction[\"data\"],\n  ) {\n    sendNativeChatLeaveWhileAnswerNotCompletedInteraction(params)\n  },\n  editLastQuestionClick(params: {\n    chatId: string\n    index: number\n    scope: string | null\n    files: Array<ChatAttachment>\n    watchlists: Array<ChatAttachment>\n  }) {\n    message = {\n      submitChatId: params.chatId,\n      origin: null,\n      index: params.index,\n      scope: params.scope,\n      promptTopics: null,\n      promptTask: null,\n      type: null,\n      status: \"edited\",\n      files: params.files,\n      watchlists: params.watchlists,\n      followUpSuggestionIndex: null,\n      dataViewAtClick: null,\n      promptCategory: null,\n      promptCompanyType: null,\n      promptContextLevel: null,\n      clickedSuggestedPromptText: null,\n      suggestedPromptClassification: null,\n    }\n  },\n  regenerateLastQuestionClick(params: {\n    chatId: string\n    index: number\n    scope: string | null\n    files: Array<ChatAttachment>\n    watchlists: Array<ChatAttachment>\n  }) {\n    message = {\n      submitChatId: params.chatId,\n      origin: null,\n      index: params.index,\n      scope: params.scope,\n      promptTopics: null,\n      promptTask: null,\n      type: null,\n      status: \"regenerated\",\n      files: params.files,\n      watchlists: params.watchlists,\n      followUpSuggestionIndex: null,\n      dataViewAtClick: null,\n      promptCategory: null,\n      promptCompanyType: null,\n      promptContextLevel: null,\n      clickedSuggestedPromptText: null,\n      suggestedPromptClassification: null,\n    }\n  },\n  inputPromptSubmit(params: {\n    chatId: string\n    origin:\n      | \"trending\"\n      | \"feed\"\n      | \"files\"\n      | \"watchlist\"\n      | \"suggestedPrompts\"\n      | \"user_message\"\n      | \"empty_message\"\n      | \"flow\"\n      | \"entity\"\n      | \"brief\"\n    index: number\n    scope: string | null\n    promptTopics: Array<string> | null\n    promptTask: string | null\n    files: Array<ChatAttachment>\n    watchlists: Array<ChatAttachment>\n    followUpSuggestionIndex: number | null\n    watchlistPrompt: {\n      promptContextLevel: \"watchlist\" | \"entity\" | null\n      promptCategory: string | null\n      promptCompanyType: string | null\n      dataViewAtClick: string | null\n      clickedSuggestedPromptText: string | null\n      suggestedPromptClassification: \"workflow\" | \"structuredData\" | \"standard\" | null\n    } | null\n  }) {\n    message = {\n      submitChatId: params.chatId,\n      origin: params.origin,\n      index: params.index,\n      scope: params.scope,\n      promptTopics: params.promptTopics,\n      promptTask: params.promptTask,\n      type: transformOriginToType(params.origin),\n      status: null,\n      files: params.files,\n      watchlists: params.watchlists,\n      followUpSuggestionIndex: params.followUpSuggestionIndex,\n      promptContextLevel: params.watchlistPrompt?.promptContextLevel ?? null,\n      promptCategory: params.watchlistPrompt?.promptCategory ?? null,\n      promptCompanyType: params.watchlistPrompt?.promptCompanyType ?? null,\n      dataViewAtClick: params.watchlistPrompt?.dataViewAtClick ?? null,\n      clickedSuggestedPromptText: params.watchlistPrompt?.clickedSuggestedPromptText ?? null,\n      suggestedPromptClassification: params.watchlistPrompt?.suggestedPromptClassification ?? null,\n    }\n  },\n  inputAgentPromptSubmit(params: {\n    chatId: string\n    executionMode: \"chat\" | \"research\"\n    requestId: string\n  }) {\n    agentMessage = {\n      submitChatId: params.chatId,\n      executionMode: params.executionMode,\n      requestId: params.requestId,\n    }\n  },\n  agentSummaryCompleted(params: {\n    chatId: string\n    interactionTimestamp: string\n    executionMode: \"chat\" | \"research\"\n    requestId: string\n  }) {\n    if (!agentMessage || agentMessage.submitChatId !== params.chatId) return\n    sendAgentChatInteraction({\n      chatId: params.chatId,\n      interactionTimestamp: params.interactionTimestamp,\n      executionMode: params.executionMode,\n      requestId: params.requestId,\n    })\n    agentMessage = null\n  },\n  summaryCompleted(params: {\n    chatId: string\n    interactionTimestamp: string\n    response: string\n    inputMessage: string\n  }) {\n    if (!message || message.submitChatId !== params.chatId) return\n    sendChatInteraction({\n      chatId: params.chatId,\n      interactionTimestamp: params.interactionTimestamp,\n      type: message.index === 0 ? message.type : null,\n      action: message.index === 0 ? \"new\" : \"followUp\",\n      index: message.index,\n      scope: message.scope,\n      status: message.status,\n      responseStatus: \"completed\",\n      promptTopics: message.promptTopics,\n      promptTask: message.promptTask,\n      files: message.files,\n      watchlists: message.watchlists,\n      followUpSuggestionIndex: message.followUpSuggestionIndex,\n    })\n    message = null\n  },\n  summaryError(params: {\n    chatId: string\n    interactionTimestamp: string | undefined\n    response: string\n    inputMessage: string\n  }) {\n    if (!message || message.submitChatId !== params.chatId) return\n    sendChatInteraction({\n      chatId: params.chatId,\n      interactionTimestamp: params.interactionTimestamp ?? null,\n      type: message.index === 0 ? message.type : null,\n      action: message.index === 0 ? \"new\" : \"followUp\",\n      index: message.index,\n      scope: message.scope,\n      status: message.status,\n      responseStatus: \"error\",\n      promptTopics: message.promptTopics,\n      promptTask: message.promptTask,\n      files: message.files,\n      watchlists: message.watchlists,\n      followUpSuggestionIndex: message.followUpSuggestionIndex,\n    })\n    message = null\n  },\n  inputStopClick() {\n    if (!message) return\n    sendChatInteraction({\n      chatId: message.submitChatId,\n      interactionTimestamp: null,\n      type: message.index === 0 ? message.type : null,\n      action: message.index === 0 ? \"new\" : \"followUp\",\n      index: message.index,\n      scope: message.scope,\n      status: message.status,\n      responseStatus: \"stopped\",\n      promptTopics: message.promptTopics,\n      promptTask: message.promptTask,\n      files: message.files,\n      watchlists: message.watchlists,\n      followUpSuggestionIndex: message.followUpSuggestionIndex,\n    })\n    message = null\n  },\n  abandoned() {\n    if (!message) return\n    sendChatInteraction({\n      chatId: message.submitChatId,\n      interactionTimestamp: null,\n      type: message.index === 0 ? message.type : null,\n      action: message.index === 0 ? \"new\" : \"followUp\",\n      index: message.index,\n      scope: message.scope,\n      status: message.status,\n      responseStatus: \"abandoned\",\n      promptTopics: message.promptTopics,\n      promptTask: message.promptTask,\n      files: message.files,\n      watchlists: message.watchlists,\n      followUpSuggestionIndex: message.followUpSuggestionIndex,\n    })\n    message = null\n  },\n  getMessage() {\n    return message\n  },\n}\n"],"names":["chatCustomerIo","transformOriginToType","origin","message","agentMessage","toggleAuditMode","params","sendChatAudit","action","isAuditMode","chatId","chunkStoryCardClick","interactionTimestamp","documentId","responseAuditToggleClick","responseAuditCopyClick","auditTrailOpenQuestionClick","userFeedback","sendChatFeedback","agentFeedback","sendAgentChatFeedback","agentCopyResponse","sendAgentCopyResponse","sourceInteraction","sendChatSourceInteraction","sourceInlineModalInteraction","sendChatInlineSourceModalInteraction","shareChatInteraction","sendChatShareInteraction","nativeChatInputResize","sendNativeChatInputResizeInteraction","nativeChatLeaveWhileAnswerNotCompleted","sendNativeChatLeaveWhileAnswerNotCompletedInteraction","editLastQuestionClick","submitChatId","index","scope","promptTopics","promptTask","type","status","files","watchlists","followUpSuggestionIndex","dataViewAtClick","promptCategory","promptCompanyType","promptContextLevel","clickedSuggestedPromptText","suggestedPromptClassification","regenerateLastQuestionClick","inputPromptSubmit","watchlistPrompt","inputAgentPromptSubmit","executionMode","requestId","agentSummaryCompleted","sendAgentChatInteraction","summaryCompleted","sendChatInteraction","responseStatus","summaryError","inputStopClick","abandoned","getMessage"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAuFaA;;;eAAAA;;;sCA3EN;AAWP,MAAMC,wBAAwB,CAC5BC;IAYA,OAAQA;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT;YACE,OAAO;IACX;AACF;AA8BA,IAAIC,UAAqC;AACzC,IAAIC,eAA+C;AAE5C,MAAMJ,iBAAiB;IAC5BK,iBAAgBC,MAAgD;QAC9DC,IAAAA,mCAAa,EAAC;YACZC,QAAQF,OAAOG,WAAW,GAAG,gBAAgB;YAC7CC,QAAQJ,OAAOI,MAAM;QACvB;IACF;IACAC,qBAAoBL,MAInB;QACCC,IAAAA,mCAAa,EAAC;YACZG,QAAQJ,OAAOI,MAAM;YACrBE,sBAAsBN,OAAOM,oBAAoB;YACjDJ,QAAQ;YACRK,YAAYP,OAAOO,UAAU;QAC/B;IACF;IACAC,0BAAyBR,MAIxB;QACCC,IAAAA,mCAAa,EAAC;YACZK,sBAAsBN,OAAOM,oBAAoB;YACjDJ,QAAQ;YACRE,QAAQJ,OAAOI,MAAM;QACvB;IACF;IACAK,wBAAuBT,MAAwD;QAC7EC,IAAAA,mCAAa,EAAC;YACZK,sBAAsBN,OAAOM,oBAAoB;YACjDJ,QAAQ;YACRE,QAAQJ,OAAOI,MAAM;QACvB;IACF;IACAM,6BAA4BV,MAAwD;QAClFC,IAAAA,mCAAa,EAAC;YACZK,sBAAsBN,OAAOM,oBAAoB;YACjDJ,QAAQ;YACRE,QAAQJ,OAAOI,MAAM;QACvB;IACF;IACAO,cAAaX,MAAgD;QAC3DY,IAAAA,sCAAgB,EAACZ;IACnB;IACAa,eAAcb,MAAqD;QACjEc,IAAAA,2CAAqB,EAACd;IACxB;IACAe,mBAAkBf,MAAqD;QACrEgB,IAAAA,2CAAqB,EAAChB;IACxB;IACAiB,mBAAkBjB,MAAyD;QACzEkB,IAAAA,+CAAyB,EAAClB;IAC5B;IACAmB,8BAA6BnB,MAAyD;QACpFoB,IAAAA,0DAAoC,EAACpB;IACvC;IACAqB,sBAAqBrB,MAA2C;QAC9DsB,IAAAA,8CAAwB,EAACtB;IAC3B;IACAuB,uBAAsBvB,MAAiD;QACrEwB,IAAAA,0DAAoC,EAACxB;IACvC;IACAyB,wCACEzB,MAA2D;QAE3D0B,IAAAA,2EAAqD,EAAC1B;IACxD;IACA2B,uBAAsB3B,MAMrB;QACCH,UAAU;YACR+B,cAAc5B,OAAOI,MAAM;YAC3BR,QAAQ;YACRiC,OAAO7B,OAAO6B,KAAK;YACnBC,OAAO9B,OAAO8B,KAAK;YACnBC,cAAc;YACdC,YAAY;YACZC,MAAM;YACNC,QAAQ;YACRC,OAAOnC,OAAOmC,KAAK;YACnBC,YAAYpC,OAAOoC,UAAU;YAC7BC,yBAAyB;YACzBC,iBAAiB;YACjBC,gBAAgB;YAChBC,mBAAmB;YACnBC,oBAAoB;YACpBC,4BAA4B;YAC5BC,+BAA+B;QACjC;IACF;IACAC,6BAA4B5C,MAM3B;QACCH,UAAU;YACR+B,cAAc5B,OAAOI,MAAM;YAC3BR,QAAQ;YACRiC,OAAO7B,OAAO6B,KAAK;YACnBC,OAAO9B,OAAO8B,KAAK;YACnBC,cAAc;YACdC,YAAY;YACZC,MAAM;YACNC,QAAQ;YACRC,OAAOnC,OAAOmC,KAAK;YACnBC,YAAYpC,OAAOoC,UAAU;YAC7BC,yBAAyB;YACzBC,iBAAiB;YACjBC,gBAAgB;YAChBC,mBAAmB;YACnBC,oBAAoB;YACpBC,4BAA4B;YAC5BC,+BAA+B;QACjC;IACF;IACAE,mBAAkB7C,MA4BjB;YAauBA,yBACJA,0BACGA,0BACFA,0BACWA,0BACGA;YALXA,4CACJA,wCACGA,2CACFA,yCACWA,oDACGA;QAjBjCH,UAAU;YACR+B,cAAc5B,OAAOI,MAAM;YAC3BR,QAAQI,OAAOJ,MAAM;YACrBiC,OAAO7B,OAAO6B,KAAK;YACnBC,OAAO9B,OAAO8B,KAAK;YACnBC,cAAc/B,OAAO+B,YAAY;YACjCC,YAAYhC,OAAOgC,UAAU;YAC7BC,MAAMtC,sBAAsBK,OAAOJ,MAAM;YACzCsC,QAAQ;YACRC,OAAOnC,OAAOmC,KAAK;YACnBC,YAAYpC,OAAOoC,UAAU;YAC7BC,yBAAyBrC,OAAOqC,uBAAuB;YACvDI,oBAAoBzC,CAAAA,8CAAAA,0BAAAA,OAAO8C,eAAe,cAAtB9C,8CAAAA,wBAAwByC,kBAAkB,cAA1CzC,wDAAAA,6CAA8C;YAClEuC,gBAAgBvC,CAAAA,0CAAAA,2BAAAA,OAAO8C,eAAe,cAAtB9C,+CAAAA,yBAAwBuC,cAAc,cAAtCvC,oDAAAA,yCAA0C;YAC1DwC,mBAAmBxC,CAAAA,6CAAAA,2BAAAA,OAAO8C,eAAe,cAAtB9C,+CAAAA,yBAAwBwC,iBAAiB,cAAzCxC,uDAAAA,4CAA6C;YAChEsC,iBAAiBtC,CAAAA,2CAAAA,2BAAAA,OAAO8C,eAAe,cAAtB9C,+CAAAA,yBAAwBsC,eAAe,cAAvCtC,qDAAAA,0CAA2C;YAC5D0C,4BAA4B1C,CAAAA,sDAAAA,2BAAAA,OAAO8C,eAAe,cAAtB9C,+CAAAA,yBAAwB0C,0BAA0B,cAAlD1C,gEAAAA,qDAAsD;YAClF2C,+BAA+B3C,CAAAA,yDAAAA,2BAAAA,OAAO8C,eAAe,cAAtB9C,+CAAAA,yBAAwB2C,6BAA6B,cAArD3C,mEAAAA,wDAAyD;QAC1F;IACF;IACA+C,wBAAuB/C,MAItB;QACCF,eAAe;YACb8B,cAAc5B,OAAOI,MAAM;YAC3B4C,eAAehD,OAAOgD,aAAa;YACnCC,WAAWjD,OAAOiD,SAAS;QAC7B;IACF;IACAC,uBAAsBlD,MAKrB;QACC,IAAI,CAACF,gBAAgBA,aAAa8B,YAAY,KAAK5B,OAAOI,MAAM,EAAE;QAClE+C,IAAAA,8CAAwB,EAAC;YACvB/C,QAAQJ,OAAOI,MAAM;YACrBE,sBAAsBN,OAAOM,oBAAoB;YACjD0C,eAAehD,OAAOgD,aAAa;YACnCC,WAAWjD,OAAOiD,SAAS;QAC7B;QACAnD,eAAe;IACjB;IACAsD,kBAAiBpD,MAKhB;QACC,IAAI,CAACH,WAAWA,QAAQ+B,YAAY,KAAK5B,OAAOI,MAAM,EAAE;QACxDiD,IAAAA,yCAAmB,EAAC;YAClBjD,QAAQJ,OAAOI,MAAM;YACrBE,sBAAsBN,OAAOM,oBAAoB;YACjD2B,MAAMpC,QAAQgC,KAAK,KAAK,IAAIhC,QAAQoC,IAAI,GAAG;YAC3C/B,QAAQL,QAAQgC,KAAK,KAAK,IAAI,QAAQ;YACtCA,OAAOhC,QAAQgC,KAAK;YACpBC,OAAOjC,QAAQiC,KAAK;YACpBI,QAAQrC,QAAQqC,MAAM;YACtBoB,gBAAgB;YAChBvB,cAAclC,QAAQkC,YAAY;YAClCC,YAAYnC,QAAQmC,UAAU;YAC9BG,OAAOtC,QAAQsC,KAAK;YACpBC,YAAYvC,QAAQuC,UAAU;YAC9BC,yBAAyBxC,QAAQwC,uBAAuB;QAC1D;QACAxC,UAAU;IACZ;IACA0D,cAAavD,MAKZ;QACC,IAAI,CAACH,WAAWA,QAAQ+B,YAAY,KAAK5B,OAAOI,MAAM,EAAE;YAGhCJ;QAFxBqD,IAAAA,yCAAmB,EAAC;YAClBjD,QAAQJ,OAAOI,MAAM;YACrBE,sBAAsBN,CAAAA,+BAAAA,OAAOM,oBAAoB,cAA3BN,0CAAAA,+BAA+B;YACrDiC,MAAMpC,QAAQgC,KAAK,KAAK,IAAIhC,QAAQoC,IAAI,GAAG;YAC3C/B,QAAQL,QAAQgC,KAAK,KAAK,IAAI,QAAQ;YACtCA,OAAOhC,QAAQgC,KAAK;YACpBC,OAAOjC,QAAQiC,KAAK;YACpBI,QAAQrC,QAAQqC,MAAM;YACtBoB,gBAAgB;YAChBvB,cAAclC,QAAQkC,YAAY;YAClCC,YAAYnC,QAAQmC,UAAU;YAC9BG,OAAOtC,QAAQsC,KAAK;YACpBC,YAAYvC,QAAQuC,UAAU;YAC9BC,yBAAyBxC,QAAQwC,uBAAuB;QAC1D;QACAxC,UAAU;IACZ;IACA2D;QACE,IAAI,CAAC3D,SAAS;QACdwD,IAAAA,yCAAmB,EAAC;YAClBjD,QAAQP,QAAQ+B,YAAY;YAC5BtB,sBAAsB;YACtB2B,MAAMpC,QAAQgC,KAAK,KAAK,IAAIhC,QAAQoC,IAAI,GAAG;YAC3C/B,QAAQL,QAAQgC,KAAK,KAAK,IAAI,QAAQ;YACtCA,OAAOhC,QAAQgC,KAAK;YACpBC,OAAOjC,QAAQiC,KAAK;YACpBI,QAAQrC,QAAQqC,MAAM;YACtBoB,gBAAgB;YAChBvB,cAAclC,QAAQkC,YAAY;YAClCC,YAAYnC,QAAQmC,UAAU;YAC9BG,OAAOtC,QAAQsC,KAAK;YACpBC,YAAYvC,QAAQuC,UAAU;YAC9BC,yBAAyBxC,QAAQwC,uBAAuB;QAC1D;QACAxC,UAAU;IACZ;IACA4D;QACE,IAAI,CAAC5D,SAAS;QACdwD,IAAAA,yCAAmB,EAAC;YAClBjD,QAAQP,QAAQ+B,YAAY;YAC5BtB,sBAAsB;YACtB2B,MAAMpC,QAAQgC,KAAK,KAAK,IAAIhC,QAAQoC,IAAI,GAAG;YAC3C/B,QAAQL,QAAQgC,KAAK,KAAK,IAAI,QAAQ;YACtCA,OAAOhC,QAAQgC,KAAK;YACpBC,OAAOjC,QAAQiC,KAAK;YACpBI,QAAQrC,QAAQqC,MAAM;YACtBoB,gBAAgB;YAChBvB,cAAclC,QAAQkC,YAAY;YAClCC,YAAYnC,QAAQmC,UAAU;YAC9BG,OAAOtC,QAAQsC,KAAK;YACpBC,YAAYvC,QAAQuC,UAAU;YAC9BC,yBAAyBxC,QAAQwC,uBAAuB;QAC1D;QACAxC,UAAU;IACZ;IACA6D;QACE,OAAO7D;IACT;AACF"}