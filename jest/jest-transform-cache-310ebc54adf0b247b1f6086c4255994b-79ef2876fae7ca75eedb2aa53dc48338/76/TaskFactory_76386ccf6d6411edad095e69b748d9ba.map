{"version":3,"sources":["../src/TaskFactory.ts"],"sourcesContent":["import { RawTask } from './RawTask.js'\nimport type { Task } from './types.js'\n\nexport class TaskFactory {\n\tprivate freeTasks: RawTask[] = []\n\n\tpublic constructor(private onError: (err: any) => void) {}\n\n\tpublic create(task: () => void): Task {\n\t\tconst tasks = this.freeTasks\n\t\tconst t = tasks.length\n\t\t\t? (tasks.pop() as RawTask)\n\t\t\t: new RawTask(this.onError, (t) => (tasks[tasks.length] = t))\n\t\tt.task = task\n\t\treturn t\n\t}\n}\n"],"names":["TaskFactory","create","task","tasks","freeTasks","t","length","pop","RawTask","onError","constructor"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAGaA;;;eAAAA;;;yBAHW;AAGjB,MAAMA;IAKZC,OAAcC,IAAgB,EAAQ;QACrC,MAAMC,QAAQ,IAAI,CAACC,SAAS;QAC5B,MAAMC,KAAIF,MAAMG,MAAM,GAClBH,MAAMI,GAAG,KACV,IAAIC,gBAAO,CAAC,IAAI,CAACC,OAAO,EAAE,CAACJ,IAAOF,KAAK,CAACA,MAAMG,MAAM,CAAC,GAAGD;QAC3DA,GAAEH,IAAI,GAAGA;QACT,OAAOG;;IARRK,YAA2BD,OAA2B,CAAE;aAA7BA,OAA2B,GAA3BA;aAFnBL,SAAS,GAAc,EAAE"}