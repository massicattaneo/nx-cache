{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/composite-components/src/WatchlistMenu/CreateWatchlistButton.tsx"],"sourcesContent":["import React from \"react\"\nimport { CqsItem } from \"@rp/common/api-types\"\n// Types\nimport { Watchlist } from \"@rp/common/api-types\"\nimport { useSnackbar } from \"@rp/react/web/common/providers\"\n// Packages\nimport { Button, Typography } from \"@rp/react/web/mui/core\"\nimport { HandleOpenModalProps } from \"./WatchlistMenu.types\"\n\n// Context\n\ntype SuccessMessageProps = {\n  watchlistName: string\n  entityName: string\n}\n\nconst SuccessMessage = ({ watchlistName, entityName }: SuccessMessageProps) => (\n  <Typography fontWeight=\"bold\">\n    {entityName} <Typography component=\"span\">added to</Typography> {watchlistName}\n  </Typography>\n)\n\ntype ErrorMessageProps = {\n  watchlistName: string\n}\n\nconst ErrorMessage = ({ watchlistName }: ErrorMessageProps) => (\n  <Typography>\n    Error adding to the new\n    <Typography component=\"span\" fontWeight=\"bold\">\n      {watchlistName}\n    </Typography>\n  </Typography>\n)\n\nconst CreateWatchlistButton = ({\n  filter,\n  onClick,\n  onHandleOpenModal,\n}: {\n  filter: Array<CqsItem>\n  onClick?: () => void\n  onHandleOpenModal: HandleOpenModalProps\n}) => {\n  const { enqueueSuccess, enqueueError } = useSnackbar()\n\n  const items = filter.map(item => item.key)\n\n  const amountAdded = filter.length\n\n  const onSuccess = (watchlist: Watchlist) => {\n    enqueueSuccess(\n      <SuccessMessage\n        watchlistName={watchlist.name}\n        entityName={\n          amountAdded >= 5\n            ? `${amountAdded} items `\n            : ` ${filter.map(entity => entity.name).join(\", \")} `\n        }\n      />,\n    )\n  }\n\n  const onError = (message: string, watchlistName: string) => {\n    enqueueError(<ErrorMessage watchlistName={watchlistName} />)\n  }\n\n  const handleCreateWatchlist = () => {\n    onHandleOpenModal({ items }, onSuccess, onError)\n    if (onClick) {\n      onClick()\n    }\n  }\n\n  return <Button onClick={handleCreateWatchlist}>Add to new Watchlist</Button>\n}\n\nexport { CreateWatchlistButton }\n"],"names":["CreateWatchlistButton","SuccessMessage","watchlistName","entityName","Typography","fontWeight","component","ErrorMessage","filter","onClick","onHandleOpenModal","enqueueSuccess","enqueueError","useSnackbar","items","map","item","key","amountAdded","length","onSuccess","watchlist","name","entity","join","onError","message","handleCreateWatchlist","Button"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA6ESA;;;eAAAA;;;;8DA7ES;2BAIU;sBAEO;;;;;;AAUnC,MAAMC,iBAAiB,CAAC,EAAEC,aAAa,EAAEC,UAAU,EAAuB,iBACxE,sBAACC,gBAAU;QAACC,YAAW;;YACpBF;YAAW;0BAAC,qBAACC,gBAAU;gBAACE,WAAU;0BAAO;;YAAqB;YAAEJ;;;AAQrE,MAAMK,eAAe,CAAC,EAAEL,aAAa,EAAqB,iBACxD,sBAACE,gBAAU;;YAAC;0BAEV,qBAACA,gBAAU;gBAACE,WAAU;gBAAOD,YAAW;0BACrCH;;;;AAKP,MAAMF,wBAAwB,CAAC,EAC7BQ,MAAM,EACNC,OAAO,EACPC,iBAAiB,EAKlB;IACC,MAAM,EAAEC,cAAc,EAAEC,YAAY,EAAE,GAAGC,IAAAA,sBAAW;IAEpD,MAAMC,QAAQN,OAAOO,GAAG,CAACC,CAAAA,OAAQA,KAAKC,GAAG;IAEzC,MAAMC,cAAcV,OAAOW,MAAM;IAEjC,MAAMC,YAAY,CAACC;QACjBV,6BACE,qBAACV;YACCC,eAAemB,UAAUC,IAAI;YAC7BnB,YACEe,eAAe,IACX,CAAC,EAAEA,YAAY,OAAO,CAAC,GACvB,CAAC,CAAC,EAAEV,OAAOO,GAAG,CAACQ,CAAAA,SAAUA,OAAOD,IAAI,EAAEE,IAAI,CAAC,MAAM,CAAC,CAAC;;IAI/D;IAEA,MAAMC,UAAU,CAACC,SAAiBxB;QAChCU,2BAAa,qBAACL;YAAaL,eAAeA;;IAC5C;IAEA,MAAMyB,wBAAwB;QAC5BjB,kBAAkB;YAAEI;QAAM,GAAGM,WAAWK;QACxC,IAAIhB,SAAS;YACXA;QACF;IACF;IAEA,qBAAO,qBAACmB,YAAM;QAACnB,SAASkB;kBAAuB;;AACjD"}