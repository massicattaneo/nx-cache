{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/discovery-sidebar/discovery-panel/src/DiscoveryPanel/DiscoveryPanel.tsx"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\"\nimport { CqsItem } from \"@rp/common/api-types\"\nimport { Watchlist } from \"@rp/common/api-types\"\nimport { AutoAnimateHeight } from \"@rp/react/web/common/composite-components\"\nimport {\n  LoadingFilter,\n  PanelWrapper,\n  useDiscoveryPanelWidgetCategories,\n} from \"@rp/react/web/common/discovery-sidebar\"\nimport { Box } from \"@rp/react/web/mui/core\"\nimport { DiscoveryPanelWidget } from \"./DiscoveryPanelWidget\"\n\ntype Props = {\n  onAddToWatchlist?: (watchlist: Watchlist) => void\n  isFeedbackMode: boolean\n}\n\nexport const DiscoveryPanel = ({ onAddToWatchlist, isFeedbackMode }: Props) => {\n  const [mentionsItem, setMentionsItem] = useState<Record<string, CqsItem | undefined>>({})\n  const setMentionItem = useCallback((category: string, value: CqsItem | undefined) => {\n    setMentionsItem(prev => {\n      return { ...prev, [category]: value }\n    })\n  }, [])\n  const { categories, widgetActions, isError, isLoading, labels } =\n    useDiscoveryPanelWidgetCategories()\n\n  useEffect(() => {\n    setMentionsItem({})\n  }, [categories])\n\n  const groups = isLoading ? labels : Object.keys(categories)\n\n  if (isError) {\n    return null\n  }\n\n  return (\n    <PanelWrapper>\n      {groups.map(category => {\n        return (\n          <AutoAnimateHeight key={category}>\n            <Box\n              sx={{\n                pb: 2,\n                \"& legend\": {\n                  opacity: 0,\n                  transition: \"opacity 0.2s ease-in-out\",\n                },\n                \"&:hover\": {\n                  \"& legend\": {\n                    opacity: 1,\n                  },\n                },\n              }}\n              data-testid={`dp-section-${category}`}\n            >\n              {isLoading ? (\n                <Box sx={{ pb: \"10px\" }}>\n                  <LoadingFilter />\n                </Box>\n              ) : (\n                <DiscoveryPanelWidget\n                  isFeedbackMode={isFeedbackMode}\n                  widgetCategory={categories[category]}\n                  widgetActions={widgetActions}\n                  mentionsItem={mentionsItem[category]}\n                  setMentionItem={setMentionItem}\n                  onAddToWatchlist={onAddToWatchlist}\n                />\n              )}\n            </Box>\n          </AutoAnimateHeight>\n        )\n      })}\n    </PanelWrapper>\n  )\n}\n"],"names":["DiscoveryPanel","onAddToWatchlist","isFeedbackMode","mentionsItem","setMentionsItem","useState","setMentionItem","useCallback","category","value","prev","categories","widgetActions","isError","isLoading","labels","useDiscoveryPanelWidgetCategories","useEffect","groups","Object","keys","PanelWrapper","map","AutoAnimateHeight","Box","sx","pb","opacity","transition","data-testid","LoadingFilter","DiscoveryPanelWidget","widgetCategory"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAiBaA;;;eAAAA;;;;uBAjBoC;qCAGf;kCAK3B;sBACa;sCACiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO9B,MAAMA,iBAAiB,CAAC,EAAEC,gBAAgB,EAAEC,cAAc,EAAS;IACxE,MAAM,CAACC,cAAcC,gBAAgB,GAAGC,IAAAA,eAAQ,EAAsC,CAAC;IACvF,MAAMC,iBAAiBC,IAAAA,kBAAW,EAAC,CAACC,UAAkBC;QACpDL,gBAAgBM,CAAAA;YACd,OAAO,wCAAKA;gBAAM,CAACF,SAAS,EAAEC;;QAChC;IACF,GAAG,EAAE;IACL,MAAM,EAAEE,UAAU,EAAEC,aAAa,EAAEC,OAAO,EAAEC,SAAS,EAAEC,MAAM,EAAE,GAC7DC,IAAAA,mDAAiC;IAEnCC,IAAAA,gBAAS,EAAC;QACRb,gBAAgB,CAAC;IACnB,GAAG;QAACO;KAAW;IAEf,MAAMO,SAASJ,YAAYC,SAASI,OAAOC,IAAI,CAACT;IAEhD,IAAIE,SAAS;QACX,OAAO;IACT;IAEA,qBACE,qBAACQ,8BAAY;kBACVH,OAAOI,GAAG,CAACd,CAAAA;YACV,qBACE,qBAACe,sCAAiB;0BAChB,cAAA,qBAACC,SAAG;oBACFC,IAAI;wBACFC,IAAI;wBACJ,YAAY;4BACVC,SAAS;4BACTC,YAAY;wBACd;wBACA,WAAW;4BACT,YAAY;gCACVD,SAAS;4BACX;wBACF;oBACF;oBACAE,eAAa,CAAC,WAAW,EAAErB,SAAS,CAAC;8BAEpCM,0BACC,qBAACU,SAAG;wBAACC,IAAI;4BAAEC,IAAI;wBAAO;kCACpB,cAAA,qBAACI,+BAAa;uCAGhB,qBAACC,0CAAoB;wBACnB7B,gBAAgBA;wBAChB8B,gBAAgBrB,UAAU,CAACH,SAAS;wBACpCI,eAAeA;wBACfT,cAAcA,YAAY,CAACK,SAAS;wBACpCF,gBAAgBA;wBAChBL,kBAAkBA;;;eA3BFO;QAiC5B;;AAGN"}