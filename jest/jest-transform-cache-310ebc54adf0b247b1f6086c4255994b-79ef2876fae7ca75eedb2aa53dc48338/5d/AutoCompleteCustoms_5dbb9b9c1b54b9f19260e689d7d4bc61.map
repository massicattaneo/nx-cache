{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/search-autosuggest-input/src/lib/UnifiedSearch/AutoCompleteCustoms.tsx"],"sourcesContent":["import {\n  EnhancedCompanySuggestion,\n  EnhancedSuggestion,\n  isEnhancedSuggestionWithSubsidiaries,\n} from \"@rp/react/tanstack-api/suggestion\"\nimport { RPThemeProps, styled } from \"@rp/react/theme\"\nimport { useDeviceInfo } from \"@rp/react/web/common/hooks\"\nimport { Box, Paper, Popper, PopperProps, TextField, Typography } from \"@rp/react/web/mui/core\"\nimport { NestedSuggestionOption, SuggestionOption } from \"../SuggestionInput\"\nimport { CustomOptionProps, OptionProps } from \"./UnifiedSearch.types\"\n\nconst inputDefaults = {\n  minHeight: 44,\n  borderRadius: 4,\n  paddingLeft: 16,\n  width: \"100%\",\n  height: \"100%\",\n}\nconst autosuggestInputClasses = {\n  inputRoot: \"MainSearch-inputRoot\",\n  input: \"MainSearch-input\",\n  adornment: \"MainSearch-adornment\",\n  chips: \"MainSearch-chips\",\n}\n\nconst useAutosuggestStyles = ({\n  theme,\n  inputVariant,\n  isPopperOpen,\n}: {\n  theme: RPThemeProps\n  inputVariant?: \"search\" | \"results\"\n  isPopperOpen: boolean\n}) => {\n  const { isMobile } = useDeviceInfo()\n  const borderRadius = inputVariant === \"search\" ? theme.spacing(1) : theme.spacing(0.5)\n  return {\n    [`& .${autosuggestInputClasses.inputRoot}`]: {\n      backgroundColor: \"transparent\",\n      border: 0,\n      padding: 0,\n    },\n    [`& .${autosuggestInputClasses.input}`]: {\n      ...inputDefaults,\n      backgroundColor: theme.palette.overlay.surface,\n      minHeight: 32,\n      paddingTop: inputVariant === \"results\" ? theme.spacing(0.5) : undefined,\n      paddingBottom: inputVariant === \"results\" ? theme.spacing(0.5) : undefined,\n      borderRadius: isMobile ? 0 : borderRadius,\n      \"&::placeholder\": {\n        textOverflow: \"ellipsis !important\",\n        color: theme.palette.text.secondary,\n      },\n    },\n    \"& fieldset\": {\n      borderWidth: 2,\n      borderColor: \"transparent\",\n    },\n    \"&:hover fieldset\": {\n      borderColor: \"rgba(255, 255, 255, 0.3) !important\",\n    },\n    \"& .Mui-disabled fieldset\": {\n      borderColor: \"transparent !important\",\n      pointer: \"\",\n    },\n    \"& .Mui-focused fieldset\": {\n      borderColor: \"rgba(255, 255, 255, 0.3) !important\",\n      borderBottomColor: !isMobile && isPopperOpen ? \"transparent !important\" : undefined,\n      borderBottomLeftRadius: !isMobile && isPopperOpen ? 0 : undefined,\n      borderBottomRightRadius: !isMobile && isPopperOpen ? 0 : undefined,\n    },\n\n    [`& .Mui-focused.${autosuggestInputClasses.input}`]: {\n      borderBottomLeftRadius: !isMobile && isPopperOpen ? 0 : undefined,\n      borderBottomRightRadius: !isMobile && isPopperOpen ? 0 : undefined,\n    },\n\n    \"& input\": {\n      padding: inputVariant === \"results\" ? \"0px !important\" : undefined,\n    },\n\n    \"& svg\": {\n      color: theme.palette.text.secondary,\n      width: isMobile ? undefined : 16,\n      height: isMobile ? undefined : 16,\n    },\n  }\n}\n\nconst ResultsAutosuggestInputStyled = styled(TextField, {\n  shouldForwardProp: prop => prop !== \"inputVariant\" && prop !== \"isPopperOpen\",\n})<{ inputVariant?: \"results\" | \"search\"; isPopperOpen: boolean }>(useAutosuggestStyles)\n\nconst ResultsAutosuggestInputWithChipsStyled = styled(Box, {\n  shouldForwardProp: prop => prop !== \"inputVariant\" && prop !== \"isPopperOpen\",\n})<{ inputVariant?: \"results\" | \"search\"; isPopperOpen: boolean }>(\n  ({ theme, isPopperOpen, inputVariant }) => {\n    const { isMobile } = useDeviceInfo()\n    const styles = useAutosuggestStyles({ theme, isPopperOpen, inputVariant })\n    return {\n      ...styles,\n      cursor: \"text\",\n      backgroundColor: theme.palette.elevation.dp03,\n      [`& .${autosuggestInputClasses.inputRoot}`]: {\n        width: \"100%\",\n        padding: theme.spacing(1),\n        border: `2px solid ${\n          isPopperOpen ? \"rgba(255, 255, 255, 0.3)\" : \"rgba(255, 255, 255, 0.2)\"\n        }`,\n        borderRadius: \"8px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        minHeight: 52,\n      },\n      [`& .${autosuggestInputClasses.inputRoot}:hover`]: {\n        border: `2px solid rgba(255, 255, 255, 0.3)`,\n      },\n      [`& .${autosuggestInputClasses.input} .MuiInputAdornment-root`]: {\n        marginRight: 0,\n      },\n      [`& .${autosuggestInputClasses.input}`]: {\n        flexGrow: 1,\n      },\n      [`& .${autosuggestInputClasses.input} input`]: {\n        padding: 0,\n        marginRight: \"4px\",\n        overflow: \"hidden\",\n        whiteSpace: \"nowrap\",\n        textOverflow: \"ellipsis\",\n        \"&::placeholder\": {\n          overflow: \"hidden\",\n          whiteSpace: \"nowrap\",\n          textOverflow: \"ellipsis\",\n          color: theme.palette.text.secondary,\n        },\n      },\n      [`& .${autosuggestInputClasses.adornment}`]: {\n        display: \"flex\",\n        alignItems: \"center\",\n        cursor: \"pointer\",\n      },\n      [`& .${autosuggestInputClasses.chips}`]: {\n        width: \"100%\",\n        flexFlow: \"wrap\",\n        display: \"flex\",\n        alignItems: \"center\",\n        gap: theme.spacing(isMobile ? 0.5 : 1),\n        \"& .MuiChip-root\": {\n          height: isMobile ? 30 : undefined,\n        },\n        \"& .MuiChip-root .MuiTypography-root\": {\n          fontSize: isMobile ? 14 : undefined,\n        },\n      },\n    }\n  },\n)\n\nconst DropdownPaper = styled(Paper, { name: \"DropdownPaper\" })(({ theme }) => {\n  const { isMobile } = useDeviceInfo()\n  return {\n    backgroundColor: isMobile ? \"transparent\" : theme.palette.grey[800],\n    borderRadius: 0,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8,\n    border: isMobile ? undefined : \"2px solid rgba(255, 255, 255, 0.3)\",\n    borderTopWidth: 1,\n    minHeight: 35,\n    overflowY: \"auto\",\n    marginTop: -1,\n\n    ul: {\n      margin: 0,\n      padding: 0,\n      listStyle: \"none\",\n    },\n\n    li: {\n      padding: \"6px 16px\",\n      WebkitTapHighlightColor: \"transparent\",\n      cursor: \"pointer\",\n      position: \"relative\",\n\n      \"&:hover, &[aria-selected='true']\": {\n        backgroundColor: theme.palette.overlay.surface,\n      },\n    },\n\n    ...theme.scrollbarStyles,\n  }\n})\n\nconst RecentSearchTitle = styled(Typography, { name: \"RecentSearchTitle\" })(({ theme }) => ({\n  fontSize: 12,\n  letterSpacing: 1,\n  paddingLeft: 20,\n  paddingTop: 20,\n  color: theme.palette.text.secondary,\n}))\n\nconst AUTOCOMPLETE_HEIGHT = 56\n\nconst hasKey = (obj: EnhancedSuggestion): obj is EnhancedCompanySuggestion => \"key\" in obj\n\n// renderOption for MUI Autocomplete\nconst customOption =\n  ({ searchValue, toggleSubsidiaries, hideKeywordsHint }: CustomOptionProps) =>\n  (optionProps: OptionProps, option: EnhancedSuggestion) => {\n    if (isEnhancedSuggestionWithSubsidiaries(option) && option.subsidiaries.length > 0) {\n      return (\n        <NestedSuggestionOption\n          {...option}\n          showTickers\n          highlightValue={searchValue}\n          optionProps={optionProps}\n          key={optionProps.id}\n          toggleSubsidiariesDisplay={toggleSubsidiaries}\n        />\n      )\n    }\n    const { key: _, ...rest } = hasKey(option) ? option : { key: option.id, ...option }\n\n    // If hideKeywordsHint is true, hide the keyword option\n    if (hideKeywordsHint && rest.type === \"keyword\") {\n      return null\n    }\n\n    return (\n      <li {...optionProps} key={optionProps.id}>\n        <SuggestionOption highlightValue={searchValue} showTickers {...rest} />\n      </li>\n    )\n  }\n\n// Customize the rendering of the options in the dropdown\nconst StyledPopper = styled(Popper, { shouldForwardProp: prop => prop !== \"deviceHeight\" })<\n  PopperProps & { deviceHeight: number }\n>(({ theme, deviceHeight }) => {\n  const { isMobile } = useDeviceInfo()\n  return {\n    touchAction: \"none\",\n    overscrollBehavior: \"contain\",\n    backgroundColor: \"transparent\",\n    zIndex: theme.zIndex.modal,\n    \"& > div\": {\n      overscrollBehavior: \"contain\",\n      boxShadow: isMobile ? \"0 0 0\" : undefined,\n      height: isMobile ? deviceHeight - AUTOCOMPLETE_HEIGHT : \"\",\n    },\n    \"& .MuiAutocomplete-listbox\": {\n      overscrollBehavior: \"contain\",\n      backgroundColor: \"transparent\",\n      maxHeight: isMobile ? \"none\" : undefined,\n    },\n  }\n})\n\nexport {\n  ResultsAutosuggestInputStyled,\n  customOption,\n  StyledPopper,\n  AUTOCOMPLETE_HEIGHT,\n  autosuggestInputClasses,\n  DropdownPaper,\n  RecentSearchTitle,\n  ResultsAutosuggestInputWithChipsStyled,\n}\n"],"names":["AUTOCOMPLETE_HEIGHT","DropdownPaper","RecentSearchTitle","ResultsAutosuggestInputStyled","ResultsAutosuggestInputWithChipsStyled","StyledPopper","autosuggestInputClasses","customOption","inputDefaults","minHeight","borderRadius","paddingLeft","width","height","inputRoot","input","adornment","chips","useAutosuggestStyles","theme","inputVariant","isPopperOpen","isMobile","useDeviceInfo","spacing","backgroundColor","border","padding","palette","overlay","surface","paddingTop","undefined","paddingBottom","textOverflow","color","text","secondary","borderWidth","borderColor","pointer","borderBottomColor","borderBottomLeftRadius","borderBottomRightRadius","styled","TextField","shouldForwardProp","prop","Box","styles","cursor","elevation","dp03","display","alignItems","marginRight","flexGrow","overflow","whiteSpace","flexFlow","gap","fontSize","Paper","name","grey","borderTopWidth","overflowY","marginTop","ul","margin","listStyle","li","WebkitTapHighlightColor","position","scrollbarStyles","Typography","letterSpacing","hasKey","obj","searchValue","toggleSubsidiaries","hideKeywordsHint","optionProps","option","isEnhancedSuggestionWithSubsidiaries","subsidiaries","length","NestedSuggestionOption","showTickers","highlightValue","key","id","toggleSubsidiariesDisplay","_","rest","type","SuggestionOption","Popper","deviceHeight","touchAction","overscrollBehavior","zIndex","modal","boxShadow","maxHeight"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"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"}