{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/common/hooks/src/lib/useAgent/handlers/handleAnswerMessage.ts"],"sourcesContent":["import { AgentMessageState, AnswerMessage, AnswerSequence } from \"../useAgent.types\"\n\nfunction handleAnswerMessage(\n  agentState: AgentMessageState,\n  data: AnswerMessage,\n): AgentMessageState {\n  if (data.text === \"\") {\n    return agentState\n  }\n\n  // Update existing answer\n  const existingAnswerIndex = agentState.answerStream.findIndex(\n    item => item.answerId === data.answerId,\n  )\n\n  if (existingAnswerIndex !== -1) {\n    const updatedAnswerStream = [...agentState.answerStream]\n\n    const existing = updatedAnswerStream[existingAnswerIndex] as AnswerSequence\n    updatedAnswerStream[existingAnswerIndex] = {\n      ...existing,\n      answerStream: [...(existing.answerStream || []), data.text],\n    }\n    // Update existing answer\n    return {\n      ...agentState,\n      answerStream: updatedAnswerStream,\n      error: undefined,\n      requestId: data.requestId ?? agentState.requestId,\n    }\n  }\n  // Add new answer if no existing answer found\n  return {\n    ...agentState,\n    answerStream: [\n      ...agentState.answerStream,\n      {\n        answerId: data.answerId,\n        answerStream: [data.text],\n      },\n    ],\n    requestId: data.requestId ?? agentState.requestId,\n  }\n}\n\nexport { handleAnswerMessage }\n"],"names":["handleAnswerMessage","agentState","data","text","existingAnswerIndex","answerStream","findIndex","item","answerId","updatedAnswerStream","existing","error","undefined","requestId"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA6CSA;;;eAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA3CT,SAASA,oBACPC,UAA6B,EAC7BC,IAAmB;IAEnB,IAAIA,KAAKC,IAAI,KAAK,IAAI;QACpB,OAAOF;IACT;IAEA,yBAAyB;IACzB,MAAMG,sBAAsBH,WAAWI,YAAY,CAACC,SAAS,CAC3DC,CAAAA,OAAQA,KAAKC,QAAQ,KAAKN,KAAKM,QAAQ;IAGzC,IAAIJ,wBAAwB,CAAC,GAAG;QAC9B,MAAMK,sBAAsB;eAAIR,WAAWI,YAAY;SAAC;QAExD,MAAMK,WAAWD,mBAAmB,CAACL,oBAAoB;QACzDK,mBAAmB,CAACL,oBAAoB,GAAG,wCACtCM;YACHL,cAAc;mBAAKK,SAASL,YAAY,IAAI,EAAE;gBAAGH,KAAKC,IAAI;aAAC;;YAOhDD;QALb,yBAAyB;QACzB,OAAO,wCACFD;YACHI,cAAcI;YACdE,OAAOC;YACPC,WAAWX,CAAAA,kBAAAA,KAAKW,SAAS,cAAdX,6BAAAA,kBAAkBD,WAAWY,SAAS;;IAErD;QAWaX;IAVb,6CAA6C;IAC7C,OAAO,wCACFD;QACHI,cAAc;eACTJ,WAAWI,YAAY;YAC1B;gBACEG,UAAUN,KAAKM,QAAQ;gBACvBH,cAAc;oBAACH,KAAKC,IAAI;iBAAC;YAC3B;SACD;QACDU,WAAWX,CAAAA,mBAAAA,KAAKW,SAAS,cAAdX,8BAAAA,mBAAkBD,WAAWY,SAAS;;AAErD"}