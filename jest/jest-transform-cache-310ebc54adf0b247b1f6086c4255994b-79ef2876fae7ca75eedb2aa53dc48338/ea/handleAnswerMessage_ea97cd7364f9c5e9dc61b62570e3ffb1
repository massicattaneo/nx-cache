f1332b6e163a7353e9f6d25d4a4d449c
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "handleAnswerMessage", {
    enumerable: true,
    get: function() {
        return handleAnswerMessage;
    }
});
function _define_property(obj, key, value) {
    if (key in obj) {
        Object.defineProperty(obj, key, {
            value: value,
            enumerable: true,
            configurable: true,
            writable: true
        });
    } else {
        obj[key] = value;
    }
    return obj;
}
function _object_spread(target) {
    for(var i = 1; i < arguments.length; i++){
        var source = arguments[i] != null ? arguments[i] : {};
        var ownKeys = Object.keys(source);
        if (typeof Object.getOwnPropertySymbols === "function") {
            ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {
                return Object.getOwnPropertyDescriptor(source, sym).enumerable;
            }));
        }
        ownKeys.forEach(function(key) {
            _define_property(target, key, source[key]);
        });
    }
    return target;
}
function ownKeys(object, enumerableOnly) {
    var keys = Object.keys(object);
    if (Object.getOwnPropertySymbols) {
        var symbols = Object.getOwnPropertySymbols(object);
        if (enumerableOnly) {
            symbols = symbols.filter(function(sym) {
                return Object.getOwnPropertyDescriptor(object, sym).enumerable;
            });
        }
        keys.push.apply(keys, symbols);
    }
    return keys;
}
function _object_spread_props(target, source) {
    source = source != null ? source : {};
    if (Object.getOwnPropertyDescriptors) {
        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
        ownKeys(Object(source)).forEach(function(key) {
            Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
        });
    }
    return target;
}
function handleAnswerMessage(agentState, data) {
    if (data.text === "") {
        return agentState;
    }
    // Update existing answer
    const existingAnswerIndex = agentState.answerStream.findIndex((item)=>item.answerId === data.answerId);
    if (existingAnswerIndex !== -1) {
        const updatedAnswerStream = [
            ...agentState.answerStream
        ];
        const existing = updatedAnswerStream[existingAnswerIndex];
        updatedAnswerStream[existingAnswerIndex] = _object_spread_props(_object_spread({}, existing), {
            answerStream: [
                ...existing.answerStream || [],
                data.text
            ]
        });
        var _data_requestId;
        // Update existing answer
        return _object_spread_props(_object_spread({}, agentState), {
            answerStream: updatedAnswerStream,
            error: undefined,
            requestId: (_data_requestId = data.requestId) !== null && _data_requestId !== void 0 ? _data_requestId : agentState.requestId
        });
    }
    var _data_requestId1;
    // Add new answer if no existing answer found
    return _object_spread_props(_object_spread({}, agentState), {
        answerStream: [
            ...agentState.answerStream,
            {
                answerId: data.answerId,
                answerStream: [
                    data.text
                ]
            }
        ],
        requestId: (_data_requestId1 = data.requestId) !== null && _data_requestId1 !== void 0 ? _data_requestId1 : agentState.requestId
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tY2F0dGFuZW8vd29ya3NwYWNlL2Zyb250ZW5kL2xpYnMvcmVhY3QvY29tbW9uL2hvb2tzL3NyYy9saWIvdXNlQWdlbnQvaGFuZGxlcnMvaGFuZGxlQW5zd2VyTWVzc2FnZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBZ2VudE1lc3NhZ2VTdGF0ZSwgQW5zd2VyTWVzc2FnZSwgQW5zd2VyU2VxdWVuY2UgfSBmcm9tIFwiLi4vdXNlQWdlbnQudHlwZXNcIlxuXG5mdW5jdGlvbiBoYW5kbGVBbnN3ZXJNZXNzYWdlKFxuICBhZ2VudFN0YXRlOiBBZ2VudE1lc3NhZ2VTdGF0ZSxcbiAgZGF0YTogQW5zd2VyTWVzc2FnZSxcbik6IEFnZW50TWVzc2FnZVN0YXRlIHtcbiAgaWYgKGRhdGEudGV4dCA9PT0gXCJcIikge1xuICAgIHJldHVybiBhZ2VudFN0YXRlXG4gIH1cblxuICAvLyBVcGRhdGUgZXhpc3RpbmcgYW5zd2VyXG4gIGNvbnN0IGV4aXN0aW5nQW5zd2VySW5kZXggPSBhZ2VudFN0YXRlLmFuc3dlclN0cmVhbS5maW5kSW5kZXgoXG4gICAgaXRlbSA9PiBpdGVtLmFuc3dlcklkID09PSBkYXRhLmFuc3dlcklkLFxuICApXG5cbiAgaWYgKGV4aXN0aW5nQW5zd2VySW5kZXggIT09IC0xKSB7XG4gICAgY29uc3QgdXBkYXRlZEFuc3dlclN0cmVhbSA9IFsuLi5hZ2VudFN0YXRlLmFuc3dlclN0cmVhbV1cblxuICAgIGNvbnN0IGV4aXN0aW5nID0gdXBkYXRlZEFuc3dlclN0cmVhbVtleGlzdGluZ0Fuc3dlckluZGV4XSBhcyBBbnN3ZXJTZXF1ZW5jZVxuICAgIHVwZGF0ZWRBbnN3ZXJTdHJlYW1bZXhpc3RpbmdBbnN3ZXJJbmRleF0gPSB7XG4gICAgICAuLi5leGlzdGluZyxcbiAgICAgIGFuc3dlclN0cmVhbTogWy4uLihleGlzdGluZy5hbnN3ZXJTdHJlYW0gfHwgW10pLCBkYXRhLnRleHRdLFxuICAgIH1cbiAgICAvLyBVcGRhdGUgZXhpc3RpbmcgYW5zd2VyXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmFnZW50U3RhdGUsXG4gICAgICBhbnN3ZXJTdHJlYW06IHVwZGF0ZWRBbnN3ZXJTdHJlYW0sXG4gICAgICBlcnJvcjogdW5kZWZpbmVkLFxuICAgICAgcmVxdWVzdElkOiBkYXRhLnJlcXVlc3RJZCA/PyBhZ2VudFN0YXRlLnJlcXVlc3RJZCxcbiAgICB9XG4gIH1cbiAgLy8gQWRkIG5ldyBhbnN3ZXIgaWYgbm8gZXhpc3RpbmcgYW5zd2VyIGZvdW5kXG4gIHJldHVybiB7XG4gICAgLi4uYWdlbnRTdGF0ZSxcbiAgICBhbnN3ZXJTdHJlYW06IFtcbiAgICAgIC4uLmFnZW50U3RhdGUuYW5zd2VyU3RyZWFtLFxuICAgICAge1xuICAgICAgICBhbnN3ZXJJZDogZGF0YS5hbnN3ZXJJZCxcbiAgICAgICAgYW5zd2VyU3RyZWFtOiBbZGF0YS50ZXh0XSxcbiAgICAgIH0sXG4gICAgXSxcbiAgICByZXF1ZXN0SWQ6IGRhdGEucmVxdWVzdElkID8/IGFnZW50U3RhdGUucmVxdWVzdElkLFxuICB9XG59XG5cbmV4cG9ydCB7IGhhbmRsZUFuc3dlck1lc3NhZ2UgfVxuIl0sIm5hbWVzIjpbImhhbmRsZUFuc3dlck1lc3NhZ2UiLCJhZ2VudFN0YXRlIiwiZGF0YSIsInRleHQiLCJleGlzdGluZ0Fuc3dlckluZGV4IiwiYW5zd2VyU3RyZWFtIiwiZmluZEluZGV4IiwiaXRlbSIsImFuc3dlcklkIiwidXBkYXRlZEFuc3dlclN0cmVhbSIsImV4aXN0aW5nIiwiZXJyb3IiLCJ1bmRlZmluZWQiLCJyZXF1ZXN0SWQiXSwicmFuZ2VNYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7IiwibWFwcGluZ3MiOiI7Ozs7K0JBNkNTQTs7O2VBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBM0NULFNBQVNBLG9CQUNQQyxVQUE2QixFQUM3QkMsSUFBbUI7SUFFbkIsSUFBSUEsS0FBS0MsSUFBSSxLQUFLLElBQUk7UUFDcEIsT0FBT0Y7SUFDVDtJQUVBLHlCQUF5QjtJQUN6QixNQUFNRyxzQkFBc0JILFdBQVdJLFlBQVksQ0FBQ0MsU0FBUyxDQUMzREMsQ0FBQUEsT0FBUUEsS0FBS0MsUUFBUSxLQUFLTixLQUFLTSxRQUFRO0lBR3pDLElBQUlKLHdCQUF3QixDQUFDLEdBQUc7UUFDOUIsTUFBTUssc0JBQXNCO2VBQUlSLFdBQVdJLFlBQVk7U0FBQztRQUV4RCxNQUFNSyxXQUFXRCxtQkFBbUIsQ0FBQ0wsb0JBQW9CO1FBQ3pESyxtQkFBbUIsQ0FBQ0wsb0JBQW9CLEdBQUcsd0NBQ3RDTTtZQUNITCxjQUFjO21CQUFLSyxTQUFTTCxZQUFZLElBQUksRUFBRTtnQkFBR0gsS0FBS0MsSUFBSTthQUFDOztZQU9oREQ7UUFMYix5QkFBeUI7UUFDekIsT0FBTyx3Q0FDRkQ7WUFDSEksY0FBY0k7WUFDZEUsT0FBT0M7WUFDUEMsV0FBV1gsQ0FBQUEsa0JBQUFBLEtBQUtXLFNBQVMsY0FBZFgsNkJBQUFBLGtCQUFrQkQsV0FBV1ksU0FBUzs7SUFFckQ7UUFXYVg7SUFWYiw2Q0FBNkM7SUFDN0MsT0FBTyx3Q0FDRkQ7UUFDSEksY0FBYztlQUNUSixXQUFXSSxZQUFZO1lBQzFCO2dCQUNFRyxVQUFVTixLQUFLTSxRQUFRO2dCQUN2QkgsY0FBYztvQkFBQ0gsS0FBS0MsSUFBSTtpQkFBQztZQUMzQjtTQUNEO1FBQ0RVLFdBQVdYLENBQUFBLG1CQUFBQSxLQUFLVyxTQUFTLGNBQWRYLDhCQUFBQSxtQkFBa0JELFdBQVdZLFNBQVM7O0FBRXJEIn0=