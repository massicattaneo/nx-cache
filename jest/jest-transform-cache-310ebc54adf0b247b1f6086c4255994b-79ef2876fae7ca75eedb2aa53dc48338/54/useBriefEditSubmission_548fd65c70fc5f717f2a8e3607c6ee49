3665ca42aa662a12e19a56f14fab76e0
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "useBriefEditSubmission", {
    enumerable: true,
    get: function() {
        return useBriefEditSubmission;
    }
});
const _react = require("react");
const _reactrouterdom = require("react-router-dom");
const _clerkreact = require("@clerk/clerk-react");
const _brief = require("@rp/react/tanstack-api/brief");
const _briefPageHooksutils = require("../utils/briefPageHooks.utils");
const useBriefEditSubmission = ({ onSubmitSuccess, onSubmitError })=>{
    const { user } = (0, _clerkreact.useUser)();
    const { briefId } = (0, _reactrouterdom.useParams)();
    const { mutateAsync } = (0, _brief.useEditUserBriefConfig)(onSubmitError, onSubmitSuccess, briefId);
    const [isSaving, setIsSaving] = (0, _react.useState)(false);
    const submitEditedBrief = (0, _react.useCallback)(async (brief)=>{
        if (!user) return;
        setIsSaving(true);
        try {
            await mutateAsync((0, _briefPageHooksutils.transformBriefFormToPost)(brief, user.id));
            onSubmitSuccess();
        } catch (err) {
            onSubmitError();
        } finally{
            setIsSaving(false);
        }
    }, [
        mutateAsync,
        onSubmitError,
        onSubmitSuccess,
        user
    ]);
    return {
        submitEditedBrief,
        isSaving
    };
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tY2F0dGFuZW8vd29ya3NwYWNlL2Zyb250ZW5kL2xpYnMvcmVhY3QvY29tbW9uL2JyaWVmL3NyYy9ob29rcy91c2VCcmllZkVkaXRTdWJtaXNzaW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiXG5pbXBvcnQgeyB1c2VQYXJhbXMgfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiXG5pbXBvcnQgeyB1c2VVc2VyIH0gZnJvbSBcIkBjbGVyay9jbGVyay1yZWFjdFwiXG5pbXBvcnQgeyB1c2VFZGl0VXNlckJyaWVmQ29uZmlnIH0gZnJvbSBcIkBycC9yZWFjdC90YW5zdGFjay1hcGkvYnJpZWZcIlxuaW1wb3J0IHsgdHlwZSBCcmllZkNvbmZpZ0Zvcm0gfSBmcm9tIFwiQHJwL3JlYWN0L3RhbnN0YWNrLWFwaS9icmllZlwiXG5pbXBvcnQgeyB0cmFuc2Zvcm1CcmllZkZvcm1Ub1Bvc3QgfSBmcm9tIFwiLi4vdXRpbHMvYnJpZWZQYWdlSG9va3MudXRpbHNcIlxuXG50eXBlIFVzZUJyaWVmRWRpdFN1Ym1pc3Npb25Qcm9wcyA9IHtcbiAgb25TdWJtaXRTdWNjZXNzOiAoKSA9PiB2b2lkXG4gIG9uU3VibWl0RXJyb3I6ICgpID0+IHZvaWRcbn1cblxudHlwZSBVc2VCcmllZkVkaXRTdWJtaXNzaW9uU3RhdGUgPSB7XG4gIHN1Ym1pdEVkaXRlZEJyaWVmOiAoYnJpZWY6IEJyaWVmQ29uZmlnRm9ybSkgPT4gUHJvbWlzZTx2b2lkPlxuICBpc1NhdmluZzogYm9vbGVhblxufVxuXG5jb25zdCB1c2VCcmllZkVkaXRTdWJtaXNzaW9uID0gKHtcbiAgb25TdWJtaXRTdWNjZXNzLFxuICBvblN1Ym1pdEVycm9yLFxufTogVXNlQnJpZWZFZGl0U3VibWlzc2lvblByb3BzKTogVXNlQnJpZWZFZGl0U3VibWlzc2lvblN0YXRlID0+IHtcbiAgY29uc3QgeyB1c2VyIH0gPSB1c2VVc2VyKClcbiAgY29uc3QgeyBicmllZklkIH0gPSB1c2VQYXJhbXMoKVxuICBjb25zdCB7IG11dGF0ZUFzeW5jIH0gPSB1c2VFZGl0VXNlckJyaWVmQ29uZmlnKG9uU3VibWl0RXJyb3IsIG9uU3VibWl0U3VjY2VzcywgYnJpZWZJZClcbiAgY29uc3QgW2lzU2F2aW5nLCBzZXRJc1NhdmluZ10gPSB1c2VTdGF0ZShmYWxzZSlcblxuICBjb25zdCBzdWJtaXRFZGl0ZWRCcmllZiA9IHVzZUNhbGxiYWNrKFxuICAgIGFzeW5jIChicmllZjogQnJpZWZDb25maWdGb3JtKSA9PiB7XG4gICAgICBpZiAoIXVzZXIpIHJldHVyblxuXG4gICAgICBzZXRJc1NhdmluZyh0cnVlKVxuXG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBtdXRhdGVBc3luYyh0cmFuc2Zvcm1CcmllZkZvcm1Ub1Bvc3QoYnJpZWYsIHVzZXIuaWQpKVxuICAgICAgICBvblN1Ym1pdFN1Y2Nlc3MoKVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIG9uU3VibWl0RXJyb3IoKVxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgc2V0SXNTYXZpbmcoZmFsc2UpXG4gICAgICB9XG4gICAgfSxcbiAgICBbbXV0YXRlQXN5bmMsIG9uU3VibWl0RXJyb3IsIG9uU3VibWl0U3VjY2VzcywgdXNlcl0sXG4gIClcblxuICByZXR1cm4geyBzdWJtaXRFZGl0ZWRCcmllZiwgaXNTYXZpbmcgfVxufVxuXG5leHBvcnQgeyB1c2VCcmllZkVkaXRTdWJtaXNzaW9uIH1cbmV4cG9ydCB0eXBlIHsgVXNlQnJpZWZFZGl0U3VibWlzc2lvblN0YXRlLCBVc2VCcmllZkVkaXRTdWJtaXNzaW9uUHJvcHMgfVxuIl0sIm5hbWVzIjpbInVzZUJyaWVmRWRpdFN1Ym1pc3Npb24iLCJvblN1Ym1pdFN1Y2Nlc3MiLCJvblN1Ym1pdEVycm9yIiwidXNlciIsInVzZVVzZXIiLCJicmllZklkIiwidXNlUGFyYW1zIiwibXV0YXRlQXN5bmMiLCJ1c2VFZGl0VXNlckJyaWVmQ29uZmlnIiwiaXNTYXZpbmciLCJzZXRJc1NhdmluZyIsInVzZVN0YXRlIiwic3VibWl0RWRpdGVkQnJpZWYiLCJ1c2VDYWxsYmFjayIsImJyaWVmIiwidHJhbnNmb3JtQnJpZWZGb3JtVG9Qb3N0IiwiaWQiLCJlcnIiXSwicmFuZ2VNYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7IiwibWFwcGluZ3MiOiI7Ozs7K0JBK0NTQTs7O2VBQUFBOzs7dUJBL0M2QjtnQ0FDWjs0QkFDRjt1QkFDZTtxQ0FFRTtBQVl6QyxNQUFNQSx5QkFBeUIsQ0FBQyxFQUM5QkMsZUFBZSxFQUNmQyxhQUFhLEVBQ2U7SUFDNUIsTUFBTSxFQUFFQyxJQUFJLEVBQUUsR0FBR0MsSUFBQUEsbUJBQU87SUFDeEIsTUFBTSxFQUFFQyxPQUFPLEVBQUUsR0FBR0MsSUFBQUEseUJBQVM7SUFDN0IsTUFBTSxFQUFFQyxXQUFXLEVBQUUsR0FBR0MsSUFBQUEsNkJBQXNCLEVBQUNOLGVBQWVELGlCQUFpQkk7SUFDL0UsTUFBTSxDQUFDSSxVQUFVQyxZQUFZLEdBQUdDLElBQUFBLGVBQVEsRUFBQztJQUV6QyxNQUFNQyxvQkFBb0JDLElBQUFBLGtCQUFXLEVBQ25DLE9BQU9DO1FBQ0wsSUFBSSxDQUFDWCxNQUFNO1FBRVhPLFlBQVk7UUFFWixJQUFJO1lBQ0YsTUFBTUgsWUFBWVEsSUFBQUEsNkNBQXdCLEVBQUNELE9BQU9YLEtBQUthLEVBQUU7WUFDekRmO1FBQ0YsRUFBRSxPQUFPZ0IsS0FBSztZQUNaZjtRQUNGLFNBQVU7WUFDUlEsWUFBWTtRQUNkO0lBQ0YsR0FDQTtRQUFDSDtRQUFhTDtRQUFlRDtRQUFpQkU7S0FBSztJQUdyRCxPQUFPO1FBQUVTO1FBQW1CSDtJQUFTO0FBQ3ZDIn0=