{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/common/brief/src/hooks/useBriefEditSubmission.ts"],"sourcesContent":["import { useCallback, useState } from \"react\"\nimport { useParams } from \"react-router-dom\"\nimport { useUser } from \"@clerk/clerk-react\"\nimport { useEditUserBriefConfig } from \"@rp/react/tanstack-api/brief\"\nimport { type BriefConfigForm } from \"@rp/react/tanstack-api/brief\"\nimport { transformBriefFormToPost } from \"../utils/briefPageHooks.utils\"\n\ntype UseBriefEditSubmissionProps = {\n  onSubmitSuccess: () => void\n  onSubmitError: () => void\n}\n\ntype UseBriefEditSubmissionState = {\n  submitEditedBrief: (brief: BriefConfigForm) => Promise<void>\n  isSaving: boolean\n}\n\nconst useBriefEditSubmission = ({\n  onSubmitSuccess,\n  onSubmitError,\n}: UseBriefEditSubmissionProps): UseBriefEditSubmissionState => {\n  const { user } = useUser()\n  const { briefId } = useParams()\n  const { mutateAsync } = useEditUserBriefConfig(onSubmitError, onSubmitSuccess, briefId)\n  const [isSaving, setIsSaving] = useState(false)\n\n  const submitEditedBrief = useCallback(\n    async (brief: BriefConfigForm) => {\n      if (!user) return\n\n      setIsSaving(true)\n\n      try {\n        await mutateAsync(transformBriefFormToPost(brief, user.id))\n        onSubmitSuccess()\n      } catch (err) {\n        onSubmitError()\n      } finally {\n        setIsSaving(false)\n      }\n    },\n    [mutateAsync, onSubmitError, onSubmitSuccess, user],\n  )\n\n  return { submitEditedBrief, isSaving }\n}\n\nexport { useBriefEditSubmission }\nexport type { UseBriefEditSubmissionState, UseBriefEditSubmissionProps }\n"],"names":["useBriefEditSubmission","onSubmitSuccess","onSubmitError","user","useUser","briefId","useParams","mutateAsync","useEditUserBriefConfig","isSaving","setIsSaving","useState","submitEditedBrief","useCallback","brief","transformBriefFormToPost","id","err"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA+CSA;;;eAAAA;;;uBA/C6B;gCACZ;4BACF;uBACe;qCAEE;AAYzC,MAAMA,yBAAyB,CAAC,EAC9BC,eAAe,EACfC,aAAa,EACe;IAC5B,MAAM,EAAEC,IAAI,EAAE,GAAGC,IAAAA,mBAAO;IACxB,MAAM,EAAEC,OAAO,EAAE,GAAGC,IAAAA,yBAAS;IAC7B,MAAM,EAAEC,WAAW,EAAE,GAAGC,IAAAA,6BAAsB,EAACN,eAAeD,iBAAiBI;IAC/E,MAAM,CAACI,UAAUC,YAAY,GAAGC,IAAAA,eAAQ,EAAC;IAEzC,MAAMC,oBAAoBC,IAAAA,kBAAW,EACnC,OAAOC;QACL,IAAI,CAACX,MAAM;QAEXO,YAAY;QAEZ,IAAI;YACF,MAAMH,YAAYQ,IAAAA,6CAAwB,EAACD,OAAOX,KAAKa,EAAE;YACzDf;QACF,EAAE,OAAOgB,KAAK;YACZf;QACF,SAAU;YACRQ,YAAY;QACd;IACF,GACA;QAACH;QAAaL;QAAeD;QAAiBE;KAAK;IAGrD,OAAO;QAAES;QAAmBH;IAAS;AACvC"}