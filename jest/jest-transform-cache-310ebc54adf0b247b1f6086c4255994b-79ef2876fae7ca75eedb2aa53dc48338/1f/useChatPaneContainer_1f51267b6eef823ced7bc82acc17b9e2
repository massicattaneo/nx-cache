c4f6216ba55c68a5efaace7649038f3a
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "useChatPaneContainer", {
    enumerable: true,
    get: function() {
        return useChatPaneContainer;
    }
});
const _react = require("react");
const _reactrouter = require("react-router");
const _settings = require("@rp/common/settings");
const _hooks = require("@rp/react/web/common/hooks");
const _getChatCreatedURLParams = require("../utils/getChatCreatedURLParams");
function useChatPaneContainer() {
    const queryParams = (0, _hooks.useQueryParams)();
    const [hashParams] = (0, _hooks.useHashParams)();
    const location = (0, _reactrouter.useLocation)();
    const navigate = (0, _reactrouter.useNavigate)();
    const { id: documentId = "" } = (0, _reactrouter.useParams)();
    var _queryParams_get;
    const chatId = (_queryParams_get = queryParams.get(_settings.WATCHLIST_CHAT_ID_PARAM)) !== null && _queryParams_get !== void 0 ? _queryParams_get : undefined;
    const [previousDocumentId, setPreviousDocumentId] = (0, _react.useState)("");
    (0, _react.useEffect)(()=>{
        if (documentId !== previousDocumentId) {
            const chatUrlParams = (0, _getChatCreatedURLParams.getChatCreatedURLParams)({
                hashParams,
                locationSearch: location.search
            });
            navigate(chatUrlParams, {
                replace: true
            });
            setPreviousDocumentId(documentId);
        }
    }, [
        documentId,
        previousDocumentId,
        hashParams,
        location.search,
        navigate
    ]);
    const onChatCreated = (0, _react.useCallback)((chatId)=>{
        const chatUrlParams = (0, _getChatCreatedURLParams.getChatCreatedURLParams)({
            chatId,
            hashParams,
            locationSearch: location.search
        });
        navigate(chatUrlParams, {
            replace: true
        });
    }, [
        hashParams,
        location,
        navigate
    ]);
    return {
        chatId,
        onChatCreated
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tY2F0dGFuZW8vd29ya3NwYWNlL2Zyb250ZW5kL2FwcHMvY2xpZW50LXdlYi9zcmMvYXBwL3BhZ2VzL0ZpbGVzL0ZpbGVzVjIvaG9va3MvdXNlQ2hhdFBhbmVDb250YWluZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIlxuaW1wb3J0IHsgdXNlTG9jYXRpb24sIHVzZU5hdmlnYXRlLCB1c2VQYXJhbXMgfSBmcm9tIFwicmVhY3Qtcm91dGVyXCJcbmltcG9ydCB7IFdBVENITElTVF9DSEFUX0lEX1BBUkFNIH0gZnJvbSBcIkBycC9jb21tb24vc2V0dGluZ3NcIlxuaW1wb3J0IHsgdXNlSGFzaFBhcmFtcywgdXNlUXVlcnlQYXJhbXMgfSBmcm9tIFwiQHJwL3JlYWN0L3dlYi9jb21tb24vaG9va3NcIlxuaW1wb3J0IHsgZ2V0Q2hhdENyZWF0ZWRVUkxQYXJhbXMgfSBmcm9tIFwiLi4vdXRpbHMvZ2V0Q2hhdENyZWF0ZWRVUkxQYXJhbXNcIlxuXG50eXBlIFVzZUNoYXRQYW5lQ29udGFpbmVyU3RhdGUgPSB7XG4gIGNoYXRJZDogc3RyaW5nIHwgdW5kZWZpbmVkXG4gIG9uQ2hhdENyZWF0ZWQ6IChjaGF0SWQ6IHN0cmluZykgPT4gdm9pZFxufVxuXG5mdW5jdGlvbiB1c2VDaGF0UGFuZUNvbnRhaW5lcigpOiBVc2VDaGF0UGFuZUNvbnRhaW5lclN0YXRlIHtcbiAgY29uc3QgcXVlcnlQYXJhbXMgPSB1c2VRdWVyeVBhcmFtcygpXG4gIGNvbnN0IFtoYXNoUGFyYW1zXSA9IHVzZUhhc2hQYXJhbXMoKVxuICBjb25zdCBsb2NhdGlvbiA9IHVzZUxvY2F0aW9uKClcbiAgY29uc3QgbmF2aWdhdGUgPSB1c2VOYXZpZ2F0ZSgpXG4gIGNvbnN0IHsgaWQ6IGRvY3VtZW50SWQgPSBcIlwiIH0gPSB1c2VQYXJhbXMoKVxuICBjb25zdCBjaGF0SWQgPSBxdWVyeVBhcmFtcy5nZXQoV0FUQ0hMSVNUX0NIQVRfSURfUEFSQU0pID8/IHVuZGVmaW5lZFxuICBjb25zdCBbcHJldmlvdXNEb2N1bWVudElkLCBzZXRQcmV2aW91c0RvY3VtZW50SWRdID0gdXNlU3RhdGUoXCJcIilcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChkb2N1bWVudElkICE9PSBwcmV2aW91c0RvY3VtZW50SWQpIHtcbiAgICAgIGNvbnN0IGNoYXRVcmxQYXJhbXMgPSBnZXRDaGF0Q3JlYXRlZFVSTFBhcmFtcyh7XG4gICAgICAgIGhhc2hQYXJhbXMsXG4gICAgICAgIGxvY2F0aW9uU2VhcmNoOiBsb2NhdGlvbi5zZWFyY2gsXG4gICAgICB9KVxuXG4gICAgICBuYXZpZ2F0ZShjaGF0VXJsUGFyYW1zLCB7IHJlcGxhY2U6IHRydWUgfSlcbiAgICAgIHNldFByZXZpb3VzRG9jdW1lbnRJZChkb2N1bWVudElkKVxuICAgIH1cbiAgfSwgW2RvY3VtZW50SWQsIHByZXZpb3VzRG9jdW1lbnRJZCwgaGFzaFBhcmFtcywgbG9jYXRpb24uc2VhcmNoLCBuYXZpZ2F0ZV0pXG5cbiAgY29uc3Qgb25DaGF0Q3JlYXRlZCA9IHVzZUNhbGxiYWNrKFxuICAgIChjaGF0SWQ6IHN0cmluZykgPT4ge1xuICAgICAgY29uc3QgY2hhdFVybFBhcmFtcyA9IGdldENoYXRDcmVhdGVkVVJMUGFyYW1zKHtcbiAgICAgICAgY2hhdElkLFxuICAgICAgICBoYXNoUGFyYW1zLFxuICAgICAgICBsb2NhdGlvblNlYXJjaDogbG9jYXRpb24uc2VhcmNoLFxuICAgICAgfSlcbiAgICAgIG5hdmlnYXRlKGNoYXRVcmxQYXJhbXMsIHsgcmVwbGFjZTogdHJ1ZSB9KVxuICAgIH0sXG4gICAgW2hhc2hQYXJhbXMsIGxvY2F0aW9uLCBuYXZpZ2F0ZV0sXG4gIClcblxuICByZXR1cm4geyBjaGF0SWQsIG9uQ2hhdENyZWF0ZWQgfVxufVxuXG5leHBvcnQgeyB1c2VDaGF0UGFuZUNvbnRhaW5lciB9XG4iXSwibmFtZXMiOlsidXNlQ2hhdFBhbmVDb250YWluZXIiLCJxdWVyeVBhcmFtcyIsInVzZVF1ZXJ5UGFyYW1zIiwiaGFzaFBhcmFtcyIsInVzZUhhc2hQYXJhbXMiLCJsb2NhdGlvbiIsInVzZUxvY2F0aW9uIiwibmF2aWdhdGUiLCJ1c2VOYXZpZ2F0ZSIsImlkIiwiZG9jdW1lbnRJZCIsInVzZVBhcmFtcyIsImNoYXRJZCIsImdldCIsIldBVENITElTVF9DSEFUX0lEX1BBUkFNIiwidW5kZWZpbmVkIiwicHJldmlvdXNEb2N1bWVudElkIiwic2V0UHJldmlvdXNEb2N1bWVudElkIiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJjaGF0VXJsUGFyYW1zIiwiZ2V0Q2hhdENyZWF0ZWRVUkxQYXJhbXMiLCJsb2NhdGlvblNlYXJjaCIsInNlYXJjaCIsInJlcGxhY2UiLCJvbkNoYXRDcmVhdGVkIiwidXNlQ2FsbGJhY2siXSwicmFuZ2VNYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OyIsIm1hcHBpbmdzIjoiOzs7OytCQStDU0E7OztlQUFBQTs7O3VCQS9Dd0M7NkJBQ0c7MEJBQ1o7dUJBQ007eUNBQ047QUFPeEMsU0FBU0E7SUFDUCxNQUFNQyxjQUFjQyxJQUFBQSxxQkFBYztJQUNsQyxNQUFNLENBQUNDLFdBQVcsR0FBR0MsSUFBQUEsb0JBQWE7SUFDbEMsTUFBTUMsV0FBV0MsSUFBQUEsd0JBQVc7SUFDNUIsTUFBTUMsV0FBV0MsSUFBQUEsd0JBQVc7SUFDNUIsTUFBTSxFQUFFQyxJQUFJQyxhQUFhLEVBQUUsRUFBRSxHQUFHQyxJQUFBQSxzQkFBUztRQUMxQlY7SUFBZixNQUFNVyxTQUFTWCxDQUFBQSxtQkFBQUEsWUFBWVksR0FBRyxDQUFDQyxpQ0FBdUIsZUFBdkNiLDhCQUFBQSxtQkFBNENjO0lBQzNELE1BQU0sQ0FBQ0Msb0JBQW9CQyxzQkFBc0IsR0FBR0MsSUFBQUEsZUFBUSxFQUFDO0lBRTdEQyxJQUFBQSxnQkFBUyxFQUFDO1FBQ1IsSUFBSVQsZUFBZU0sb0JBQW9CO1lBQ3JDLE1BQU1JLGdCQUFnQkMsSUFBQUEsZ0RBQXVCLEVBQUM7Z0JBQzVDbEI7Z0JBQ0FtQixnQkFBZ0JqQixTQUFTa0IsTUFBTTtZQUNqQztZQUVBaEIsU0FBU2EsZUFBZTtnQkFBRUksU0FBUztZQUFLO1lBQ3hDUCxzQkFBc0JQO1FBQ3hCO0lBQ0YsR0FBRztRQUFDQTtRQUFZTTtRQUFvQmI7UUFBWUUsU0FBU2tCLE1BQU07UUFBRWhCO0tBQVM7SUFFMUUsTUFBTWtCLGdCQUFnQkMsSUFBQUEsa0JBQVcsRUFDL0IsQ0FBQ2Q7UUFDQyxNQUFNUSxnQkFBZ0JDLElBQUFBLGdEQUF1QixFQUFDO1lBQzVDVDtZQUNBVDtZQUNBbUIsZ0JBQWdCakIsU0FBU2tCLE1BQU07UUFDakM7UUFDQWhCLFNBQVNhLGVBQWU7WUFBRUksU0FBUztRQUFLO0lBQzFDLEdBQ0E7UUFBQ3JCO1FBQVlFO1FBQVVFO0tBQVM7SUFHbEMsT0FBTztRQUFFSztRQUFRYTtJQUFjO0FBQ2pDIn0=