{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/apps/client-web/src/app/pages/Files/FilesV2/hooks/useChatPaneContainer.ts"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\"\nimport { useLocation, useNavigate, useParams } from \"react-router\"\nimport { WATCHLIST_CHAT_ID_PARAM } from \"@rp/common/settings\"\nimport { useHashParams, useQueryParams } from \"@rp/react/web/common/hooks\"\nimport { getChatCreatedURLParams } from \"../utils/getChatCreatedURLParams\"\n\ntype UseChatPaneContainerState = {\n  chatId: string | undefined\n  onChatCreated: (chatId: string) => void\n}\n\nfunction useChatPaneContainer(): UseChatPaneContainerState {\n  const queryParams = useQueryParams()\n  const [hashParams] = useHashParams()\n  const location = useLocation()\n  const navigate = useNavigate()\n  const { id: documentId = \"\" } = useParams()\n  const chatId = queryParams.get(WATCHLIST_CHAT_ID_PARAM) ?? undefined\n  const [previousDocumentId, setPreviousDocumentId] = useState(\"\")\n\n  useEffect(() => {\n    if (documentId !== previousDocumentId) {\n      const chatUrlParams = getChatCreatedURLParams({\n        hashParams,\n        locationSearch: location.search,\n      })\n\n      navigate(chatUrlParams, { replace: true })\n      setPreviousDocumentId(documentId)\n    }\n  }, [documentId, previousDocumentId, hashParams, location.search, navigate])\n\n  const onChatCreated = useCallback(\n    (chatId: string) => {\n      const chatUrlParams = getChatCreatedURLParams({\n        chatId,\n        hashParams,\n        locationSearch: location.search,\n      })\n      navigate(chatUrlParams, { replace: true })\n    },\n    [hashParams, location, navigate],\n  )\n\n  return { chatId, onChatCreated }\n}\n\nexport { useChatPaneContainer }\n"],"names":["useChatPaneContainer","queryParams","useQueryParams","hashParams","useHashParams","location","useLocation","navigate","useNavigate","id","documentId","useParams","chatId","get","WATCHLIST_CHAT_ID_PARAM","undefined","previousDocumentId","setPreviousDocumentId","useState","useEffect","chatUrlParams","getChatCreatedURLParams","locationSearch","search","replace","onChatCreated","useCallback"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA+CSA;;;eAAAA;;;uBA/CwC;6BACG;0BACZ;uBACM;yCACN;AAOxC,SAASA;IACP,MAAMC,cAAcC,IAAAA,qBAAc;IAClC,MAAM,CAACC,WAAW,GAAGC,IAAAA,oBAAa;IAClC,MAAMC,WAAWC,IAAAA,wBAAW;IAC5B,MAAMC,WAAWC,IAAAA,wBAAW;IAC5B,MAAM,EAAEC,IAAIC,aAAa,EAAE,EAAE,GAAGC,IAAAA,sBAAS;QAC1BV;IAAf,MAAMW,SAASX,CAAAA,mBAAAA,YAAYY,GAAG,CAACC,iCAAuB,eAAvCb,8BAAAA,mBAA4Cc;IAC3D,MAAM,CAACC,oBAAoBC,sBAAsB,GAAGC,IAAAA,eAAQ,EAAC;IAE7DC,IAAAA,gBAAS,EAAC;QACR,IAAIT,eAAeM,oBAAoB;YACrC,MAAMI,gBAAgBC,IAAAA,gDAAuB,EAAC;gBAC5ClB;gBACAmB,gBAAgBjB,SAASkB,MAAM;YACjC;YAEAhB,SAASa,eAAe;gBAAEI,SAAS;YAAK;YACxCP,sBAAsBP;QACxB;IACF,GAAG;QAACA;QAAYM;QAAoBb;QAAYE,SAASkB,MAAM;QAAEhB;KAAS;IAE1E,MAAMkB,gBAAgBC,IAAAA,kBAAW,EAC/B,CAACd;QACC,MAAMQ,gBAAgBC,IAAAA,gDAAuB,EAAC;YAC5CT;YACAT;YACAmB,gBAAgBjB,SAASkB,MAAM;QACjC;QACAhB,SAASa,eAAe;YAAEI,SAAS;QAAK;IAC1C,GACA;QAACrB;QAAYE;QAAUE;KAAS;IAGlC,OAAO;QAAEK;QAAQa;IAAc;AACjC"}