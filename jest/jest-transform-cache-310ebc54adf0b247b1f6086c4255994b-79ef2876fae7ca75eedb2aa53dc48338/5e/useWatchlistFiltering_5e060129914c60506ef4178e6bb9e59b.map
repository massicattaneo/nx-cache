{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/brief/src/components/briefSteps/BriefWatchlistSelectionStep/hooks/useWatchlistFiltering.ts"],"sourcesContent":["import { useMemo } from \"react\"\nimport { Watchlist } from \"@rp/common/api-types\"\nimport { WatchlistsTab } from \"@rp/react/web/watchlists\"\nimport { EMPTY_WATCHLISTS } from \"../constants\"\n\ntype UseWatchlistFilteringParams = {\n  allWatchlists: Array<Watchlist>\n  activeTab: WatchlistsTab\n  userId: string | undefined\n  isSearching: boolean\n}\n\nfunction filterMyWatchlists(watchlists: Array<Watchlist>, userId: string | undefined) {\n  return watchlists.filter(watchlist => watchlist.ownerUserId === userId)\n}\n\nfunction filterOrganizationWatchlists(watchlists: Array<Watchlist>, userId: string | undefined) {\n  return watchlists.filter(watchlist => {\n    const hasCompanyPermission = watchlist.shared?.company?.permission !== \"undefined\"\n    const isNotOwnedByUser = watchlist.ownerUserId !== userId\n\n    return hasCompanyPermission && isNotOwnedByUser\n  })\n}\n\nfunction filterCommunityWatchlists(watchlists: Array<Watchlist>) {\n  return watchlists.filter(watchlist => {\n    const isPublished = watchlist.global?.status === \"published\"\n    const isCommunityType = watchlist.global?.type === \"community\"\n\n    return isPublished && isCommunityType\n  })\n}\n\nfunction filterThematicWatchlists(watchlists: Array<Watchlist>) {\n  return watchlists.filter(watchlist => {\n    const isPublished = watchlist.global?.status === \"published\"\n    const isThematicType = watchlist.global?.type === \"thematic\"\n\n    return isPublished && isThematicType\n  })\n}\n\nexport function useWatchlistFiltering({\n  allWatchlists,\n  activeTab,\n  userId,\n  isSearching,\n}: UseWatchlistFilteringParams) {\n  const filteredWatchlists = useMemo(() => {\n    if (!allWatchlists.length) return EMPTY_WATCHLISTS\n\n    // If searching, return all watchlists (search will be applied in BriefUserWatchlists)\n    if (isSearching) {\n      return allWatchlists\n    }\n\n    // Otherwise, filter by active tab\n    switch (activeTab) {\n      case \"my-watchlists\":\n        return filterMyWatchlists(allWatchlists, userId)\n      case \"public-watchlists\":\n        return filterOrganizationWatchlists(allWatchlists, userId)\n      case \"community-watchlists\":\n        return filterCommunityWatchlists(allWatchlists)\n      case \"thematic-watchlists\":\n        return filterThematicWatchlists(allWatchlists)\n      case \"favorites\":\n        return allWatchlists.filter(watchlist => watchlist.isFavorite)\n      default:\n        return EMPTY_WATCHLISTS\n    }\n  }, [allWatchlists, activeTab, userId, isSearching])\n\n  return { filteredWatchlists }\n}\n"],"names":["useWatchlistFiltering","filterMyWatchlists","watchlists","userId","filter","watchlist","ownerUserId","filterOrganizationWatchlists","hasCompanyPermission","shared","company","permission","isNotOwnedByUser","filterCommunityWatchlists","isPublished","global","status","isCommunityType","type","filterThematicWatchlists","isThematicType","allWatchlists","activeTab","isSearching","filteredWatchlists","useMemo","length","EMPTY_WATCHLISTS","isFavorite"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA2CgBA;;;eAAAA;;;uBA3CQ;2BAGS;AASjC,SAASC,mBAAmBC,UAA4B,EAAEC,MAA0B;IAClF,OAAOD,WAAWE,MAAM,CAACC,CAAAA,YAAaA,UAAUC,WAAW,KAAKH;AAClE;AAEA,SAASI,6BAA6BL,UAA4B,EAAEC,MAA0B;IAC5F,OAAOD,WAAWE,MAAM,CAACC,CAAAA;YACMA,2BAAAA;QAA7B,MAAMG,uBAAuBH,EAAAA,oBAAAA,UAAUI,MAAM,cAAhBJ,yCAAAA,4BAAAA,kBAAkBK,OAAO,cAAzBL,gDAAAA,0BAA2BM,UAAU,MAAK;QACvE,MAAMC,mBAAmBP,UAAUC,WAAW,KAAKH;QAEnD,OAAOK,wBAAwBI;IACjC;AACF;AAEA,SAASC,0BAA0BX,UAA4B;IAC7D,OAAOA,WAAWE,MAAM,CAACC,CAAAA;YACHA,mBACIA;QADxB,MAAMS,cAAcT,EAAAA,oBAAAA,UAAUU,MAAM,cAAhBV,wCAAAA,kBAAkBW,MAAM,MAAK;QACjD,MAAMC,kBAAkBZ,EAAAA,qBAAAA,UAAUU,MAAM,cAAhBV,yCAAAA,mBAAkBa,IAAI,MAAK;QAEnD,OAAOJ,eAAeG;IACxB;AACF;AAEA,SAASE,yBAAyBjB,UAA4B;IAC5D,OAAOA,WAAWE,MAAM,CAACC,CAAAA;YACHA,mBACGA;QADvB,MAAMS,cAAcT,EAAAA,oBAAAA,UAAUU,MAAM,cAAhBV,wCAAAA,kBAAkBW,MAAM,MAAK;QACjD,MAAMI,iBAAiBf,EAAAA,qBAAAA,UAAUU,MAAM,cAAhBV,yCAAAA,mBAAkBa,IAAI,MAAK;QAElD,OAAOJ,eAAeM;IACxB;AACF;AAEO,SAASpB,sBAAsB,EACpCqB,aAAa,EACbC,SAAS,EACTnB,MAAM,EACNoB,WAAW,EACiB;IAC5B,MAAMC,qBAAqBC,IAAAA,cAAO,EAAC;QACjC,IAAI,CAACJ,cAAcK,MAAM,EAAE,OAAOC,2BAAgB;QAElD,sFAAsF;QACtF,IAAIJ,aAAa;YACf,OAAOF;QACT;QAEA,kCAAkC;QAClC,OAAQC;YACN,KAAK;gBACH,OAAOrB,mBAAmBoB,eAAelB;YAC3C,KAAK;gBACH,OAAOI,6BAA6Bc,eAAelB;YACrD,KAAK;gBACH,OAAOU,0BAA0BQ;YACnC,KAAK;gBACH,OAAOF,yBAAyBE;YAClC,KAAK;gBACH,OAAOA,cAAcjB,MAAM,CAACC,CAAAA,YAAaA,UAAUuB,UAAU;YAC/D;gBACE,OAAOD,2BAAgB;QAC3B;IACF,GAAG;QAACN;QAAeC;QAAWnB;QAAQoB;KAAY;IAElD,OAAO;QAAEC;IAAmB;AAC9B"}