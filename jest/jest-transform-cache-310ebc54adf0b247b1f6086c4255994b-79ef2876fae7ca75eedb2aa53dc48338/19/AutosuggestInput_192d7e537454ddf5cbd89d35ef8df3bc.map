{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/search-autosuggest-input/src/lib/UnifiedSearch/AutosuggestInput.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\"\nimport { IconButton, InputAdornment } from \"@rp/react/web/mui/core\"\nimport { ArrowBack, Search } from \"@rp/react/web/mui/icons\"\nimport { ResultsAutosuggestInputStyled, autosuggestInputClasses } from \"./AutoCompleteCustoms\"\nimport { AutosuggestPopper } from \"./AutosuggestPopper\"\nimport { TypesenseSearchInputProps } from \"./UnifiedSearch.types\"\nimport { useAutosuggestInput } from \"./useAutosuggestInput\"\n\nconst AutosuggestInput = ({\n  onChange,\n  forceShowRecentSearches,\n  onSearchClick,\n  selectedItems,\n  excludeQueryTypes,\n  variant,\n  placeholder,\n  keepOpen = false,\n  onClose,\n}: TypesenseSearchInputProps) => {\n  const [inputRef, setInputRef] = useState<HTMLDivElement | null>(null)\n  const [inputFocusRef, setInputFocusRef] = useState<HTMLInputElement | null>(null)\n\n  useEffect(() => inputFocusRef?.focus(), [inputFocusRef])\n\n  const {\n    options,\n    value,\n    showRecentSearches,\n    searchValue,\n    toggleSubsidiaries,\n    handleChange,\n    handleInputChange,\n    closePopper,\n    handleInputKeydown,\n    selectedOption,\n    open,\n    setOpen,\n    setSelectedOption,\n  } = useAutosuggestInput({\n    onChange,\n    forceShowRecentSearches,\n    onSearchClick,\n    selectedItems,\n    excludeQueryTypes,\n    keepOpen,\n  })\n\n  return (\n    <>\n      <ResultsAutosuggestInputStyled\n        inputRef={setInputFocusRef}\n        inputVariant={variant}\n        isPopperOpen={open && options.length > 0}\n        autoFocus\n        classes={{ root: autosuggestInputClasses.inputRoot }}\n        placeholder={placeholder}\n        variant={\"outlined\"}\n        InputLabelProps={{\n          shrink: true,\n        }}\n        InputProps={{\n          classes: { root: autosuggestInputClasses.input, input: \"data-hj-allow\" },\n          startAdornment: onClose ? (\n            <InputAdornment position=\"start\">\n              <IconButton data-testid=\"back-arrow-button\" onClick={onClose} size=\"small\">\n                <ArrowBack />\n              </IconButton>\n            </InputAdornment>\n          ) : (\n            <InputAdornment position=\"start\">\n              <Search />\n            </InputAdornment>\n          ),\n        }}\n        value={value}\n        data-testid=\"unified-search-autocomplete\"\n        autoComplete=\"off\"\n        onClick={() => setOpen(true)}\n        onChange={handleInputChange}\n        onBlur={() => {\n          closePopper()\n          setSelectedOption(null)\n        }}\n        ref={setInputRef}\n        onKeyDown={handleInputKeydown}\n      />\n\n      <AutosuggestPopper\n        open={open}\n        options={options}\n        dropdownTitle={showRecentSearches ? \"Recent Searches\" : undefined}\n        selectedOption={selectedOption}\n        inputRef={inputRef}\n        searchValue={searchValue}\n        toggleSubsidiaries={toggleSubsidiaries}\n        handleChange={handleChange}\n      />\n    </>\n  )\n}\n\nexport { AutosuggestInput }\n"],"names":["AutosuggestInput","onChange","forceShowRecentSearches","onSearchClick","selectedItems","excludeQueryTypes","variant","placeholder","keepOpen","onClose","inputRef","setInputRef","useState","inputFocusRef","setInputFocusRef","useEffect","focus","options","value","showRecentSearches","searchValue","toggleSubsidiaries","handleChange","handleInputChange","closePopper","handleInputKeydown","selectedOption","open","setOpen","setSelectedOption","useAutosuggestInput","ResultsAutosuggestInputStyled","inputVariant","isPopperOpen","length","autoFocus","classes","root","autosuggestInputClasses","inputRoot","InputLabelProps","shrink","InputProps","input","startAdornment","InputAdornment","position","IconButton","data-testid","onClick","size","ArrowBack","Search","autoComplete","onBlur","ref","onKeyDown","AutosuggestPopper","dropdownTitle","undefined"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAqGSA;;;eAAAA;;;;uBArG2B;sBACO;uBACT;qCACqC;mCACrC;qCAEE;AAEpC,MAAMA,mBAAmB,CAAC,EACxBC,QAAQ,EACRC,uBAAuB,EACvBC,aAAa,EACbC,aAAa,EACbC,iBAAiB,EACjBC,OAAO,EACPC,WAAW,EACXC,WAAW,KAAK,EAChBC,OAAO,EACmB;IAC1B,MAAM,CAACC,UAAUC,YAAY,GAAGC,IAAAA,eAAQ,EAAwB;IAChE,MAAM,CAACC,eAAeC,iBAAiB,GAAGF,IAAAA,eAAQ,EAA0B;IAE5EG,IAAAA,gBAAS,EAAC,IAAMF,0BAAAA,oCAAAA,cAAeG,KAAK,IAAI;QAACH;KAAc;IAEvD,MAAM,EACJI,OAAO,EACPC,KAAK,EACLC,kBAAkB,EAClBC,WAAW,EACXC,kBAAkB,EAClBC,YAAY,EACZC,iBAAiB,EACjBC,WAAW,EACXC,kBAAkB,EAClBC,cAAc,EACdC,IAAI,EACJC,OAAO,EACPC,iBAAiB,EAClB,GAAGC,IAAAA,wCAAmB,EAAC;QACtB7B;QACAC;QACAC;QACAC;QACAC;QACAG;IACF;IAEA,qBACE;;0BACE,qBAACuB,kDAA6B;gBAC5BrB,UAAUI;gBACVkB,cAAc1B;gBACd2B,cAAcN,QAAQV,QAAQiB,MAAM,GAAG;gBACvCC,SAAS;gBACTC,SAAS;oBAAEC,MAAMC,4CAAuB,CAACC,SAAS;gBAAC;gBACnDhC,aAAaA;gBACbD,SAAS;gBACTkC,iBAAiB;oBACfC,QAAQ;gBACV;gBACAC,YAAY;oBACVN,SAAS;wBAAEC,MAAMC,4CAAuB,CAACK,KAAK;wBAAEA,OAAO;oBAAgB;oBACvEC,gBAAgBnC,wBACd,qBAACoC,oBAAc;wBAACC,UAAS;kCACvB,cAAA,qBAACC,gBAAU;4BAACC,eAAY;4BAAoBC,SAASxC;4BAASyC,MAAK;sCACjE,cAAA,qBAACC,gBAAS;;uCAId,qBAACN,oBAAc;wBAACC,UAAS;kCACvB,cAAA,qBAACM,aAAM;;gBAGb;gBACAlC,OAAOA;gBACP8B,eAAY;gBACZK,cAAa;gBACbJ,SAAS,IAAMrB,QAAQ;gBACvB3B,UAAUsB;gBACV+B,QAAQ;oBACN9B;oBACAK,kBAAkB;gBACpB;gBACA0B,KAAK5C;gBACL6C,WAAW/B;;0BAGb,qBAACgC,oCAAiB;gBAChB9B,MAAMA;gBACNV,SAASA;gBACTyC,eAAevC,qBAAqB,oBAAoBwC;gBACxDjC,gBAAgBA;gBAChBhB,UAAUA;gBACVU,aAAaA;gBACbC,oBAAoBA;gBACpBC,cAAcA;;;;AAItB"}