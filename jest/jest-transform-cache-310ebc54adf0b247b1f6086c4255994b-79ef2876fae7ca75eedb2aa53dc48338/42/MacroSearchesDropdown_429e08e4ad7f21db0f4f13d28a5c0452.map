{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/cqs-query-bar/src/lib/dropdowns/MacroSearchesDropdown.tsx"],"sourcesContent":["import { Fragment } from \"react\"\nimport { RpqlFlatArrayFilter } from \"@rp/common/api-types\"\nimport { capitalizeAllWordsBySeparator } from \"@rp/common/utils\"\nimport { RPTooltip } from \"@rp/react/web/common/base-components\"\nimport { IconButton } from \"@rp/react/web/mui/core\"\nimport { Close } from \"@rp/react/web/mui/icons\"\nimport { NameDisplay } from \"../NameDisplay\"\nimport {\n  DropdownContainer,\n  DropdownItemContainer,\n  DropdownScroll,\n  DropdownTitle,\n} from \"./CqsDropdown.styles\"\n\ntype FlattenFilter = { id: string; value: string; group: string; type: string }\n\ntype MacroSearchesDropdownProps = {\n  filter: Array<FlattenFilter>\n  onRemove: (id: string, group: RpqlFlatArrayFilter) => void\n}\n\nexport function MacroSearchesDropdown({ filter, onRemove }: MacroSearchesDropdownProps) {\n  const initialValue: Record<string, Array<FlattenFilter>> = {}\n  const groups = filter.reduce(\n    (acc, item) => ({ ...acc, [item.group]: (acc[item.group] ?? []).concat(item) }),\n    initialValue,\n  )\n\n  return (\n    <DropdownContainer role=\"menu\" aria-label=\"Pill menu\">\n      {Object.entries(groups).map(([group, array]) => {\n        return (\n          <Fragment key={group}>\n            <DropdownScroll>\n              <DropdownTitle sx={{ pt: \"10px\" }}>{`${group} (${array.length})`}</DropdownTitle>\n              {array.map(subFilter => (\n                <DropdownItemContainer key={subFilter.value}>\n                  <div>\n                    <NameDisplay\n                      data={{\n                        data: {\n                          name:\n                            subFilter.value === group\n                              ? \"All\"\n                              : capitalizeAllWordsBySeparator(subFilter.value, \"-\"),\n                        },\n                        isLoading: false,\n                      }}\n                    />\n                    <RPTooltip placement=\"top\" title=\"Remove\" enterDelay={500}>\n                      <IconButton\n                        data-testid={`${subFilter}-remove`}\n                        onClick={() =>\n                          onRemove(subFilter.id, {\n                            id: subFilter.id,\n                            type: subFilter.type,\n                            value: [subFilter.value],\n                            operation: \"in\",\n                          })\n                        }\n                        size=\"small\"\n                      >\n                        <Close sx={{ fontSize: 20 }} />\n                      </IconButton>\n                    </RPTooltip>\n                  </div>\n                </DropdownItemContainer>\n              ))}\n            </DropdownScroll>\n          </Fragment>\n        )\n      })}\n    </DropdownContainer>\n  )\n}\n"],"names":["MacroSearchesDropdown","filter","onRemove","initialValue","groups","reduce","acc","item","group","concat","DropdownContainer","role","aria-label","Object","entries","map","array","Fragment","DropdownScroll","DropdownTitle","sx","pt","length","subFilter","DropdownItemContainer","div","NameDisplay","data","name","value","capitalizeAllWordsBySeparator","isLoading","RPTooltip","placement","title","enterDelay","IconButton","data-testid","onClick","id","type","operation","size","Close","fontSize"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAqBgBA;;;eAAAA;;;;uBArBS;uBAEqB;gCACpB;sBACC;uBACL;6BACM;mCAMrB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA,SAASA,sBAAsB,EAAEC,MAAM,EAAEC,QAAQ,EAA8B;IACpF,MAAMC,eAAqD,CAAC;IAC5D,MAAMC,SAASH,OAAOI,MAAM,CAC1B,CAACC,KAAKC;YAAmCD;eAAzB,wCAAKA;YAAK,CAACC,KAAKC,KAAK,CAAC,EAAE,AAACF,CAAAA,CAAAA,kBAAAA,GAAG,CAACC,KAAKC,KAAK,CAAC,cAAfF,6BAAAA,kBAAmB,EAAE,AAAD,EAAGG,MAAM,CAACF;;IAAM,GAC7EJ;IAGF,qBACE,qBAACO,oCAAiB;QAACC,MAAK;QAAOC,cAAW;kBACvCC,OAAOC,OAAO,CAACV,QAAQW,GAAG,CAAC,CAAC,CAACP,OAAOQ,MAAM;YACzC,qBACE,qBAACC,eAAQ;0BACP,cAAA,sBAACC,iCAAc;;sCACb,qBAACC,gCAAa;4BAACC,IAAI;gCAAEC,IAAI;4BAAO;sCAAI,CAAC,EAAEb,MAAM,EAAE,EAAEQ,MAAMM,MAAM,CAAC,CAAC,CAAC;;wBAC/DN,MAAMD,GAAG,CAACQ,CAAAA,0BACT,qBAACC,wCAAqB;0CACpB,cAAA,sBAACC;;sDACC,qBAACC,wBAAW;4CACVC,MAAM;gDACJA,MAAM;oDACJC,MACEL,UAAUM,KAAK,KAAKrB,QAChB,QACAsB,IAAAA,oCAA6B,EAACP,UAAUM,KAAK,EAAE;gDACvD;gDACAE,WAAW;4CACb;;sDAEF,qBAACC,yBAAS;4CAACC,WAAU;4CAAMC,OAAM;4CAASC,YAAY;sDACpD,cAAA,qBAACC,gBAAU;gDACTC,eAAa,CAAC,EAAEd,UAAU,OAAO,CAAC;gDAClCe,SAAS,IACPpC,SAASqB,UAAUgB,EAAE,EAAE;wDACrBA,IAAIhB,UAAUgB,EAAE;wDAChBC,MAAMjB,UAAUiB,IAAI;wDACpBX,OAAO;4DAACN,UAAUM,KAAK;yDAAC;wDACxBY,WAAW;oDACb;gDAEFC,MAAK;0DAEL,cAAA,qBAACC,YAAK;oDAACvB,IAAI;wDAAEwB,UAAU;oDAAG;;;;;;+BA1BNrB,UAAUM,KAAK;;;eAJlCrB;QAuCnB;;AAGN"}