{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/watchlists/src/lib/WatchlistChat/WatchlistChatInput.tsx"],"sourcesContent":["import { Dispatch } from \"react\"\nimport { SetStateAction } from \"jotai\"\nimport { DatasetScope } from \"@rp/common/api-types\"\nimport { CHAT_INPUT_ID } from \"@rp/common/settings\"\nimport {\n  CHAT_INPUT_CONTAINER_CLASS_NAME,\n  CHAT_INPUT_CONTROLS_CLASS_NAME,\n  CHAT_INPUT_HIDDEN_WRAPPER_CLASS_NAME,\n  CHAT_INPUT_WRAPPER_CLASS_NAME,\n  CurrentInteraction,\n  ExtendableChatInput,\n  SCOPE_DISPLAY_CLASS_NAME,\n} from \"@rp/react/web/chat\"\nimport { Box, Typography } from \"@rp/react/web/mui/core\"\n\ntype Props = {\n  variant?: \"new\" | \"add\"\n  addPrompt: (prompt: { prompt: string }) => void\n  setCurrentInteraction: Dispatch<SetStateAction<CurrentInteraction | undefined>>\n  currentInteraction?: CurrentInteraction\n  placeholder: string\n  isValidPrompt: boolean\n  sourceFilters: Partial<Record<string, boolean>>\n  setScope: (scope: DatasetScope | undefined) => void\n  scope: DatasetScope | undefined\n  filesIds: Array<string>\n  setFilesIds: Dispatch<SetStateAction<Array<string>>>\n  hideOpacity?: boolean\n}\n\nexport const WatchlistChatInput = ({\n  variant,\n  placeholder,\n  addPrompt,\n  isValidPrompt,\n  sourceFilters,\n  setScope,\n  scope,\n  filesIds,\n  setFilesIds,\n  currentInteraction,\n  setCurrentInteraction,\n  hideOpacity = false,\n}: Props) => {\n  return (\n    <Box\n      sx={{\n        position: \"relative\",\n        height: 95,\n        px: 2,\n        backgroundColor: \"elevation.dp01\",\n        width: \"100%\",\n        zIndex: 1,\n        pb: 1,\n        [`& .${CHAT_INPUT_CONTROLS_CLASS_NAME}`]: {\n          left: \"8px\",\n        },\n        [`& .${CHAT_INPUT_HIDDEN_WRAPPER_CLASS_NAME}`]: {\n          width: \"calc(100% - 32px)\",\n        },\n        [`& #${CHAT_INPUT_ID}.${CHAT_INPUT_WRAPPER_CLASS_NAME}, & .${CHAT_INPUT_HIDDEN_WRAPPER_CLASS_NAME} .${CHAT_INPUT_WRAPPER_CLASS_NAME}`]:\n          {\n            width: \"100%\",\n            minWidth: \"100%\",\n            [`& .${CHAT_INPUT_CONTAINER_CLASS_NAME}`]: {\n              width: \"100%\",\n              backgroundColor: \"elevation.dp06\",\n            },\n          },\n      }}\n    >\n      {!hideOpacity && (\n        <Box\n          sx={{\n            display: \"block\",\n            position: \"absolute\",\n            background: \"linear-gradient(0deg, #1E1E1E 26.96%, rgba(30, 30, 30, 0) 86.27%)\",\n            top: -78,\n            width: \"100%\",\n            height: 78,\n            pointerEvents: \"none\",\n          }}\n        />\n      )}\n      <Box\n        sx={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          gap: 1,\n          position: \"absolute\",\n          bottom: 0,\n          width: \"calc(100% - 32px)\",\n          [`& .${SCOPE_DISPLAY_CLASS_NAME}`]: {\n            backgroundColor: \"elevation.dp08\",\n          },\n        }}\n      >\n        <ExtendableChatInput\n          onPromptSubmit={prompt => addPrompt({ prompt })}\n          setScope={setScope}\n          scope={scope}\n          filesIds={filesIds}\n          setFilesIds={setFilesIds}\n          watchlistId={undefined}\n          submitWatchlistId={() => {}}\n          openScopeSelectorModal={() => {}}\n          sourceFilter={sourceFilters}\n          enableFreeTier={false}\n          hideControls={[\"watchlist\", \"files\"]}\n          location={\"filesPage\"}\n          placeholder={placeholder}\n          variant={variant}\n          isValidPrompt={isValidPrompt}\n          generating={\n            currentInteraction !== undefined &&\n            !currentInteraction.stopped &&\n            !currentInteraction.error\n          }\n          stopGenerating={() => {\n            setCurrentInteraction(prev => (prev ? { ...prev, stopped: true } : undefined))\n          }}\n        />\n        <Typography sx={{ textAlign: \"center\", fontSize: 12, color: \"grey.300\" }}>\n          Bigdata can make mistakes. Please check important info.\n        </Typography>\n      </Box>\n    </Box>\n  )\n}\n"],"names":["WatchlistChatInput","variant","placeholder","addPrompt","isValidPrompt","sourceFilters","setScope","scope","filesIds","setFilesIds","currentInteraction","setCurrentInteraction","hideOpacity","Box","sx","position","height","px","backgroundColor","width","zIndex","pb","CHAT_INPUT_CONTROLS_CLASS_NAME","left","CHAT_INPUT_HIDDEN_WRAPPER_CLASS_NAME","CHAT_INPUT_ID","CHAT_INPUT_WRAPPER_CLASS_NAME","minWidth","CHAT_INPUT_CONTAINER_CLASS_NAME","display","background","top","pointerEvents","flexDirection","gap","bottom","SCOPE_DISPLAY_CLASS_NAME","ExtendableChatInput","onPromptSubmit","prompt","watchlistId","undefined","submitWatchlistId","openScopeSelectorModal","sourceFilter","enableFreeTier","hideControls","location","generating","stopped","error","stopGenerating","prev","Typography","textAlign","fontSize","color"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA8BaA;;;eAAAA;;;;0BA3BiB;sBASvB;sBACyB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiBzB,MAAMA,qBAAqB,CAAC,EACjCC,OAAO,EACPC,WAAW,EACXC,SAAS,EACTC,aAAa,EACbC,aAAa,EACbC,QAAQ,EACRC,KAAK,EACLC,QAAQ,EACRC,WAAW,EACXC,kBAAkB,EAClBC,qBAAqB,EACrBC,cAAc,KAAK,EACb;IACN,qBACE,sBAACC,SAAG;QACFC,IAAI;YACFC,UAAU;YACVC,QAAQ;YACRC,IAAI;YACJC,iBAAiB;YACjBC,OAAO;YACPC,QAAQ;YACRC,IAAI;YACJ,CAAC,CAAC,GAAG,EAAEC,oCAA8B,CAAC,CAAC,CAAC,EAAE;gBACxCC,MAAM;YACR;YACA,CAAC,CAAC,GAAG,EAAEC,0CAAoC,CAAC,CAAC,CAAC,EAAE;gBAC9CL,OAAO;YACT;YACA,CAAC,CAAC,GAAG,EAAEM,uBAAa,CAAC,CAAC,EAAEC,mCAA6B,CAAC,KAAK,EAAEF,0CAAoC,CAAC,EAAE,EAAEE,mCAA6B,CAAC,CAAC,CAAC,EACpI;gBACEP,OAAO;gBACPQ,UAAU;gBACV,CAAC,CAAC,GAAG,EAAEC,qCAA+B,CAAC,CAAC,CAAC,EAAE;oBACzCT,OAAO;oBACPD,iBAAiB;gBACnB;YACF;QACJ;;YAEC,CAACN,6BACA,qBAACC,SAAG;gBACFC,IAAI;oBACFe,SAAS;oBACTd,UAAU;oBACVe,YAAY;oBACZC,KAAK,CAAC;oBACNZ,OAAO;oBACPH,QAAQ;oBACRgB,eAAe;gBACjB;;0BAGJ,sBAACnB,SAAG;gBACFC,IAAI;oBACFe,SAAS;oBACTI,eAAe;oBACfC,KAAK;oBACLnB,UAAU;oBACVoB,QAAQ;oBACRhB,OAAO;oBACP,CAAC,CAAC,GAAG,EAAEiB,8BAAwB,CAAC,CAAC,CAAC,EAAE;wBAClClB,iBAAiB;oBACnB;gBACF;;kCAEA,qBAACmB,yBAAmB;wBAClBC,gBAAgBC,CAAAA,SAAUpC,UAAU;gCAAEoC;4BAAO;wBAC7CjC,UAAUA;wBACVC,OAAOA;wBACPC,UAAUA;wBACVC,aAAaA;wBACb+B,aAAaC;wBACbC,mBAAmB,KAAO;wBAC1BC,wBAAwB,KAAO;wBAC/BC,cAAcvC;wBACdwC,gBAAgB;wBAChBC,cAAc;4BAAC;4BAAa;yBAAQ;wBACpCC,UAAU;wBACV7C,aAAaA;wBACbD,SAASA;wBACTG,eAAeA;wBACf4C,YACEtC,uBAAuB+B,aACvB,CAAC/B,mBAAmBuC,OAAO,IAC3B,CAACvC,mBAAmBwC,KAAK;wBAE3BC,gBAAgB;4BACdxC,sBAAsByC,CAAAA,OAASA,OAAO,wCAAKA;oCAAMH,SAAS;qCAASR;wBACrE;;kCAEF,qBAACY,gBAAU;wBAACvC,IAAI;4BAAEwC,WAAW;4BAAUC,UAAU;4BAAIC,OAAO;wBAAW;kCAAG;;;;;;AAMlF"}