{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/development/src/lib/database/emptyDbDefaultData.ts"],"sourcesContent":["import { z } from \"zod\"\nimport { CqsSavedQuery } from \"@rp/common/api-types\"\nimport { bigdataSchemas } from \"@rp/common/contracts\"\nimport { autosuggestVespaItems } from \"../msw/mocks/autosuggest/autosuggestVespaItems\"\nimport {\n  DbBrief,\n  DbChat,\n  DbContentPackage,\n  DbCqs,\n  DbCustomDataView,\n  DbFile,\n  DbWatchlist,\n} from \"./db.types\"\nimport { generateBrief, generateWatchlist, userOwner } from \"./generators\"\nimport { generateApiKey } from \"./generators/generateApiKey\"\nimport { generateFile } from \"./generators/generateRpJson\"\n\nconst newEmptyDb = () => {\n  const emptyDbDefaultData = {\n    queries: new Array<CqsSavedQuery>(),\n    watchlists: new Array<DbWatchlist>(),\n    chats: new Array<DbChat>(),\n    autosuggest: new Array<z.infer<typeof bigdataSchemas.st_autosuggest_vespa_AutosuggestResult>>(),\n    cqs: new Array<DbCqs>(),\n    files: new Array<DbFile>(),\n    briefs: new Array<DbBrief>(),\n    apiKeys: new Array<z.infer<typeof bigdataSchemas.st_api_keys_CreatedApiKey>>(),\n    content: new Array<DbContentPackage>(),\n    customDataViews: new Array<DbCustomDataView>(),\n  }\n\n  // ADD SOME CQS ITEMS\n  emptyDbDefaultData.autosuggest.push(...autosuggestVespaItems)\n  emptyDbDefaultData.cqs.push(\n    ...autosuggestVespaItems.map(item => ({\n      ...item,\n      entityType: item.entityType ?? \"\",\n      queryType: item.queryType ?? \"entity\",\n      metadata1: item.ticker ?? \"\",\n    })),\n  )\n\n  const wl = generateWatchlist({ name: \"Personal Watchlist\", items: [\"D8442A\"] }) // APPLE\n  const sharedWl = generateWatchlist(\n    { name: \"Shared Watchlist\", items: [\"DD3BB1\"] }, // TESLA\n    { type: \"company\" },\n  )\n  const communityWl = generateWatchlist(\n    {\n      name: \"Community Watchlist that makes the difference\",\n      items: [\"228D42\"], // Microsoft\n      description: \"This is the global description of the Microsoft Wl that differs\",\n    },\n    { type: \"community\" },\n  )\n  const thematicWl = generateWatchlist(\n    {\n      name: \"Thematic Watchlist that makes the difference\",\n      items: [\"E09E2B\"], // NVIDIA\n      description: \"This is the global description of the Nvidia Wl that differs\",\n    },\n    { type: \"thematic\" },\n  )\n  const publicWl = generateWatchlist(\n    {\n      id: \"public-id\",\n      name: \"Public Watchlist\",\n      items: [\"8C995A\"], // YouTube\n      description: \"This is the public description of the YouTube Wl that differs\",\n    },\n    { type: \"public\" },\n  )\n  emptyDbDefaultData.watchlists.push(wl, sharedWl, communityWl, thematicWl, publicWl)\n\n  const brief = generateBrief({ briefName: \"Personal Brief\", watchlistIds: [wl.id] })\n  emptyDbDefaultData.briefs.push(brief)\n\n  const file = generateFile({\n    name: \"Personal File\",\n    content:\n      \"The The Associated Press Co. is talking with Twitter Inc. about a potential acquisition.\\nThe deal could be worth more than $10 billion, according to sources familiar with the matter.\\nThe Associated Press Co. is a leading news organization that provides news content to various media outlets worldwide.\\nTwitter Inc. is a social media platform that allows users to post and interact with messages known as tweets.\",\n    cqsItems: emptyDbDefaultData.cqs,\n  })\n\n  const shared = generateFile({\n    name: \"Shared File\",\n    content: \"Hello Twitter Inc.!\",\n    cqsItems: emptyDbDefaultData.cqs,\n    owner: false,\n    sharedWith: [userOwner.organization.id],\n  })\n\n  emptyDbDefaultData.files.push(file, shared)\n\n  const key = generateApiKey(\"My initial API Key\")\n  const date = new Date()\n  date.setDate(date.getDate() - 1) // Set last used to 1 day ago\n  emptyDbDefaultData.apiKeys.push({\n    ...key,\n    api_key: \"123e4567-e89b-12d3-a456-426614174000\",\n    stub: \"stub...key\",\n    date_created: date.toISOString(),\n    last_updated: date.toISOString(),\n    last_used: date.toISOString(),\n  })\n\n  return emptyDbDefaultData\n}\n\nexport type EmptyDbDefaultData = ReturnType<typeof newEmptyDb>\nexport { newEmptyDb }\n"],"names":["newEmptyDb","emptyDbDefaultData","queries","Array","watchlists","chats","autosuggest","cqs","files","briefs","apiKeys","content","customDataViews","push","autosuggestVespaItems","map","item","entityType","queryType","metadata1","ticker","wl","generateWatchlist","name","items","sharedWl","type","communityWl","description","thematicWl","publicWl","id","brief","generateBrief","briefName","watchlistIds","file","generateFile","cqsItems","shared","owner","sharedWith","userOwner","organization","key","generateApiKey","date","Date","setDate","getDate","api_key","stub","date_created","toISOString","last_updated","last_used"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA8GSA;;;eAAAA;;;uCA3G6B;4BAUsB;gCAC7B;gCACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAE7B,MAAMA,aAAa;IACjB,MAAMC,qBAAqB;QACzBC,SAAS,IAAIC;QACbC,YAAY,IAAID;QAChBE,OAAO,IAAIF;QACXG,aAAa,IAAIH;QACjBI,KAAK,IAAIJ;QACTK,OAAO,IAAIL;QACXM,QAAQ,IAAIN;QACZO,SAAS,IAAIP;QACbQ,SAAS,IAAIR;QACbS,iBAAiB,IAAIT;IACvB;IAEA,qBAAqB;IACrBF,mBAAmBK,WAAW,CAACO,IAAI,IAAIC,4CAAqB;IAC5Db,mBAAmBM,GAAG,CAACM,IAAI,IACtBC,4CAAqB,CAACC,GAAG,CAACC,CAAAA;YAEfA,kBACDA,iBACAA;eAJyB,wCACjCA;YACHC,YAAYD,CAAAA,mBAAAA,KAAKC,UAAU,cAAfD,8BAAAA,mBAAmB;YAC/BE,WAAWF,CAAAA,kBAAAA,KAAKE,SAAS,cAAdF,6BAAAA,kBAAkB;YAC7BG,WAAWH,CAAAA,eAAAA,KAAKI,MAAM,cAAXJ,0BAAAA,eAAe;;IAC5B;IAGF,MAAMK,KAAKC,IAAAA,6BAAiB,EAAC;QAAEC,MAAM;QAAsBC,OAAO;YAAC;SAAS;IAAC,GAAG,QAAQ;;IACxF,MAAMC,WAAWH,IAAAA,6BAAiB,EAChC;QAAEC,MAAM;QAAoBC,OAAO;YAAC;SAAS;IAAC,GAC9C;QAAEE,MAAM;IAAU;IAEpB,MAAMC,cAAcL,IAAAA,6BAAiB,EACnC;QACEC,MAAM;QACNC,OAAO;YAAC;SAAS;QACjBI,aAAa;IACf,GACA;QAAEF,MAAM;IAAY;IAEtB,MAAMG,aAAaP,IAAAA,6BAAiB,EAClC;QACEC,MAAM;QACNC,OAAO;YAAC;SAAS;QACjBI,aAAa;IACf,GACA;QAAEF,MAAM;IAAW;IAErB,MAAMI,WAAWR,IAAAA,6BAAiB,EAChC;QACES,IAAI;QACJR,MAAM;QACNC,OAAO;YAAC;SAAS;QACjBI,aAAa;IACf,GACA;QAAEF,MAAM;IAAS;IAEnBzB,mBAAmBG,UAAU,CAACS,IAAI,CAACQ,IAAII,UAAUE,aAAaE,YAAYC;IAE1E,MAAME,QAAQC,IAAAA,yBAAa,EAAC;QAAEC,WAAW;QAAkBC,cAAc;YAACd,GAAGU,EAAE;SAAC;IAAC;IACjF9B,mBAAmBQ,MAAM,CAACI,IAAI,CAACmB;IAE/B,MAAMI,OAAOC,IAAAA,4BAAY,EAAC;QACxBd,MAAM;QACNZ,SACE;QACF2B,UAAUrC,mBAAmBM,GAAG;IAClC;IAEA,MAAMgC,SAASF,IAAAA,4BAAY,EAAC;QAC1Bd,MAAM;QACNZ,SAAS;QACT2B,UAAUrC,mBAAmBM,GAAG;QAChCiC,OAAO;QACPC,YAAY;YAACC,qBAAS,CAACC,YAAY,CAACZ,EAAE;SAAC;IACzC;IAEA9B,mBAAmBO,KAAK,CAACK,IAAI,CAACuB,MAAMG;IAEpC,MAAMK,MAAMC,IAAAA,8BAAc,EAAC;IAC3B,MAAMC,OAAO,IAAIC;IACjBD,KAAKE,OAAO,CAACF,KAAKG,OAAO,KAAK,GAAG,6BAA6B;;IAC9DhD,mBAAmBS,OAAO,CAACG,IAAI,CAAC,wCAC3B+B;QACHM,SAAS;QACTC,MAAM;QACNC,cAAcN,KAAKO,WAAW;QAC9BC,cAAcR,KAAKO,WAAW;QAC9BE,WAAWT,KAAKO,WAAW;;IAG7B,OAAOpD;AACT"}