{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/composite-components/src/AcceptLegal/LegalModalContents.tsx"],"sourcesContent":["import { useForm } from \"react-hook-form\"\nimport { Link } from \"react-router-dom\"\nimport { z } from \"zod\"\nimport { zodResolver } from \"@hookform/resolvers/zod\"\nimport { useUpdateClerkUnsafeMetadata } from \"@rp/react/common/hooks\"\nimport { useModal } from \"@rp/react/web/common/providers\"\nimport {\n  Box,\n  Button,\n  Checkbox,\n  FormControl,\n  FormControlLabel,\n  Stack,\n  Typography,\n} from \"@rp/react/web/mui/core\"\nimport { PRIVACY_POLICIES_ROUTE, TERMS_OF_USE_ROUTE } from \"@rp/react/web/router\"\n\nconst LegalModalContents = ({\n  marketingAccepted,\n  termsAccepted,\n}: {\n  marketingAccepted: boolean | undefined\n  termsAccepted: boolean | undefined\n}) => {\n  const { mutateAsync: updateMetadata } = useUpdateClerkUnsafeMetadata()\n\n  const {\n    legalModal: { handleClose },\n  } = useModal()\n\n  const FormSchema = z.object({\n    terms: z.literal<boolean>(true),\n    marketingAccepted: z.boolean().optional(),\n  })\n\n  type FormValues = z.infer<typeof FormSchema>\n\n  const { register, watch } = useForm<FormValues>({\n    resolver: zodResolver(FormSchema),\n    mode: \"all\",\n    defaultValues: {\n      terms: Boolean(termsAccepted),\n      marketingAccepted: Boolean(marketingAccepted),\n    },\n  })\n\n  const termsWatch = watch(\"terms\")\n  const marketingAcceptedWatch = watch(\"marketingAccepted\")\n\n  const handleAccpeted = async () => {\n    await updateMetadata({\n      marketingAccepted: marketingAcceptedWatch ? marketingAcceptedWatch : false,\n      legalAcceptedAt: `${Date.now()}`,\n    })\n    handleClose()\n  }\n  return (\n    <Stack sx={{ m: 4, width: \"410px\", height: \"320px\" }}>\n      <Stack sx={{ alignItems: \"center\" }}>\n        <Typography variant=\"h5\" sx={{ mb: 2, fontWeight: 600 }}>\n          Welcome to Bigdata.com\n        </Typography>\n        <Typography sx={{ mb: 2, fontSize: 16, color: \"text.secondary\" }} align=\"center\">\n          Before using Bigdata.com, please review and accept our Terms of Service and Privacy\n          Policy.\n        </Typography>\n      </Stack>\n      <Box sx={{ width: \"100%\", mt: 0.5, mb: 2 }}>\n        <FormControl required>\n          <FormControlLabel\n            control={<Checkbox {...register(\"terms\")} defaultChecked={Boolean(termsAccepted)} />}\n            label={\n              <Typography color=\"text.secondary\" sx={{ fontSize: 14 }}>\n                I agree to Bigdata's{\" \"}\n                <Link to={TERMS_OF_USE_ROUTE} target=\"_blank\" rel=\"noopener\">\n                  Terms and Conditions\n                </Link>{\" \"}\n                and{\" \"}\n                <Link to={PRIVACY_POLICIES_ROUTE} target=\"_blank\" rel=\"noopener\">\n                  Privacy Policy\n                </Link>\n                .\n              </Typography>\n            }\n          />\n        </FormControl>\n      </Box>\n      <Box sx={{ width: \"100%\", mt: 0.5, mb: 0.5 }}>\n        <FormControl required>\n          <FormControlLabel\n            control={\n              <Checkbox\n                {...register(\"marketingAccepted\")}\n                defaultChecked={Boolean(marketingAccepted)}\n              />\n            }\n            label={\n              <Typography color=\"text.secondary\" sx={{ fontSize: 14 }}>\n                I consent to the processing of my personal data for direct marketing purposes,\n                including receiving promotional communications via email or other digital channels\n                (optional)\n              </Typography>\n            }\n          />\n        </FormControl>\n      </Box>\n      <Box sx={{ width: \"70px\", alignSelf: \"flex-end\", mt: 1 }}>\n        <Button\n          sx={{ mt: 2 }}\n          variant=\"contained\"\n          disabled={termsWatch === undefined || !termsWatch}\n          onClick={() => {\n            handleAccpeted()\n          }}\n        >\n          Accept\n        </Button>\n      </Box>\n    </Stack>\n  )\n}\n\nexport { LegalModalContents }\n"],"names":["LegalModalContents","marketingAccepted","termsAccepted","mutateAsync","updateMetadata","useUpdateClerkUnsafeMetadata","legalModal","handleClose","useModal","FormSchema","z","object","terms","literal","boolean","optional","register","watch","useForm","resolver","zodResolver","mode","defaultValues","Boolean","termsWatch","marketingAcceptedWatch","handleAccpeted","legalAcceptedAt","Date","now","Stack","sx","m","width","height","alignItems","Typography","variant","mb","fontWeight","fontSize","color","align","Box","mt","FormControl","required","FormControlLabel","control","Checkbox","defaultChecked","label","Link","to","TERMS_OF_USE_ROUTE","target","rel","PRIVACY_POLICIES_ROUTE","alignSelf","Button","disabled","undefined","onClick"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA0HSA;;;eAAAA;;;;+BA1He;gCACH;qBACH;sBACU;uBACiB;2BACpB;sBASlB;wBACoD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAE3D,MAAMA,qBAAqB,CAAC,EAC1BC,iBAAiB,EACjBC,aAAa,EAId;IACC,MAAM,EAAEC,aAAaC,cAAc,EAAE,GAAGC,IAAAA,mCAA4B;IAEpE,MAAM,EACJC,YAAY,EAAEC,WAAW,EAAE,EAC5B,GAAGC,IAAAA,mBAAQ;IAEZ,MAAMC,aAAaC,MAAC,CAACC,MAAM,CAAC;QAC1BC,OAAOF,MAAC,CAACG,OAAO,CAAU;QAC1BZ,mBAAmBS,MAAC,CAACI,OAAO,GAAGC,QAAQ;IACzC;IAIA,MAAM,EAAEC,QAAQ,EAAEC,KAAK,EAAE,GAAGC,IAAAA,sBAAO,EAAa;QAC9CC,UAAUC,IAAAA,iBAAW,EAACX;QACtBY,MAAM;QACNC,eAAe;YACbV,OAAOW,QAAQrB;YACfD,mBAAmBsB,QAAQtB;QAC7B;IACF;IAEA,MAAMuB,aAAaP,MAAM;IACzB,MAAMQ,yBAAyBR,MAAM;IAErC,MAAMS,iBAAiB;QACrB,MAAMtB,eAAe;YACnBH,mBAAmBwB,yBAAyBA,yBAAyB;YACrEE,iBAAiB,CAAC,EAAEC,KAAKC,GAAG,GAAG,CAAC;QAClC;QACAtB;IACF;IACA,qBACE,sBAACuB,WAAK;QAACC,IAAI;YAAEC,GAAG;YAAGC,OAAO;YAASC,QAAQ;QAAQ;;0BACjD,sBAACJ,WAAK;gBAACC,IAAI;oBAAEI,YAAY;gBAAS;;kCAChC,qBAACC,gBAAU;wBAACC,SAAQ;wBAAKN,IAAI;4BAAEO,IAAI;4BAAGC,YAAY;wBAAI;kCAAG;;kCAGzD,qBAACH,gBAAU;wBAACL,IAAI;4BAAEO,IAAI;4BAAGE,UAAU;4BAAIC,OAAO;wBAAiB;wBAAGC,OAAM;kCAAS;;;;0BAKnF,qBAACC,SAAG;gBAACZ,IAAI;oBAAEE,OAAO;oBAAQW,IAAI;oBAAKN,IAAI;gBAAE;0BACvC,cAAA,qBAACO,iBAAW;oBAACC,QAAQ;8BACnB,cAAA,qBAACC,sBAAgB;wBACfC,uBAAS,qBAACC,cAAQ,0CAAKjC,SAAS;4BAAUkC,gBAAgB3B,QAAQrB;;wBAClEiD,qBACE,sBAACf,gBAAU;4BAACK,OAAM;4BAAiBV,IAAI;gCAAES,UAAU;4BAAG;;gCAAG;gCAClC;8CACrB,qBAACY,oBAAI;oCAACC,IAAIC,0BAAkB;oCAAEC,QAAO;oCAASC,KAAI;8CAAW;;gCAErD;gCAAI;gCACR;8CACJ,qBAACJ,oBAAI;oCAACC,IAAII,8BAAsB;oCAAEF,QAAO;oCAASC,KAAI;8CAAW;;gCAE1D;;;;;;0BAOjB,qBAACb,SAAG;gBAACZ,IAAI;oBAAEE,OAAO;oBAAQW,IAAI;oBAAKN,IAAI;gBAAI;0BACzC,cAAA,qBAACO,iBAAW;oBAACC,QAAQ;8BACnB,cAAA,qBAACC,sBAAgB;wBACfC,uBACE,qBAACC,cAAQ,0CACHjC,SAAS;4BACbkC,gBAAgB3B,QAAQtB;;wBAG5BkD,qBACE,qBAACf,gBAAU;4BAACK,OAAM;4BAAiBV,IAAI;gCAAES,UAAU;4BAAG;sCAAG;;;;;0BASjE,qBAACG,SAAG;gBAACZ,IAAI;oBAAEE,OAAO;oBAAQyB,WAAW;oBAAYd,IAAI;gBAAE;0BACrD,cAAA,qBAACe,YAAM;oBACL5B,IAAI;wBAAEa,IAAI;oBAAE;oBACZP,SAAQ;oBACRuB,UAAUpC,eAAeqC,aAAa,CAACrC;oBACvCsC,SAAS;wBACPpC;oBACF;8BACD;;;;;AAMT"}