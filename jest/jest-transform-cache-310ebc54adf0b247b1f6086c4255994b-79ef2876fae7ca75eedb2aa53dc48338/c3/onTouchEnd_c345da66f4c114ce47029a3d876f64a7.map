{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/node_modules/swiper/core/events/onTouchEnd.js"],"sourcesContent":["import { now, nextTick } from '../../shared/utils.js';\nexport default function onTouchEnd(event) {\n  const swiper = this;\n  const data = swiper.touchEventsData;\n  const pointerIndex = data.evCache.findIndex(cachedEv => cachedEv.pointerId === event.pointerId);\n  if (pointerIndex >= 0) {\n    data.evCache.splice(pointerIndex, 1);\n  }\n  if (['pointercancel', 'pointerout', 'pointerleave'].includes(event.type)) {\n    const proceed = event.type === 'pointercancel' && (swiper.browser.isSafari || swiper.browser.isWebView);\n    if (!proceed) {\n      return;\n    }\n  }\n  const {\n    params,\n    touches,\n    rtlTranslate: rtl,\n    slidesGrid,\n    enabled\n  } = swiper;\n  if (!enabled) return;\n  if (!params.simulateTouch && event.pointerType === 'mouse') return;\n  let e = event;\n  if (e.originalEvent) e = e.originalEvent;\n  if (data.allowTouchCallbacks) {\n    swiper.emit('touchEnd', e);\n  }\n  data.allowTouchCallbacks = false;\n  if (!data.isTouched) {\n    if (data.isMoved && params.grabCursor) {\n      swiper.setGrabCursor(false);\n    }\n    data.isMoved = false;\n    data.startMoving = false;\n    return;\n  }\n  // Return Grab Cursor\n  if (params.grabCursor && data.isMoved && data.isTouched && (swiper.allowSlideNext === true || swiper.allowSlidePrev === true)) {\n    swiper.setGrabCursor(false);\n  }\n\n  // Time diff\n  const touchEndTime = now();\n  const timeDiff = touchEndTime - data.touchStartTime;\n\n  // Tap, doubleTap, Click\n  if (swiper.allowClick) {\n    const pathTree = e.path || e.composedPath && e.composedPath();\n    swiper.updateClickedSlide(pathTree && pathTree[0] || e.target);\n    swiper.emit('tap click', e);\n    if (timeDiff < 300 && touchEndTime - data.lastClickTime < 300) {\n      swiper.emit('doubleTap doubleClick', e);\n    }\n  }\n  data.lastClickTime = now();\n  nextTick(() => {\n    if (!swiper.destroyed) swiper.allowClick = true;\n  });\n  if (!data.isTouched || !data.isMoved || !swiper.swipeDirection || touches.diff === 0 || data.currentTranslate === data.startTranslate) {\n    data.isTouched = false;\n    data.isMoved = false;\n    data.startMoving = false;\n    return;\n  }\n  data.isTouched = false;\n  data.isMoved = false;\n  data.startMoving = false;\n  let currentPos;\n  if (params.followFinger) {\n    currentPos = rtl ? swiper.translate : -swiper.translate;\n  } else {\n    currentPos = -data.currentTranslate;\n  }\n  if (params.cssMode) {\n    return;\n  }\n  if (params.freeMode && params.freeMode.enabled) {\n    swiper.freeMode.onTouchEnd({\n      currentPos\n    });\n    return;\n  }\n\n  // Find current slide\n  let stopIndex = 0;\n  let groupSize = swiper.slidesSizesGrid[0];\n  for (let i = 0; i < slidesGrid.length; i += i < params.slidesPerGroupSkip ? 1 : params.slidesPerGroup) {\n    const increment = i < params.slidesPerGroupSkip - 1 ? 1 : params.slidesPerGroup;\n    if (typeof slidesGrid[i + increment] !== 'undefined') {\n      if (currentPos >= slidesGrid[i] && currentPos < slidesGrid[i + increment]) {\n        stopIndex = i;\n        groupSize = slidesGrid[i + increment] - slidesGrid[i];\n      }\n    } else if (currentPos >= slidesGrid[i]) {\n      stopIndex = i;\n      groupSize = slidesGrid[slidesGrid.length - 1] - slidesGrid[slidesGrid.length - 2];\n    }\n  }\n  let rewindFirstIndex = null;\n  let rewindLastIndex = null;\n  if (params.rewind) {\n    if (swiper.isBeginning) {\n      rewindLastIndex = params.virtual && params.virtual.enabled && swiper.virtual ? swiper.virtual.slides.length - 1 : swiper.slides.length - 1;\n    } else if (swiper.isEnd) {\n      rewindFirstIndex = 0;\n    }\n  }\n  // Find current slide size\n  const ratio = (currentPos - slidesGrid[stopIndex]) / groupSize;\n  const increment = stopIndex < params.slidesPerGroupSkip - 1 ? 1 : params.slidesPerGroup;\n  if (timeDiff > params.longSwipesMs) {\n    // Long touches\n    if (!params.longSwipes) {\n      swiper.slideTo(swiper.activeIndex);\n      return;\n    }\n    if (swiper.swipeDirection === 'next') {\n      if (ratio >= params.longSwipesRatio) swiper.slideTo(params.rewind && swiper.isEnd ? rewindFirstIndex : stopIndex + increment);else swiper.slideTo(stopIndex);\n    }\n    if (swiper.swipeDirection === 'prev') {\n      if (ratio > 1 - params.longSwipesRatio) {\n        swiper.slideTo(stopIndex + increment);\n      } else if (rewindLastIndex !== null && ratio < 0 && Math.abs(ratio) > params.longSwipesRatio) {\n        swiper.slideTo(rewindLastIndex);\n      } else {\n        swiper.slideTo(stopIndex);\n      }\n    }\n  } else {\n    // Short swipes\n    if (!params.shortSwipes) {\n      swiper.slideTo(swiper.activeIndex);\n      return;\n    }\n    const isNavButtonTarget = swiper.navigation && (e.target === swiper.navigation.nextEl || e.target === swiper.navigation.prevEl);\n    if (!isNavButtonTarget) {\n      if (swiper.swipeDirection === 'next') {\n        swiper.slideTo(rewindFirstIndex !== null ? rewindFirstIndex : stopIndex + increment);\n      }\n      if (swiper.swipeDirection === 'prev') {\n        swiper.slideTo(rewindLastIndex !== null ? rewindLastIndex : stopIndex);\n      }\n    } else if (e.target === swiper.navigation.nextEl) {\n      swiper.slideTo(stopIndex + increment);\n    } else {\n      swiper.slideTo(stopIndex);\n    }\n  }\n}"],"names":["onTouchEnd","event","swiper","data","touchEventsData","pointerIndex","evCache","findIndex","cachedEv","pointerId","splice","includes","type","proceed","browser","isSafari","isWebView","params","touches","rtlTranslate","rtl","slidesGrid","enabled","simulateTouch","pointerType","e","originalEvent","allowTouchCallbacks","emit","isTouched","isMoved","grabCursor","setGrabCursor","startMoving","allowSlideNext","allowSlidePrev","touchEndTime","now","timeDiff","touchStartTime","allowClick","pathTree","path","composedPath","updateClickedSlide","target","lastClickTime","nextTick","destroyed","swipeDirection","diff","currentTranslate","startTranslate","currentPos","followFinger","translate","cssMode","freeMode","stopIndex","groupSize","slidesSizesGrid","i","length","slidesPerGroupSkip","slidesPerGroup","increment","rewindFirstIndex","rewindLastIndex","rewind","isBeginning","virtual","slides","isEnd","ratio","longSwipesMs","longSwipes","slideTo","activeIndex","longSwipesRatio","Math","abs","shortSwipes","isNavButtonTarget","navigation","nextEl","prevEl"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BACA;;;eAAwBA;;;uBADM;AACf,SAASA,WAAWC,KAAK;IACtC,MAAMC,SAAS,IAAI;IACnB,MAAMC,OAAOD,OAAOE,eAAe;IACnC,MAAMC,eAAeF,KAAKG,OAAO,CAACC,SAAS,CAACC,CAAAA,WAAYA,SAASC,SAAS,KAAKR,MAAMQ,SAAS;IAC9F,IAAIJ,gBAAgB,GAAG;QACrBF,KAAKG,OAAO,CAACI,MAAM,CAACL,cAAc;IACpC;IACA,IAAI;QAAC;QAAiB;QAAc;KAAe,CAACM,QAAQ,CAACV,MAAMW,IAAI,GAAG;QACxE,MAAMC,UAAUZ,MAAMW,IAAI,KAAK,mBAAoBV,CAAAA,OAAOY,OAAO,CAACC,QAAQ,IAAIb,OAAOY,OAAO,CAACE,SAAS,AAAD;QACrG,IAAI,CAACH,SAAS;YACZ;QACF;IACF;IACA,MAAM,EACJI,MAAM,EACNC,OAAO,EACPC,cAAcC,GAAG,EACjBC,UAAU,EACVC,OAAO,EACR,GAAGpB;IACJ,IAAI,CAACoB,SAAS;IACd,IAAI,CAACL,OAAOM,aAAa,IAAItB,MAAMuB,WAAW,KAAK,SAAS;IAC5D,IAAIC,IAAIxB;IACR,IAAIwB,EAAEC,aAAa,EAAED,IAAIA,EAAEC,aAAa;IACxC,IAAIvB,KAAKwB,mBAAmB,EAAE;QAC5BzB,OAAO0B,IAAI,CAAC,YAAYH;IAC1B;IACAtB,KAAKwB,mBAAmB,GAAG;IAC3B,IAAI,CAACxB,KAAK0B,SAAS,EAAE;QACnB,IAAI1B,KAAK2B,OAAO,IAAIb,OAAOc,UAAU,EAAE;YACrC7B,OAAO8B,aAAa,CAAC;QACvB;QACA7B,KAAK2B,OAAO,GAAG;QACf3B,KAAK8B,WAAW,GAAG;QACnB;IACF;IACA,qBAAqB;IACrB,IAAIhB,OAAOc,UAAU,IAAI5B,KAAK2B,OAAO,IAAI3B,KAAK0B,SAAS,IAAK3B,CAAAA,OAAOgC,cAAc,KAAK,QAAQhC,OAAOiC,cAAc,KAAK,IAAG,GAAI;QAC7HjC,OAAO8B,aAAa,CAAC;IACvB;IAEA,YAAY;IACZ,MAAMI,eAAeC,IAAAA,UAAG;IACxB,MAAMC,WAAWF,eAAejC,KAAKoC,cAAc;IAEnD,wBAAwB;IACxB,IAAIrC,OAAOsC,UAAU,EAAE;QACrB,MAAMC,WAAWhB,EAAEiB,IAAI,IAAIjB,EAAEkB,YAAY,IAAIlB,EAAEkB,YAAY;QAC3DzC,OAAO0C,kBAAkB,CAACH,YAAYA,QAAQ,CAAC,EAAE,IAAIhB,EAAEoB,MAAM;QAC7D3C,OAAO0B,IAAI,CAAC,aAAaH;QACzB,IAAIa,WAAW,OAAOF,eAAejC,KAAK2C,aAAa,GAAG,KAAK;YAC7D5C,OAAO0B,IAAI,CAAC,yBAAyBH;QACvC;IACF;IACAtB,KAAK2C,aAAa,GAAGT,IAAAA,UAAG;IACxBU,IAAAA,eAAQ,EAAC;QACP,IAAI,CAAC7C,OAAO8C,SAAS,EAAE9C,OAAOsC,UAAU,GAAG;IAC7C;IACA,IAAI,CAACrC,KAAK0B,SAAS,IAAI,CAAC1B,KAAK2B,OAAO,IAAI,CAAC5B,OAAO+C,cAAc,IAAI/B,QAAQgC,IAAI,KAAK,KAAK/C,KAAKgD,gBAAgB,KAAKhD,KAAKiD,cAAc,EAAE;QACrIjD,KAAK0B,SAAS,GAAG;QACjB1B,KAAK2B,OAAO,GAAG;QACf3B,KAAK8B,WAAW,GAAG;QACnB;IACF;IACA9B,KAAK0B,SAAS,GAAG;IACjB1B,KAAK2B,OAAO,GAAG;IACf3B,KAAK8B,WAAW,GAAG;IACnB,IAAIoB;IACJ,IAAIpC,OAAOqC,YAAY,EAAE;QACvBD,aAAajC,MAAMlB,OAAOqD,SAAS,GAAG,CAACrD,OAAOqD,SAAS;IACzD,OAAO;QACLF,aAAa,CAAClD,KAAKgD,gBAAgB;IACrC;IACA,IAAIlC,OAAOuC,OAAO,EAAE;QAClB;IACF;IACA,IAAIvC,OAAOwC,QAAQ,IAAIxC,OAAOwC,QAAQ,CAACnC,OAAO,EAAE;QAC9CpB,OAAOuD,QAAQ,CAACzD,UAAU,CAAC;YACzBqD;QACF;QACA;IACF;IAEA,qBAAqB;IACrB,IAAIK,YAAY;IAChB,IAAIC,YAAYzD,OAAO0D,eAAe,CAAC,EAAE;IACzC,IAAK,IAAIC,IAAI,GAAGA,IAAIxC,WAAWyC,MAAM,EAAED,KAAKA,IAAI5C,OAAO8C,kBAAkB,GAAG,IAAI9C,OAAO+C,cAAc,CAAE;QACrG,MAAMC,YAAYJ,IAAI5C,OAAO8C,kBAAkB,GAAG,IAAI,IAAI9C,OAAO+C,cAAc;QAC/E,IAAI,OAAO3C,UAAU,CAACwC,IAAII,UAAU,KAAK,aAAa;YACpD,IAAIZ,cAAchC,UAAU,CAACwC,EAAE,IAAIR,aAAahC,UAAU,CAACwC,IAAII,UAAU,EAAE;gBACzEP,YAAYG;gBACZF,YAAYtC,UAAU,CAACwC,IAAII,UAAU,GAAG5C,UAAU,CAACwC,EAAE;YACvD;QACF,OAAO,IAAIR,cAAchC,UAAU,CAACwC,EAAE,EAAE;YACtCH,YAAYG;YACZF,YAAYtC,UAAU,CAACA,WAAWyC,MAAM,GAAG,EAAE,GAAGzC,UAAU,CAACA,WAAWyC,MAAM,GAAG,EAAE;QACnF;IACF;IACA,IAAII,mBAAmB;IACvB,IAAIC,kBAAkB;IACtB,IAAIlD,OAAOmD,MAAM,EAAE;QACjB,IAAIlE,OAAOmE,WAAW,EAAE;YACtBF,kBAAkBlD,OAAOqD,OAAO,IAAIrD,OAAOqD,OAAO,CAAChD,OAAO,IAAIpB,OAAOoE,OAAO,GAAGpE,OAAOoE,OAAO,CAACC,MAAM,CAACT,MAAM,GAAG,IAAI5D,OAAOqE,MAAM,CAACT,MAAM,GAAG;QAC3I,OAAO,IAAI5D,OAAOsE,KAAK,EAAE;YACvBN,mBAAmB;QACrB;IACF;IACA,0BAA0B;IAC1B,MAAMO,QAAQ,AAACpB,CAAAA,aAAahC,UAAU,CAACqC,UAAU,AAAD,IAAKC;IACrD,MAAMM,YAAYP,YAAYzC,OAAO8C,kBAAkB,GAAG,IAAI,IAAI9C,OAAO+C,cAAc;IACvF,IAAI1B,WAAWrB,OAAOyD,YAAY,EAAE;QAClC,eAAe;QACf,IAAI,CAACzD,OAAO0D,UAAU,EAAE;YACtBzE,OAAO0E,OAAO,CAAC1E,OAAO2E,WAAW;YACjC;QACF;QACA,IAAI3E,OAAO+C,cAAc,KAAK,QAAQ;YACpC,IAAIwB,SAASxD,OAAO6D,eAAe,EAAE5E,OAAO0E,OAAO,CAAC3D,OAAOmD,MAAM,IAAIlE,OAAOsE,KAAK,GAAGN,mBAAmBR,YAAYO;iBAAgB/D,OAAO0E,OAAO,CAAClB;QACpJ;QACA,IAAIxD,OAAO+C,cAAc,KAAK,QAAQ;YACpC,IAAIwB,QAAQ,IAAIxD,OAAO6D,eAAe,EAAE;gBACtC5E,OAAO0E,OAAO,CAAClB,YAAYO;YAC7B,OAAO,IAAIE,oBAAoB,QAAQM,QAAQ,KAAKM,KAAKC,GAAG,CAACP,SAASxD,OAAO6D,eAAe,EAAE;gBAC5F5E,OAAO0E,OAAO,CAACT;YACjB,OAAO;gBACLjE,OAAO0E,OAAO,CAAClB;YACjB;QACF;IACF,OAAO;QACL,eAAe;QACf,IAAI,CAACzC,OAAOgE,WAAW,EAAE;YACvB/E,OAAO0E,OAAO,CAAC1E,OAAO2E,WAAW;YACjC;QACF;QACA,MAAMK,oBAAoBhF,OAAOiF,UAAU,IAAK1D,CAAAA,EAAEoB,MAAM,KAAK3C,OAAOiF,UAAU,CAACC,MAAM,IAAI3D,EAAEoB,MAAM,KAAK3C,OAAOiF,UAAU,CAACE,MAAM,AAAD;QAC7H,IAAI,CAACH,mBAAmB;YACtB,IAAIhF,OAAO+C,cAAc,KAAK,QAAQ;gBACpC/C,OAAO0E,OAAO,CAACV,qBAAqB,OAAOA,mBAAmBR,YAAYO;YAC5E;YACA,IAAI/D,OAAO+C,cAAc,KAAK,QAAQ;gBACpC/C,OAAO0E,OAAO,CAACT,oBAAoB,OAAOA,kBAAkBT;YAC9D;QACF,OAAO,IAAIjC,EAAEoB,MAAM,KAAK3C,OAAOiF,UAAU,CAACC,MAAM,EAAE;YAChDlF,OAAO0E,OAAO,CAAClB,YAAYO;QAC7B,OAAO;YACL/D,OAAO0E,OAAO,CAAClB;QACjB;IACF;AACF"}