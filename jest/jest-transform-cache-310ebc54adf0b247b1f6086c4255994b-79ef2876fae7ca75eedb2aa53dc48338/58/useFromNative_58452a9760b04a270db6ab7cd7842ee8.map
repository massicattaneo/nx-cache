{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/hooks/src/useFromNative.ts"],"sourcesContent":["import { useSearchParams } from \"react-router-dom\"\nimport { environment } from \"@rp/common/environment\"\n\nconst SEARCH_MEDIUM = \"utm_medium\"\n\nconst useFromNative = () => {\n  const [searchParams] = useSearchParams()\n\n  const setFromNative = (email?: string) => {\n    const fromNativeIOS = searchParams.get(SEARCH_MEDIUM) === \"ios\"\n    const fromNativeAndroid = searchParams.get(SEARCH_MEDIUM) === \"android\"\n\n    if (fromNativeAndroid || fromNativeIOS) {\n      sessionStorage.setItem(\"nativeDevice\", fromNativeIOS ? \"ios\" : \"android\")\n    }\n    if (email) {\n      sessionStorage.setItem(\"email\", email)\n    }\n  }\n\n  const isFromNative = !!sessionStorage.getItem(\"nativeDevice\")\n\n  const getPathFromNative = (path: string): string | undefined => {\n    const nativeDevice = sessionStorage.getItem(\"nativeDevice\")\n    const email = sessionStorage.getItem(\"email\")\n\n    if (!nativeDevice) {\n      return\n    }\n\n    const { iosId, androidId } = environment.nativeApp\n    const protocol = nativeDevice === \"ios\" ? iosId : androidId\n\n    const searchParams = new URLSearchParams()\n\n    if (email) {\n      searchParams.set(\"email\", email)\n    }\n\n    const paramString = searchParams.size > 0 ? `?${searchParams.toString()}` : \"\"\n\n    return `${protocol}://${path}${paramString}`\n  }\n\n  return { setFromNative, getPathFromNative, isFromNative }\n}\n\nexport { useFromNative }\n"],"names":["useFromNative","SEARCH_MEDIUM","searchParams","useSearchParams","setFromNative","email","fromNativeIOS","get","fromNativeAndroid","sessionStorage","setItem","isFromNative","getItem","getPathFromNative","path","nativeDevice","iosId","androidId","environment","nativeApp","protocol","URLSearchParams","set","paramString","size","toString"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA+CSA;;;eAAAA;;;gCA/CuB;6BACJ;AAE5B,MAAMC,gBAAgB;AAEtB,MAAMD,gBAAgB;IACpB,MAAM,CAACE,aAAa,GAAGC,IAAAA,+BAAe;IAEtC,MAAMC,gBAAgB,CAACC;QACrB,MAAMC,gBAAgBJ,aAAaK,GAAG,CAACN,mBAAmB;QAC1D,MAAMO,oBAAoBN,aAAaK,GAAG,CAACN,mBAAmB;QAE9D,IAAIO,qBAAqBF,eAAe;YACtCG,eAAeC,OAAO,CAAC,gBAAgBJ,gBAAgB,QAAQ;QACjE;QACA,IAAID,OAAO;YACTI,eAAeC,OAAO,CAAC,SAASL;QAClC;IACF;IAEA,MAAMM,eAAe,CAAC,CAACF,eAAeG,OAAO,CAAC;IAE9C,MAAMC,oBAAoB,CAACC;QACzB,MAAMC,eAAeN,eAAeG,OAAO,CAAC;QAC5C,MAAMP,QAAQI,eAAeG,OAAO,CAAC;QAErC,IAAI,CAACG,cAAc;YACjB;QACF;QAEA,MAAM,EAAEC,KAAK,EAAEC,SAAS,EAAE,GAAGC,wBAAW,CAACC,SAAS;QAClD,MAAMC,WAAWL,iBAAiB,QAAQC,QAAQC;QAElD,MAAMf,eAAe,IAAImB;QAEzB,IAAIhB,OAAO;YACTH,aAAaoB,GAAG,CAAC,SAASjB;QAC5B;QAEA,MAAMkB,cAAcrB,aAAasB,IAAI,GAAG,IAAI,CAAC,CAAC,EAAEtB,aAAauB,QAAQ,GAAG,CAAC,GAAG;QAE5E,OAAO,CAAC,EAAEL,SAAS,GAAG,EAAEN,KAAK,EAAES,YAAY,CAAC;IAC9C;IAEA,OAAO;QAAEnB;QAAeS;QAAmBF;IAAa;AAC1D"}