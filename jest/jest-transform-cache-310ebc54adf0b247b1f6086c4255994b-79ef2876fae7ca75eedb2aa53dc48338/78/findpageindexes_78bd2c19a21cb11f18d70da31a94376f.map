{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/common/rpjson/src/lib/document-enhancer/find-page-indexes.ts"],"sourcesContent":["import { isListBlock, isTableBlock, isTextBlock } from \"@rp/react/rpjson/types\"\nimport { ContentBlock, NormalizedCoordinates } from \"@rp/react/rpjson/types\"\nimport { DocumentEnhancerOptions } from \"@rp/react/rpjson/types\"\n\nconst findPageIndexes = (\n  block: ContentBlock,\n  options: DocumentEnhancerOptions = { includeCrossPagination: false, pagination: false },\n  accumulator: Array<number> = [],\n) => {\n  if (!options.pagination) return [0]\n  if (isTextBlock(block)) {\n    const item: Array<NormalizedCoordinates> = block.normalized_coordinates || []\n    accumulator.push(...item.map(page => page.page))\n  } else if (isTableBlock(block)) {\n    block.rows.forEach(row => {\n      row.cells.forEach(cell => {\n        cell.content?.forEach(content => {\n          findPageIndexes(content, options, accumulator)\n        })\n      })\n    })\n  } else if (isListBlock(block)) {\n    block.entries.forEach(entry => {\n      entry.content?.forEach(content => {\n        findPageIndexes(content, options, accumulator)\n      })\n    })\n  }\n  const filteredArray = accumulator.filter((page, index, pages) => pages.indexOf(page) === index)\n  if (filteredArray.length === 0) return [1]\n  if (!options.includeCrossPagination) return [filteredArray[0]]\n  return filteredArray\n}\n\nexport { findPageIndexes }\n"],"names":["findPageIndexes","block","options","includeCrossPagination","pagination","accumulator","isTextBlock","item","normalized_coordinates","push","map","page","isTableBlock","rows","forEach","row","cells","cell","content","isListBlock","entries","entry","filteredArray","filter","index","pages","indexOf","length"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAkCSA;;;eAAAA;;;uBAlC8C;AAIvD,MAAMA,kBAAkB,CACtBC,OACAC,UAAmC;IAAEC,wBAAwB;IAAOC,YAAY;AAAM,CAAC,EACvFC,cAA6B,EAAE;IAE/B,IAAI,CAACH,QAAQE,UAAU,EAAE,OAAO;QAAC;KAAE;IACnC,IAAIE,IAAAA,kBAAW,EAACL,QAAQ;QACtB,MAAMM,OAAqCN,MAAMO,sBAAsB,IAAI,EAAE;QAC7EH,YAAYI,IAAI,IAAIF,KAAKG,GAAG,CAACC,CAAAA,OAAQA,KAAKA,IAAI;IAChD,OAAO,IAAIC,IAAAA,mBAAY,EAACX,QAAQ;QAC9BA,MAAMY,IAAI,CAACC,OAAO,CAACC,CAAAA;YACjBA,IAAIC,KAAK,CAACF,OAAO,CAACG,CAAAA;oBAChBA;iBAAAA,gBAAAA,KAAKC,OAAO,cAAZD,oCAAAA,cAAcH,OAAO,CAACI,CAAAA;oBACpBlB,gBAAgBkB,SAAShB,SAASG;gBACpC;YACF;QACF;IACF,OAAO,IAAIc,IAAAA,kBAAW,EAAClB,QAAQ;QAC7BA,MAAMmB,OAAO,CAACN,OAAO,CAACO,CAAAA;gBACpBA;aAAAA,iBAAAA,MAAMH,OAAO,cAAbG,qCAAAA,eAAeP,OAAO,CAACI,CAAAA;gBACrBlB,gBAAgBkB,SAAShB,SAASG;YACpC;QACF;IACF;IACA,MAAMiB,gBAAgBjB,YAAYkB,MAAM,CAAC,CAACZ,MAAMa,OAAOC,QAAUA,MAAMC,OAAO,CAACf,UAAUa;IACzF,IAAIF,cAAcK,MAAM,KAAK,GAAG,OAAO;QAAC;KAAE;IAC1C,IAAI,CAACzB,QAAQC,sBAAsB,EAAE,OAAO;QAACmB,aAAa,CAAC,EAAE;KAAC;IAC9D,OAAOA;AACT"}