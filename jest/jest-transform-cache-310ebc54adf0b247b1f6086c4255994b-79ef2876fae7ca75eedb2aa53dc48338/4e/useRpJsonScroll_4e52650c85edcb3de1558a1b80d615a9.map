{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/rpjson/src/lib/hooks/useRpJsonScroll.tsx"],"sourcesContent":["import { RefObject, useCallback, useRef } from \"react\"\nimport { CLASS_NAMES, SCROLLER_ROOT_CLASSNAME } from \"../constants\"\n\nconst getOffset = (el: HTMLDivElement, scrollBody: boolean, previous = 0): number => {\n  if (scrollBody) {\n    return el.offsetTop\n  }\n\n  if (!el) return previous\n  if (el.className === SCROLLER_ROOT_CLASSNAME) return previous\n  return getOffset(el.offsetParent as HTMLDivElement, scrollBody, el.offsetTop + previous)\n}\n\nconst scrollToParagraph = (\n  ref: RefObject<HTMLDivElement | null>,\n  offset: number,\n  paragraphIndex: number,\n  scrollBody: boolean,\n) => {\n  if (!ref.current) return\n  const item = ref.current.querySelector(\n    `.${CLASS_NAMES.PARAGRAPH_NUMBER_PREFIX}${paragraphIndex}`,\n  ) as HTMLDivElement\n\n  if (!item) return\n\n  const top = getOffset(item, scrollBody)\n  scrollBody\n    ? window.scroll({ top: top + offset, behavior: \"smooth\" })\n    : ref.current.scroll({ top: top + offset, behavior: \"smooth\" })\n}\n\nconst scrollToSentence = (\n  ref: RefObject<HTMLDivElement | null>,\n  offset: number,\n  paragraphIndex: number,\n  sentenceIndex: number,\n  scrollBody: boolean,\n) => {\n  if (!ref.current) return\n  const item = ref.current.querySelector(\n    `.${CLASS_NAMES.ID_PREFIX}${CLASS_NAMES.SENTENCE_NUMBER_PREFIX}${paragraphIndex}-${sentenceIndex}`,\n  ) as HTMLDivElement\n\n  if (!item) return\n\n  const top = getOffset(item, scrollBody)\n  scrollBody\n    ? window.scroll({ top: top + offset, behavior: \"smooth\" })\n    : ref.current.scroll({ top: top + offset, behavior: \"smooth\" })\n}\n\nconst scrollToFind = (\n  ref: RefObject<HTMLDivElement | null>,\n  offset: number,\n  findIndex: number,\n  findCount: number,\n  scrollBody: boolean,\n) => {\n  if (!ref.current) return\n  const item = ref.current.querySelector(\n    `.${CLASS_NAMES.ID_PREFIX}${CLASS_NAMES.FIND_PREFIX}${findIndex}-${findCount}`,\n  ) as HTMLDivElement\n\n  if (!item) return\n\n  const top = getOffset(item, scrollBody)\n  scrollBody\n    ? window.scroll({ top: top + offset, behavior: \"smooth\" })\n    : ref.current.scroll({ top: top + offset, behavior: \"smooth\" })\n}\n\nexport const useRpjsonScroll = ({\n  offset = 0,\n  scrollBody = false,\n}: { offset?: number; scrollBody?: boolean } = {}) => {\n  const ref = useRef<HTMLDivElement>(null)\n  return {\n    ref,\n    scrollToSentence: useCallback(\n      (paragraphIndex: number, sentenceIndex: number) =>\n        scrollToSentence(ref, offset, paragraphIndex, sentenceIndex, scrollBody),\n      [offset, scrollBody],\n    ),\n    scrollToParagraph: useCallback(\n      (paragraphIndex: number) => scrollToParagraph(ref, offset, paragraphIndex, scrollBody),\n      [offset, scrollBody],\n    ),\n    scrollToFind: useCallback(\n      (index: number, count: number) => scrollToFind(ref, offset, index, count, scrollBody),\n      [offset, scrollBody],\n    ),\n  }\n}\n"],"names":["useRpjsonScroll","getOffset","el","scrollBody","previous","offsetTop","className","SCROLLER_ROOT_CLASSNAME","offsetParent","scrollToParagraph","ref","offset","paragraphIndex","current","item","querySelector","CLASS_NAMES","PARAGRAPH_NUMBER_PREFIX","top","window","scroll","behavior","scrollToSentence","sentenceIndex","ID_PREFIX","SENTENCE_NUMBER_PREFIX","scrollToFind","findIndex","findCount","FIND_PREFIX","useRef","useCallback","index","count"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAwEaA;;;eAAAA;;;uBAxEkC;2BACM;AAErD,MAAMC,YAAY,CAACC,IAAoBC,YAAqBC,WAAW,CAAC;IACtE,IAAID,YAAY;QACd,OAAOD,GAAGG,SAAS;IACrB;IAEA,IAAI,CAACH,IAAI,OAAOE;IAChB,IAAIF,GAAGI,SAAS,KAAKC,kCAAuB,EAAE,OAAOH;IACrD,OAAOH,UAAUC,GAAGM,YAAY,EAAoBL,YAAYD,GAAGG,SAAS,GAAGD;AACjF;AAEA,MAAMK,oBAAoB,CACxBC,KACAC,QACAC,gBACAT;IAEA,IAAI,CAACO,IAAIG,OAAO,EAAE;IAClB,MAAMC,OAAOJ,IAAIG,OAAO,CAACE,aAAa,CACpC,CAAC,CAAC,EAAEC,sBAAW,CAACC,uBAAuB,CAAC,EAAEL,eAAe,CAAC;IAG5D,IAAI,CAACE,MAAM;IAEX,MAAMI,MAAMjB,UAAUa,MAAMX;IAC5BA,aACIgB,OAAOC,MAAM,CAAC;QAAEF,KAAKA,MAAMP;QAAQU,UAAU;IAAS,KACtDX,IAAIG,OAAO,CAACO,MAAM,CAAC;QAAEF,KAAKA,MAAMP;QAAQU,UAAU;IAAS;AACjE;AAEA,MAAMC,mBAAmB,CACvBZ,KACAC,QACAC,gBACAW,eACApB;IAEA,IAAI,CAACO,IAAIG,OAAO,EAAE;IAClB,MAAMC,OAAOJ,IAAIG,OAAO,CAACE,aAAa,CACpC,CAAC,CAAC,EAAEC,sBAAW,CAACQ,SAAS,CAAC,EAAER,sBAAW,CAACS,sBAAsB,CAAC,EAAEb,eAAe,CAAC,EAAEW,cAAc,CAAC;IAGpG,IAAI,CAACT,MAAM;IAEX,MAAMI,MAAMjB,UAAUa,MAAMX;IAC5BA,aACIgB,OAAOC,MAAM,CAAC;QAAEF,KAAKA,MAAMP;QAAQU,UAAU;IAAS,KACtDX,IAAIG,OAAO,CAACO,MAAM,CAAC;QAAEF,KAAKA,MAAMP;QAAQU,UAAU;IAAS;AACjE;AAEA,MAAMK,eAAe,CACnBhB,KACAC,QACAgB,WACAC,WACAzB;IAEA,IAAI,CAACO,IAAIG,OAAO,EAAE;IAClB,MAAMC,OAAOJ,IAAIG,OAAO,CAACE,aAAa,CACpC,CAAC,CAAC,EAAEC,sBAAW,CAACQ,SAAS,CAAC,EAAER,sBAAW,CAACa,WAAW,CAAC,EAAEF,UAAU,CAAC,EAAEC,UAAU,CAAC;IAGhF,IAAI,CAACd,MAAM;IAEX,MAAMI,MAAMjB,UAAUa,MAAMX;IAC5BA,aACIgB,OAAOC,MAAM,CAAC;QAAEF,KAAKA,MAAMP;QAAQU,UAAU;IAAS,KACtDX,IAAIG,OAAO,CAACO,MAAM,CAAC;QAAEF,KAAKA,MAAMP;QAAQU,UAAU;IAAS;AACjE;AAEO,MAAMrB,kBAAkB,CAAC,EAC9BW,SAAS,CAAC,EACVR,aAAa,KAAK,EACwB,GAAG,CAAC,CAAC;IAC/C,MAAMO,MAAMoB,IAAAA,aAAM,EAAiB;IACnC,OAAO;QACLpB;QACAY,kBAAkBS,IAAAA,kBAAW,EAC3B,CAACnB,gBAAwBW,gBACvBD,iBAAiBZ,KAAKC,QAAQC,gBAAgBW,eAAepB,aAC/D;YAACQ;YAAQR;SAAW;QAEtBM,mBAAmBsB,IAAAA,kBAAW,EAC5B,CAACnB,iBAA2BH,kBAAkBC,KAAKC,QAAQC,gBAAgBT,aAC3E;YAACQ;YAAQR;SAAW;QAEtBuB,cAAcK,IAAAA,kBAAW,EACvB,CAACC,OAAeC,QAAkBP,aAAahB,KAAKC,QAAQqB,OAAOC,OAAO9B,aAC1E;YAACQ;YAAQR;SAAW;IAExB;AACF"}