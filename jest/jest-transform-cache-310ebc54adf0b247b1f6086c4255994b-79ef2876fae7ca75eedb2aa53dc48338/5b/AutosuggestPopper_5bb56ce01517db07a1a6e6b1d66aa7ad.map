{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/search-autosuggest-input/src/lib/UnifiedSearch/AutosuggestPopper.tsx"],"sourcesContent":["import { EnhancedSuggestion } from \"@rp/react/tanstack-api/suggestion\"\nimport { AutoAnimateHeight } from \"@rp/react/web/common/composite-components\"\nimport { useDeviceInfo, useDeviceSize } from \"@rp/react/web/common/hooks\"\nimport { DropdownPaper, RecentSearchTitle, StyledPopper, customOption } from \"./AutoCompleteCustoms\"\n\ntype Props = {\n  open: boolean\n  toggleSubsidiaries: (parentId: string) => void\n  searchValue: string\n  options: Array<EnhancedSuggestion>\n  inputRef: HTMLElement | null\n  selectedOption: string | null\n  handleChange: (option: EnhancedSuggestion) => void\n  dropdownTitle?: string\n  backgroundColor?: string\n  hideKeywordsHint?: boolean\n}\nconst MARGIN_BOTTOM = 24\n\nconst calculateMaxHeight = (input: HTMLElement) => {\n  const { bottom } = input.getBoundingClientRect()\n\n  return window.innerHeight - bottom - MARGIN_BOTTOM\n}\n\nconst AutosuggestPopper = ({\n  open,\n  options,\n  dropdownTitle,\n  inputRef,\n  searchValue,\n  toggleSubsidiaries,\n  handleChange,\n  selectedOption,\n  backgroundColor,\n  hideKeywordsHint = false,\n}: Props) => {\n  const { height } = useDeviceSize()\n  const { isMobile } = useDeviceInfo()\n\n  const maxHeight = isMobile\n    ? Math.min(400, height * 0.6)\n    : inputRef === null\n    ? undefined\n    : calculateMaxHeight(inputRef)\n\n  return (\n    <StyledPopper\n      open={open && options.length > 0}\n      deviceHeight={height}\n      anchorEl={inputRef}\n      style={{\n        width: inputRef?.clientWidth,\n        ...(isMobile && {\n          position: \"fixed\",\n          left: 0,\n          right: 0,\n          bottom: 0,\n        }),\n      }}\n      modifiers={[\n        {\n          name: \"computeStyles\",\n          options: {\n            roundOffsets: false,\n          },\n        },\n      ]}\n    >\n      <DropdownPaper\n        role={\"dropdown-suggestions\"}\n        sx={{\n          backgroundColor,\n          maxHeight,\n          height: \"auto\",\n          overflowY: \"auto\",\n        }}\n      >\n        {dropdownTitle ? <RecentSearchTitle>{dropdownTitle}</RecentSearchTitle> : null}\n        <AutoAnimateHeight>\n          <ul\n            className=\"MuiAutocomplete-listbox\"\n            style={{\n              maxHeight: isMobile ? \"100%\" : undefined,\n              overflowY: \"auto\",\n            }}\n          >\n            {options.map(option =>\n              customOption({ searchValue, toggleSubsidiaries, hideKeywordsHint })(\n                {\n                  \"aria-selected\": option.id === selectedOption,\n                  role: \"option\",\n                  onClick: () => handleChange(option),\n                  onMouseDown: e => e.preventDefault(),\n                  id: option.id,\n                },\n                option,\n              ),\n            )}\n          </ul>\n        </AutoAnimateHeight>\n      </DropdownPaper>\n    </StyledPopper>\n  )\n}\n\nexport { AutosuggestPopper }\n"],"names":["AutosuggestPopper","MARGIN_BOTTOM","calculateMaxHeight","input","bottom","getBoundingClientRect","window","innerHeight","open","options","dropdownTitle","inputRef","searchValue","toggleSubsidiaries","handleChange","selectedOption","backgroundColor","hideKeywordsHint","height","useDeviceSize","isMobile","useDeviceInfo","maxHeight","Math","min","undefined","StyledPopper","length","deviceHeight","anchorEl","style","width","clientWidth","position","left","right","modifiers","name","roundOffsets","DropdownPaper","role","sx","overflowY","RecentSearchTitle","AutoAnimateHeight","ul","className","map","option","customOption","id","onClick","onMouseDown","e","preventDefault"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA0GSA;;;eAAAA;;;;qCAzGyB;uBACW;qCACgC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAc7E,MAAMC,gBAAgB;AAEtB,MAAMC,qBAAqB,CAACC;IAC1B,MAAM,EAAEC,MAAM,EAAE,GAAGD,MAAME,qBAAqB;IAE9C,OAAOC,OAAOC,WAAW,GAAGH,SAASH;AACvC;AAEA,MAAMD,oBAAoB,CAAC,EACzBQ,IAAI,EACJC,OAAO,EACPC,aAAa,EACbC,QAAQ,EACRC,WAAW,EACXC,kBAAkB,EAClBC,YAAY,EACZC,cAAc,EACdC,eAAe,EACfC,mBAAmB,KAAK,EAClB;IACN,MAAM,EAAEC,MAAM,EAAE,GAAGC,IAAAA,oBAAa;IAChC,MAAM,EAAEC,QAAQ,EAAE,GAAGC,IAAAA,oBAAa;IAElC,MAAMC,YAAYF,WACdG,KAAKC,GAAG,CAAC,KAAKN,SAAS,OACvBP,aAAa,OACbc,YACAvB,mBAAmBS;IAEvB,qBACE,qBAACe,iCAAY;QACXlB,MAAMA,QAAQC,QAAQkB,MAAM,GAAG;QAC/BC,cAAcV;QACdW,UAAUlB;QACVmB,OAAO;YACLC,KAAK,EAAEpB,qBAAAA,+BAAAA,SAAUqB,WAAW;WACxBZ,YAAY;YACda,UAAU;YACVC,MAAM;YACNC,OAAO;YACP/B,QAAQ;QACV;QAEFgC,WAAW;YACT;gBACEC,MAAM;gBACN5B,SAAS;oBACP6B,cAAc;gBAChB;YACF;SACD;kBAED,cAAA,sBAACC,kCAAa;YACZC,MAAM;YACNC,IAAI;gBACFzB;gBACAM;gBACAJ,QAAQ;gBACRwB,WAAW;YACb;;gBAEChC,8BAAgB,qBAACiC,sCAAiB;8BAAEjC;qBAAqC;8BAC1E,qBAACkC,sCAAiB;8BAChB,cAAA,qBAACC;wBACCC,WAAU;wBACVhB,OAAO;4BACLR,WAAWF,WAAW,SAASK;4BAC/BiB,WAAW;wBACb;kCAECjC,QAAQsC,GAAG,CAACC,CAAAA,SACXC,IAAAA,iCAAY,EAAC;gCAAErC;gCAAaC;gCAAoBI;4BAAiB,GAC/D;gCACE,iBAAiB+B,OAAOE,EAAE,KAAKnC;gCAC/ByB,MAAM;gCACNW,SAAS,IAAMrC,aAAakC;gCAC5BI,aAAaC,CAAAA,IAAKA,EAAEC,cAAc;gCAClCJ,IAAIF,OAAOE,EAAE;4BACf,GACAF;;;;;;AAQhB"}