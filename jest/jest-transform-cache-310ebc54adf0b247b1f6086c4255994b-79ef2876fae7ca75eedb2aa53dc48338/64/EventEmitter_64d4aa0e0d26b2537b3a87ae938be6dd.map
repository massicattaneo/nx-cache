{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/common/utils/src/lib/design-patterns/EventEmitter.ts"],"sourcesContent":["// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype EventMap = Record<string, any>\n\ntype EventKey<T extends EventMap> = string & keyof T\ntype EventReceiver<T> = (params: T) => void\n\nclass EventEmitter<T extends EventMap> {\n  private listeners: {\n    [K in keyof EventMap]?: Array<(p: EventMap[K]) => void>\n  }\n  constructor() {\n    this.listeners = {}\n  }\n  on<K extends EventKey<T>>(eventName: K, fn: EventReceiver<T[K]>) {\n    this.listeners[eventName] = (this.listeners[eventName] || []).concat(fn)\n    return () => this.off(eventName, fn)\n  }\n  off<K extends EventKey<T>>(eventName: K, fn?: EventReceiver<T[K]>) {\n    if (!fn) {\n      this.listeners[eventName] = []\n    }\n    this.listeners[eventName] = (this.listeners[eventName] || []).filter(f => f !== fn)\n    return fn\n  }\n  emit<K extends EventKey<T>>(eventName: K, params: T[K]) {\n    if (!this.listeners[eventName]) return\n    let index = 0\n    while (this.listeners[eventName]?.[index]) {\n      this.listeners[eventName]?.[index]?.(params)\n      index++\n    }\n  }\n}\n\nexport { EventEmitter }\n"],"names":["EventEmitter","on","eventName","fn","listeners","concat","off","filter","f","emit","params","index","constructor"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"AAAA,8DAA8D;;;;;+BAkCrDA;;;eAAAA;;;;;;;;;;;;;;;;AA5BT,MAAMA;IAOJC,GAA0BC,SAAY,EAAEC,EAAuB,EAAE;QAC/D,IAAI,CAACC,SAAS,CAACF,UAAU,GAAG,AAAC,CAAA,IAAI,CAACE,SAAS,CAACF,UAAU,IAAI,EAAE,AAAD,EAAGG,MAAM,CAACF;QACrE,OAAO,IAAM,IAAI,CAACG,GAAG,CAACJ,WAAWC;IACnC;IACAG,IAA2BJ,SAAY,EAAEC,EAAwB,EAAE;QACjE,IAAI,CAACA,IAAI;YACP,IAAI,CAACC,SAAS,CAACF,UAAU,GAAG,EAAE;QAChC;QACA,IAAI,CAACE,SAAS,CAACF,UAAU,GAAG,AAAC,CAAA,IAAI,CAACE,SAAS,CAACF,UAAU,IAAI,EAAE,AAAD,EAAGK,MAAM,CAACC,CAAAA,IAAKA,MAAML;QAChF,OAAOA;IACT;IACAM,KAA4BP,SAAY,EAAEQ,MAAY,EAAE;YAG/C;QAFP,IAAI,CAAC,IAAI,CAACN,SAAS,CAACF,UAAU,EAAE;QAChC,IAAIS,QAAQ;QACZ,OAAO,4BAAA,IAAI,CAACP,SAAS,CAACF,UAAU,cAAzB,gDAAA,yBAA2B,CAACS,MAAM,CAAE;gBACzC,iCAAA;aAAA,6BAAA,IAAI,CAACP,SAAS,CAACF,UAAU,cAAzB,kDAAA,kCAAA,0BAA2B,CAACS,MAAM,cAAlC,sDAAA,qCAAA,4BAAqCD;YACrCC;QACF;IACF;IArBAC,aAAc;QAHd,uBAAQR,aAAR,KAAA;QAIE,IAAI,CAACA,SAAS,GAAG,CAAC;IACpB;AAoBF"}