{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/router/src/lib/FeatureFlagRoute.tsx"],"sourcesContent":["import { useAtom } from \"jotai\"\nimport { atomFamily, atomWithStorage } from \"jotai/utils\"\nimport { Navigate, Outlet } from \"react-router-dom\"\nimport { environment } from \"@rp/common/environment\"\nimport { FeaturesFlags } from \"@rp/common/environment/types\"\n\ntype Props = {\n  featureFlag: FeaturesFlags\n  blockedPage?: string\n}\n\nconst featureFlagsFamily = atomFamily((name: FeaturesFlags) =>\n  atomWithStorage<boolean>(name, environment.flags[name]),\n)\n\nconst useFeatureAtom = (name: FeaturesFlags) => {\n  return useAtom(featureFlagsFamily(name))\n}\n\nconst FeatureFlagRoute = ({ featureFlag, blockedPage = \"/\" }: Props) => {\n  const [isEnabled] = useFeatureAtom(featureFlag)\n\n  return isEnabled ? <Outlet /> : <Navigate to={blockedPage} replace />\n}\n\nexport { FeatureFlagRoute, useFeatureAtom }\n"],"names":["FeatureFlagRoute","useFeatureAtom","featureFlagsFamily","atomFamily","name","atomWithStorage","environment","flags","useAtom","featureFlag","blockedPage","isEnabled","Outlet","Navigate","to","replace"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;IAyBSA,gBAAgB;eAAhBA;;IAAkBC,cAAc;eAAdA;;;;uBAzBH;uBACoB;gCACX;6BACL;AAQ5B,MAAMC,qBAAqBC,IAAAA,iBAAU,EAAC,CAACC,OACrCC,IAAAA,sBAAe,EAAUD,MAAME,wBAAW,CAACC,KAAK,CAACH,KAAK;AAGxD,MAAMH,iBAAiB,CAACG;IACtB,OAAOI,IAAAA,cAAO,EAACN,mBAAmBE;AACpC;AAEA,MAAMJ,mBAAmB,CAAC,EAAES,WAAW,EAAEC,cAAc,GAAG,EAAS;IACjE,MAAM,CAACC,UAAU,GAAGV,eAAeQ;IAEnC,OAAOE,0BAAY,qBAACC,sBAAM,sBAAM,qBAACC,wBAAQ;QAACC,IAAIJ;QAAaK,OAAO;;AACpE"}