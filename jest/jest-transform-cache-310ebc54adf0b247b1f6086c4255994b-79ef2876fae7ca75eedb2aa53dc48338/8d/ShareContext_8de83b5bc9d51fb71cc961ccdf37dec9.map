{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/providers/src/ShareContext/ShareContext.tsx"],"sourcesContent":["import { PropsWithChildren, createContext, useContext, useState } from \"react\"\nimport { INTERNAL_ACTION_QUERY_PARAM, INTERNAL_QUERY_PARAM_ACTIONS } from \"@rp/common/settings\"\n\ntype ModalContextType = {\n  cameFromLinkPathname: string | null\n}\n\nconst ShareContext = createContext<ModalContextType | null>(null)\n\nconst ShareProvider = ({ children }: PropsWithChildren) => {\n  const { search, hash, pathname } = window.location\n  const params = new URLSearchParams(search)\n  const source = params.get(INTERNAL_ACTION_QUERY_PARAM)\n  const cameFromShare = source === INTERNAL_QUERY_PARAM_ACTIONS.SHARE\n  const entryPointPathname = cameFromShare ? pathname : null\n  if (cameFromShare) {\n    params.delete(INTERNAL_ACTION_QUERY_PARAM)\n    const newSearch = params.toString()\n    const newUrl = `${pathname}${newSearch ? `?${newSearch}` : \"\"}${hash}`\n    window.history.replaceState(null, \"\", newUrl)\n  }\n  const [cameFromLinkPathname] = useState<string | null>(entryPointPathname)\n  return <ShareContext.Provider value={{ cameFromLinkPathname }}>{children}</ShareContext.Provider>\n}\n\nconst useShareContext = () => {\n  const context = useContext(ShareContext)\n  if (!context) {\n    throw new Error(\"useShareContext must be used within a ShareProvider\")\n  }\n  return context\n}\n\nexport { ShareProvider, useShareContext }\n"],"names":["ShareProvider","useShareContext","ShareContext","createContext","children","search","hash","pathname","window","location","params","URLSearchParams","source","get","INTERNAL_ACTION_QUERY_PARAM","cameFromShare","INTERNAL_QUERY_PARAM_ACTIONS","SHARE","entryPointPathname","delete","newSearch","toString","newUrl","history","replaceState","cameFromLinkPathname","useState","Provider","value","context","useContext","Error"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;IAiCSA,aAAa;eAAbA;;IAAeC,eAAe;eAAfA;;;;uBAjC+C;0BACG;AAM1E,MAAMC,6BAAeC,IAAAA,oBAAa,EAA0B;AAE5D,MAAMH,gBAAgB,CAAC,EAAEI,QAAQ,EAAqB;IACpD,MAAM,EAAEC,MAAM,EAAEC,IAAI,EAAEC,QAAQ,EAAE,GAAGC,OAAOC,QAAQ;IAClD,MAAMC,SAAS,IAAIC,gBAAgBN;IACnC,MAAMO,SAASF,OAAOG,GAAG,CAACC,qCAA2B;IACrD,MAAMC,gBAAgBH,WAAWI,sCAA4B,CAACC,KAAK;IACnE,MAAMC,qBAAqBH,gBAAgBR,WAAW;IACtD,IAAIQ,eAAe;QACjBL,OAAOS,MAAM,CAACL,qCAA2B;QACzC,MAAMM,YAAYV,OAAOW,QAAQ;QACjC,MAAMC,SAAS,CAAC,EAAEf,SAAS,EAAEa,YAAY,CAAC,CAAC,EAAEA,UAAU,CAAC,GAAG,GAAG,EAAEd,KAAK,CAAC;QACtEE,OAAOe,OAAO,CAACC,YAAY,CAAC,MAAM,IAAIF;IACxC;IACA,MAAM,CAACG,qBAAqB,GAAGC,IAAAA,eAAQ,EAAgBR;IACvD,qBAAO,qBAAChB,aAAayB,QAAQ;QAACC,OAAO;YAAEH;QAAqB;kBAAIrB;;AAClE;AAEA,MAAMH,kBAAkB;IACtB,MAAM4B,UAAUC,IAAAA,iBAAU,EAAC5B;IAC3B,IAAI,CAAC2B,SAAS;QACZ,MAAM,IAAIE,MAAM;IAClB;IACA,OAAOF;AACT"}