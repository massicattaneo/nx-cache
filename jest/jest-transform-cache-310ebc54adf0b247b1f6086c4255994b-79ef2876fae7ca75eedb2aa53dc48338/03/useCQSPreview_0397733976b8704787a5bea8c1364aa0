f382ff5b641a47c42cec95c2986c113f
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    useCQSPreview: function() {
        return useCQSPreview;
    },
    useCurrentCQSPreview: function() {
        return useCurrentCQSPreview;
    },
    useMultipleCQSPreviews: function() {
        return useMultipleCQSPreviews;
    }
});
const _react = require("react");
const _clerkreact = require("@clerk/clerk-react");
const _apitypes = require("@rp/common/api-types");
const _settings = require("@rp/common/settings");
const _utils = require("@rp/common/utils");
const _axiosclient = require("@rp/react/axios-client");
const _userdataqueries = require("@rp/react/tanstack-api/user-data-queries");
const _cqsutils = require("@rp/react/web/cqs-utils");
const _reactquery = require("@tanstack/react-query");
const _QueryContext = require("./QueryContext");
const _useResultsPageState = require("./useResultsPageState");
function _define_property(obj, key, value) {
    if (key in obj) {
        Object.defineProperty(obj, key, {
            value: value,
            enumerable: true,
            configurable: true,
            writable: true
        });
    } else {
        obj[key] = value;
    }
    return obj;
}
function _object_spread(target) {
    for(var i = 1; i < arguments.length; i++){
        var source = arguments[i] != null ? arguments[i] : {};
        var ownKeys = Object.keys(source);
        if (typeof Object.getOwnPropertySymbols === "function") {
            ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {
                return Object.getOwnPropertyDescriptor(source, sym).enumerable;
            }));
        }
        ownKeys.forEach(function(key) {
            _define_property(target, key, source[key]);
        });
    }
    return target;
}
function ownKeys(object, enumerableOnly) {
    var keys = Object.keys(object);
    if (Object.getOwnPropertySymbols) {
        var symbols = Object.getOwnPropertySymbols(object);
        if (enumerableOnly) {
            symbols = symbols.filter(function(sym) {
                return Object.getOwnPropertyDescriptor(object, sym).enumerable;
            });
        }
        keys.push.apply(keys, symbols);
    }
    return keys;
}
function _object_spread_props(target, source) {
    source = source != null ? source : {};
    if (Object.getOwnPropertyDescriptors) {
        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
        ownKeys(Object(source)).forEach(function(key) {
            Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
        });
    }
    return target;
}
function _object_without_properties(source, excluded) {
    if (source == null) return {};
    var target = _object_without_properties_loose(source, excluded);
    var key, i;
    if (Object.getOwnPropertySymbols) {
        var sourceSymbolKeys = Object.getOwnPropertySymbols(source);
        for(i = 0; i < sourceSymbolKeys.length; i++){
            key = sourceSymbolKeys[i];
            if (excluded.indexOf(key) >= 0) continue;
            if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;
            target[key] = source[key];
        }
    }
    return target;
}
function _object_without_properties_loose(source, excluded) {
    if (source == null) return {};
    var target = {};
    var sourceKeys = Object.keys(source);
    var key, i;
    for(i = 0; i < sourceKeys.length; i++){
        key = sourceKeys[i];
        if (excluded.indexOf(key) >= 0) continue;
        target[key] = source[key];
    }
    return target;
}
// Helper functions
const previewKey = (key, search, useClusterApi)=>[
        _settings.QUERY_KEY_FEATURE_FLAG,
        key,
        _object_spread({}, search),
        useClusterApi !== null && useClusterApi !== void 0 ? useClusterApi : false
    ];
// Hook that appends the flags context into the query key function
const useCqsPreviewKey = ()=>{
    return (key, search, useClusterAPI)=>{
        return previewKey(key, search, useClusterAPI);
    };
};
const fetchSearchPreview = async ({ pageParam, queryKey }, onFirstPageFetch, onFirstPageFetched)=>{
    const [, , search, useClusterApi] = queryKey;
    const firstPage = pageParam === 1 || pageParam === undefined;
    const numberOfResults = _settings.DEFAULT_QUERY_LIMIT;
    if (firstPage) {
        onFirstPageFetch();
    }
    if (search === undefined) return;
    const query = _object_spread_props(_object_spread({}, search), {
        pagination: {
            limit: numberOfResults,
            cursor: pageParam
        },
        hybrid: true,
        searchChain: useClusterApi ? "clustering" : undefined
    });
    const { data } = await _axiosclient.axiosClient.post("/cqs/query-chunks", query);
    if (firstPage) onFirstPageFetched(data);
    return data;
};
const getStoriesFromPages = (pages)=>{
    const storiesObject = pages.reduce((acc, page)=>{
        if (!page) {
            return acc;
        }
        // We are checking if the ID is already in. Only different IDs allowed
        const accumulator = _object_spread({}, acc);
        for (const story of page.stories){
            accumulator[story.id] = accumulator[story.id] ? accumulator[story.id] : _object_spread_props(_object_spread({}, story), {
                ts: story.ts.endsWith("Z") ? story.ts : `${story.ts}Z`,
                cluster: (0, _apitypes.isClusterStory)(story) ? story.cluster.map((clusterStory)=>(0, _utils.mapToISOTimestamp)(clusterStory)) : undefined
            });
        }
        return accumulator;
    }, {});
    return Object.values(storiesObject);
};
const useCQSPreview = (search, key, options = {
    enabled: true,
    useClusterApi: true,
    queryOptions: {},
    isFeedRequest: false
})=>{
    var _queryRes_data_pages_, _queryRes_data, _queryRes_data1;
    const getCqsPreviewKey = useCqsPreviewKey();
    const onFirstPageFetch = ()=>{
        if (options.onFirstPageFetch) {
            options.onFirstPageFetch();
        }
    };
    const onFirstPageFetched = (data)=>{
        var _options_onFirstPageFetched;
        (_options_onFirstPageFetched = options.onFirstPageFetched) === null || _options_onFirstPageFetched === void 0 ? void 0 : _options_onFirstPageFetched.call(options, data);
    };
    const queryRes = (0, _reactquery.useInfiniteQuery)(_object_spread_props(_object_spread({
        // eslint-disable-next-line @tanstack/query/exhaustive-deps
        queryKey: getCqsPreviewKey(key, search, options.useClusterApi),
        queryFn: (params)=>{
            return fetchSearchPreview(params, onFirstPageFetch, onFirstPageFetched);
        },
        placeholderData: _reactquery.keepPreviousData,
        staleTime: 0,
        refetchOnWindowFocus: false,
        enabled: options.enabled,
        getNextPageParam: (lastPage)=>lastPage === null || lastPage === void 0 ? void 0 : lastPage.nextCursor
    }, options.queryOptions), {
        initialPageParam: 1
    }));
    const { onError } = options;
    (0, _react.useEffect)(()=>{
        if (queryRes.isError) {
            onError === null || onError === void 0 ? void 0 : onError();
        }
    }, [
        onError,
        queryRes.isError
    ]);
    const rest = queryRes.data ? queryRes.data.pages[0] : {};
    const stories = (0, _react.useMemo)(()=>queryRes.data ? getStoriesFromPages(queryRes.data.pages) : [], [
        queryRes.data
    ]);
    const defaults = {
        coverage: (_queryRes_data = queryRes.data) === null || _queryRes_data === void 0 ? void 0 : (_queryRes_data_pages_ = _queryRes_data.pages[0]) === null || _queryRes_data_pages_ === void 0 ? void 0 : _queryRes_data_pages_.coverage,
        documentCount: 0
    };
    var _queryRes_data_pages_length;
    return _object_spread_props(_object_spread({}, defaults, rest, queryRes), {
        stories,
        numOfPages: (_queryRes_data_pages_length = (_queryRes_data1 = queryRes.data) === null || _queryRes_data1 === void 0 ? void 0 : _queryRes_data1.pages.length) !== null && _queryRes_data_pages_length !== void 0 ? _queryRes_data_pages_length : 0
    });
};
const useMultipleCQSPreviews = (searches, options)=>{
    const getCqsPreviewKey = useCqsPreviewKey();
    const queries = searches.map((search)=>{
        return (0, _reactquery.queryOptions)({
            queryKey: getCqsPreviewKey("cqs-multi", search, options.useClusterAPI),
            queryFn: (params)=>fetchSearchPreview(_object_spread_props(_object_spread({}, params), {
                    pageParam: 1
                }), ()=>{}, ()=>{}),
            placeholderData: (prev)=>prev,
            staleTime: 0,
            refetchOnWindowFocus: false,
            enabled: search !== undefined,
            select: (data)=>{
                if (!data) {
                    return data;
                }
                return _object_spread_props(_object_spread({}, data), {
                    stories: data.stories.map((story)=>_object_spread_props(_object_spread({}, story), {
                            ts: story.ts.endsWith("Z") ? story.ts : `${story.ts}Z`,
                            cluster: (0, _apitypes.isClusterStory)(story) ? story.cluster.map((clusterStory)=>(0, _utils.mapToISOTimestamp)(clusterStory)) : undefined
                        }))
                });
            }
        });
    });
    return (0, _reactquery.useQueries)({
        queries
    });
};
const useCurrentCQSPreview = ()=>{
    const { user } = (0, _clerkreact.useUser)();
    const queryClient = (0, _reactquery.useQueryClient)();
    const { mutateAsync: putLastExecuted } = (0, _userdataqueries.useUpdateLastExecuted)();
    const { searchQuery, savedQuery } = (0, _QueryContext.useQueryContext)();
    const [_, setResultsPageState] = (0, _useResultsPageState.useResultsPageState)();
    const expression = (searchQuery === null || searchQuery === void 0 ? void 0 : searchQuery.expression) && (0, _apitypes.isRpqlLogicalGroup)(searchQuery === null || searchQuery === void 0 ? void 0 : searchQuery.expression) ? searchQuery === null || searchQuery === void 0 ? void 0 : searchQuery.expression.value[0] : undefined;
    const enabled = searchQuery !== undefined && (0, _cqsutils.cqsQueryLooksValid)(_object_spread_props(_object_spread({}, searchQuery), {
        expression
    }));
    const _useCQSPreview = useCQSPreview(searchQuery, "cqs-preview", {
        enabled,
        useClusterApi: true,
        onFirstPageFetched: (data)=>{
            if (savedQuery.ownerUserId === (user === null || user === void 0 ? void 0 : user.id)) {
                putLastExecuted(savedQuery.id);
                queryClient.invalidateQueries({
                    queryKey: [
                        "queries"
                    ]
                });
            }
            setResultsPageState(data.documentCount === 0 ? "empty" : "results");
        },
        onError: ()=>{
            setResultsPageState("empty");
        }
    }), { refetch: queryRefetch } = _useCQSPreview, rest = _object_without_properties(_useCQSPreview, [
        "refetch"
    ]);
    const refetch = (0, _react.useCallback)(()=>{
        setResultsPageState("loading");
        queryRefetch();
    }, [
        queryRefetch,
        setResultsPageState
    ]);
    return _object_spread_props(_object_spread({}, rest), {
        refetch,
        enabled
    });
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tY2F0dGFuZW8vd29ya3NwYWNlL2Zyb250ZW5kL2xpYnMvcmVhY3Qvd2ViL2NvbW1vbi9wcm92aWRlcnMvc3JjL3VzZUNRU1ByZXZpZXcudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiXG5pbXBvcnQgeyB1c2VVc2VyIH0gZnJvbSBcIkBjbGVyay9jbGVyay1yZWFjdFwiXG5pbXBvcnQge1xuICBDcXNDaHVua1N0b3J5LFxuICBDcXNDbHVzdGVyU3VtbWFyeVN0b3J5LFxuICBDcXNRdWVyeUNodW5rc1Bvc3RSZXNwb25zZSxcbiAgQ3FzUXVlcnlDbHVzdGVyc1Bvc3RSZXNwb25zZSxcbiAgQ3FzUXVlcnlQb3N0UmVzcG9uc2UsXG4gIENxc1NlYXJjaFF1ZXJ5LFxuICBDcXNTdG9yeSxcbiAgaXNDbHVzdGVyU3RvcnksXG4gIGlzUnBxbExvZ2ljYWxHcm91cCxcbn0gZnJvbSBcIkBycC9jb21tb24vYXBpLXR5cGVzXCJcbmltcG9ydCB7IERFRkFVTFRfUVVFUllfTElNSVQsIFFVRVJZX0tFWV9GRUFUVVJFX0ZMQUcgfSBmcm9tIFwiQHJwL2NvbW1vbi9zZXR0aW5nc1wiXG5pbXBvcnQgeyBtYXBUb0lTT1RpbWVzdGFtcCB9IGZyb20gXCJAcnAvY29tbW9uL3V0aWxzXCJcbmltcG9ydCB7IGF4aW9zQ2xpZW50IH0gZnJvbSBcIkBycC9yZWFjdC9heGlvcy1jbGllbnRcIlxuaW1wb3J0IHsgdXNlVXBkYXRlTGFzdEV4ZWN1dGVkIH0gZnJvbSBcIkBycC9yZWFjdC90YW5zdGFjay1hcGkvdXNlci1kYXRhLXF1ZXJpZXNcIlxuaW1wb3J0IHsgY3FzUXVlcnlMb29rc1ZhbGlkIH0gZnJvbSBcIkBycC9yZWFjdC93ZWIvY3FzLXV0aWxzXCJcbmltcG9ydCB7XG4gIFF1ZXJ5RnVuY3Rpb25Db250ZXh0LFxuICBrZWVwUHJldmlvdXNEYXRhLFxuICBxdWVyeU9wdGlvbnMsXG4gIHVzZUluZmluaXRlUXVlcnksXG4gIHVzZVF1ZXJpZXMsXG4gIHVzZVF1ZXJ5Q2xpZW50LFxufSBmcm9tIFwiQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5XCJcbmltcG9ydCB7IHVzZVF1ZXJ5Q29udGV4dCB9IGZyb20gXCIuL1F1ZXJ5Q29udGV4dFwiXG5pbXBvcnQgeyB1c2VSZXN1bHRzUGFnZVN0YXRlIH0gZnJvbSBcIi4vdXNlUmVzdWx0c1BhZ2VTdGF0ZVwiXG5cbi8vIEhlbHBlciBmdW5jdGlvbnNcbmNvbnN0IHByZXZpZXdLZXkgPSAoa2V5OiBzdHJpbmcsIHNlYXJjaD86IENxc1NlYXJjaFF1ZXJ5LCB1c2VDbHVzdGVyQXBpPzogYm9vbGVhbikgPT5cbiAgW1FVRVJZX0tFWV9GRUFUVVJFX0ZMQUcsIGtleSwgeyAuLi5zZWFyY2ggfSwgdXNlQ2x1c3RlckFwaSA/PyBmYWxzZV0gYXMgY29uc3RcblxuLy8gSG9vayB0aGF0IGFwcGVuZHMgdGhlIGZsYWdzIGNvbnRleHQgaW50byB0aGUgcXVlcnkga2V5IGZ1bmN0aW9uXG5jb25zdCB1c2VDcXNQcmV2aWV3S2V5ID0gKCkgPT4ge1xuICByZXR1cm4gKGtleTogc3RyaW5nLCBzZWFyY2g6IENxc1NlYXJjaFF1ZXJ5IHwgdW5kZWZpbmVkLCB1c2VDbHVzdGVyQVBJOiBib29sZWFuIHwgdW5kZWZpbmVkKSA9PiB7XG4gICAgcmV0dXJuIHByZXZpZXdLZXkoa2V5LCBzZWFyY2gsIHVzZUNsdXN0ZXJBUEkpXG4gIH1cbn1cblxudHlwZSBGZXRjaFBhcmFtcyA9IFF1ZXJ5RnVuY3Rpb25Db250ZXh0PFJldHVyblR5cGU8dHlwZW9mIHByZXZpZXdLZXk+PiAmIHsgcGFnZVBhcmFtPzogbnVtYmVyIH1cblxuY29uc3QgZmV0Y2hTZWFyY2hQcmV2aWV3ID0gYXN5bmMgKFxuICB7IHBhZ2VQYXJhbSwgcXVlcnlLZXkgfTogRmV0Y2hQYXJhbXMsXG4gIG9uRmlyc3RQYWdlRmV0Y2g6ICgpID0+IHZvaWQsXG4gIG9uRmlyc3RQYWdlRmV0Y2hlZDogKGRhdGE6IENxc1F1ZXJ5UG9zdFJlc3BvbnNlIHwgQ3FzUXVlcnlDbHVzdGVyc1Bvc3RSZXNwb25zZSkgPT4gdm9pZCxcbik6IFByb21pc2U8Q3FzUXVlcnlQb3N0UmVzcG9uc2UgfCBDcXNRdWVyeUNsdXN0ZXJzUG9zdFJlc3BvbnNlIHwgdW5kZWZpbmVkPiA9PiB7XG4gIGNvbnN0IFssICwgc2VhcmNoLCB1c2VDbHVzdGVyQXBpXSA9IHF1ZXJ5S2V5XG4gIGNvbnN0IGZpcnN0UGFnZSA9IHBhZ2VQYXJhbSA9PT0gMSB8fCBwYWdlUGFyYW0gPT09IHVuZGVmaW5lZFxuICBjb25zdCBudW1iZXJPZlJlc3VsdHMgPSBERUZBVUxUX1FVRVJZX0xJTUlUXG5cbiAgaWYgKGZpcnN0UGFnZSkge1xuICAgIG9uRmlyc3RQYWdlRmV0Y2goKVxuICB9XG5cbiAgaWYgKHNlYXJjaCA9PT0gdW5kZWZpbmVkKSByZXR1cm5cbiAgY29uc3QgcXVlcnk6IENxc1NlYXJjaFF1ZXJ5ID0ge1xuICAgIC4uLnNlYXJjaCxcbiAgICBwYWdpbmF0aW9uOiB7IGxpbWl0OiBudW1iZXJPZlJlc3VsdHMsIGN1cnNvcjogcGFnZVBhcmFtIH0sXG4gICAgaHlicmlkOiB0cnVlLFxuICAgIHNlYXJjaENoYWluOiB1c2VDbHVzdGVyQXBpID8gXCJjbHVzdGVyaW5nXCIgOiB1bmRlZmluZWQsXG4gIH1cblxuICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zQ2xpZW50LnBvc3Q8Q3FzUXVlcnlDaHVua3NQb3N0UmVzcG9uc2U+KFwiL2Nxcy9xdWVyeS1jaHVua3NcIiwgcXVlcnkpXG4gIGlmIChmaXJzdFBhZ2UpIG9uRmlyc3RQYWdlRmV0Y2hlZChkYXRhKVxuICByZXR1cm4gZGF0YVxufVxuXG5jb25zdCBnZXRTdG9yaWVzRnJvbVBhZ2VzID0gKFxuICBwYWdlczogQXJyYXk8XG4gICAgQ3FzUXVlcnlQb3N0UmVzcG9uc2UgfCBDcXNRdWVyeUNsdXN0ZXJzUG9zdFJlc3BvbnNlIHwgQ3FzUXVlcnlDaHVua3NQb3N0UmVzcG9uc2UgfCB1bmRlZmluZWRcbiAgPixcbikgPT4ge1xuICBjb25zdCBzdG9yaWVzT2JqZWN0ID0gcGFnZXMucmVkdWNlKFxuICAgIChhY2M6IFJlY29yZDxzdHJpbmcsIENxc1N0b3J5IHwgQ3FzQ2x1c3RlclN1bW1hcnlTdG9yeSB8IENxc0NodW5rU3Rvcnk+LCBwYWdlKSA9PiB7XG4gICAgICBpZiAoIXBhZ2UpIHtcbiAgICAgICAgcmV0dXJuIGFjY1xuICAgICAgfVxuXG4gICAgICAvLyBXZSBhcmUgY2hlY2tpbmcgaWYgdGhlIElEIGlzIGFscmVhZHkgaW4uIE9ubHkgZGlmZmVyZW50IElEcyBhbGxvd2VkXG4gICAgICBjb25zdCBhY2N1bXVsYXRvciA9IHsgLi4uYWNjIH1cbiAgICAgIGZvciAoY29uc3Qgc3Rvcnkgb2YgcGFnZS5zdG9yaWVzKSB7XG4gICAgICAgIGFjY3VtdWxhdG9yW3N0b3J5LmlkXSA9IGFjY3VtdWxhdG9yW3N0b3J5LmlkXVxuICAgICAgICAgID8gYWNjdW11bGF0b3Jbc3RvcnkuaWRdXG4gICAgICAgICAgOiAvLyBXZSBmb3JtYXQgdGhlIHRpbWVzdGFtcCBzbyBpdCBjb250YWlucyB0aW1lem9uZSBpbmZvXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIC4uLnN0b3J5LFxuICAgICAgICAgICAgICB0czogc3RvcnkudHMuZW5kc1dpdGgoXCJaXCIpID8gc3RvcnkudHMgOiBgJHtzdG9yeS50c31aYCxcbiAgICAgICAgICAgICAgY2x1c3RlcjogaXNDbHVzdGVyU3Rvcnkoc3RvcnkpXG4gICAgICAgICAgICAgICAgPyBzdG9yeS5jbHVzdGVyLm1hcChjbHVzdGVyU3RvcnkgPT4gbWFwVG9JU09UaW1lc3RhbXAoY2x1c3RlclN0b3J5KSlcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yXG4gICAgfSxcbiAgICB7fSxcbiAgKVxuXG4gIHJldHVybiBPYmplY3QudmFsdWVzKHN0b3JpZXNPYmplY3QpXG59XG5cbmNvbnN0IHVzZUNRU1ByZXZpZXcgPSAoXG4gIHNlYXJjaDogQ3FzU2VhcmNoUXVlcnkgfCB1bmRlZmluZWQsXG4gIGtleTogc3RyaW5nLFxuICBvcHRpb25zOiB7XG4gICAgZW5hYmxlZD86IGJvb2xlYW5cbiAgICB1c2VDbHVzdGVyQXBpPzogYm9vbGVhblxuICAgIHF1ZXJ5T3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4gICAgb25GaXJzdFBhZ2VGZXRjaD86ICgpID0+IHZvaWRcbiAgICBvbkZpcnN0UGFnZUZldGNoZWQ/OiAoZGF0YTogQ3FzUXVlcnlQb3N0UmVzcG9uc2UgfCBDcXNRdWVyeUNsdXN0ZXJzUG9zdFJlc3BvbnNlKSA9PiB2b2lkXG4gICAgaXNGZWVkUmVxdWVzdD86IGJvb2xlYW5cbiAgICBvbkVycm9yPzogKCkgPT4gdm9pZFxuICB9ID0ge1xuICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgdXNlQ2x1c3RlckFwaTogdHJ1ZSxcbiAgICBxdWVyeU9wdGlvbnM6IHt9LFxuICAgIGlzRmVlZFJlcXVlc3Q6IGZhbHNlLFxuICB9LFxuKSA9PiB7XG4gIGNvbnN0IGdldENxc1ByZXZpZXdLZXkgPSB1c2VDcXNQcmV2aWV3S2V5KClcblxuICBjb25zdCBvbkZpcnN0UGFnZUZldGNoID0gKCkgPT4ge1xuICAgIGlmIChvcHRpb25zLm9uRmlyc3RQYWdlRmV0Y2gpIHtcbiAgICAgIG9wdGlvbnMub25GaXJzdFBhZ2VGZXRjaCgpXG4gICAgfVxuICB9XG4gIGNvbnN0IG9uRmlyc3RQYWdlRmV0Y2hlZCA9IChkYXRhOiBDcXNRdWVyeVBvc3RSZXNwb25zZSB8IENxc1F1ZXJ5Q2x1c3RlcnNQb3N0UmVzcG9uc2UpID0+IHtcbiAgICBvcHRpb25zLm9uRmlyc3RQYWdlRmV0Y2hlZD8uKGRhdGEpXG4gIH1cblxuICBjb25zdCBxdWVyeVJlcyA9IHVzZUluZmluaXRlUXVlcnkoe1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdGFuc3RhY2svcXVlcnkvZXhoYXVzdGl2ZS1kZXBzXG4gICAgcXVlcnlLZXk6IGdldENxc1ByZXZpZXdLZXkoa2V5LCBzZWFyY2gsIG9wdGlvbnMudXNlQ2x1c3RlckFwaSksXG4gICAgcXVlcnlGbjogKHBhcmFtczogRmV0Y2hQYXJhbXMpID0+IHtcbiAgICAgIHJldHVybiBmZXRjaFNlYXJjaFByZXZpZXcocGFyYW1zLCBvbkZpcnN0UGFnZUZldGNoLCBvbkZpcnN0UGFnZUZldGNoZWQpXG4gICAgfSxcbiAgICBwbGFjZWhvbGRlckRhdGE6IGtlZXBQcmV2aW91c0RhdGEsXG4gICAgc3RhbGVUaW1lOiAwLFxuICAgIHJlZmV0Y2hPbldpbmRvd0ZvY3VzOiBmYWxzZSxcbiAgICBlbmFibGVkOiBvcHRpb25zLmVuYWJsZWQsXG4gICAgZ2V0TmV4dFBhZ2VQYXJhbTogbGFzdFBhZ2UgPT4gbGFzdFBhZ2U/Lm5leHRDdXJzb3IsXG4gICAgLi4ub3B0aW9ucy5xdWVyeU9wdGlvbnMsXG4gICAgaW5pdGlhbFBhZ2VQYXJhbTogMSxcbiAgfSlcblxuICBjb25zdCB7IG9uRXJyb3IgfSA9IG9wdGlvbnNcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChxdWVyeVJlcy5pc0Vycm9yKSB7XG4gICAgICBvbkVycm9yPy4oKVxuICAgIH1cbiAgfSwgW29uRXJyb3IsIHF1ZXJ5UmVzLmlzRXJyb3JdKVxuXG4gIGNvbnN0IHJlc3QgPSBxdWVyeVJlcy5kYXRhID8gcXVlcnlSZXMuZGF0YS5wYWdlc1swXSA6IHt9XG5cbiAgY29uc3Qgc3RvcmllcyA9IHVzZU1lbW8oXG4gICAgKCkgPT4gKHF1ZXJ5UmVzLmRhdGEgPyBnZXRTdG9yaWVzRnJvbVBhZ2VzKHF1ZXJ5UmVzLmRhdGEucGFnZXMpIDogW10pLFxuICAgIFtxdWVyeVJlcy5kYXRhXSxcbiAgKVxuXG4gIGNvbnN0IGRlZmF1bHRzID0ge1xuICAgIGNvdmVyYWdlOiBxdWVyeVJlcy5kYXRhPy5wYWdlc1swXT8uY292ZXJhZ2UsXG4gICAgZG9jdW1lbnRDb3VudDogMCxcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgLi4uZGVmYXVsdHMsXG4gICAgLi4ucmVzdCxcbiAgICAuLi5xdWVyeVJlcyxcbiAgICBzdG9yaWVzLFxuICAgIG51bU9mUGFnZXM6IHF1ZXJ5UmVzLmRhdGE/LnBhZ2VzLmxlbmd0aCA/PyAwLFxuICB9XG59XG5cbmNvbnN0IHVzZU11bHRpcGxlQ1FTUHJldmlld3MgPSAoXG4gIHNlYXJjaGVzOiBBcnJheTxDcXNTZWFyY2hRdWVyeSB8IHVuZGVmaW5lZD4sXG4gIG9wdGlvbnM6IHsgdXNlQ2x1c3RlckFQST86IGJvb2xlYW47IGlzQ2h1bmtzQWN0aXZlPzogYm9vbGVhbiB9LFxuKSA9PiB7XG4gIGNvbnN0IGdldENxc1ByZXZpZXdLZXkgPSB1c2VDcXNQcmV2aWV3S2V5KClcblxuICBjb25zdCBxdWVyaWVzID0gc2VhcmNoZXMubWFwKHNlYXJjaCA9PiB7XG4gICAgcmV0dXJuIHF1ZXJ5T3B0aW9ucyh7XG4gICAgICBxdWVyeUtleTogZ2V0Q3FzUHJldmlld0tleShcImNxcy1tdWx0aVwiLCBzZWFyY2gsIG9wdGlvbnMudXNlQ2x1c3RlckFQSSksXG4gICAgICBxdWVyeUZuOiBwYXJhbXMgPT5cbiAgICAgICAgZmV0Y2hTZWFyY2hQcmV2aWV3KFxuICAgICAgICAgIHsgLi4ucGFyYW1zLCBwYWdlUGFyYW06IDEgfSxcbiAgICAgICAgICAoKSA9PiB7fSxcbiAgICAgICAgICAoKSA9PiB7fSxcbiAgICAgICAgKSxcbiAgICAgIHBsYWNlaG9sZGVyRGF0YTogcHJldiA9PiBwcmV2LCAvLyBQcmV2ZW50IGxvYWRpbmcgc3RhdGUgd2hlbiByZS1mZXRjaGluZ1xuICAgICAgc3RhbGVUaW1lOiAwLFxuICAgICAgcmVmZXRjaE9uV2luZG93Rm9jdXM6IGZhbHNlLFxuICAgICAgZW5hYmxlZDogc2VhcmNoICE9PSB1bmRlZmluZWQsXG4gICAgICBzZWxlY3Q6IChkYXRhOiBDcXNRdWVyeVBvc3RSZXNwb25zZSB8IENxc1F1ZXJ5Q2x1c3RlcnNQb3N0UmVzcG9uc2UgfCB1bmRlZmluZWQpID0+IHtcbiAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgcmV0dXJuIGRhdGFcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgICBzdG9yaWVzOiBkYXRhLnN0b3JpZXMubWFwKHN0b3J5ID0+ICh7XG4gICAgICAgICAgICAuLi5zdG9yeSxcbiAgICAgICAgICAgIHRzOiBzdG9yeS50cy5lbmRzV2l0aChcIlpcIikgPyBzdG9yeS50cyA6IGAke3N0b3J5LnRzfVpgLFxuICAgICAgICAgICAgY2x1c3RlcjogaXNDbHVzdGVyU3Rvcnkoc3RvcnkpXG4gICAgICAgICAgICAgID8gc3RvcnkuY2x1c3Rlci5tYXAoY2x1c3RlclN0b3J5ID0+IG1hcFRvSVNPVGltZXN0YW1wKGNsdXN0ZXJTdG9yeSkpXG4gICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgIH0pKSxcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9KVxuICB9KVxuXG4gIHJldHVybiB1c2VRdWVyaWVzKHsgcXVlcmllcyB9KVxufVxuXG5jb25zdCB1c2VDdXJyZW50Q1FTUHJldmlldyA9ICgpID0+IHtcbiAgY29uc3QgeyB1c2VyIH0gPSB1c2VVc2VyKClcbiAgY29uc3QgcXVlcnlDbGllbnQgPSB1c2VRdWVyeUNsaWVudCgpXG4gIGNvbnN0IHsgbXV0YXRlQXN5bmM6IHB1dExhc3RFeGVjdXRlZCB9ID0gdXNlVXBkYXRlTGFzdEV4ZWN1dGVkKClcblxuICBjb25zdCB7IHNlYXJjaFF1ZXJ5LCBzYXZlZFF1ZXJ5IH0gPSB1c2VRdWVyeUNvbnRleHQoKVxuXG4gIGNvbnN0IFtfLCBzZXRSZXN1bHRzUGFnZVN0YXRlXSA9IHVzZVJlc3VsdHNQYWdlU3RhdGUoKVxuXG4gIGNvbnN0IGV4cHJlc3Npb24gPVxuICAgIHNlYXJjaFF1ZXJ5Py5leHByZXNzaW9uICYmIGlzUnBxbExvZ2ljYWxHcm91cChzZWFyY2hRdWVyeT8uZXhwcmVzc2lvbilcbiAgICAgID8gc2VhcmNoUXVlcnk/LmV4cHJlc3Npb24udmFsdWVbMF1cbiAgICAgIDogdW5kZWZpbmVkXG4gIGNvbnN0IGVuYWJsZWQgPSBzZWFyY2hRdWVyeSAhPT0gdW5kZWZpbmVkICYmIGNxc1F1ZXJ5TG9va3NWYWxpZCh7IC4uLnNlYXJjaFF1ZXJ5LCBleHByZXNzaW9uIH0pXG5cbiAgY29uc3QgeyByZWZldGNoOiBxdWVyeVJlZmV0Y2gsIC4uLnJlc3QgfSA9IHVzZUNRU1ByZXZpZXcoc2VhcmNoUXVlcnksIFwiY3FzLXByZXZpZXdcIiwge1xuICAgIGVuYWJsZWQsXG4gICAgdXNlQ2x1c3RlckFwaTogdHJ1ZSxcbiAgICBvbkZpcnN0UGFnZUZldGNoZWQ6IChkYXRhOiBDcXNRdWVyeVBvc3RSZXNwb25zZSB8IENxc1F1ZXJ5Q2x1c3RlcnNQb3N0UmVzcG9uc2UpID0+IHtcbiAgICAgIGlmIChzYXZlZFF1ZXJ5Lm93bmVyVXNlcklkID09PSB1c2VyPy5pZCkge1xuICAgICAgICBwdXRMYXN0RXhlY3V0ZWQoc2F2ZWRRdWVyeS5pZClcbiAgICAgICAgcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoe1xuICAgICAgICAgIHF1ZXJ5S2V5OiBbXCJxdWVyaWVzXCJdLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgc2V0UmVzdWx0c1BhZ2VTdGF0ZShkYXRhLmRvY3VtZW50Q291bnQgPT09IDAgPyBcImVtcHR5XCIgOiBcInJlc3VsdHNcIilcbiAgICB9LFxuICAgIG9uRXJyb3I6ICgpID0+IHtcbiAgICAgIHNldFJlc3VsdHNQYWdlU3RhdGUoXCJlbXB0eVwiKVxuICAgIH0sXG4gIH0pXG5cbiAgY29uc3QgcmVmZXRjaCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRSZXN1bHRzUGFnZVN0YXRlKFwibG9hZGluZ1wiKVxuICAgIHF1ZXJ5UmVmZXRjaCgpXG4gIH0sIFtxdWVyeVJlZmV0Y2gsIHNldFJlc3VsdHNQYWdlU3RhdGVdKVxuICByZXR1cm4geyAuLi5yZXN0LCByZWZldGNoLCBlbmFibGVkIH1cbn1cblxuZXhwb3J0IHsgdXNlQ1FTUHJldmlldywgdXNlQ3VycmVudENRU1ByZXZpZXcsIHVzZU11bHRpcGxlQ1FTUHJldmlld3MgfVxuIl0sIm5hbWVzIjpbInVzZUNRU1ByZXZpZXciLCJ1c2VDdXJyZW50Q1FTUHJldmlldyIsInVzZU11bHRpcGxlQ1FTUHJldmlld3MiLCJwcmV2aWV3S2V5Iiwia2V5Iiwic2VhcmNoIiwidXNlQ2x1c3RlckFwaSIsIlFVRVJZX0tFWV9GRUFUVVJFX0ZMQUciLCJ1c2VDcXNQcmV2aWV3S2V5IiwidXNlQ2x1c3RlckFQSSIsImZldGNoU2VhcmNoUHJldmlldyIsInBhZ2VQYXJhbSIsInF1ZXJ5S2V5Iiwib25GaXJzdFBhZ2VGZXRjaCIsIm9uRmlyc3RQYWdlRmV0Y2hlZCIsImZpcnN0UGFnZSIsInVuZGVmaW5lZCIsIm51bWJlck9mUmVzdWx0cyIsIkRFRkFVTFRfUVVFUllfTElNSVQiLCJxdWVyeSIsInBhZ2luYXRpb24iLCJsaW1pdCIsImN1cnNvciIsImh5YnJpZCIsInNlYXJjaENoYWluIiwiZGF0YSIsImF4aW9zQ2xpZW50IiwicG9zdCIsImdldFN0b3JpZXNGcm9tUGFnZXMiLCJwYWdlcyIsInN0b3JpZXNPYmplY3QiLCJyZWR1Y2UiLCJhY2MiLCJwYWdlIiwiYWNjdW11bGF0b3IiLCJzdG9yeSIsInN0b3JpZXMiLCJpZCIsInRzIiwiZW5kc1dpdGgiLCJjbHVzdGVyIiwiaXNDbHVzdGVyU3RvcnkiLCJtYXAiLCJjbHVzdGVyU3RvcnkiLCJtYXBUb0lTT1RpbWVzdGFtcCIsIk9iamVjdCIsInZhbHVlcyIsIm9wdGlvbnMiLCJlbmFibGVkIiwicXVlcnlPcHRpb25zIiwiaXNGZWVkUmVxdWVzdCIsInF1ZXJ5UmVzIiwiZ2V0Q3FzUHJldmlld0tleSIsInVzZUluZmluaXRlUXVlcnkiLCJxdWVyeUZuIiwicGFyYW1zIiwicGxhY2Vob2xkZXJEYXRhIiwia2VlcFByZXZpb3VzRGF0YSIsInN0YWxlVGltZSIsInJlZmV0Y2hPbldpbmRvd0ZvY3VzIiwiZ2V0TmV4dFBhZ2VQYXJhbSIsImxhc3RQYWdlIiwibmV4dEN1cnNvciIsImluaXRpYWxQYWdlUGFyYW0iLCJvbkVycm9yIiwidXNlRWZmZWN0IiwiaXNFcnJvciIsInJlc3QiLCJ1c2VNZW1vIiwiZGVmYXVsdHMiLCJjb3ZlcmFnZSIsImRvY3VtZW50Q291bnQiLCJudW1PZlBhZ2VzIiwibGVuZ3RoIiwic2VhcmNoZXMiLCJxdWVyaWVzIiwicHJldiIsInNlbGVjdCIsInVzZVF1ZXJpZXMiLCJ1c2VyIiwidXNlVXNlciIsInF1ZXJ5Q2xpZW50IiwidXNlUXVlcnlDbGllbnQiLCJtdXRhdGVBc3luYyIsInB1dExhc3RFeGVjdXRlZCIsInVzZVVwZGF0ZUxhc3RFeGVjdXRlZCIsInNlYXJjaFF1ZXJ5Iiwic2F2ZWRRdWVyeSIsInVzZVF1ZXJ5Q29udGV4dCIsIl8iLCJzZXRSZXN1bHRzUGFnZVN0YXRlIiwidXNlUmVzdWx0c1BhZ2VTdGF0ZSIsImV4cHJlc3Npb24iLCJpc1JwcWxMb2dpY2FsR3JvdXAiLCJ2YWx1ZSIsImNxc1F1ZXJ5TG9va3NWYWxpZCIsIm93bmVyVXNlcklkIiwiaW52YWxpZGF0ZVF1ZXJpZXMiLCJyZWZldGNoIiwicXVlcnlSZWZldGNoIiwidXNlQ2FsbGJhY2siXSwicmFuZ2VNYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztJQStQU0EsYUFBYTtlQUFiQTs7SUFBZUMsb0JBQW9CO2VBQXBCQTs7SUFBc0JDLHNCQUFzQjtlQUF0QkE7Ozt1QkEvUEU7NEJBQ3hCOzBCQVdqQjswQkFDcUQ7dUJBQzFCOzZCQUNOO2lDQUNVOzBCQUNIOzRCQVE1Qjs4QkFDeUI7cUNBQ0k7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRXBDLG1CQUFtQjtBQUNuQixNQUFNQyxhQUFhLENBQUNDLEtBQWFDLFFBQXlCQyxnQkFDeEQ7UUFBQ0MsZ0NBQXNCO1FBQUVIO1FBQUssbUJBQUtDO1FBQVVDLDBCQUFBQSwyQkFBQUEsZ0JBQWlCO0tBQU07QUFFdEUsa0VBQWtFO0FBQ2xFLE1BQU1FLG1CQUFtQjtJQUN2QixPQUFPLENBQUNKLEtBQWFDLFFBQW9DSTtRQUN2RCxPQUFPTixXQUFXQyxLQUFLQyxRQUFRSTtJQUNqQztBQUNGO0FBSUEsTUFBTUMscUJBQXFCLE9BQ3pCLEVBQUVDLFNBQVMsRUFBRUMsUUFBUSxFQUFlLEVBQ3BDQyxrQkFDQUM7SUFFQSxNQUFNLEtBQUtULFFBQVFDLGNBQWMsR0FBR007SUFDcEMsTUFBTUcsWUFBWUosY0FBYyxLQUFLQSxjQUFjSztJQUNuRCxNQUFNQyxrQkFBa0JDLDZCQUFtQjtJQUUzQyxJQUFJSCxXQUFXO1FBQ2JGO0lBQ0Y7SUFFQSxJQUFJUixXQUFXVyxXQUFXO0lBQzFCLE1BQU1HLFFBQXdCLHdDQUN6QmQ7UUFDSGUsWUFBWTtZQUFFQyxPQUFPSjtZQUFpQkssUUFBUVg7UUFBVTtRQUN4RFksUUFBUTtRQUNSQyxhQUFhbEIsZ0JBQWdCLGVBQWVVOztJQUc5QyxNQUFNLEVBQUVTLElBQUksRUFBRSxHQUFHLE1BQU1DLHdCQUFXLENBQUNDLElBQUksQ0FBNkIscUJBQXFCUjtJQUN6RixJQUFJSixXQUFXRCxtQkFBbUJXO0lBQ2xDLE9BQU9BO0FBQ1Q7QUFFQSxNQUFNRyxzQkFBc0IsQ0FDMUJDO0lBSUEsTUFBTUMsZ0JBQWdCRCxNQUFNRSxNQUFNLENBQ2hDLENBQUNDLEtBQXdFQztRQUN2RSxJQUFJLENBQUNBLE1BQU07WUFDVCxPQUFPRDtRQUNUO1FBRUEsc0VBQXNFO1FBQ3RFLE1BQU1FLGNBQWMsbUJBQUtGO1FBQ3pCLEtBQUssTUFBTUcsU0FBU0YsS0FBS0csT0FBTyxDQUFFO1lBQ2hDRixXQUFXLENBQUNDLE1BQU1FLEVBQUUsQ0FBQyxHQUFHSCxXQUFXLENBQUNDLE1BQU1FLEVBQUUsQ0FBQyxHQUN6Q0gsV0FBVyxDQUFDQyxNQUFNRSxFQUFFLENBQUMsR0FFckIsd0NBQ0tGO2dCQUNIRyxJQUFJSCxNQUFNRyxFQUFFLENBQUNDLFFBQVEsQ0FBQyxPQUFPSixNQUFNRyxFQUFFLEdBQUcsQ0FBQyxFQUFFSCxNQUFNRyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUN0REUsU0FBU0MsSUFBQUEsd0JBQWMsRUFBQ04sU0FDcEJBLE1BQU1LLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDQyxDQUFBQSxlQUFnQkMsSUFBQUEsd0JBQWlCLEVBQUNELGlCQUNwRDNCOztRQUVaO1FBRUEsT0FBT2tCO0lBQ1QsR0FDQSxDQUFDO0lBR0gsT0FBT1csT0FBT0MsTUFBTSxDQUFDaEI7QUFDdkI7QUFFQSxNQUFNOUIsZ0JBQWdCLENBQ3BCSyxRQUNBRCxLQUNBMkMsVUFRSTtJQUNGQyxTQUFTO0lBQ1QxQyxlQUFlO0lBQ2YyQyxjQUFjLENBQUM7SUFDZkMsZUFBZTtBQUNqQixDQUFDO1FBNENXQyx1QkFBQUEsZ0JBU0VBO0lBbkRkLE1BQU1DLG1CQUFtQjVDO0lBRXpCLE1BQU1LLG1CQUFtQjtRQUN2QixJQUFJa0MsUUFBUWxDLGdCQUFnQixFQUFFO1lBQzVCa0MsUUFBUWxDLGdCQUFnQjtRQUMxQjtJQUNGO0lBQ0EsTUFBTUMscUJBQXFCLENBQUNXO1lBQzFCc0I7U0FBQUEsOEJBQUFBLFFBQVFqQyxrQkFBa0IsY0FBMUJpQyxrREFBQUEsaUNBQUFBLFNBQTZCdEI7SUFDL0I7SUFFQSxNQUFNMEIsV0FBV0UsSUFBQUEsNEJBQWdCLEVBQUM7UUFDaEMsMkRBQTJEO1FBQzNEekMsVUFBVXdDLGlCQUFpQmhELEtBQUtDLFFBQVEwQyxRQUFRekMsYUFBYTtRQUM3RGdELFNBQVMsQ0FBQ0M7WUFDUixPQUFPN0MsbUJBQW1CNkMsUUFBUTFDLGtCQUFrQkM7UUFDdEQ7UUFDQTBDLGlCQUFpQkMsNEJBQWdCO1FBQ2pDQyxXQUFXO1FBQ1hDLHNCQUFzQjtRQUN0QlgsU0FBU0QsUUFBUUMsT0FBTztRQUN4Qlksa0JBQWtCQyxDQUFBQSxXQUFZQSxxQkFBQUEsK0JBQUFBLFNBQVVDLFVBQVU7T0FDL0NmLFFBQVFFLFlBQVk7UUFDdkJjLGtCQUFrQjs7SUFHcEIsTUFBTSxFQUFFQyxPQUFPLEVBQUUsR0FBR2pCO0lBRXBCa0IsSUFBQUEsZ0JBQVMsRUFBQztRQUNSLElBQUlkLFNBQVNlLE9BQU8sRUFBRTtZQUNwQkYsb0JBQUFBLDhCQUFBQTtRQUNGO0lBQ0YsR0FBRztRQUFDQTtRQUFTYixTQUFTZSxPQUFPO0tBQUM7SUFFOUIsTUFBTUMsT0FBT2hCLFNBQVMxQixJQUFJLEdBQUcwQixTQUFTMUIsSUFBSSxDQUFDSSxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUM7SUFFdkQsTUFBTU8sVUFBVWdDLElBQUFBLGNBQU8sRUFDckIsSUFBT2pCLFNBQVMxQixJQUFJLEdBQUdHLG9CQUFvQnVCLFNBQVMxQixJQUFJLENBQUNJLEtBQUssSUFBSSxFQUFFLEVBQ3BFO1FBQUNzQixTQUFTMUIsSUFBSTtLQUFDO0lBR2pCLE1BQU00QyxXQUFXO1FBQ2ZDLFFBQVEsR0FBRW5CLGlCQUFBQSxTQUFTMUIsSUFBSSxjQUFiMEIsc0NBQUFBLHdCQUFBQSxlQUFldEIsS0FBSyxDQUFDLEVBQUUsY0FBdkJzQiw0Q0FBQUEsc0JBQXlCbUIsUUFBUTtRQUMzQ0MsZUFBZTtJQUNqQjtRQU9jcEI7SUFMZCxPQUFPLHdDQUNGa0IsVUFDQUYsTUFDQWhCO1FBQ0hmO1FBQ0FvQyxZQUFZckIsQ0FBQUEsK0JBQUFBLGtCQUFBQSxTQUFTMUIsSUFBSSxjQUFiMEIsc0NBQUFBLGdCQUFldEIsS0FBSyxDQUFDNEMsTUFBTSxjQUEzQnRCLHlDQUFBQSw4QkFBK0I7O0FBRS9DO0FBRUEsTUFBTWpELHlCQUF5QixDQUM3QndFLFVBQ0EzQjtJQUVBLE1BQU1LLG1CQUFtQjVDO0lBRXpCLE1BQU1tRSxVQUFVRCxTQUFTaEMsR0FBRyxDQUFDckMsQ0FBQUE7UUFDM0IsT0FBTzRDLElBQUFBLHdCQUFZLEVBQUM7WUFDbEJyQyxVQUFVd0MsaUJBQWlCLGFBQWEvQyxRQUFRMEMsUUFBUXRDLGFBQWE7WUFDckU2QyxTQUFTQyxDQUFBQSxTQUNQN0MsbUJBQ0Usd0NBQUs2QztvQkFBUTVDLFdBQVc7b0JBQ3hCLEtBQU8sR0FDUCxLQUFPO1lBRVg2QyxpQkFBaUJvQixDQUFBQSxPQUFRQTtZQUN6QmxCLFdBQVc7WUFDWEMsc0JBQXNCO1lBQ3RCWCxTQUFTM0MsV0FBV1c7WUFDcEI2RCxRQUFRLENBQUNwRDtnQkFDUCxJQUFJLENBQUNBLE1BQU07b0JBQ1QsT0FBT0E7Z0JBQ1Q7Z0JBRUEsT0FBTyx3Q0FDRkE7b0JBQ0hXLFNBQVNYLEtBQUtXLE9BQU8sQ0FBQ00sR0FBRyxDQUFDUCxDQUFBQSxRQUFVLHdDQUMvQkE7NEJBQ0hHLElBQUlILE1BQU1HLEVBQUUsQ0FBQ0MsUUFBUSxDQUFDLE9BQU9KLE1BQU1HLEVBQUUsR0FBRyxDQUFDLEVBQUVILE1BQU1HLEVBQUUsQ0FBQyxDQUFDLENBQUM7NEJBQ3RERSxTQUFTQyxJQUFBQSx3QkFBYyxFQUFDTixTQUNwQkEsTUFBTUssT0FBTyxDQUFDRSxHQUFHLENBQUNDLENBQUFBLGVBQWdCQyxJQUFBQSx3QkFBaUIsRUFBQ0QsaUJBQ3BEM0I7OztZQUdWO1FBQ0Y7SUFDRjtJQUVBLE9BQU84RCxJQUFBQSxzQkFBVSxFQUFDO1FBQUVIO0lBQVE7QUFDOUI7QUFFQSxNQUFNMUUsdUJBQXVCO0lBQzNCLE1BQU0sRUFBRThFLElBQUksRUFBRSxHQUFHQyxJQUFBQSxtQkFBTztJQUN4QixNQUFNQyxjQUFjQyxJQUFBQSwwQkFBYztJQUNsQyxNQUFNLEVBQUVDLGFBQWFDLGVBQWUsRUFBRSxHQUFHQyxJQUFBQSxzQ0FBcUI7SUFFOUQsTUFBTSxFQUFFQyxXQUFXLEVBQUVDLFVBQVUsRUFBRSxHQUFHQyxJQUFBQSw2QkFBZTtJQUVuRCxNQUFNLENBQUNDLEdBQUdDLG9CQUFvQixHQUFHQyxJQUFBQSx3Q0FBbUI7SUFFcEQsTUFBTUMsYUFDSk4sQ0FBQUEsd0JBQUFBLGtDQUFBQSxZQUFhTSxVQUFVLEtBQUlDLElBQUFBLDRCQUFrQixFQUFDUCx3QkFBQUEsa0NBQUFBLFlBQWFNLFVBQVUsSUFDakVOLHdCQUFBQSxrQ0FBQUEsWUFBYU0sVUFBVSxDQUFDRSxLQUFLLENBQUMsRUFBRSxHQUNoQzlFO0lBQ04sTUFBTWdDLFVBQVVzQyxnQkFBZ0J0RSxhQUFhK0UsSUFBQUEsNEJBQWtCLEVBQUMsd0NBQUtUO1FBQWFNOztJQUVsRixNQUEyQzVGLGlCQUFBQSxjQUFjc0YsYUFBYSxlQUFlO1FBQ25GdEM7UUFDQTFDLGVBQWU7UUFDZlEsb0JBQW9CLENBQUNXO1lBQ25CLElBQUk4RCxXQUFXUyxXQUFXLE1BQUtqQixpQkFBQUEsMkJBQUFBLEtBQU0xQyxFQUFFLEdBQUU7Z0JBQ3ZDK0MsZ0JBQWdCRyxXQUFXbEQsRUFBRTtnQkFDN0I0QyxZQUFZZ0IsaUJBQWlCLENBQUM7b0JBQzVCckYsVUFBVTt3QkFBQztxQkFBVTtnQkFDdkI7WUFDRjtZQUNBOEUsb0JBQW9CakUsS0FBSzhDLGFBQWEsS0FBSyxJQUFJLFVBQVU7UUFDM0Q7UUFDQVAsU0FBUztZQUNQMEIsb0JBQW9CO1FBQ3RCO0lBQ0YsSUFmTSxFQUFFUSxTQUFTQyxZQUFZLEVBQVcsR0FBR25HLGdCQUFUbUUsa0NBQVNuRTtRQUFuQ2tHOztJQWlCUixNQUFNQSxVQUFVRSxJQUFBQSxrQkFBVyxFQUFDO1FBQzFCVixvQkFBb0I7UUFDcEJTO0lBQ0YsR0FBRztRQUFDQTtRQUFjVDtLQUFvQjtJQUN0QyxPQUFPLHdDQUFLdkI7UUFBTStCO1FBQVNsRDs7QUFDN0IifQ==