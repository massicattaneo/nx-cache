{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/cqs-query-bar/src/lib/NameDisplay.tsx"],"sourcesContent":["import { ForwardedRef, forwardRef, useEffect } from \"react\"\nimport { useCqsByIdsContext } from \"@rp/react/tanstack-api/cqs-by-ids\"\nimport { useSnackbar } from \"@rp/react/web/common/providers\"\nimport { Skeleton, Typography } from \"@rp/react/web/mui/core\"\nimport { decodeString } from \"@rp/web/utils\"\n\ntype NameDisplayProps = {\n  filterType?: string\n  entityId?: string\n  data?: { data: { name: string } | undefined; isLoading?: boolean; isError?: boolean }\n}\n\nconst NameDisplay = forwardRef(\n  (\n    { filterType, entityId = \"\", data, ...rest }: NameDisplayProps,\n    ref: ForwardedRef<HTMLElement>,\n  ) => {\n    const queryType = filterType\n    const { enqueueError } = useSnackbar()\n    const { addByIds, ids } = useCqsByIdsContext()\n\n    const isKeyword = queryType === \"keyword\"\n\n    const {\n      data: info = { name: isKeyword ? entityId : \"\" },\n      isLoading = !isKeyword,\n      isError = false,\n    } = data || ids[entityId] || {}\n\n    useEffect(() => {\n      addByIds([{ queryType, key: entityId }])\n    }, [queryType, entityId, addByIds])\n\n    useEffect(() => {\n      if (isError && filterType === \"watchlist\") {\n        enqueueError(\"Watchlist no longer exists; it has been deleted by the owner.\")\n      }\n    }, [enqueueError, filterType, isError])\n\n    if (isError) {\n      return <Typography sx={{ fontSize: 14 }}>Error</Typography>\n    }\n\n    if (isLoading || !info?.name) {\n      return <Skeleton sx={{ display: \"inline-block\" }} width={50}></Skeleton>\n    }\n\n    return (\n      <Typography\n        ref={ref}\n        sx={{ fontSize: 14, overflow: \"hidden\", textOverflow: \"ellipsis\" }}\n        {...rest}\n      >\n        {decodeString(info?.name)}\n      </Typography>\n    )\n  },\n)\n\nexport { NameDisplay }\n"],"names":["NameDisplay","forwardRef","ref","filterType","entityId","data","rest","queryType","enqueueError","useSnackbar","addByIds","ids","useCqsByIdsContext","isKeyword","info","name","isLoading","isError","useEffect","key","Typography","sx","fontSize","Skeleton","display","width","overflow","textOverflow","decodeString"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA2DSA;;;eAAAA;;;;uBA3D2C;0BACjB;2BACP;sBACS;uBACR;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ7B,MAAMA,4BAAcC,IAAAA,iBAAU,EAC5B,SAEEC;QADA,EAAEC,UAAU,EAAEC,WAAW,EAAE,EAAEC,IAAI,EAA6B,WAAxBC;QAApCH;QAAYC;QAAeC;;IAG7B,MAAME,YAAYJ;IAClB,MAAM,EAAEK,YAAY,EAAE,GAAGC,IAAAA,sBAAW;IACpC,MAAM,EAAEC,QAAQ,EAAEC,GAAG,EAAE,GAAGC,IAAAA,4BAAkB;IAE5C,MAAMC,YAAYN,cAAc;IAEhC,MAAM,EACJF,MAAMS,OAAO;QAAEC,MAAMF,YAAYT,WAAW;IAAG,CAAC,EAChDY,YAAY,CAACH,SAAS,EACtBI,UAAU,KAAK,EAChB,GAAGZ,QAAQM,GAAG,CAACP,SAAS,IAAI,CAAC;IAE9Bc,IAAAA,gBAAS,EAAC;QACRR,SAAS;YAAC;gBAAEH;gBAAWY,KAAKf;YAAS;SAAE;IACzC,GAAG;QAACG;QAAWH;QAAUM;KAAS;IAElCQ,IAAAA,gBAAS,EAAC;QACR,IAAID,WAAWd,eAAe,aAAa;YACzCK,aAAa;QACf;IACF,GAAG;QAACA;QAAcL;QAAYc;KAAQ;IAEtC,IAAIA,SAAS;QACX,qBAAO,qBAACG,gBAAU;YAACC,IAAI;gBAAEC,UAAU;YAAG;sBAAG;;IAC3C;IAEA,IAAIN,aAAa,EAACF,iBAAAA,2BAAAA,KAAMC,IAAI,GAAE;QAC5B,qBAAO,qBAACQ,cAAQ;YAACF,IAAI;gBAAEG,SAAS;YAAe;YAAGC,OAAO;;IAC3D;IAEA,qBACE,qBAACL,gBAAU;QACTlB,KAAKA;QACLmB,IAAI;YAAEC,UAAU;YAAII,UAAU;YAAUC,cAAc;QAAW;OAC7DrB;kBAEHsB,IAAAA,mBAAY,EAACd,iBAAAA,2BAAAA,KAAMC,IAAI;;AAG9B"}