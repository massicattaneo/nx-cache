684be17ef7cf6c330d46778efb9245cc
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "NameDisplay", {
    enumerable: true,
    get: function() {
        return NameDisplay;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
const _cqsbyids = require("@rp/react/tanstack-api/cqs-by-ids");
const _providers = require("@rp/react/web/common/providers");
const _core = require("@rp/react/web/mui/core");
const _utils = require("@rp/web/utils");
function _define_property(obj, key, value) {
    if (key in obj) {
        Object.defineProperty(obj, key, {
            value: value,
            enumerable: true,
            configurable: true,
            writable: true
        });
    } else {
        obj[key] = value;
    }
    return obj;
}
function _object_spread(target) {
    for(var i = 1; i < arguments.length; i++){
        var source = arguments[i] != null ? arguments[i] : {};
        var ownKeys = Object.keys(source);
        if (typeof Object.getOwnPropertySymbols === "function") {
            ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {
                return Object.getOwnPropertyDescriptor(source, sym).enumerable;
            }));
        }
        ownKeys.forEach(function(key) {
            _define_property(target, key, source[key]);
        });
    }
    return target;
}
function ownKeys(object, enumerableOnly) {
    var keys = Object.keys(object);
    if (Object.getOwnPropertySymbols) {
        var symbols = Object.getOwnPropertySymbols(object);
        if (enumerableOnly) {
            symbols = symbols.filter(function(sym) {
                return Object.getOwnPropertyDescriptor(object, sym).enumerable;
            });
        }
        keys.push.apply(keys, symbols);
    }
    return keys;
}
function _object_spread_props(target, source) {
    source = source != null ? source : {};
    if (Object.getOwnPropertyDescriptors) {
        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
        ownKeys(Object(source)).forEach(function(key) {
            Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
        });
    }
    return target;
}
function _object_without_properties(source, excluded) {
    if (source == null) return {};
    var target = _object_without_properties_loose(source, excluded);
    var key, i;
    if (Object.getOwnPropertySymbols) {
        var sourceSymbolKeys = Object.getOwnPropertySymbols(source);
        for(i = 0; i < sourceSymbolKeys.length; i++){
            key = sourceSymbolKeys[i];
            if (excluded.indexOf(key) >= 0) continue;
            if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;
            target[key] = source[key];
        }
    }
    return target;
}
function _object_without_properties_loose(source, excluded) {
    if (source == null) return {};
    var target = {};
    var sourceKeys = Object.keys(source);
    var key, i;
    for(i = 0; i < sourceKeys.length; i++){
        key = sourceKeys[i];
        if (excluded.indexOf(key) >= 0) continue;
        target[key] = source[key];
    }
    return target;
}
const NameDisplay = /*#__PURE__*/ (0, _react.forwardRef)((_param, ref)=>{
    var { filterType, entityId = "", data } = _param, rest = _object_without_properties(_param, [
        "filterType",
        "entityId",
        "data"
    ]);
    const queryType = filterType;
    const { enqueueError } = (0, _providers.useSnackbar)();
    const { addByIds, ids } = (0, _cqsbyids.useCqsByIdsContext)();
    const isKeyword = queryType === "keyword";
    const { data: info = {
        name: isKeyword ? entityId : ""
    }, isLoading = !isKeyword, isError = false } = data || ids[entityId] || {};
    (0, _react.useEffect)(()=>{
        addByIds([
            {
                queryType,
                key: entityId
            }
        ]);
    }, [
        queryType,
        entityId,
        addByIds
    ]);
    (0, _react.useEffect)(()=>{
        if (isError && filterType === "watchlist") {
            enqueueError("Watchlist no longer exists; it has been deleted by the owner.");
        }
    }, [
        enqueueError,
        filterType,
        isError
    ]);
    if (isError) {
        return /*#__PURE__*/ (0, _jsxruntime.jsx)(_core.Typography, {
            sx: {
                fontSize: 14
            },
            children: "Error"
        });
    }
    if (isLoading || !(info === null || info === void 0 ? void 0 : info.name)) {
        return /*#__PURE__*/ (0, _jsxruntime.jsx)(_core.Skeleton, {
            sx: {
                display: "inline-block"
            },
            width: 50
        });
    }
    return /*#__PURE__*/ (0, _jsxruntime.jsx)(_core.Typography, _object_spread_props(_object_spread({
        ref: ref,
        sx: {
            fontSize: 14,
            overflow: "hidden",
            textOverflow: "ellipsis"
        }
    }, rest), {
        children: (0, _utils.decodeString)(info === null || info === void 0 ? void 0 : info.name)
    }));
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tY2F0dGFuZW8vd29ya3NwYWNlL2Zyb250ZW5kL2xpYnMvcmVhY3Qvd2ViL2Nxcy1xdWVyeS1iYXIvc3JjL2xpYi9OYW1lRGlzcGxheS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRm9yd2FyZGVkUmVmLCBmb3J3YXJkUmVmLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIlxuaW1wb3J0IHsgdXNlQ3FzQnlJZHNDb250ZXh0IH0gZnJvbSBcIkBycC9yZWFjdC90YW5zdGFjay1hcGkvY3FzLWJ5LWlkc1wiXG5pbXBvcnQgeyB1c2VTbmFja2JhciB9IGZyb20gXCJAcnAvcmVhY3Qvd2ViL2NvbW1vbi9wcm92aWRlcnNcIlxuaW1wb3J0IHsgU2tlbGV0b24sIFR5cG9ncmFwaHkgfSBmcm9tIFwiQHJwL3JlYWN0L3dlYi9tdWkvY29yZVwiXG5pbXBvcnQgeyBkZWNvZGVTdHJpbmcgfSBmcm9tIFwiQHJwL3dlYi91dGlsc1wiXG5cbnR5cGUgTmFtZURpc3BsYXlQcm9wcyA9IHtcbiAgZmlsdGVyVHlwZT86IHN0cmluZ1xuICBlbnRpdHlJZD86IHN0cmluZ1xuICBkYXRhPzogeyBkYXRhOiB7IG5hbWU6IHN0cmluZyB9IHwgdW5kZWZpbmVkOyBpc0xvYWRpbmc/OiBib29sZWFuOyBpc0Vycm9yPzogYm9vbGVhbiB9XG59XG5cbmNvbnN0IE5hbWVEaXNwbGF5ID0gZm9yd2FyZFJlZihcbiAgKFxuICAgIHsgZmlsdGVyVHlwZSwgZW50aXR5SWQgPSBcIlwiLCBkYXRhLCAuLi5yZXN0IH06IE5hbWVEaXNwbGF5UHJvcHMsXG4gICAgcmVmOiBGb3J3YXJkZWRSZWY8SFRNTEVsZW1lbnQ+LFxuICApID0+IHtcbiAgICBjb25zdCBxdWVyeVR5cGUgPSBmaWx0ZXJUeXBlXG4gICAgY29uc3QgeyBlbnF1ZXVlRXJyb3IgfSA9IHVzZVNuYWNrYmFyKClcbiAgICBjb25zdCB7IGFkZEJ5SWRzLCBpZHMgfSA9IHVzZUNxc0J5SWRzQ29udGV4dCgpXG5cbiAgICBjb25zdCBpc0tleXdvcmQgPSBxdWVyeVR5cGUgPT09IFwia2V5d29yZFwiXG5cbiAgICBjb25zdCB7XG4gICAgICBkYXRhOiBpbmZvID0geyBuYW1lOiBpc0tleXdvcmQgPyBlbnRpdHlJZCA6IFwiXCIgfSxcbiAgICAgIGlzTG9hZGluZyA9ICFpc0tleXdvcmQsXG4gICAgICBpc0Vycm9yID0gZmFsc2UsXG4gICAgfSA9IGRhdGEgfHwgaWRzW2VudGl0eUlkXSB8fCB7fVxuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIGFkZEJ5SWRzKFt7IHF1ZXJ5VHlwZSwga2V5OiBlbnRpdHlJZCB9XSlcbiAgICB9LCBbcXVlcnlUeXBlLCBlbnRpdHlJZCwgYWRkQnlJZHNdKVxuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIGlmIChpc0Vycm9yICYmIGZpbHRlclR5cGUgPT09IFwid2F0Y2hsaXN0XCIpIHtcbiAgICAgICAgZW5xdWV1ZUVycm9yKFwiV2F0Y2hsaXN0IG5vIGxvbmdlciBleGlzdHM7IGl0IGhhcyBiZWVuIGRlbGV0ZWQgYnkgdGhlIG93bmVyLlwiKVxuICAgICAgfVxuICAgIH0sIFtlbnF1ZXVlRXJyb3IsIGZpbHRlclR5cGUsIGlzRXJyb3JdKVxuXG4gICAgaWYgKGlzRXJyb3IpIHtcbiAgICAgIHJldHVybiA8VHlwb2dyYXBoeSBzeD17eyBmb250U2l6ZTogMTQgfX0+RXJyb3I8L1R5cG9ncmFwaHk+XG4gICAgfVxuXG4gICAgaWYgKGlzTG9hZGluZyB8fCAhaW5mbz8ubmFtZSkge1xuICAgICAgcmV0dXJuIDxTa2VsZXRvbiBzeD17eyBkaXNwbGF5OiBcImlubGluZS1ibG9ja1wiIH19IHdpZHRoPXs1MH0+PC9Ta2VsZXRvbj5cbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFR5cG9ncmFwaHlcbiAgICAgICAgcmVmPXtyZWZ9XG4gICAgICAgIHN4PXt7IGZvbnRTaXplOiAxNCwgb3ZlcmZsb3c6IFwiaGlkZGVuXCIsIHRleHRPdmVyZmxvdzogXCJlbGxpcHNpc1wiIH19XG4gICAgICAgIHsuLi5yZXN0fVxuICAgICAgPlxuICAgICAgICB7ZGVjb2RlU3RyaW5nKGluZm8/Lm5hbWUpfVxuICAgICAgPC9UeXBvZ3JhcGh5PlxuICAgIClcbiAgfSxcbilcblxuZXhwb3J0IHsgTmFtZURpc3BsYXkgfVxuIl0sIm5hbWVzIjpbIk5hbWVEaXNwbGF5IiwiZm9yd2FyZFJlZiIsInJlZiIsImZpbHRlclR5cGUiLCJlbnRpdHlJZCIsImRhdGEiLCJyZXN0IiwicXVlcnlUeXBlIiwiZW5xdWV1ZUVycm9yIiwidXNlU25hY2tiYXIiLCJhZGRCeUlkcyIsImlkcyIsInVzZUNxc0J5SWRzQ29udGV4dCIsImlzS2V5d29yZCIsImluZm8iLCJuYW1lIiwiaXNMb2FkaW5nIiwiaXNFcnJvciIsInVzZUVmZmVjdCIsImtleSIsIlR5cG9ncmFwaHkiLCJzeCIsImZvbnRTaXplIiwiU2tlbGV0b24iLCJkaXNwbGF5Iiwid2lkdGgiLCJvdmVyZmxvdyIsInRleHRPdmVyZmxvdyIsImRlY29kZVN0cmluZyJdLCJyYW5nZU1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsiLCJtYXBwaW5ncyI6Ijs7OzsrQkEyRFNBOzs7ZUFBQUE7Ozs7dUJBM0QyQzswQkFDakI7MkJBQ1A7c0JBQ1M7dUJBQ1I7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUTdCLE1BQU1BLDRCQUFjQyxJQUFBQSxpQkFBVSxFQUM1QixTQUVFQztRQURBLEVBQUVDLFVBQVUsRUFBRUMsV0FBVyxFQUFFLEVBQUVDLElBQUksRUFBNkIsV0FBeEJDO1FBQXBDSDtRQUFZQztRQUFlQzs7SUFHN0IsTUFBTUUsWUFBWUo7SUFDbEIsTUFBTSxFQUFFSyxZQUFZLEVBQUUsR0FBR0MsSUFBQUEsc0JBQVc7SUFDcEMsTUFBTSxFQUFFQyxRQUFRLEVBQUVDLEdBQUcsRUFBRSxHQUFHQyxJQUFBQSw0QkFBa0I7SUFFNUMsTUFBTUMsWUFBWU4sY0FBYztJQUVoQyxNQUFNLEVBQ0pGLE1BQU1TLE9BQU87UUFBRUMsTUFBTUYsWUFBWVQsV0FBVztJQUFHLENBQUMsRUFDaERZLFlBQVksQ0FBQ0gsU0FBUyxFQUN0QkksVUFBVSxLQUFLLEVBQ2hCLEdBQUdaLFFBQVFNLEdBQUcsQ0FBQ1AsU0FBUyxJQUFJLENBQUM7SUFFOUJjLElBQUFBLGdCQUFTLEVBQUM7UUFDUlIsU0FBUztZQUFDO2dCQUFFSDtnQkFBV1ksS0FBS2Y7WUFBUztTQUFFO0lBQ3pDLEdBQUc7UUFBQ0c7UUFBV0g7UUFBVU07S0FBUztJQUVsQ1EsSUFBQUEsZ0JBQVMsRUFBQztRQUNSLElBQUlELFdBQVdkLGVBQWUsYUFBYTtZQUN6Q0ssYUFBYTtRQUNmO0lBQ0YsR0FBRztRQUFDQTtRQUFjTDtRQUFZYztLQUFRO0lBRXRDLElBQUlBLFNBQVM7UUFDWCxxQkFBTyxxQkFBQ0csZ0JBQVU7WUFBQ0MsSUFBSTtnQkFBRUMsVUFBVTtZQUFHO3NCQUFHOztJQUMzQztJQUVBLElBQUlOLGFBQWEsRUFBQ0YsaUJBQUFBLDJCQUFBQSxLQUFNQyxJQUFJLEdBQUU7UUFDNUIscUJBQU8scUJBQUNRLGNBQVE7WUFBQ0YsSUFBSTtnQkFBRUcsU0FBUztZQUFlO1lBQUdDLE9BQU87O0lBQzNEO0lBRUEscUJBQ0UscUJBQUNMLGdCQUFVO1FBQ1RsQixLQUFLQTtRQUNMbUIsSUFBSTtZQUFFQyxVQUFVO1lBQUlJLFVBQVU7WUFBVUMsY0FBYztRQUFXO09BQzdEckI7a0JBRUhzQixJQUFBQSxtQkFBWSxFQUFDZCxpQkFBQUEsMkJBQUFBLEtBQU1DLElBQUk7O0FBRzlCIn0=