6e87cbbf9e75dd9b73b1fe3bec4376e1
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "DragDropManagerImpl", {
    enumerable: true,
    get: function() {
        return DragDropManagerImpl;
    }
});
const _index = require("../actions/dragDrop/index.js");
class DragDropManagerImpl {
    receiveBackend(backend) {
        this.backend = backend;
    }
    getMonitor() {
        return this.monitor;
    }
    getBackend() {
        return this.backend;
    }
    getRegistry() {
        return this.monitor.registry;
    }
    getActions() {
        /* eslint-disable-next-line @typescript-eslint/no-this-alias */ const manager = this;
        const { dispatch } = this.store;
        function bindActionCreator(actionCreator) {
            return (...args)=>{
                const action = actionCreator.apply(manager, args);
                if (typeof action !== 'undefined') {
                    dispatch(action);
                }
            };
        }
        const actions = (0, _index.createDragDropActions)(this);
        return Object.keys(actions).reduce((boundActions, key)=>{
            const action = actions[key];
            boundActions[key] = bindActionCreator(action);
            return boundActions;
        }, {});
    }
    dispatch(action) {
        this.store.dispatch(action);
    }
    constructor(store, monitor){
        this.isSetUp = false;
        this.handleRefCountChange = ()=>{
            const shouldSetUp = this.store.getState().refCount > 0;
            if (this.backend) {
                if (shouldSetUp && !this.isSetUp) {
                    this.backend.setup();
                    this.isSetUp = true;
                } else if (!shouldSetUp && this.isSetUp) {
                    this.backend.teardown();
                    this.isSetUp = false;
                }
            }
        };
        this.store = store;
        this.monitor = monitor;
        store.subscribe(this.handleRefCountChange);
    }
} //# sourceMappingURL=DragDropManagerImpl.js.map

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jbGFzc2VzL0RyYWdEcm9wTWFuYWdlckltcGwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBBY3Rpb24sIFN0b3JlIH0gZnJvbSAncmVkdXgnXG5cbmltcG9ydCB7IGNyZWF0ZURyYWdEcm9wQWN0aW9ucyB9IGZyb20gJy4uL2FjdGlvbnMvZHJhZ0Ryb3AvaW5kZXguanMnXG5pbXBvcnQgdHlwZSB7XG5cdEFjdGlvbkNyZWF0b3IsXG5cdEJhY2tlbmQsXG5cdERyYWdEcm9wQWN0aW9ucyxcblx0RHJhZ0Ryb3BNYW5hZ2VyLFxuXHREcmFnRHJvcE1vbml0b3IsXG5cdEhhbmRsZXJSZWdpc3RyeSxcbn0gZnJvbSAnLi4vaW50ZXJmYWNlcy5qcydcbmltcG9ydCB0eXBlIHsgU3RhdGUgfSBmcm9tICcuLi9yZWR1Y2Vycy9pbmRleC5qcydcbmltcG9ydCB0eXBlIHsgRHJhZ0Ryb3BNb25pdG9ySW1wbCB9IGZyb20gJy4vRHJhZ0Ryb3BNb25pdG9ySW1wbC5qcydcblxuZXhwb3J0IGNsYXNzIERyYWdEcm9wTWFuYWdlckltcGwgaW1wbGVtZW50cyBEcmFnRHJvcE1hbmFnZXIge1xuXHRwcml2YXRlIHN0b3JlOiBTdG9yZTxTdGF0ZT5cblx0cHJpdmF0ZSBtb25pdG9yOiBEcmFnRHJvcE1vbml0b3Jcblx0cHJpdmF0ZSBiYWNrZW5kOiBCYWNrZW5kIHwgdW5kZWZpbmVkXG5cdHByaXZhdGUgaXNTZXRVcCA9IGZhbHNlXG5cblx0cHVibGljIGNvbnN0cnVjdG9yKHN0b3JlOiBTdG9yZTxTdGF0ZT4sIG1vbml0b3I6IERyYWdEcm9wTW9uaXRvcikge1xuXHRcdHRoaXMuc3RvcmUgPSBzdG9yZVxuXHRcdHRoaXMubW9uaXRvciA9IG1vbml0b3Jcblx0XHRzdG9yZS5zdWJzY3JpYmUodGhpcy5oYW5kbGVSZWZDb3VudENoYW5nZSlcblx0fVxuXG5cdHB1YmxpYyByZWNlaXZlQmFja2VuZChiYWNrZW5kOiBCYWNrZW5kKTogdm9pZCB7XG5cdFx0dGhpcy5iYWNrZW5kID0gYmFja2VuZFxuXHR9XG5cblx0cHVibGljIGdldE1vbml0b3IoKTogRHJhZ0Ryb3BNb25pdG9yIHtcblx0XHRyZXR1cm4gdGhpcy5tb25pdG9yXG5cdH1cblxuXHRwdWJsaWMgZ2V0QmFja2VuZCgpOiBCYWNrZW5kIHtcblx0XHRyZXR1cm4gdGhpcy5iYWNrZW5kIGFzIEJhY2tlbmRcblx0fVxuXG5cdHB1YmxpYyBnZXRSZWdpc3RyeSgpOiBIYW5kbGVyUmVnaXN0cnkge1xuXHRcdHJldHVybiAodGhpcy5tb25pdG9yIGFzIERyYWdEcm9wTW9uaXRvckltcGwpLnJlZ2lzdHJ5XG5cdH1cblxuXHRwdWJsaWMgZ2V0QWN0aW9ucygpOiBEcmFnRHJvcEFjdGlvbnMge1xuXHRcdC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhcyAqL1xuXHRcdGNvbnN0IG1hbmFnZXIgPSB0aGlzXG5cdFx0Y29uc3QgeyBkaXNwYXRjaCB9ID0gdGhpcy5zdG9yZVxuXG5cdFx0ZnVuY3Rpb24gYmluZEFjdGlvbkNyZWF0b3IoYWN0aW9uQ3JlYXRvcjogQWN0aW9uQ3JlYXRvcjxhbnk+KSB7XG5cdFx0XHRyZXR1cm4gKC4uLmFyZ3M6IGFueVtdKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGFjdGlvbiA9IGFjdGlvbkNyZWF0b3IuYXBwbHkobWFuYWdlciwgYXJncyBhcyBhbnkpXG5cdFx0XHRcdGlmICh0eXBlb2YgYWN0aW9uICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHRcdGRpc3BhdGNoKGFjdGlvbilcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNvbnN0IGFjdGlvbnMgPSBjcmVhdGVEcmFnRHJvcEFjdGlvbnModGhpcylcblxuXHRcdHJldHVybiBPYmplY3Qua2V5cyhhY3Rpb25zKS5yZWR1Y2UoXG5cdFx0XHQoYm91bmRBY3Rpb25zOiBEcmFnRHJvcEFjdGlvbnMsIGtleTogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGFjdGlvbjogQWN0aW9uQ3JlYXRvcjxhbnk+ID0gKGFjdGlvbnMgYXMgYW55KVtcblx0XHRcdFx0XHRrZXlcblx0XHRcdFx0XSBhcyBBY3Rpb25DcmVhdG9yPGFueT5cblx0XHRcdFx0Oyhib3VuZEFjdGlvbnMgYXMgYW55KVtrZXldID0gYmluZEFjdGlvbkNyZWF0b3IoYWN0aW9uKVxuXHRcdFx0XHRyZXR1cm4gYm91bmRBY3Rpb25zXG5cdFx0XHR9LFxuXHRcdFx0e30gYXMgRHJhZ0Ryb3BBY3Rpb25zLFxuXHRcdClcblx0fVxuXG5cdHB1YmxpYyBkaXNwYXRjaChhY3Rpb246IEFjdGlvbjxhbnk+KTogdm9pZCB7XG5cdFx0dGhpcy5zdG9yZS5kaXNwYXRjaChhY3Rpb24pXG5cdH1cblxuXHRwcml2YXRlIGhhbmRsZVJlZkNvdW50Q2hhbmdlID0gKCk6IHZvaWQgPT4ge1xuXHRcdGNvbnN0IHNob3VsZFNldFVwID0gdGhpcy5zdG9yZS5nZXRTdGF0ZSgpLnJlZkNvdW50ID4gMFxuXHRcdGlmICh0aGlzLmJhY2tlbmQpIHtcblx0XHRcdGlmIChzaG91bGRTZXRVcCAmJiAhdGhpcy5pc1NldFVwKSB7XG5cdFx0XHRcdHRoaXMuYmFja2VuZC5zZXR1cCgpXG5cdFx0XHRcdHRoaXMuaXNTZXRVcCA9IHRydWVcblx0XHRcdH0gZWxzZSBpZiAoIXNob3VsZFNldFVwICYmIHRoaXMuaXNTZXRVcCkge1xuXHRcdFx0XHR0aGlzLmJhY2tlbmQudGVhcmRvd24oKVxuXHRcdFx0XHR0aGlzLmlzU2V0VXAgPSBmYWxzZVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuIl0sIm5hbWVzIjpbIkRyYWdEcm9wTWFuYWdlckltcGwiLCJyZWNlaXZlQmFja2VuZCIsImJhY2tlbmQiLCJnZXRNb25pdG9yIiwibW9uaXRvciIsImdldEJhY2tlbmQiLCJnZXRSZWdpc3RyeSIsInJlZ2lzdHJ5IiwiZ2V0QWN0aW9ucyIsIm1hbmFnZXIiLCJkaXNwYXRjaCIsInN0b3JlIiwiYmluZEFjdGlvbkNyZWF0b3IiLCJhY3Rpb25DcmVhdG9yIiwiYXJncyIsImFjdGlvbiIsImFwcGx5IiwiYWN0aW9ucyIsImNyZWF0ZURyYWdEcm9wQWN0aW9ucyIsIk9iamVjdCIsImtleXMiLCJyZWR1Y2UiLCJib3VuZEFjdGlvbnMiLCJrZXkiLCJjb25zdHJ1Y3RvciIsImlzU2V0VXAiLCJoYW5kbGVSZWZDb3VudENoYW5nZSIsInNob3VsZFNldFVwIiwiZ2V0U3RhdGUiLCJyZWZDb3VudCIsInNldHVwIiwidGVhcmRvd24iLCJzdWJzY3JpYmUiXSwicmFuZ2VNYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsiLCJtYXBwaW5ncyI6Ijs7OzsrQkFjYUE7OztlQUFBQTs7O3VCQVp5QjtBQVkvQixNQUFNQTtJQVlaQyxlQUFzQkMsT0FBZ0IsRUFBUTtRQUM3QyxJQUFJLENBQUNBLE9BQU8sR0FBR0E7O0lBR2hCQyxhQUFxQztRQUNwQyxPQUFPLElBQUksQ0FBQ0MsT0FBTzs7SUFHcEJDLGFBQTZCO1FBQzVCLE9BQU8sSUFBSSxDQUFDSCxPQUFPOztJQUdwQkksY0FBc0M7UUFDckMsT0FBTyxJQUFLLENBQUNGLE9BQU8sQ0FBeUJHLFFBQVE7O0lBR3REQyxhQUFxQztRQUNwQyw2REFBQSxHQUNBLE1BQU1DLFVBQVUsSUFBSTtRQUNwQixNQUFNLEVBQUVDLFFBQVEsRUFBRSxHQUFHLElBQUksQ0FBQ0MsS0FBSztRQUUvQixTQUFTQyxrQkFBa0JDLGFBQWlDO1lBQzNELE9BQU8sQ0FBQyxHQUFHQztnQkFDVixNQUFNQyxTQUFTRixjQUFjRyxLQUFLLENBQUNQLFNBQVNLO2dCQUM1QyxJQUFJLE9BQU9DLFdBQVcsYUFBYTtvQkFDbENMLFNBQVNLOzs7O1FBS1osTUFBTUUsVUFBVUMsSUFBQUEsNEJBQXFCLEVBQUMsSUFBSTtRQUUxQyxPQUFPQyxPQUFPQyxJQUFJLENBQUNILFNBQVNJLE1BQU0sQ0FDakMsQ0FBQ0MsY0FBK0JDO1lBQy9CLE1BQU1SLFNBQTZCRSxPQUFRLENBQzFDTSxJQUNBO1lBQ0FELFlBQWEsQ0FBU0MsSUFBSSxHQUFHWCxrQkFBa0JHO1lBQ2hELE9BQU9PO1dBRVIsQ0FBQTs7SUFJRlosU0FBZ0JLLE1BQW1CLEVBQVE7UUFDMUMsSUFBSSxDQUFDSixLQUFLLENBQUNELFFBQVEsQ0FBQ0s7O0lBbkRyQlMsWUFBbUJiLEtBQW1CLEVBQUVQLE9BQXdCLENBQUU7UUFGbEUsSUFBQSxDQUFRcUIsT0FBTyxHQUFHO1FBd0RsQixJQUFBLENBQVFDLG9CQUFvQixHQUFHO1lBQzlCLE1BQU1DLGNBQWMsSUFBSSxDQUFDaEIsS0FBSyxDQUFDaUIsUUFBUSxHQUFHQyxRQUFRLEdBQUc7WUFDckQsSUFBSSxJQUFJLENBQUMzQixPQUFPLEVBQUU7Z0JBQ2pCLElBQUl5QixlQUFlLENBQUMsSUFBSSxDQUFDRixPQUFPLEVBQUU7b0JBQ2pDLElBQUksQ0FBQ3ZCLE9BQU8sQ0FBQzRCLEtBQUs7b0JBQ2xCLElBQUksQ0FBQ0wsT0FBTyxHQUFHO3VCQUNULElBQUksQ0FBQ0UsZUFBZSxJQUFJLENBQUNGLE9BQU8sRUFBRTtvQkFDeEMsSUFBSSxDQUFDdkIsT0FBTyxDQUFDNkIsUUFBUTtvQkFDckIsSUFBSSxDQUFDTixPQUFPLEdBQUc7Ozs7UUE3RGpCLElBQUksQ0FBQ2QsS0FBSyxHQUFHQTtRQUNiLElBQUksQ0FBQ1AsT0FBTyxHQUFHQTtRQUNmTyxNQUFNcUIsU0FBUyxDQUFDLElBQUksQ0FBQ04sb0JBQW9CIn0=