{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/watchlists/src/lib/WatchlistDataTabs/useWatchlistDataTablesVisibility.ts"],"sourcesContent":["import { Dispatch, SetStateAction, useCallback, useMemo } from \"react\"\nimport { useLocalStorage } from \"@rp/react/web/common/hooks\"\n\ntype Visibility = Record<string, boolean>\n\nfunction useWatchlistDataTabsVisibility(\n  dataTab: string,\n  defaultVisibility: Array<string>,\n): [Visibility, Dispatch<SetStateAction<Visibility>>] {\n  const [allVisibility, setAllVisibility] = useLocalStorage<Record<string, Visibility>>(\n    \"watchlists.dataTabsVisibility\",\n    {},\n  )\n\n  const setVisibility: Dispatch<SetStateAction<Visibility>> = useCallback(\n    sort => {\n      setAllVisibility(prev => {\n        const def = defaultVisibility.reduce((acc, id) => ({ ...acc, [id]: false }), {})\n        const toModify = prev[dataTab] || def\n        const sorting = sort instanceof Function ? sort(toModify) : sort\n        return { ...prev, [dataTab]: sorting }\n      })\n    },\n    [dataTab, defaultVisibility, setAllVisibility],\n  )\n\n  const visibility = useMemo(() => {\n    const def = defaultVisibility.reduce((acc, id) => ({ ...acc, [id]: false }), {})\n    return allVisibility[dataTab] || def\n  }, [allVisibility, dataTab, defaultVisibility])\n\n  return [visibility, setVisibility]\n}\n\nexport { useWatchlistDataTabsVisibility }\n"],"names":["useWatchlistDataTabsVisibility","dataTab","defaultVisibility","allVisibility","setAllVisibility","useLocalStorage","setVisibility","useCallback","sort","prev","def","reduce","acc","id","toModify","sorting","Function","visibility","useMemo"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAkCSA;;;eAAAA;;;uBAlCsD;uBAC/B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIhC,SAASA,+BACPC,OAAe,EACfC,iBAAgC;IAEhC,MAAM,CAACC,eAAeC,iBAAiB,GAAGC,IAAAA,sBAAe,EACvD,iCACA,CAAC;IAGH,MAAMC,gBAAsDC,IAAAA,kBAAW,EACrEC,CAAAA;QACEJ,iBAAiBK,CAAAA;YACf,MAAMC,MAAMR,kBAAkBS,MAAM,CAAC,CAACC,KAAKC,KAAQ,wCAAKD;oBAAK,CAACC,GAAG,EAAE;oBAAU,CAAC;YAC9E,MAAMC,WAAWL,IAAI,CAACR,QAAQ,IAAIS;YAClC,MAAMK,UAAUP,gBAAgBQ,WAAWR,KAAKM,YAAYN;YAC5D,OAAO,wCAAKC;gBAAM,CAACR,QAAQ,EAAEc;;QAC/B;IACF,GACA;QAACd;QAASC;QAAmBE;KAAiB;IAGhD,MAAMa,aAAaC,IAAAA,cAAO,EAAC;QACzB,MAAMR,MAAMR,kBAAkBS,MAAM,CAAC,CAACC,KAAKC,KAAQ,wCAAKD;gBAAK,CAACC,GAAG,EAAE;gBAAU,CAAC;QAC9E,OAAOV,aAAa,CAACF,QAAQ,IAAIS;IACnC,GAAG;QAACP;QAAeF;QAASC;KAAkB;IAE9C,OAAO;QAACe;QAAYX;KAAc;AACpC"}