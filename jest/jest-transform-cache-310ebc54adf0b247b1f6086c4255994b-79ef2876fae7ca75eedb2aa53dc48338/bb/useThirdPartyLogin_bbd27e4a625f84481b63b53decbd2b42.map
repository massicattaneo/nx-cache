{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/providers/src/useThirdPartyLogin.ts"],"sourcesContent":["import { useSignIn } from \"@clerk/clerk-react\"\nimport { OAuthStrategy, SamlStrategy } from \"@clerk/types\"\nimport { displayError } from \"@rp/common/utils\"\nimport { useSnackbar } from \"./Snackbar\"\n\nconst useThirdPartyLogin = () => {\n  const { signIn } = useSignIn()\n  const { enqueueError } = useSnackbar()\n\n  const thirdPartyLogin = ({\n    strategy,\n    email,\n    redirect,\n  }: {\n    strategy: OAuthStrategy | SamlStrategy\n    email?: string\n    redirect?: string\n  }) => {\n    // This is a workaround for a Clerk bug where the id makes life hard for SSO\n    // I'm talking with Clerk about this, but for now, life is this bad :(\n    if (signIn?.id) (signIn as { id?: string }).id = undefined\n\n    return signIn\n      ?.authenticateWithRedirect({\n        identifier: email,\n        strategy: strategy,\n        redirectUrl: \"/sso-callback\",\n        redirectUrlComplete: redirect ?? \"/\",\n      })\n      .catch((error: unknown) => {\n        enqueueError(displayError(error), {\n          anchorOrigin: { vertical: \"bottom\", horizontal: \"center\" },\n        })\n      })\n  }\n  return { thirdPartyLogin }\n}\n\nexport { useThirdPartyLogin }\n"],"names":["useThirdPartyLogin","signIn","useSignIn","enqueueError","useSnackbar","thirdPartyLogin","strategy","email","redirect","id","undefined","authenticateWithRedirect","identifier","redirectUrl","redirectUrlComplete","catch","error","displayError","anchorOrigin","vertical","horizontal"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAsCSA;;;eAAAA;;;4BAtCiB;uBAEG;0BACD;AAE5B,MAAMA,qBAAqB;IACzB,MAAM,EAAEC,MAAM,EAAE,GAAGC,IAAAA,qBAAS;IAC5B,MAAM,EAAEC,YAAY,EAAE,GAAGC,IAAAA,qBAAW;IAEpC,MAAMC,kBAAkB,CAAC,EACvBC,QAAQ,EACRC,KAAK,EACLC,QAAQ,EAKT;QACC,4EAA4E;QAC5E,sEAAsE;QACtE,IAAIP,mBAAAA,6BAAAA,OAAQQ,EAAE,EAAE,AAACR,OAA2BQ,EAAE,GAAGC;QAEjD,OAAOT,mBAAAA,6BAAAA,OACHU,wBAAwB,CAAC;YACzBC,YAAYL;YACZD,UAAUA;YACVO,aAAa;YACbC,qBAAqBN,qBAAAA,sBAAAA,WAAY;QACnC,GACCO,KAAK,CAAC,CAACC;YACNb,aAAac,IAAAA,mBAAY,EAACD,QAAQ;gBAChCE,cAAc;oBAAEC,UAAU;oBAAUC,YAAY;gBAAS;YAC3D;QACF;IACJ;IACA,OAAO;QAAEf;IAAgB;AAC3B"}