3e9f0bf444988400371f3dc287c1785b
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "WatchlistSuggestionListMobile", {
    enumerable: true,
    get: function() {
        return WatchlistSuggestionListMobile;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
const _settings = require("@rp/common/settings");
const _utils = require("@rp/common/utils");
const _hooks = require("@rp/react/common/hooks");
const _providers = require("@rp/react/common/providers");
const _discoverypanelconfig = require("@rp/react/tanstack-api/discovery-panel-config");
const _suggestion = require("@rp/react/tanstack-api/suggestion");
const _compositecomponents = require("@rp/react/web/common/composite-components");
const _providers1 = require("@rp/react/web/common/providers");
const _core = require("@rp/react/web/mui/core");
const _AddItemsButton = require("./AddItemsButton");
const _LoadingSuggestion = require("./LoadingSuggestion");
const _WatchlistEmptyPlaceholder = require("./WatchlistEmptyPlaceholder");
const _WatchlistSuggestionItemmobile = require("./WatchlistSuggestionItem.mobile");
const _WatchlistSuggestionList = require("./WatchlistSuggestionList");
function _define_property(obj, key, value) {
    if (key in obj) {
        Object.defineProperty(obj, key, {
            value: value,
            enumerable: true,
            configurable: true,
            writable: true
        });
    } else {
        obj[key] = value;
    }
    return obj;
}
function _object_spread(target) {
    for(var i = 1; i < arguments.length; i++){
        var source = arguments[i] != null ? arguments[i] : {};
        var ownKeys = Object.keys(source);
        if (typeof Object.getOwnPropertySymbols === "function") {
            ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {
                return Object.getOwnPropertyDescriptor(source, sym).enumerable;
            }));
        }
        ownKeys.forEach(function(key) {
            _define_property(target, key, source[key]);
        });
    }
    return target;
}
function ownKeys(object, enumerableOnly) {
    var keys = Object.keys(object);
    if (Object.getOwnPropertySymbols) {
        var symbols = Object.getOwnPropertySymbols(object);
        if (enumerableOnly) {
            symbols = symbols.filter(function(sym) {
                return Object.getOwnPropertyDescriptor(object, sym).enumerable;
            });
        }
        keys.push.apply(keys, symbols);
    }
    return keys;
}
function _object_spread_props(target, source) {
    source = source != null ? source : {};
    if (Object.getOwnPropertyDescriptors) {
        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
        ownKeys(Object(source)).forEach(function(key) {
            Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
        });
    }
    return target;
}
const MOBILE_MENU_HEIGHT = 28;
const WatchlistSuggestionListMobile = ({ pages, included, isLoading, onAddSuggestions, categoryFilter, isPatching, fetchNextPage, hasMore, hasFilter, watchlist })=>{
    var _pages_;
    const { planComparisonModal: { handleOpen: planComparisonHandleOpen } } = (0, _providers1.useModal)();
    const suggestions = (0, _react.useMemo)(()=>pages.map((i)=>i.results).flat().filter(_suggestion.isEnhancedCqsItemSuggestion), [
        pages
    ]);
    const [selectedSuggestions, setSelectedSuggestions] = (0, _react.useState)([]);
    const { quota } = (0, _providers.useAccount)();
    const isWatchlistEntityLimitMet = (0, _hooks.useIsWatchlistEntityLimitMet)(quota, included.length + selectedSuggestions.length);
    const { data: panelConfig } = (0, _discoverypanelconfig.usePanelConfig)();
    const [categoryFields] = (0, _react.useMemo)(()=>{
        var _panelConfig_discoveryPanelCategories;
        const categoryMap = (0, _WatchlistSuggestionList.getDisplayCategories)((_panelConfig_discoveryPanelCategories = panelConfig === null || panelConfig === void 0 ? void 0 : panelConfig.discoveryPanelCategories) !== null && _panelConfig_discoveryPanelCategories !== void 0 ? _panelConfig_discoveryPanelCategories : []);
        return categoryFilter ? [
            categoryMap[categoryFilter].fields,
            categoryMap[categoryFilter].title
        ] : [
            [],
            undefined
        ];
    }, [
        categoryFilter,
        panelConfig
    ]);
    const addSelectedSuggestion = (0, _react.useCallback)((key)=>{
        setSelectedSuggestions((prev)=>[
                ...prev,
                key
            ]);
    }, []);
    const removeSelectedSuggestion = (0, _react.useCallback)((key)=>{
        setSelectedSuggestions((prev)=>{
            const filteredSuggestions = prev.filter((selectedKey)=>selectedKey !== key);
            return filteredSuggestions;
        });
    }, []);
    var _pages__count;
    const numOfResults = (_pages__count = (_pages_ = pages[0]) === null || _pages_ === void 0 ? void 0 : _pages_.count) !== null && _pages__count !== void 0 ? _pages__count : 0;
    const hasResults = !(!isLoading && suggestions.length === 0);
    var _watchlist_items_length;
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)(_core.Box, {
        sx: {
            width: "100%",
            height: "100%"
        },
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_core.Box, {
                sx: {
                    position: "sticky",
                    height: MOBILE_MENU_HEIGHT,
                    justifyContent: "space-between",
                    alignItems: "end",
                    backgroundColor: "surface.main",
                    pt: 0,
                    pl: 2,
                    zIndex: 1
                },
                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)(_core.Box, {
                    sx: {
                        display: "flex",
                        width: "100%",
                        alignItems: "center",
                        minHeight: 33
                    },
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_core.Typography, {
                            color: "grey.300",
                            variant: "caption",
                            sx: {
                                flexGrow: 1,
                                whiteSpace: "nowrap"
                            },
                            children: isLoading ? "" : `Showing ${(0, _utils.formatNumber)(numOfResults)} item${numOfResults > 1 ? "s" : ""}`
                        }),
                        !isLoading ? /*#__PURE__*/ (0, _jsxruntime.jsx)(_AddItemsButton.AddItemsButtonMobile, {
                            amount: selectedSuggestions.length,
                            onClick: ()=>{
                                if (isWatchlistEntityLimitMet) {
                                    planComparisonHandleOpen(_settings.WATCHLIST_ENTITIES_FEATURE_NAME);
                                    return;
                                }
                                setSelectedSuggestions([]);
                                onAddSuggestions(selectedSuggestions);
                            },
                            loading: isPatching,
                            watchlistItemsCount: (_watchlist_items_length = watchlist === null || watchlist === void 0 ? void 0 : watchlist.items.length) !== null && _watchlist_items_length !== void 0 ? _watchlist_items_length : 0
                        }) : null
                    ]
                })
            }),
            !hasResults ? /*#__PURE__*/ (0, _jsxruntime.jsx)(_core.Box, {
                sx: {
                    display: "flex",
                    alignItems: "center",
                    height: "calc(100% - 58px)"
                },
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_WatchlistEmptyPlaceholder.WatchlistEmptyPlaceholder, {
                    placeholder: "We couldn't find any results that match your search criteria. Please try again with different keywords."
                })
            }) : null,
            hasResults ? isLoading ? new Array(20).fill(0).map((_, index)=>{
                return /*#__PURE__*/ (0, _jsxruntime.jsx)(_LoadingSuggestion.LoadingSuggestion, {
                    extraColumns: 0
                }, index);
            }) : /*#__PURE__*/ (0, _jsxruntime.jsx)(_compositecomponents.InfiniteList, {
                items: suggestions.map((s)=>{
                    var _s_id;
                    return _object_spread_props(_object_spread({}, s), {
                        id: (_s_id = s.id) !== null && _s_id !== void 0 ? _s_id : s.key
                    });
                }),
                fetchNextPage: fetchNextPage,
                hasMore: hasMore,
                renderItem: (suggestion)=>{
                    return /*#__PURE__*/ (0, _jsxruntime.jsx)(_WatchlistSuggestionItemmobile.WatchlistSuggestionItemMobile, {
                        hasFilter: hasFilter,
                        disabled: isPatching,
                        isLoading: false,
                        suggestion: suggestion,
                        selected: included.includes(suggestion.key) || selectedSuggestions.includes(suggestion.key),
                        included: included.includes(suggestion.key),
                        onChange: (key, value)=>value ? addSelectedSuggestion(key) : removeSelectedSuggestion(key),
                        categoryFilter: categoryFilter,
                        fields: categoryFields
                    }, suggestion.key);
                }
            }) : null
        ]
    });
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tY2F0dGFuZW8vd29ya3NwYWNlL2Zyb250ZW5kL2xpYnMvcmVhY3Qvd2ViL2NvbW1vbi93YXRjaGxpc3QtZWRpdG9yL3NyYy9XYXRjaGxpc3RTdWdnZXN0aW9uTGlzdC5tb2JpbGUudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VNZW1vLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiXG5pbXBvcnQgeyBXYXRjaGxpc3QgfSBmcm9tIFwiQHJwL2NvbW1vbi9hcGktdHlwZXNcIlxuaW1wb3J0IHsgV0FUQ0hMSVNUX0VOVElUSUVTX0ZFQVRVUkVfTkFNRSB9IGZyb20gXCJAcnAvY29tbW9uL3NldHRpbmdzXCJcbmltcG9ydCB7IGZvcm1hdE51bWJlciB9IGZyb20gXCJAcnAvY29tbW9uL3V0aWxzXCJcbmltcG9ydCB7IHVzZUlzV2F0Y2hsaXN0RW50aXR5TGltaXRNZXQgfSBmcm9tIFwiQHJwL3JlYWN0L2NvbW1vbi9ob29rc1wiXG5pbXBvcnQgeyB1c2VBY2NvdW50IH0gZnJvbSBcIkBycC9yZWFjdC9jb21tb24vcHJvdmlkZXJzXCJcbmltcG9ydCB7IHVzZVBhbmVsQ29uZmlnIH0gZnJvbSBcIkBycC9yZWFjdC90YW5zdGFjay1hcGkvZGlzY292ZXJ5LXBhbmVsLWNvbmZpZ1wiXG5pbXBvcnQge1xuICBXYXRjaGxpc3RBdXRvc3VnZ2VzdFBvc3RSZXNwb25zZSxcbiAgaXNFbmhhbmNlZENxc0l0ZW1TdWdnZXN0aW9uLFxufSBmcm9tIFwiQHJwL3JlYWN0L3RhbnN0YWNrLWFwaS9zdWdnZXN0aW9uXCJcbmltcG9ydCB7IEluZmluaXRlTGlzdCB9IGZyb20gXCJAcnAvcmVhY3Qvd2ViL2NvbW1vbi9jb21wb3NpdGUtY29tcG9uZW50c1wiXG5pbXBvcnQgeyB1c2VNb2RhbCB9IGZyb20gXCJAcnAvcmVhY3Qvd2ViL2NvbW1vbi9wcm92aWRlcnNcIlxuaW1wb3J0IHsgQm94LCBUeXBvZ3JhcGh5IH0gZnJvbSBcIkBycC9yZWFjdC93ZWIvbXVpL2NvcmVcIlxuaW1wb3J0IHsgQWRkSXRlbXNCdXR0b25Nb2JpbGUgfSBmcm9tIFwiLi9BZGRJdGVtc0J1dHRvblwiXG5pbXBvcnQgeyBMb2FkaW5nU3VnZ2VzdGlvbiB9IGZyb20gXCIuL0xvYWRpbmdTdWdnZXN0aW9uXCJcbmltcG9ydCB7IFdhdGNobGlzdEVtcHR5UGxhY2Vob2xkZXIgfSBmcm9tIFwiLi9XYXRjaGxpc3RFbXB0eVBsYWNlaG9sZGVyXCJcbmltcG9ydCB7IFdhdGNobGlzdFN1Z2dlc3Rpb25JdGVtTW9iaWxlIH0gZnJvbSBcIi4vV2F0Y2hsaXN0U3VnZ2VzdGlvbkl0ZW0ubW9iaWxlXCJcbmltcG9ydCB7IGdldERpc3BsYXlDYXRlZ29yaWVzIH0gZnJvbSBcIi4vV2F0Y2hsaXN0U3VnZ2VzdGlvbkxpc3RcIlxuXG50eXBlIFByb3BzID0ge1xuICBwYWdlczogQXJyYXk8V2F0Y2hsaXN0QXV0b3N1Z2dlc3RQb3N0UmVzcG9uc2U+XG4gIGluY2x1ZGVkOiBBcnJheTxzdHJpbmc+XG4gIGlzTG9hZGluZzogYm9vbGVhblxuICBvbkFkZFN1Z2dlc3Rpb25zOiAoaWRzOiBBcnJheTxzdHJpbmc+KSA9PiB2b2lkXG4gIGNhdGVnb3J5RmlsdGVyPzogc3RyaW5nXG4gIGlzUGF0Y2hpbmc/OiBib29sZWFuXG4gIGZldGNoTmV4dFBhZ2U/OiAoKSA9PiBQcm9taXNlPHVua25vd24+XG4gIGhhc01vcmU/OiBib29sZWFuXG4gIGhhc0ZpbHRlcj86IGJvb2xlYW5cbiAgd2F0Y2hsaXN0OiBXYXRjaGxpc3QgfCB1bmRlZmluZWRcbn1cblxuY29uc3QgTU9CSUxFX01FTlVfSEVJR0hUID0gMjhcblxuY29uc3QgV2F0Y2hsaXN0U3VnZ2VzdGlvbkxpc3RNb2JpbGUgPSAoe1xuICBwYWdlcyxcbiAgaW5jbHVkZWQsXG4gIGlzTG9hZGluZyxcbiAgb25BZGRTdWdnZXN0aW9ucyxcbiAgY2F0ZWdvcnlGaWx0ZXIsXG4gIGlzUGF0Y2hpbmcsXG4gIGZldGNoTmV4dFBhZ2UsXG4gIGhhc01vcmUsXG4gIGhhc0ZpbHRlcixcbiAgd2F0Y2hsaXN0LFxufTogUHJvcHMpID0+IHtcbiAgY29uc3Qge1xuICAgIHBsYW5Db21wYXJpc29uTW9kYWw6IHsgaGFuZGxlT3BlbjogcGxhbkNvbXBhcmlzb25IYW5kbGVPcGVuIH0sXG4gIH0gPSB1c2VNb2RhbCgpXG5cbiAgY29uc3Qgc3VnZ2VzdGlvbnMgPSB1c2VNZW1vKFxuICAgICgpID0+XG4gICAgICBwYWdlc1xuICAgICAgICAubWFwKGkgPT4gaS5yZXN1bHRzKVxuICAgICAgICAuZmxhdCgpXG4gICAgICAgIC5maWx0ZXIoaXNFbmhhbmNlZENxc0l0ZW1TdWdnZXN0aW9uKSxcbiAgICBbcGFnZXNdLFxuICApXG4gIGNvbnN0IFtzZWxlY3RlZFN1Z2dlc3Rpb25zLCBzZXRTZWxlY3RlZFN1Z2dlc3Rpb25zXSA9IHVzZVN0YXRlPEFycmF5PHN0cmluZz4+KFtdKVxuICBjb25zdCB7IHF1b3RhIH0gPSB1c2VBY2NvdW50KClcbiAgY29uc3QgaXNXYXRjaGxpc3RFbnRpdHlMaW1pdE1ldCA9IHVzZUlzV2F0Y2hsaXN0RW50aXR5TGltaXRNZXQoXG4gICAgcXVvdGEsXG4gICAgaW5jbHVkZWQubGVuZ3RoICsgc2VsZWN0ZWRTdWdnZXN0aW9ucy5sZW5ndGgsXG4gIClcbiAgY29uc3QgeyBkYXRhOiBwYW5lbENvbmZpZyB9ID0gdXNlUGFuZWxDb25maWcoKVxuICBjb25zdCBbY2F0ZWdvcnlGaWVsZHNdID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgY2F0ZWdvcnlNYXAgPSBnZXREaXNwbGF5Q2F0ZWdvcmllcyhwYW5lbENvbmZpZz8uZGlzY292ZXJ5UGFuZWxDYXRlZ29yaWVzID8/IFtdKVxuICAgIHJldHVybiBjYXRlZ29yeUZpbHRlclxuICAgICAgPyBbY2F0ZWdvcnlNYXBbY2F0ZWdvcnlGaWx0ZXJdLmZpZWxkcywgY2F0ZWdvcnlNYXBbY2F0ZWdvcnlGaWx0ZXJdLnRpdGxlXVxuICAgICAgOiBbW10sIHVuZGVmaW5lZF1cbiAgfSwgW2NhdGVnb3J5RmlsdGVyLCBwYW5lbENvbmZpZ10pXG5cbiAgY29uc3QgYWRkU2VsZWN0ZWRTdWdnZXN0aW9uID0gdXNlQ2FsbGJhY2soKGtleTogc3RyaW5nKSA9PiB7XG4gICAgc2V0U2VsZWN0ZWRTdWdnZXN0aW9ucyhwcmV2ID0+IFsuLi5wcmV2LCBrZXldKVxuICB9LCBbXSlcblxuICBjb25zdCByZW1vdmVTZWxlY3RlZFN1Z2dlc3Rpb24gPSB1c2VDYWxsYmFjaygoa2V5OiBzdHJpbmcpID0+IHtcbiAgICBzZXRTZWxlY3RlZFN1Z2dlc3Rpb25zKHByZXYgPT4ge1xuICAgICAgY29uc3QgZmlsdGVyZWRTdWdnZXN0aW9ucyA9IHByZXYuZmlsdGVyKHNlbGVjdGVkS2V5ID0+IHNlbGVjdGVkS2V5ICE9PSBrZXkpXG4gICAgICByZXR1cm4gZmlsdGVyZWRTdWdnZXN0aW9uc1xuICAgIH0pXG4gIH0sIFtdKVxuXG4gIGNvbnN0IG51bU9mUmVzdWx0cyA9IHBhZ2VzWzBdPy5jb3VudCA/PyAwXG4gIGNvbnN0IGhhc1Jlc3VsdHMgPSAhKCFpc0xvYWRpbmcgJiYgc3VnZ2VzdGlvbnMubGVuZ3RoID09PSAwKVxuICByZXR1cm4gKFxuICAgIDxCb3ggc3g9e3sgd2lkdGg6IFwiMTAwJVwiLCBoZWlnaHQ6IFwiMTAwJVwiIH19PlxuICAgICAgPEJveFxuICAgICAgICBzeD17e1xuICAgICAgICAgIHBvc2l0aW9uOiBcInN0aWNreVwiLFxuICAgICAgICAgIGhlaWdodDogTU9CSUxFX01FTlVfSEVJR0hULFxuICAgICAgICAgIGp1c3RpZnlDb250ZW50OiBcInNwYWNlLWJldHdlZW5cIixcbiAgICAgICAgICBhbGlnbkl0ZW1zOiBcImVuZFwiLFxuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJzdXJmYWNlLm1haW5cIixcbiAgICAgICAgICBwdDogMCxcbiAgICAgICAgICBwbDogMixcbiAgICAgICAgICB6SW5kZXg6IDEsXG4gICAgICAgIH19XG4gICAgICA+XG4gICAgICAgIDxCb3hcbiAgICAgICAgICBzeD17e1xuICAgICAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgICAgICAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLFxuICAgICAgICAgICAgbWluSGVpZ2h0OiAzMyxcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgPFR5cG9ncmFwaHkgY29sb3I9XCJncmV5LjMwMFwiIHZhcmlhbnQ9XCJjYXB0aW9uXCIgc3g9e3sgZmxleEdyb3c6IDEsIHdoaXRlU3BhY2U6IFwibm93cmFwXCIgfX0+XG4gICAgICAgICAgICB7aXNMb2FkaW5nXG4gICAgICAgICAgICAgID8gXCJcIlxuICAgICAgICAgICAgICA6IGBTaG93aW5nICR7Zm9ybWF0TnVtYmVyKG51bU9mUmVzdWx0cyl9IGl0ZW0ke251bU9mUmVzdWx0cyA+IDEgPyBcInNcIiA6IFwiXCJ9YH1cbiAgICAgICAgICA8L1R5cG9ncmFwaHk+XG4gICAgICAgICAgeyFpc0xvYWRpbmcgPyAoXG4gICAgICAgICAgICA8QWRkSXRlbXNCdXR0b25Nb2JpbGVcbiAgICAgICAgICAgICAgYW1vdW50PXtzZWxlY3RlZFN1Z2dlc3Rpb25zLmxlbmd0aH1cbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpc1dhdGNobGlzdEVudGl0eUxpbWl0TWV0KSB7XG4gICAgICAgICAgICAgICAgICBwbGFuQ29tcGFyaXNvbkhhbmRsZU9wZW4oV0FUQ0hMSVNUX0VOVElUSUVTX0ZFQVRVUkVfTkFNRSlcbiAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZFN1Z2dlc3Rpb25zKFtdKVxuICAgICAgICAgICAgICAgIG9uQWRkU3VnZ2VzdGlvbnMoc2VsZWN0ZWRTdWdnZXN0aW9ucylcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgbG9hZGluZz17aXNQYXRjaGluZ31cbiAgICAgICAgICAgICAgd2F0Y2hsaXN0SXRlbXNDb3VudD17d2F0Y2hsaXN0Py5pdGVtcy5sZW5ndGggPz8gMH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgIDwvQm94PlxuICAgICAgPC9Cb3g+XG4gICAgICB7IWhhc1Jlc3VsdHMgPyAoXG4gICAgICAgIDxCb3ggc3g9e3sgZGlzcGxheTogXCJmbGV4XCIsIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsIGhlaWdodDogXCJjYWxjKDEwMCUgLSA1OHB4KVwiIH19PlxuICAgICAgICAgIDxXYXRjaGxpc3RFbXB0eVBsYWNlaG9sZGVyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj17XG4gICAgICAgICAgICAgIFwiV2UgY291bGRuJ3QgZmluZCBhbnkgcmVzdWx0cyB0aGF0IG1hdGNoIHlvdXIgc2VhcmNoIGNyaXRlcmlhLiBQbGVhc2UgdHJ5IGFnYWluIHdpdGggZGlmZmVyZW50IGtleXdvcmRzLlwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9Cb3g+XG4gICAgICApIDogbnVsbH1cblxuICAgICAge2hhc1Jlc3VsdHMgPyAoXG4gICAgICAgIGlzTG9hZGluZyA/IChcbiAgICAgICAgICBuZXcgQXJyYXkoMjApLmZpbGwoMCkubWFwKChfLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIDxMb2FkaW5nU3VnZ2VzdGlvbiBrZXk9e2luZGV4fSBleHRyYUNvbHVtbnM9ezB9IC8+XG4gICAgICAgICAgfSlcbiAgICAgICAgKSA6IChcbiAgICAgICAgICA8SW5maW5pdGVMaXN0XG4gICAgICAgICAgICBpdGVtcz17c3VnZ2VzdGlvbnMubWFwKHMgPT4gKHsgLi4ucywgaWQ6IHMuaWQgPz8gcy5rZXkgfSkpfVxuICAgICAgICAgICAgZmV0Y2hOZXh0UGFnZT17ZmV0Y2hOZXh0UGFnZX1cbiAgICAgICAgICAgIGhhc01vcmU9e2hhc01vcmV9XG4gICAgICAgICAgICByZW5kZXJJdGVtPXtzdWdnZXN0aW9uID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8V2F0Y2hsaXN0U3VnZ2VzdGlvbkl0ZW1Nb2JpbGVcbiAgICAgICAgICAgICAgICAgIGhhc0ZpbHRlcj17aGFzRmlsdGVyfVxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzUGF0Y2hpbmd9XG4gICAgICAgICAgICAgICAgICBpc0xvYWRpbmc9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAga2V5PXtzdWdnZXN0aW9uLmtleX1cbiAgICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb249e3N1Z2dlc3Rpb259XG4gICAgICAgICAgICAgICAgICBzZWxlY3RlZD17XG4gICAgICAgICAgICAgICAgICAgIGluY2x1ZGVkLmluY2x1ZGVzKHN1Z2dlc3Rpb24ua2V5KSB8fFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFN1Z2dlc3Rpb25zLmluY2x1ZGVzKHN1Z2dlc3Rpb24ua2V5KVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaW5jbHVkZWQ9e2luY2x1ZGVkLmluY2x1ZGVzKHN1Z2dlc3Rpb24ua2V5KX1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoa2V5LCB2YWx1ZSkgPT5cbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPyBhZGRTZWxlY3RlZFN1Z2dlc3Rpb24oa2V5KSA6IHJlbW92ZVNlbGVjdGVkU3VnZ2VzdGlvbihrZXkpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBjYXRlZ29yeUZpbHRlcj17Y2F0ZWdvcnlGaWx0ZXJ9XG4gICAgICAgICAgICAgICAgICBmaWVsZHM9e2NhdGVnb3J5RmllbGRzfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgLz5cbiAgICAgICAgKVxuICAgICAgKSA6IG51bGx9XG4gICAgPC9Cb3g+XG4gIClcbn1cblxuZXhwb3J0IHsgV2F0Y2hsaXN0U3VnZ2VzdGlvbkxpc3RNb2JpbGUgfVxuIl0sIm5hbWVzIjpbIldhdGNobGlzdFN1Z2dlc3Rpb25MaXN0TW9iaWxlIiwiTU9CSUxFX01FTlVfSEVJR0hUIiwicGFnZXMiLCJpbmNsdWRlZCIsImlzTG9hZGluZyIsIm9uQWRkU3VnZ2VzdGlvbnMiLCJjYXRlZ29yeUZpbHRlciIsImlzUGF0Y2hpbmciLCJmZXRjaE5leHRQYWdlIiwiaGFzTW9yZSIsImhhc0ZpbHRlciIsIndhdGNobGlzdCIsInBsYW5Db21wYXJpc29uTW9kYWwiLCJoYW5kbGVPcGVuIiwicGxhbkNvbXBhcmlzb25IYW5kbGVPcGVuIiwidXNlTW9kYWwiLCJzdWdnZXN0aW9ucyIsInVzZU1lbW8iLCJtYXAiLCJpIiwicmVzdWx0cyIsImZsYXQiLCJmaWx0ZXIiLCJpc0VuaGFuY2VkQ3FzSXRlbVN1Z2dlc3Rpb24iLCJzZWxlY3RlZFN1Z2dlc3Rpb25zIiwic2V0U2VsZWN0ZWRTdWdnZXN0aW9ucyIsInVzZVN0YXRlIiwicXVvdGEiLCJ1c2VBY2NvdW50IiwiaXNXYXRjaGxpc3RFbnRpdHlMaW1pdE1ldCIsInVzZUlzV2F0Y2hsaXN0RW50aXR5TGltaXRNZXQiLCJsZW5ndGgiLCJkYXRhIiwicGFuZWxDb25maWciLCJ1c2VQYW5lbENvbmZpZyIsImNhdGVnb3J5RmllbGRzIiwiY2F0ZWdvcnlNYXAiLCJnZXREaXNwbGF5Q2F0ZWdvcmllcyIsImRpc2NvdmVyeVBhbmVsQ2F0ZWdvcmllcyIsImZpZWxkcyIsInRpdGxlIiwidW5kZWZpbmVkIiwiYWRkU2VsZWN0ZWRTdWdnZXN0aW9uIiwidXNlQ2FsbGJhY2siLCJrZXkiLCJwcmV2IiwicmVtb3ZlU2VsZWN0ZWRTdWdnZXN0aW9uIiwiZmlsdGVyZWRTdWdnZXN0aW9ucyIsInNlbGVjdGVkS2V5IiwibnVtT2ZSZXN1bHRzIiwiY291bnQiLCJoYXNSZXN1bHRzIiwiQm94Iiwic3giLCJ3aWR0aCIsImhlaWdodCIsInBvc2l0aW9uIiwianVzdGlmeUNvbnRlbnQiLCJhbGlnbkl0ZW1zIiwiYmFja2dyb3VuZENvbG9yIiwicHQiLCJwbCIsInpJbmRleCIsImRpc3BsYXkiLCJtaW5IZWlnaHQiLCJUeXBvZ3JhcGh5IiwiY29sb3IiLCJ2YXJpYW50IiwiZmxleEdyb3ciLCJ3aGl0ZVNwYWNlIiwiZm9ybWF0TnVtYmVyIiwiQWRkSXRlbXNCdXR0b25Nb2JpbGUiLCJhbW91bnQiLCJvbkNsaWNrIiwiV0FUQ0hMSVNUX0VOVElUSUVTX0ZFQVRVUkVfTkFNRSIsImxvYWRpbmciLCJ3YXRjaGxpc3RJdGVtc0NvdW50IiwiaXRlbXMiLCJXYXRjaGxpc3RFbXB0eVBsYWNlaG9sZGVyIiwicGxhY2Vob2xkZXIiLCJBcnJheSIsImZpbGwiLCJfIiwiaW5kZXgiLCJMb2FkaW5nU3VnZ2VzdGlvbiIsImV4dHJhQ29sdW1ucyIsIkluZmluaXRlTGlzdCIsInMiLCJpZCIsInJlbmRlckl0ZW0iLCJzdWdnZXN0aW9uIiwiV2F0Y2hsaXN0U3VnZ2VzdGlvbkl0ZW1Nb2JpbGUiLCJkaXNhYmxlZCIsInNlbGVjdGVkIiwiaW5jbHVkZXMiLCJvbkNoYW5nZSIsInZhbHVlIl0sInJhbmdlTWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7IiwibWFwcGluZ3MiOiI7Ozs7K0JBa0xTQTs7O2VBQUFBOzs7O3VCQWxMc0M7MEJBRUM7dUJBQ25CO3VCQUNnQjsyQkFDbEI7c0NBQ0k7NEJBSXhCO3FDQUNzQjs0QkFDSjtzQkFDTztnQ0FDSzttQ0FDSDsyQ0FDUTsrQ0FDSTt5Q0FDVDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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