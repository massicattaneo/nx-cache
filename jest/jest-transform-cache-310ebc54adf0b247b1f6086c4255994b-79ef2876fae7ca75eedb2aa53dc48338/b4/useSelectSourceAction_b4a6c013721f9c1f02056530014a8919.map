{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/common/source-selector/src/hooks/useSelectSourceAction.ts"],"sourcesContent":["import { useCallback } from \"react\"\nimport { useFlags } from \"launchdarkly-react-client-sdk\"\nimport { SourceSelectorSubmission } from \"@rp/react/tanstack-api/file\"\nimport { getlocalOverrideFlags } from \"@rp/react/web/common/hooks\"\nimport { useModal } from \"@rp/react/web/common/providers\"\nimport { SourceSelectorFeatureFlags } from \"../sourceSelector.types\"\n\ntype UseSelectSourceActionProps = {\n  defaultAction: () => void\n  initialState?: SourceSelectorSubmission\n  applyCallback: (sourceSelectionSubmission: SourceSelectorSubmission) => void\n}\n\nfunction useSelectSourceAction({\n  defaultAction,\n  initialState,\n  applyCallback,\n}: UseSelectSourceActionProps) {\n  const { webFeEnableSourceSelectorModal } = useFlags<SourceSelectorFeatureFlags>()\n\n  const enableSourceSelectorModal = getlocalOverrideFlags(\n    \"webFeEnableSourceSelectorModal\",\n    webFeEnableSourceSelectorModal,\n  )\n\n  const {\n    selectSourceModal: { handleOpen: openSelectSourceModal, handleClose: closeSelectSourceModal },\n  } = useModal()\n\n  const handleAction = useCallback(() => {\n    if (enableSourceSelectorModal) {\n      openSelectSourceModal({\n        initialState,\n        applyCallback: (sourceSelectionSubmission: SourceSelectorSubmission) => {\n          applyCallback(sourceSelectionSubmission)\n          closeSelectSourceModal()\n        },\n      })\n    } else {\n      defaultAction()\n    }\n  }, [\n    enableSourceSelectorModal,\n    openSelectSourceModal,\n    initialState,\n    applyCallback,\n    closeSelectSourceModal,\n    defaultAction,\n  ])\n\n  return handleAction\n}\n\nexport { useSelectSourceAction }\nexport type { UseSelectSourceActionProps }\n"],"names":["useSelectSourceAction","defaultAction","initialState","applyCallback","webFeEnableSourceSelectorModal","useFlags","enableSourceSelectorModal","getlocalOverrideFlags","selectSourceModal","handleOpen","openSelectSourceModal","handleClose","closeSelectSourceModal","useModal","handleAction","useCallback","sourceSelectionSubmission"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAqDSA;;;eAAAA;;;uBArDmB;4CACH;uBAEa;2BACb;AASzB,SAASA,sBAAsB,EAC7BC,aAAa,EACbC,YAAY,EACZC,aAAa,EACc;IAC3B,MAAM,EAAEC,8BAA8B,EAAE,GAAGC,IAAAA,oCAAQ;IAEnD,MAAMC,4BAA4BC,IAAAA,4BAAqB,EACrD,kCACAH;IAGF,MAAM,EACJI,mBAAmB,EAAEC,YAAYC,qBAAqB,EAAEC,aAAaC,sBAAsB,EAAE,EAC9F,GAAGC,IAAAA,mBAAQ;IAEZ,MAAMC,eAAeC,IAAAA,kBAAW,EAAC;QAC/B,IAAIT,2BAA2B;YAC7BI,sBAAsB;gBACpBR;gBACAC,eAAe,CAACa;oBACdb,cAAca;oBACdJ;gBACF;YACF;QACF,OAAO;YACLX;QACF;IACF,GAAG;QACDK;QACAI;QACAR;QACAC;QACAS;QACAX;KACD;IAED,OAAOa;AACT"}