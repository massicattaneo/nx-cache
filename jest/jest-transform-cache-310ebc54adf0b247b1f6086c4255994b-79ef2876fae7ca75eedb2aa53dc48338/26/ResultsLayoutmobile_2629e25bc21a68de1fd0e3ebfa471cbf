4d0bb6abd3f63835db92c46923110890
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "ResultsLayoutMobile", {
    enumerable: true,
    get: function() {
        return ResultsLayoutMobile;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
const _userdataqueries = require("@rp/react/tanstack-api/user-data-queries");
const _basecomponents = require("@rp/react/web/common/base-components");
const _compositecomponents = require("@rp/react/web/common/composite-components");
const _hooks = require("@rp/react/web/common/hooks");
const _layout = require("@rp/react/web/common/layout");
const _providers = require("@rp/react/web/common/providers");
const _resultsstorycard = require("@rp/react/web/common/results-story-card");
const _searchautosuggestinput = require("@rp/react/web/common/search-autosuggest-input");
const _cqsquerybar = require("@rp/react/web/cqs-query-bar");
const _documentviewer = require("@rp/react/web/document-viewer");
const _core = require("@rp/react/web/mui/core");
const _useHandleCqsChange = require("../../hooks/useHandleCqsChange");
const _HomeHeadermobile = require("../Home/HomeHeader.mobile");
const ResultsLayoutMobile = ({ handleOnChange, handleOnExclude, expression, name, saveStatus, onAddToWatchlist, isPublic, onHandleOpenModal, editable = false })=>{
    const [{ document }] = (0, _hooks.useHashParams)();
    const handleChangeQuery = (0, _useHandleCqsChange.useHandleCqsChange)();
    const { queryBar, savedQuery } = (0, _providers.useQueryContext)();
    const [isOpen, setIsOpen] = (0, _react.useState)(false);
    const { isIOS } = (0, _hooks.useDeviceInfo)();
    const isSaved = saveStatus === "saved";
    const title = isSaved ? name : "Untitled Search";
    const selectedItems = expression ? (0, _userdataqueries.getExpressionIds)(expression, {
        format: "suggestionId",
        includeMacros: true
    }) : [];
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)(_jsxruntime.Fragment, {
        children: [
            document ? /*#__PURE__*/ (0, _jsxruntime.jsx)(_HomeHeadermobile.HomeHeaderMobile, {
                showSuggestionBar: true,
                isOpenDocument: true
            }) : /*#__PURE__*/ (0, _jsxruntime.jsxs)(_basecomponents.HideOnScroll, {
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_layout.FollowMobileHeader, {
                        name: title,
                        isPublic: isPublic,
                        savedQuery: savedQuery,
                        editable: editable
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_cqsquerybar.CqsQueryBar, {
                        searchActions: {
                            setIsOpen
                        },
                        query: queryBar,
                        onHandleOpenModal: onHandleOpenModal
                    })
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_documentviewer.DocumentViewerPage, {
                backTitle: "Back to Results",
                expression: expression,
                onChange: handleOnChange,
                onExclude: handleOnExclude,
                rpjsonHeaderOffset: 0,
                contentContainerProps: {
                    disableGutters: true
                },
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_core.Grid, {
                    container: true,
                    pb: _compositecomponents.MOBILE_PAGE_B_PADDING,
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_core.Grid, {
                        item: true,
                        xs: 12,
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_resultsstorycard.StoryCardResults, {
                            onAddToWatchlist: onAddToWatchlist
                        }, savedQuery.query.scope)
                    })
                })
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_searchautosuggestinput.AutoCompleteMobile, {
                onClose: ()=>{
                    /**
           * HACK for IOS browser
           * we should find a proper way of fixing this defect
           * https://ravenpack.atlassian.net/browse/RPX-2159
           */ if (isIOS) {
                        setTimeout(()=>window.scrollTo({
                                top: 0
                            }));
                    }
                },
                excludeQueryTypes: [
                    "savedSearch"
                ],
                selectedItems: selectedItems,
                onChange: handleChangeQuery,
                searchActions: {
                    isOpen,
                    setIsOpen
                }
            })
        ]
    });
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tY2F0dGFuZW8vd29ya3NwYWNlL2Zyb250ZW5kL2FwcHMvY2xpZW50LXdlYi9zcmMvYXBwL3BhZ2VzL1Jlc3VsdHMvUmVzdWx0c0xheW91dC5tb2JpbGUudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCJcbmltcG9ydCB7IENxc0l0ZW0sIENxc1NhdmVkU3RhdHVzIH0gZnJvbSBcIkBycC9jb21tb24vYXBpLXR5cGVzXCJcbmltcG9ydCB7IFdhdGNobGlzdCB9IGZyb20gXCJAcnAvY29tbW9uL2FwaS10eXBlc1wiXG5pbXBvcnQgeyBScHFsRmlsdGVyIH0gZnJvbSBcIkBycC9jb21tb24vYXBpLXR5cGVzXCJcbmltcG9ydCB7IGdldEV4cHJlc3Npb25JZHMgfSBmcm9tIFwiQHJwL3JlYWN0L3RhbnN0YWNrLWFwaS91c2VyLWRhdGEtcXVlcmllc1wiXG5pbXBvcnQgeyBIaWRlT25TY3JvbGwgfSBmcm9tIFwiQHJwL3JlYWN0L3dlYi9jb21tb24vYmFzZS1jb21wb25lbnRzXCJcbmltcG9ydCB7XG4gIEhhbmRsZU9wZW5Nb2RhbFByb3BzLFxuICBNT0JJTEVfUEFHRV9CX1BBRERJTkcsXG59IGZyb20gXCJAcnAvcmVhY3Qvd2ViL2NvbW1vbi9jb21wb3NpdGUtY29tcG9uZW50c1wiXG5pbXBvcnQgeyB1c2VIYXNoUGFyYW1zIH0gZnJvbSBcIkBycC9yZWFjdC93ZWIvY29tbW9uL2hvb2tzXCJcbmltcG9ydCB7IHVzZURldmljZUluZm8gfSBmcm9tIFwiQHJwL3JlYWN0L3dlYi9jb21tb24vaG9va3NcIlxuaW1wb3J0IHsgRm9sbG93TW9iaWxlSGVhZGVyIH0gZnJvbSBcIkBycC9yZWFjdC93ZWIvY29tbW9uL2xheW91dFwiXG5pbXBvcnQgeyB1c2VRdWVyeUNvbnRleHQgfSBmcm9tIFwiQHJwL3JlYWN0L3dlYi9jb21tb24vcHJvdmlkZXJzXCJcbmltcG9ydCB7IFN0b3J5Q2FyZFJlc3VsdHMgfSBmcm9tIFwiQHJwL3JlYWN0L3dlYi9jb21tb24vcmVzdWx0cy1zdG9yeS1jYXJkXCJcbmltcG9ydCB7IEF1dG9Db21wbGV0ZU1vYmlsZSB9IGZyb20gXCJAcnAvcmVhY3Qvd2ViL2NvbW1vbi9zZWFyY2gtYXV0b3N1Z2dlc3QtaW5wdXRcIlxuaW1wb3J0IHsgQ3FzUXVlcnlCYXIgfSBmcm9tIFwiQHJwL3JlYWN0L3dlYi9jcXMtcXVlcnktYmFyXCJcbmltcG9ydCB7IERvY3VtZW50Vmlld2VyUGFnZSB9IGZyb20gXCJAcnAvcmVhY3Qvd2ViL2RvY3VtZW50LXZpZXdlclwiXG5pbXBvcnQgeyBHcmlkIH0gZnJvbSBcIkBycC9yZWFjdC93ZWIvbXVpL2NvcmVcIlxuaW1wb3J0IHsgdXNlSGFuZGxlQ3FzQ2hhbmdlIH0gZnJvbSBcIi4uLy4uL2hvb2tzL3VzZUhhbmRsZUNxc0NoYW5nZVwiXG5pbXBvcnQgeyBIb21lSGVhZGVyTW9iaWxlIH0gZnJvbSBcIi4uL0hvbWUvSG9tZUhlYWRlci5tb2JpbGVcIlxuXG50eXBlIFByb3BzID0ge1xuICBoYW5kbGVPbkNoYW5nZTogKGl0ZW06IENxc0l0ZW0pID0+IHZvaWRcbiAgaGFuZGxlT25FeGNsdWRlOiAoaXRlbTogQ3FzSXRlbSkgPT4gdm9pZFxuICBleHByZXNzaW9uOiBScHFsRmlsdGVyIHwgdW5kZWZpbmVkXG4gIG5hbWU/OiBzdHJpbmdcbiAgc2F2ZVN0YXR1cz86IENxc1NhdmVkU3RhdHVzXG4gIG9uQWRkVG9XYXRjaGxpc3Q/OiAod2F0Y2hsaXN0OiBXYXRjaGxpc3QpID0+IHZvaWRcbiAgb25IYW5kbGVPcGVuTW9kYWw6IEhhbmRsZU9wZW5Nb2RhbFByb3BzXG4gIGVkaXRhYmxlOiBib29sZWFuIHwgdW5kZWZpbmVkXG4gIGlzUHVibGljPzogYm9vbGVhblxufVxuXG5jb25zdCBSZXN1bHRzTGF5b3V0TW9iaWxlID0gKHtcbiAgaGFuZGxlT25DaGFuZ2UsXG4gIGhhbmRsZU9uRXhjbHVkZSxcbiAgZXhwcmVzc2lvbixcbiAgbmFtZSxcbiAgc2F2ZVN0YXR1cyxcbiAgb25BZGRUb1dhdGNobGlzdCxcbiAgaXNQdWJsaWMsXG4gIG9uSGFuZGxlT3Blbk1vZGFsLFxuICBlZGl0YWJsZSA9IGZhbHNlLFxufTogUHJvcHMpID0+IHtcbiAgY29uc3QgW3sgZG9jdW1lbnQgfV0gPSB1c2VIYXNoUGFyYW1zKClcbiAgY29uc3QgaGFuZGxlQ2hhbmdlUXVlcnkgPSB1c2VIYW5kbGVDcXNDaGFuZ2UoKVxuICBjb25zdCB7IHF1ZXJ5QmFyLCBzYXZlZFF1ZXJ5IH0gPSB1c2VRdWVyeUNvbnRleHQoKVxuICBjb25zdCBbaXNPcGVuLCBzZXRJc09wZW5dID0gdXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IHsgaXNJT1MgfSA9IHVzZURldmljZUluZm8oKVxuXG4gIGNvbnN0IGlzU2F2ZWQgPSBzYXZlU3RhdHVzID09PSBcInNhdmVkXCJcbiAgY29uc3QgdGl0bGUgPSBpc1NhdmVkID8gbmFtZSA6IFwiVW50aXRsZWQgU2VhcmNoXCJcbiAgY29uc3Qgc2VsZWN0ZWRJdGVtczogQXJyYXk8c3RyaW5nPiA9IGV4cHJlc3Npb25cbiAgICA/IGdldEV4cHJlc3Npb25JZHMoZXhwcmVzc2lvbiwgeyBmb3JtYXQ6IFwic3VnZ2VzdGlvbklkXCIsIGluY2x1ZGVNYWNyb3M6IHRydWUgfSlcbiAgICA6IFtdXG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAge2RvY3VtZW50ID8gKFxuICAgICAgICA8SG9tZUhlYWRlck1vYmlsZSBzaG93U3VnZ2VzdGlvbkJhciBpc09wZW5Eb2N1bWVudCAvPlxuICAgICAgKSA6IChcbiAgICAgICAgPEhpZGVPblNjcm9sbD5cbiAgICAgICAgICA8Rm9sbG93TW9iaWxlSGVhZGVyXG4gICAgICAgICAgICBuYW1lPXt0aXRsZX1cbiAgICAgICAgICAgIGlzUHVibGljPXtpc1B1YmxpY31cbiAgICAgICAgICAgIHNhdmVkUXVlcnk9e3NhdmVkUXVlcnl9XG4gICAgICAgICAgICBlZGl0YWJsZT17ZWRpdGFibGV9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8Q3FzUXVlcnlCYXJcbiAgICAgICAgICAgIHNlYXJjaEFjdGlvbnM9e3sgc2V0SXNPcGVuIH19XG4gICAgICAgICAgICBxdWVyeT17cXVlcnlCYXJ9XG4gICAgICAgICAgICBvbkhhbmRsZU9wZW5Nb2RhbD17b25IYW5kbGVPcGVuTW9kYWx9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9IaWRlT25TY3JvbGw+XG4gICAgICApfVxuXG4gICAgICA8RG9jdW1lbnRWaWV3ZXJQYWdlXG4gICAgICAgIGJhY2tUaXRsZT1cIkJhY2sgdG8gUmVzdWx0c1wiXG4gICAgICAgIGV4cHJlc3Npb249e2V4cHJlc3Npb259XG4gICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVPbkNoYW5nZX1cbiAgICAgICAgb25FeGNsdWRlPXtoYW5kbGVPbkV4Y2x1ZGV9XG4gICAgICAgIHJwanNvbkhlYWRlck9mZnNldD17MH1cbiAgICAgICAgY29udGVudENvbnRhaW5lclByb3BzPXt7XG4gICAgICAgICAgZGlzYWJsZUd1dHRlcnM6IHRydWUsXG4gICAgICAgIH19XG4gICAgICA+XG4gICAgICAgIDxHcmlkIGNvbnRhaW5lciBwYj17TU9CSUxFX1BBR0VfQl9QQURESU5HfT5cbiAgICAgICAgICA8R3JpZCBpdGVtIHhzPXsxMn0+XG4gICAgICAgICAgICA8U3RvcnlDYXJkUmVzdWx0cyBrZXk9e3NhdmVkUXVlcnkucXVlcnkuc2NvcGV9IG9uQWRkVG9XYXRjaGxpc3Q9e29uQWRkVG9XYXRjaGxpc3R9IC8+XG4gICAgICAgICAgPC9HcmlkPlxuICAgICAgICA8L0dyaWQ+XG4gICAgICA8L0RvY3VtZW50Vmlld2VyUGFnZT5cbiAgICAgIDxBdXRvQ29tcGxldGVNb2JpbGVcbiAgICAgICAgb25DbG9zZT17KCkgPT4ge1xuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEhBQ0sgZm9yIElPUyBicm93c2VyXG4gICAgICAgICAgICogd2Ugc2hvdWxkIGZpbmQgYSBwcm9wZXIgd2F5IG9mIGZpeGluZyB0aGlzIGRlZmVjdFxuICAgICAgICAgICAqIGh0dHBzOi8vcmF2ZW5wYWNrLmF0bGFzc2lhbi5uZXQvYnJvd3NlL1JQWC0yMTU5XG4gICAgICAgICAgICovXG4gICAgICAgICAgaWYgKGlzSU9TKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHdpbmRvdy5zY3JvbGxUbyh7IHRvcDogMCB9KSlcbiAgICAgICAgICB9XG4gICAgICAgIH19XG4gICAgICAgIGV4Y2x1ZGVRdWVyeVR5cGVzPXtbXCJzYXZlZFNlYXJjaFwiXX1cbiAgICAgICAgc2VsZWN0ZWRJdGVtcz17c2VsZWN0ZWRJdGVtc31cbiAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZVF1ZXJ5fVxuICAgICAgICBzZWFyY2hBY3Rpb25zPXt7IGlzT3Blbiwgc2V0SXNPcGVuIH19XG4gICAgICAvPlxuICAgIDwvPlxuICApXG59XG5cbmV4cG9ydCB7IFJlc3VsdHNMYXlvdXRNb2JpbGUgfVxuIl0sIm5hbWVzIjpbIlJlc3VsdHNMYXlvdXRNb2JpbGUiLCJoYW5kbGVPbkNoYW5nZSIsImhhbmRsZU9uRXhjbHVkZSIsImV4cHJlc3Npb24iLCJuYW1lIiwic2F2ZVN0YXR1cyIsIm9uQWRkVG9XYXRjaGxpc3QiLCJpc1B1YmxpYyIsIm9uSGFuZGxlT3Blbk1vZGFsIiwiZWRpdGFibGUiLCJkb2N1bWVudCIsInVzZUhhc2hQYXJhbXMiLCJoYW5kbGVDaGFuZ2VRdWVyeSIsInVzZUhhbmRsZUNxc0NoYW5nZSIsInF1ZXJ5QmFyIiwic2F2ZWRRdWVyeSIsInVzZVF1ZXJ5Q29udGV4dCIsImlzT3BlbiIsInNldElzT3BlbiIsInVzZVN0YXRlIiwiaXNJT1MiLCJ1c2VEZXZpY2VJbmZvIiwiaXNTYXZlZCIsInRpdGxlIiwic2VsZWN0ZWRJdGVtcyIsImdldEV4cHJlc3Npb25JZHMiLCJmb3JtYXQiLCJpbmNsdWRlTWFjcm9zIiwiSG9tZUhlYWRlck1vYmlsZSIsInNob3dTdWdnZXN0aW9uQmFyIiwiaXNPcGVuRG9jdW1lbnQiLCJIaWRlT25TY3JvbGwiLCJGb2xsb3dNb2JpbGVIZWFkZXIiLCJDcXNRdWVyeUJhciIsInNlYXJjaEFjdGlvbnMiLCJxdWVyeSIsIkRvY3VtZW50Vmlld2VyUGFnZSIsImJhY2tUaXRsZSIsIm9uQ2hhbmdlIiwib25FeGNsdWRlIiwicnBqc29uSGVhZGVyT2Zmc2V0IiwiY29udGVudENvbnRhaW5lclByb3BzIiwiZGlzYWJsZUd1dHRlcnMiLCJHcmlkIiwiY29udGFpbmVyIiwicGIiLCJNT0JJTEVfUEFHRV9CX1BBRERJTkciLCJpdGVtIiwieHMiLCJTdG9yeUNhcmRSZXN1bHRzIiwic2NvcGUiLCJBdXRvQ29tcGxldGVNb2JpbGUiLCJvbkNsb3NlIiwic2V0VGltZW91dCIsIndpbmRvdyIsInNjcm9sbFRvIiwidG9wIiwiZXhjbHVkZVF1ZXJ5VHlwZXMiXSwicmFuZ2VNYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7IiwibWFwcGluZ3MiOiI7Ozs7K0JBaUhTQTs7O2VBQUFBOzs7O3VCQWpIZ0I7aUNBSVE7Z0NBQ0o7cUNBSXRCO3VCQUN1Qjt3QkFFSzsyQkFDSDtrQ0FDQzt3Q0FDRTs2QkFDUDtnQ0FDTztzQkFDZDtvQ0FDYztrQ0FDRjtBQWNqQyxNQUFNQSxzQkFBc0IsQ0FBQyxFQUMzQkMsY0FBYyxFQUNkQyxlQUFlLEVBQ2ZDLFVBQVUsRUFDVkMsSUFBSSxFQUNKQyxVQUFVLEVBQ1ZDLGdCQUFnQixFQUNoQkMsUUFBUSxFQUNSQyxpQkFBaUIsRUFDakJDLFdBQVcsS0FBSyxFQUNWO0lBQ04sTUFBTSxDQUFDLEVBQUVDLFFBQVEsRUFBRSxDQUFDLEdBQUdDLElBQUFBLG9CQUFhO0lBQ3BDLE1BQU1DLG9CQUFvQkMsSUFBQUEsc0NBQWtCO0lBQzVDLE1BQU0sRUFBRUMsUUFBUSxFQUFFQyxVQUFVLEVBQUUsR0FBR0MsSUFBQUEsMEJBQWU7SUFDaEQsTUFBTSxDQUFDQyxRQUFRQyxVQUFVLEdBQUdDLElBQUFBLGVBQVEsRUFBQztJQUNyQyxNQUFNLEVBQUVDLEtBQUssRUFBRSxHQUFHQyxJQUFBQSxvQkFBYTtJQUUvQixNQUFNQyxVQUFVakIsZUFBZTtJQUMvQixNQUFNa0IsUUFBUUQsVUFBVWxCLE9BQU87SUFDL0IsTUFBTW9CLGdCQUErQnJCLGFBQ2pDc0IsSUFBQUEsaUNBQWdCLEVBQUN0QixZQUFZO1FBQUV1QixRQUFRO1FBQWdCQyxlQUFlO0lBQUssS0FDM0UsRUFBRTtJQUVOLHFCQUNFOztZQUNHakIseUJBQ0MscUJBQUNrQixrQ0FBZ0I7Z0JBQUNDLGlCQUFpQjtnQkFBQ0MsY0FBYzsrQkFFbEQsc0JBQUNDLDRCQUFZOztrQ0FDWCxxQkFBQ0MsMEJBQWtCO3dCQUNqQjVCLE1BQU1tQjt3QkFDTmhCLFVBQVVBO3dCQUNWUSxZQUFZQTt3QkFDWk4sVUFBVUE7O2tDQUVaLHFCQUFDd0Isd0JBQVc7d0JBQ1ZDLGVBQWU7NEJBQUVoQjt3QkFBVTt3QkFDM0JpQixPQUFPckI7d0JBQ1BOLG1CQUFtQkE7Ozs7MEJBS3pCLHFCQUFDNEIsa0NBQWtCO2dCQUNqQkMsV0FBVTtnQkFDVmxDLFlBQVlBO2dCQUNabUMsVUFBVXJDO2dCQUNWc0MsV0FBV3JDO2dCQUNYc0Msb0JBQW9CO2dCQUNwQkMsdUJBQXVCO29CQUNyQkMsZ0JBQWdCO2dCQUNsQjswQkFFQSxjQUFBLHFCQUFDQyxVQUFJO29CQUFDQyxTQUFTO29CQUFDQyxJQUFJQywwQ0FBcUI7OEJBQ3ZDLGNBQUEscUJBQUNILFVBQUk7d0JBQUNJLElBQUk7d0JBQUNDLElBQUk7a0NBQ2IsY0FBQSxxQkFBQ0Msa0NBQWdCOzRCQUE4QjNDLGtCQUFrQkE7MkJBQTFDUyxXQUFXb0IsS0FBSyxDQUFDZSxLQUFLOzs7OzBCQUluRCxxQkFBQ0MsMENBQWtCO2dCQUNqQkMsU0FBUztvQkFDUDs7OztXQUlDLEdBQ0QsSUFBSWhDLE9BQU87d0JBQ1RpQyxXQUFXLElBQU1DLE9BQU9DLFFBQVEsQ0FBQztnQ0FBRUMsS0FBSzs0QkFBRTtvQkFDNUM7Z0JBQ0Y7Z0JBQ0FDLG1CQUFtQjtvQkFBQztpQkFBYztnQkFDbENqQyxlQUFlQTtnQkFDZmMsVUFBVTFCO2dCQUNWc0IsZUFBZTtvQkFBRWpCO29CQUFRQztnQkFBVTs7OztBQUkzQyJ9