6459c838c541e37b5f19792f10b4ef22
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    parseMetadata2: function() {
        return parseMetadata2;
    },
    parseMetadata3: function() {
        return parseMetadata3;
    }
});
const parseMetadata3 = (url)=>{
    if (!url) return undefined;
    return url.replace("http://", "https://");
};
const parseMetadata2 = (metadata)=>{
    if (!metadata) return undefined;
    try {
        const [firstMatch] = metadata.split(",");
        const url = new URL(firstMatch).origin;
        if (url.startsWith("https://www.worldcat.org")) return undefined;
        const secureUrl = url.replace("http://", "https://").replace(/\/$/, "");
        return secureUrl + "/favicon.ico";
    } catch (e) {
        return undefined;
    }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tY2F0dGFuZW8vd29ya3NwYWNlL2Zyb250ZW5kL2xpYnMvY29tbW9uL3V0aWxzL3NyYy9saWIvZG9jdW1lbnRJY29uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHBhcnNlTWV0YWRhdGEzID0gKHVybDogc3RyaW5nIHwgdW5kZWZpbmVkIHwgbnVsbCkgPT4ge1xuICBpZiAoIXVybCkgcmV0dXJuIHVuZGVmaW5lZFxuXG4gIHJldHVybiB1cmwucmVwbGFjZShcImh0dHA6Ly9cIiwgXCJodHRwczovL1wiKVxufVxuXG5jb25zdCBwYXJzZU1ldGFkYXRhMiA9IChtZXRhZGF0YTogc3RyaW5nIHwgdW5kZWZpbmVkIHwgbnVsbCkgPT4ge1xuICBpZiAoIW1ldGFkYXRhKSByZXR1cm4gdW5kZWZpbmVkXG4gIHRyeSB7XG4gICAgY29uc3QgW2ZpcnN0TWF0Y2hdID0gbWV0YWRhdGEuc3BsaXQoXCIsXCIpXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChmaXJzdE1hdGNoKS5vcmlnaW5cbiAgICBpZiAodXJsLnN0YXJ0c1dpdGgoXCJodHRwczovL3d3dy53b3JsZGNhdC5vcmdcIikpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBzZWN1cmVVcmwgPSB1cmwucmVwbGFjZShcImh0dHA6Ly9cIiwgXCJodHRwczovL1wiKS5yZXBsYWNlKC9cXC8kLywgXCJcIilcbiAgICByZXR1cm4gc2VjdXJlVXJsICsgXCIvZmF2aWNvbi5pY29cIlxuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cbn1cblxuZXhwb3J0IHsgcGFyc2VNZXRhZGF0YTMsIHBhcnNlTWV0YWRhdGEyIH1cbiJdLCJuYW1lcyI6WyJwYXJzZU1ldGFkYXRhMiIsInBhcnNlTWV0YWRhdGEzIiwidXJsIiwidW5kZWZpbmVkIiwicmVwbGFjZSIsIm1ldGFkYXRhIiwiZmlyc3RNYXRjaCIsInNwbGl0IiwiVVJMIiwib3JpZ2luIiwic3RhcnRzV2l0aCIsInNlY3VyZVVybCJdLCJyYW5nZU1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0lBbUJ5QkEsY0FBYztlQUFkQTs7SUFBaEJDLGNBQWM7ZUFBZEE7OztBQW5CVCxNQUFNQSxpQkFBaUIsQ0FBQ0M7SUFDdEIsSUFBSSxDQUFDQSxLQUFLLE9BQU9DO0lBRWpCLE9BQU9ELElBQUlFLE9BQU8sQ0FBQyxXQUFXO0FBQ2hDO0FBRUEsTUFBTUosaUJBQWlCLENBQUNLO0lBQ3RCLElBQUksQ0FBQ0EsVUFBVSxPQUFPRjtJQUN0QixJQUFJO1FBQ0YsTUFBTSxDQUFDRyxXQUFXLEdBQUdELFNBQVNFLEtBQUssQ0FBQztRQUNwQyxNQUFNTCxNQUFNLElBQUlNLElBQUlGLFlBQVlHLE1BQU07UUFDdEMsSUFBSVAsSUFBSVEsVUFBVSxDQUFDLDZCQUE2QixPQUFPUDtRQUN2RCxNQUFNUSxZQUFZVCxJQUFJRSxPQUFPLENBQUMsV0FBVyxZQUFZQSxPQUFPLENBQUMsT0FBTztRQUNwRSxPQUFPTyxZQUFZO0lBQ3JCLEVBQUUsVUFBTTtRQUNOLE9BQU9SO0lBQ1Q7QUFDRiJ9