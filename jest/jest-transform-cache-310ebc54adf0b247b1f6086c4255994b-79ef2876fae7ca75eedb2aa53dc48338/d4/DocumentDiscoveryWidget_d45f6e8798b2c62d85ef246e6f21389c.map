{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/discovery-sidebar/document-discovery/src/lib/DocumentDiscoveryWidget.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\"\nimport { CqsItem } from \"@rp/common/api-types\"\nimport { Watchlist } from \"@rp/common/api-types\"\nimport { Appearance, RpJsonDocument } from \"@rp/react/rpjson/types\"\nimport { CategoryWidgetActions, WidgetCategory } from \"@rp/react/web/common/discovery-sidebar\"\nimport { Detections } from \"./Detections\"\nimport { RpJsonGroup } from \"./RpJsonGroup\"\n\ntype Props = {\n  rpjsonDocument: RpJsonDocument | undefined\n  isLoading: boolean\n  disableCheckbox?: boolean\n  disableWatchlist?: boolean\n  onChange?: (item: CqsItem) => void\n  onExclude?: (item: CqsItem) => void\n  onDetectionClick: (detection: Appearance) => void\n  selectedDetection?: { pnum: number; snum: number }\n  widgetActions: CategoryWidgetActions\n  widgetCategory: WidgetCategory\n  onAddToWatchlist?: (watchlist: Watchlist) => void\n}\n\nconst DocumentDiscoveryWidget = ({\n  rpjsonDocument,\n  disableCheckbox,\n  disableWatchlist,\n  selectedDetection,\n  onChange,\n  onExclude,\n  onDetectionClick,\n  isLoading,\n  widgetActions,\n  widgetCategory,\n  onAddToWatchlist,\n}: Props) => {\n  const [mentionsItem, setMentionsItem] = useState<CqsItem | undefined>(undefined)\n\n  useEffect(() => {\n    setMentionsItem(prev =>\n      prev ? widgetCategory.filters.find(item => item.key === prev.key) : undefined,\n    )\n  }, [widgetCategory.filters])\n\n  return mentionsItem && rpjsonDocument ? (\n    <Detections\n      rpjsonDocument={rpjsonDocument}\n      filter={mentionsItem}\n      onClose={() => {\n        setMentionsItem(undefined)\n      }}\n      onChange={onChange}\n      disableCheckbox={disableCheckbox}\n      selectedDetection={selectedDetection}\n      onDetectionClick={onDetectionClick}\n      title={widgetCategory.label}\n      onAddToWatchlist={onAddToWatchlist}\n      onExclude={onExclude}\n    />\n  ) : (\n    <RpJsonGroup\n      isLoading={isLoading}\n      disableCheckbox={disableCheckbox}\n      disableWatchlist={disableWatchlist}\n      onChange={onChange}\n      onClick={(item: CqsItem) => setMentionsItem(item)}\n      widgetActions={widgetActions}\n      widgetCategory={widgetCategory}\n      onAddToWatchlist={onAddToWatchlist}\n      onExclude={onExclude}\n    />\n  )\n}\n\nexport { DocumentDiscoveryWidget }\n"],"names":["DocumentDiscoveryWidget","rpjsonDocument","disableCheckbox","disableWatchlist","selectedDetection","onChange","onExclude","onDetectionClick","isLoading","widgetActions","widgetCategory","onAddToWatchlist","mentionsItem","setMentionsItem","useState","undefined","useEffect","prev","filters","find","item","key","Detections","filter","onClose","title","label","RpJsonGroup","onClick"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAyESA;;;eAAAA;;;;uBAzE2B;4BAKT;6BACC;AAgB5B,MAAMA,0BAA0B,CAAC,EAC/BC,cAAc,EACdC,eAAe,EACfC,gBAAgB,EAChBC,iBAAiB,EACjBC,QAAQ,EACRC,SAAS,EACTC,gBAAgB,EAChBC,SAAS,EACTC,aAAa,EACbC,cAAc,EACdC,gBAAgB,EACV;IACN,MAAM,CAACC,cAAcC,gBAAgB,GAAGC,IAAAA,eAAQ,EAAsBC;IAEtEC,IAAAA,gBAAS,EAAC;QACRH,gBAAgBI,CAAAA,OACdA,OAAOP,eAAeQ,OAAO,CAACC,IAAI,CAACC,CAAAA,OAAQA,KAAKC,GAAG,KAAKJ,KAAKI,GAAG,IAAIN;IAExE,GAAG;QAACL,eAAeQ,OAAO;KAAC;IAE3B,OAAON,gBAAgBX,+BACrB,qBAACqB,sBAAU;QACTrB,gBAAgBA;QAChBsB,QAAQX;QACRY,SAAS;YACPX,gBAAgBE;QAClB;QACAV,UAAUA;QACVH,iBAAiBA;QACjBE,mBAAmBA;QACnBG,kBAAkBA;QAClBkB,OAAOf,eAAegB,KAAK;QAC3Bf,kBAAkBA;QAClBL,WAAWA;uBAGb,qBAACqB,wBAAW;QACVnB,WAAWA;QACXN,iBAAiBA;QACjBC,kBAAkBA;QAClBE,UAAUA;QACVuB,SAAS,CAACR,OAAkBP,gBAAgBO;QAC5CX,eAAeA;QACfC,gBAAgBA;QAChBC,kBAAkBA;QAClBL,WAAWA;;AAGjB"}