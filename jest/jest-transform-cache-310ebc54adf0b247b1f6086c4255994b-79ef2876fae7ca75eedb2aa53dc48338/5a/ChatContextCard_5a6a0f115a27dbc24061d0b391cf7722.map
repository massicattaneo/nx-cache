{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/chat/src/lib/Chat/Chat/ChatContext/ChatContextCard.tsx"],"sourcesContent":["import ReactMarkdown from \"react-markdown\"\nimport remarkGfm from \"remark-gfm\"\nimport { SwiperSlide } from \"swiper/react\"\nimport { BIG_SUMMARY_SOURCE_HEIGHT } from \"@rp/common/settings\"\nimport { BigdataChatAvatar } from \"@rp/react/common/assets\"\nimport { LlmDocumentSource, LlmExternalSource } from \"@rp/react/tanstack-api/llm-summary\"\nimport {\n  SourceImageDisplay,\n  SwiperWithFadingArrows,\n} from \"@rp/react/web/common/composite-components\"\nimport { useDeviceInfo } from \"@rp/react/web/common/hooks\"\nimport { Box, Divider, Typography, useTheme } from \"@rp/react/web/mui/core\"\nimport { ChatResponseText } from \"../Chat.styles\"\nimport { SourceChatDisplay } from \"../ChatResponse/SourceChatDisplay\"\n\ntype Props = {\n  sources: Array<LlmDocumentSource | LlmExternalSource>\n  title: string\n  summary: string\n}\nconst ChatContextCard = ({ sources, title, summary }: Props) => {\n  const { isMobile } = useDeviceInfo()\n  const theme = useTheme()\n\n  const imageSources = sources.filter(\n    (source): source is LlmDocumentSource => source.type === \"DOCUMENT\",\n  )\n\n  return (\n    <Box\n      sx={{\n        mx: isMobile ? 0 : 7,\n      }}\n    >\n      <Box\n        sx={{\n          display: \"flex\",\n          gap: isMobile ? 1 : 2,\n          flexWrap: isMobile ? \"wrap\" : undefined,\n        }}\n      >\n        <Box sx={{ ml: isMobile ? 2 : 0 }}>\n          <BigdataChatAvatar height={isMobile ? 28 : 40} width={isMobile ? 28 : 40} />\n        </Box>\n        {isMobile ? (\n          <Typography sx={{ mt: \"3px\", fontSize: \"body2.fontSize\", color: \"text.secondary\" }}>\n            Bigdata\n          </Typography>\n        ) : null}\n        <Box\n          sx={{\n            position: \"relative\",\n            mb: 2.5,\n            py: 2,\n            borderRadius: isMobile ? \"0px\" : \"8px\",\n            backgroundColor: \"elevation.dp01\",\n            boxShadow: \"0px 4px 11px 0px rgba(0, 0, 0, 0.50)\",\n            minWidth: 0,\n          }}\n        >\n          <Box px={2}>\n            <Typography sx={{ fontSize: 20, fontWeight: 700 }}>{title}</Typography>\n            <Box sx={{ my: 2, \"& > div\": { px: 0 } }}>\n              <SourceImageDisplay sources={imageSources} isSummaryCompleted />\n            </Box>\n            <ChatResponseText>\n              <ReactMarkdown remarkPlugins={[remarkGfm]}>{summary}</ReactMarkdown>\n            </ChatResponseText>\n            <Divider />\n            <Typography sx={{ fontWeight: 700, mt: 1 }}>Sources</Typography>\n          </Box>\n          <SwiperWithFadingArrows\n            spaceBetween={16}\n            sx={{\n              mt: 2,\n              px: isMobile ? 0 : 2,\n              \"& .swiper\": { zIndex: 0 },\n              \"& .swiper-arrow-wrapper\": { zIndex: 1 },\n            }}\n            slidesPerGroup={1}\n            height={BIG_SUMMARY_SOURCE_HEIGHT}\n            centeredSlides={isMobile}\n            centeredSlidesBounds={isMobile}\n            bgColor={theme.palette.elevation.dp01}\n          >\n            {sources.map((source, index) => {\n              switch (source.type) {\n                case \"DOCUMENT\":\n                  return (\n                    <SwiperSlide key={`${source.name}-${index}`}>\n                      <SourceChatDisplay source={source} />\n                    </SwiperSlide>\n                  )\n                default:\n                  return null\n              }\n            })}\n          </SwiperWithFadingArrows>\n        </Box>\n      </Box>\n    </Box>\n  )\n}\n\nexport { ChatContextCard }\n"],"names":["ChatContextCard","sources","title","summary","isMobile","useDeviceInfo","theme","useTheme","imageSources","filter","source","type","Box","sx","mx","display","gap","flexWrap","undefined","ml","BigdataChatAvatar","height","width","Typography","mt","fontSize","color","position","mb","py","borderRadius","backgroundColor","boxShadow","minWidth","px","fontWeight","my","SourceImageDisplay","isSummaryCompleted","ChatResponseText","ReactMarkdown","remarkPlugins","remarkGfm","Divider","SwiperWithFadingArrows","spaceBetween","zIndex","slidesPerGroup","BIG_SUMMARY_SOURCE_HEIGHT","centeredSlides","centeredSlidesBounds","bgColor","palette","elevation","dp01","map","index","SwiperSlide","SourceChatDisplay","name"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAwGSA;;;eAAAA;;;;sEAxGiB;kEACJ;uBACM;0BACc;wBACR;qCAK3B;uBACuB;sBACqB;4BAClB;mCACC;;;;;;AAOlC,MAAMA,kBAAkB,CAAC,EAAEC,OAAO,EAAEC,KAAK,EAAEC,OAAO,EAAS;IACzD,MAAM,EAAEC,QAAQ,EAAE,GAAGC,IAAAA,oBAAa;IAClC,MAAMC,QAAQC,IAAAA,cAAQ;IAEtB,MAAMC,eAAeP,QAAQQ,MAAM,CACjC,CAACC,SAAwCA,OAAOC,IAAI,KAAK;IAG3D,qBACE,qBAACC,SAAG;QACFC,IAAI;YACFC,IAAIV,WAAW,IAAI;QACrB;kBAEA,cAAA,sBAACQ,SAAG;YACFC,IAAI;gBACFE,SAAS;gBACTC,KAAKZ,WAAW,IAAI;gBACpBa,UAAUb,WAAW,SAASc;YAChC;;8BAEA,qBAACN,SAAG;oBAACC,IAAI;wBAAEM,IAAIf,WAAW,IAAI;oBAAE;8BAC9B,cAAA,qBAACgB,yBAAiB;wBAACC,QAAQjB,WAAW,KAAK;wBAAIkB,OAAOlB,WAAW,KAAK;;;gBAEvEA,yBACC,qBAACmB,gBAAU;oBAACV,IAAI;wBAAEW,IAAI;wBAAOC,UAAU;wBAAkBC,OAAO;oBAAiB;8BAAG;qBAGlF;8BACJ,sBAACd,SAAG;oBACFC,IAAI;wBACFc,UAAU;wBACVC,IAAI;wBACJC,IAAI;wBACJC,cAAc1B,WAAW,QAAQ;wBACjC2B,iBAAiB;wBACjBC,WAAW;wBACXC,UAAU;oBACZ;;sCAEA,sBAACrB,SAAG;4BAACsB,IAAI;;8CACP,qBAACX,gBAAU;oCAACV,IAAI;wCAAEY,UAAU;wCAAIU,YAAY;oCAAI;8CAAIjC;;8CACpD,qBAACU,SAAG;oCAACC,IAAI;wCAAEuB,IAAI;wCAAG,WAAW;4CAAEF,IAAI;wCAAE;oCAAE;8CACrC,cAAA,qBAACG,uCAAkB;wCAACpC,SAASO;wCAAc8B,kBAAkB;;;8CAE/D,qBAACC,4BAAgB;8CACf,cAAA,qBAACC,sBAAa;wCAACC,eAAe;4CAACC,kBAAS;yCAAC;kDAAGvC;;;8CAE9C,qBAACwC,aAAO;8CACR,qBAACpB,gBAAU;oCAACV,IAAI;wCAAEsB,YAAY;wCAAKX,IAAI;oCAAE;8CAAG;;;;sCAE9C,qBAACoB,2CAAsB;4BACrBC,cAAc;4BACdhC,IAAI;gCACFW,IAAI;gCACJU,IAAI9B,WAAW,IAAI;gCACnB,aAAa;oCAAE0C,QAAQ;gCAAE;gCACzB,2BAA2B;oCAAEA,QAAQ;gCAAE;4BACzC;4BACAC,gBAAgB;4BAChB1B,QAAQ2B,mCAAyB;4BACjCC,gBAAgB7C;4BAChB8C,sBAAsB9C;4BACtB+C,SAAS7C,MAAM8C,OAAO,CAACC,SAAS,CAACC,IAAI;sCAEpCrD,QAAQsD,GAAG,CAAC,CAAC7C,QAAQ8C;gCACpB,OAAQ9C,OAAOC,IAAI;oCACjB,KAAK;wCACH,qBACE,qBAAC8C,kBAAW;sDACV,cAAA,qBAACC,oCAAiB;gDAAChD,QAAQA;;2CADX,CAAC,EAAEA,OAAOiD,IAAI,CAAC,CAAC,EAAEH,MAAM,CAAC;oCAI/C;wCACE,OAAO;gCACX;4BACF;;;;;;;AAMZ"}