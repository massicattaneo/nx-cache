{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/apps/client-web/src/app/hooks/useHandleCqsChange.tsx"],"sourcesContent":["import { EnhancedSuggestion } from \"@rp/react/tanstack-api/suggestion\"\nimport { useQueryContext } from \"@rp/react/web/common/providers\"\nimport { tagManagerEvents } from \"@rp/react/web/common/vendors/utils\"\nimport { convertSuggestionItem, isMacroSearchItem } from \"@rp/react/web/cqs-query-context\"\n\nexport const useHandleCqsChange = () => {\n  const {\n    actions: actionsCQS,\n    savedQuery: { saveStatus },\n    queryId,\n  } = useQueryContext()\n\n  const handleCQSChange = (item: EnhancedSuggestion) => {\n    const convertedItem = convertSuggestionItem(item)\n    // TODO: Fix mess with types, why we transform into filters on Search.tsx, but not here\n    if (isMacroSearchItem(convertedItem)) {\n      convertedItem.value = convertedItem.value.map(item => ({ ...item, operation: \"in\" }))\n    }\n\n    tagManagerEvents.queryRefinement({\n      action: \"add\",\n      component: \"autoSuggest\",\n      queryId,\n      queryType: convertedItem.type,\n      savedStatus: saveStatus ?? \"unsaved\",\n    })\n\n    if (convertedItem.type === \"sentence\") {\n      return\n    }\n\n    actionsCQS.expression.addItem(convertedItem)\n  }\n\n  return handleCQSChange\n}\n"],"names":["useHandleCqsChange","actions","actionsCQS","savedQuery","saveStatus","queryId","useQueryContext","handleCQSChange","item","convertedItem","convertSuggestionItem","isMacroSearchItem","value","map","operation","tagManagerEvents","queryRefinement","action","component","queryType","type","savedStatus","expression","addItem"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAKaA;;;eAAAA;;;2BAJmB;uBACC;iCACwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAElD,MAAMA,qBAAqB;IAChC,MAAM,EACJC,SAASC,UAAU,EACnBC,YAAY,EAAEC,UAAU,EAAE,EAC1BC,OAAO,EACR,GAAGC,IAAAA,0BAAe;IAEnB,MAAMC,kBAAkB,CAACC;QACvB,MAAMC,gBAAgBC,IAAAA,sCAAqB,EAACF;QAC5C,uFAAuF;QACvF,IAAIG,IAAAA,kCAAiB,EAACF,gBAAgB;YACpCA,cAAcG,KAAK,GAAGH,cAAcG,KAAK,CAACC,GAAG,CAACL,CAAAA,OAAS,wCAAKA;oBAAMM,WAAW;;QAC/E;QAEAC,uBAAgB,CAACC,eAAe,CAAC;YAC/BC,QAAQ;YACRC,WAAW;YACXb;YACAc,WAAWV,cAAcW,IAAI;YAC7BC,aAAajB,uBAAAA,wBAAAA,aAAc;QAC7B;QAEA,IAAIK,cAAcW,IAAI,KAAK,YAAY;YACrC;QACF;QAEAlB,WAAWoB,UAAU,CAACC,OAAO,CAACd;IAChC;IAEA,OAAOF;AACT"}