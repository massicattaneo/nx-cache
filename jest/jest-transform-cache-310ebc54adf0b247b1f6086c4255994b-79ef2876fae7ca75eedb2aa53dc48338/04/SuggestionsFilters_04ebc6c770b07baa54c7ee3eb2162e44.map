{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/watchlist-editor/src/SuggestionFilters/SuggestionsFilters.tsx"],"sourcesContent":["import { Dispatch, SetStateAction, useEffect, useRef } from \"react\"\nimport { SwiperRef, SwiperSlide } from \"swiper/react\"\nimport { WatchlistGroups } from \"@rp/react/tanstack-api/discovery-panel-config\"\nimport {\n  GenericWatchlistAutosuggestPostParams,\n  WatchlistAutosuggestPostResponse,\n  WatchlistSuggestionFilters,\n} from \"@rp/react/tanstack-api/suggestion\"\nimport { SwiperWithFadingArrows } from \"@rp/react/web/common/composite-components\"\nimport { Box, Button } from \"@rp/react/web/mui/core\"\nimport { SuggestionFilter } from \"./SuggestionFilter\"\n\ntype Props = {\n  categoryFilter: string | undefined\n  maxWidth?: number | string\n  clearText?: string\n  filters: WatchlistSuggestionFilters\n  setFilters?: Dispatch<SetStateAction<WatchlistSuggestionFilters>>\n  facets: Required<WatchlistAutosuggestPostResponse>[\"facets\"]\n  isLoading?: boolean\n  suggestionQuery: GenericWatchlistAutosuggestPostParams\n  fields: WatchlistGroups[\"fields\"]\n  hideClearFilter?: boolean\n}\n\nconst SuggestionsFilters = ({\n  categoryFilter,\n  maxWidth = \"initial\",\n  clearText = \"Clear filters\",\n  filters,\n  setFilters,\n  facets,\n  isLoading = false,\n  suggestionQuery,\n  fields,\n  hideClearFilter,\n}: Props) => {\n  const swiperRef = useRef<SwiperRef>(null)\n  const res = filters[categoryFilter ?? \"\"]\n\n  useEffect(() => {\n    swiperRef.current?.swiper?.update()\n  }, [res])\n\n  if (!categoryFilter) return null\n\n  const activeFilter = filters[categoryFilter]\n  const disableClearFilter = !Object.values(activeFilter ?? {}).filter(arr => arr.length).length\n\n  return (\n    <>\n      {!hideClearFilter ? (\n        <Button\n          disabled={disableClearFilter}\n          sx={theme => ({\n            fontSize: 12,\n            mr: 1,\n            cursor: \"pointer\",\n            whiteSpace: \"nowrap\",\n            color: theme.palette.red[200],\n            textTransform: \"none\",\n          })}\n          onClick={() => setFilters?.({})}\n        >\n          {clearText}\n        </Button>\n      ) : null}\n\n      <Box sx={{ position: \"relative\", maxWidth }}>\n        <SwiperWithFadingArrows height={32} ref={swiperRef} slidesPerGroup={1} spaceBetween={8}>\n          {fields.map(field => {\n            const values = activeFilter?.[field.key] ?? []\n            return (\n              <SwiperSlide key={field.key}>\n                <SuggestionFilter\n                  facets={facets}\n                  isLoading={isLoading}\n                  values={values}\n                  field={field}\n                  categoryFilter={categoryFilter}\n                  suggestionQuery={suggestionQuery}\n                  setFilters={setFilters}\n                />\n              </SwiperSlide>\n            )\n          })}\n        </SwiperWithFadingArrows>\n      </Box>\n    </>\n  )\n}\n\nexport { SuggestionsFilters }\n"],"names":["SuggestionsFilters","categoryFilter","maxWidth","clearText","filters","setFilters","facets","isLoading","suggestionQuery","fields","hideClearFilter","swiperRef","useRef","res","useEffect","current","swiper","update","activeFilter","disableClearFilter","Object","values","filter","arr","length","Button","disabled","sx","theme","fontSize","mr","cursor","whiteSpace","color","palette","red","textTransform","onClick","Box","position","SwiperWithFadingArrows","height","ref","slidesPerGroup","spaceBetween","map","field","key","SwiperSlide","SuggestionFilter"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA4FSA;;;eAAAA;;;;uBA5FmD;wBACrB;qCAOA;sBACX;kCACK;AAejC,MAAMA,qBAAqB,CAAC,EAC1BC,cAAc,EACdC,WAAW,SAAS,EACpBC,YAAY,eAAe,EAC3BC,OAAO,EACPC,UAAU,EACVC,MAAM,EACNC,YAAY,KAAK,EACjBC,eAAe,EACfC,MAAM,EACNC,eAAe,EACT;IACN,MAAMC,YAAYC,IAAAA,aAAM,EAAY;IACpC,MAAMC,MAAMT,OAAO,CAACH,2BAAAA,4BAAAA,iBAAkB,GAAG;IAEzCa,IAAAA,gBAAS,EAAC;YACRH,2BAAAA;SAAAA,qBAAAA,UAAUI,OAAO,cAAjBJ,0CAAAA,4BAAAA,mBAAmBK,MAAM,cAAzBL,gDAAAA,0BAA2BM,MAAM;IACnC,GAAG;QAACJ;KAAI;IAER,IAAI,CAACZ,gBAAgB,OAAO;IAE5B,MAAMiB,eAAed,OAAO,CAACH,eAAe;IAC5C,MAAMkB,qBAAqB,CAACC,OAAOC,MAAM,CAACH,yBAAAA,0BAAAA,eAAgB,CAAC,GAAGI,MAAM,CAACC,CAAAA,MAAOA,IAAIC,MAAM,EAAEA,MAAM;IAE9F,qBACE;;YACG,CAACd,gCACA,qBAACe,YAAM;gBACLC,UAAUP;gBACVQ,IAAIC,CAAAA,QAAU,CAAA;wBACZC,UAAU;wBACVC,IAAI;wBACJC,QAAQ;wBACRC,YAAY;wBACZC,OAAOL,MAAMM,OAAO,CAACC,GAAG,CAAC,IAAI;wBAC7BC,eAAe;oBACjB,CAAA;gBACAC,SAAS,IAAMhC,uBAAAA,iCAAAA,WAAa,CAAC;0BAE5BF;iBAED;0BAEJ,qBAACmC,SAAG;gBAACX,IAAI;oBAAEY,UAAU;oBAAYrC;gBAAS;0BACxC,cAAA,qBAACsC,2CAAsB;oBAACC,QAAQ;oBAAIC,KAAK/B;oBAAWgC,gBAAgB;oBAAGC,cAAc;8BAClFnC,OAAOoC,GAAG,CAACC,CAAAA;4BACK5B;wBAAf,MAAMG,SAASH,CAAAA,0BAAAA,yBAAAA,mCAAAA,YAAc,CAAC4B,MAAMC,GAAG,CAAC,cAAzB7B,qCAAAA,0BAA6B,EAAE;wBAC9C,qBACE,qBAAC8B,mBAAW;sCACV,cAAA,qBAACC,kCAAgB;gCACf3C,QAAQA;gCACRC,WAAWA;gCACXc,QAAQA;gCACRyB,OAAOA;gCACP7C,gBAAgBA;gCAChBO,iBAAiBA;gCACjBH,YAAYA;;2BAREyC,MAAMC,GAAG;oBAY/B;;;;;AAKV"}