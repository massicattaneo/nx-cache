{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/apps/client-web/src/app/components/Hub/Watchlists/WatchlistTableActions.tsx"],"sourcesContent":["import { useState } from \"react\"\nimport { generatePath, useNavigate } from \"react-router-dom\"\nimport { useUser } from \"@clerk/clerk-react\"\nimport { Watchlist } from \"@rp/common/api-types\"\nimport { useAccount } from \"@rp/react/common/providers\"\nimport { RPTooltip } from \"@rp/react/web/common/base-components\"\nimport { ActionsMenu } from \"@rp/react/web/common/base-components\"\nimport { Actions } from \"@rp/react/web/common/types\"\nimport { Box, Button, IconButton } from \"@rp/react/web/mui/core\"\nimport { WATCHLIST_EDIT } from \"@rp/react/web/router\"\nimport { useWatchlistsActions } from \"@rp/react/web/watchlists\"\n\nfunction EditButton({ onClick }: { onClick: () => void }) {\n  return (\n    <Box\n      component=\"nav\"\n      className=\"hover-action\"\n      sx={{\n        \"& button\": { height: 30, fontSize: 12, letterSpacing: 1, opacity: 0, mr: 1 },\n      }}\n    >\n      <Button\n        onClick={event => {\n          event.stopPropagation()\n          onClick()\n        }}\n        variant=\"text-outlined\"\n        sx={{ mr: 1, fontSize: \"12px\", padding: \"4px 10px\" }}\n      >\n        Edit Watchlist\n      </Button>\n    </Box>\n  )\n}\n\nfunction ChatButton({\n  onClick,\n  icon,\n}: {\n  onClick: (ev: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void\n  icon: React.ReactNode\n}) {\n  return (\n    <RPTooltip title={\"Chat\"}>\n      <IconButton\n        onClick={ev => {\n          ev.stopPropagation()\n          ev.preventDefault()\n          onClick(ev)\n        }}\n      >\n        {icon}\n      </IconButton>\n    </RPTooltip>\n  )\n}\n\ntype Props = {\n  item: Watchlist\n  actions: Actions<Watchlist>\n  openMenu: boolean\n  setOpenMenu: (open: boolean) => void\n}\n\nconst WatchlistTableDesktopActions = ({ item, actions, openMenu, setOpenMenu }: Props) => {\n  const navigate = useNavigate()\n  const { user } = useUser()\n\n  // TODO: If we could split the chat functionality we could\n  // move it inside the the ChatButton since it only depends\n  // only on the watchlist id.\n  const { chat } = useWatchlistsActions()\n  const { hasEntitlement } = useAccount()\n\n  const isOwner = user?.id === item.ownerUserId\n  const hasWritePermission = item.shared.company.permission === \"write\"\n  const canEdit = isOwner || hasWritePermission\n\n  const canChat = hasEntitlement(\"chat:watchlist\")\n\n  const handleEditClick = () => {\n    navigate(generatePath(WATCHLIST_EDIT, { id: item.id }), { state: { comingFrom: \"watchlists\" } })\n  }\n\n  return (\n    <Box sx={{ display: \"flex\", justifyContent: \"right\", alignItems: \"center\" }}>\n      {canEdit ? <EditButton onClick={handleEditClick} /> : null}\n      {canChat ? <ChatButton onClick={() => chat.onClick(item)} icon={chat.icon} /> : null}\n      <ActionsMenu open={openMenu} setOpen={setOpenMenu} actions={actions} item={item} />\n    </Box>\n  )\n}\n\nconst WatchlistTableMobilesActions = ({ item, actions }: Props) => {\n  const [open, setOpen] = useState(false)\n\n  return (\n    <Box sx={{ display: \"flex\", justifyContent: \"right\", alignItems: \"center\" }}>\n      <ActionsMenu open={open} setOpen={setOpen} actions={actions} item={item} />\n    </Box>\n  )\n}\n\nexport { WatchlistTableDesktopActions, WatchlistTableMobilesActions }\n"],"names":["WatchlistTableDesktopActions","WatchlistTableMobilesActions","EditButton","onClick","Box","component","className","sx","height","fontSize","letterSpacing","opacity","mr","Button","event","stopPropagation","variant","padding","ChatButton","icon","RPTooltip","title","IconButton","ev","preventDefault","item","actions","openMenu","setOpenMenu","navigate","useNavigate","user","useUser","chat","useWatchlistsActions","hasEntitlement","useAccount","isOwner","id","ownerUserId","hasWritePermission","shared","company","permission","canEdit","canChat","handleEditClick","generatePath","WATCHLIST_EDIT","state","comingFrom","display","justifyContent","alignItems","ActionsMenu","open","setOpen","useState"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;IAuGSA,4BAA4B;eAA5BA;;IAA8BC,4BAA4B;eAA5BA;;;;uBAvGd;gCACiB;4BAClB;2BAEG;gCACD;sBAGc;wBACT;4BACM;AAErC,SAASC,WAAW,EAAEC,OAAO,EAA2B;IACtD,qBACE,qBAACC,SAAG;QACFC,WAAU;QACVC,WAAU;QACVC,IAAI;YACF,YAAY;gBAAEC,QAAQ;gBAAIC,UAAU;gBAAIC,eAAe;gBAAGC,SAAS;gBAAGC,IAAI;YAAE;QAC9E;kBAEA,cAAA,qBAACC,YAAM;YACLV,SAASW,CAAAA;gBACPA,MAAMC,eAAe;gBACrBZ;YACF;YACAa,SAAQ;YACRT,IAAI;gBAAEK,IAAI;gBAAGH,UAAU;gBAAQQ,SAAS;YAAW;sBACpD;;;AAKP;AAEA,SAASC,WAAW,EAClBf,OAAO,EACPgB,IAAI,EAIL;IACC,qBACE,qBAACC,yBAAS;QAACC,OAAO;kBAChB,cAAA,qBAACC,gBAAU;YACTnB,SAASoB,CAAAA;gBACPA,GAAGR,eAAe;gBAClBQ,GAAGC,cAAc;gBACjBrB,QAAQoB;YACV;sBAECJ;;;AAIT;AASA,MAAMnB,+BAA+B,CAAC,EAAEyB,IAAI,EAAEC,OAAO,EAAEC,QAAQ,EAAEC,WAAW,EAAS;IACnF,MAAMC,WAAWC,IAAAA,2BAAW;IAC5B,MAAM,EAAEC,IAAI,EAAE,GAAGC,IAAAA,mBAAO;IAExB,0DAA0D;IAC1D,0DAA0D;IAC1D,4BAA4B;IAC5B,MAAM,EAAEC,IAAI,EAAE,GAAGC,IAAAA,gCAAoB;IACrC,MAAM,EAAEC,cAAc,EAAE,GAAGC,IAAAA,qBAAU;IAErC,MAAMC,UAAUN,CAAAA,iBAAAA,2BAAAA,KAAMO,EAAE,MAAKb,KAAKc,WAAW;IAC7C,MAAMC,qBAAqBf,KAAKgB,MAAM,CAACC,OAAO,CAACC,UAAU,KAAK;IAC9D,MAAMC,UAAUP,WAAWG;IAE3B,MAAMK,UAAUV,eAAe;IAE/B,MAAMW,kBAAkB;QACtBjB,SAASkB,IAAAA,4BAAY,EAACC,sBAAc,EAAE;YAAEV,IAAIb,KAAKa,EAAE;QAAC,IAAI;YAAEW,OAAO;gBAAEC,YAAY;YAAa;QAAE;IAChG;IAEA,qBACE,sBAAC9C,SAAG;QAACG,IAAI;YAAE4C,SAAS;YAAQC,gBAAgB;YAASC,YAAY;QAAS;;YACvET,wBAAU,qBAAC1C;gBAAWC,SAAS2C;iBAAsB;YACrDD,wBAAU,qBAAC3B;gBAAWf,SAAS,IAAM8B,KAAK9B,OAAO,CAACsB;gBAAON,MAAMc,KAAKd,IAAI;iBAAO;0BAChF,qBAACmC,2BAAW;gBAACC,MAAM5B;gBAAU6B,SAAS5B;gBAAaF,SAASA;gBAASD,MAAMA;;;;AAGjF;AAEA,MAAMxB,+BAA+B,CAAC,EAAEwB,IAAI,EAAEC,OAAO,EAAS;IAC5D,MAAM,CAAC6B,MAAMC,QAAQ,GAAGC,IAAAA,eAAQ,EAAC;IAEjC,qBACE,qBAACrD,SAAG;QAACG,IAAI;YAAE4C,SAAS;YAAQC,gBAAgB;YAASC,YAAY;QAAS;kBACxE,cAAA,qBAACC,2BAAW;YAACC,MAAMA;YAAMC,SAASA;YAAS9B,SAASA;YAASD,MAAMA;;;AAGzE"}