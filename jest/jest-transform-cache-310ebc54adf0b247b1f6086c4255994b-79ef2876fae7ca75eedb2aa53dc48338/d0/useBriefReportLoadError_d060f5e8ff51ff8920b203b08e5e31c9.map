{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/brief/src/hooks/useBriefReportLoadError/useBriefReportLoadError.ts"],"sourcesContent":["import { useEffect } from \"react\"\nimport { AxiosError } from \"axios\"\nimport { useNavigate } from \"react-router-dom\"\nimport { BriefAPIError, BriefReport, BriefReportGetResponse } from \"@rp/react/tanstack-api/brief\"\nimport { useSnackbar } from \"@rp/react/web/common/providers\"\nimport { BRIEF_ROUTE } from \"@rp/react/web/router\"\nimport { UseQueryResult } from \"@tanstack/react-query\"\n\ntype UseBriefReportLoadErrorProps = {\n  briefConfigError: AxiosError | null\n  historicalBriefReportResponse: UseQueryResult<BriefReport | null, Error>\n  latestBriefReportResponse: UseQueryResult<BriefReportGetResponse | null, Error>\n}\n\nconst useBriefReportLoadError = ({\n  briefConfigError,\n  historicalBriefReportResponse,\n  latestBriefReportResponse,\n}: UseBriefReportLoadErrorProps): void => {\n  const navigate = useNavigate()\n  const { enqueueError } = useSnackbar()\n\n  useEffect(() => {\n    const historicalErrorMessage = historicalBriefReportResponse.error?.message || null\n    const latestErrorMessage = latestBriefReportResponse.error?.message || null\n\n    const hasError = !!briefConfigError || !!historicalErrorMessage || !!latestErrorMessage\n\n    if (!hasError) return\n\n    if (briefConfigError?.response?.status === 404) {\n      enqueueError(\"Brief does not exist\")\n      navigate(BRIEF_ROUTE)\n      return\n    }\n\n    if (\n      [historicalErrorMessage, latestErrorMessage].includes(BriefAPIError.BRIEF_REPORT_NOT_FOUND)\n    ) {\n      enqueueError(\"Brief report does not exist\")\n      navigate(BRIEF_ROUTE)\n      return\n    }\n\n    enqueueError(\"Could not load brief report, try again later\")\n    navigate(BRIEF_ROUTE)\n  }, [\n    briefConfigError,\n    enqueueError,\n    historicalBriefReportResponse,\n    latestBriefReportResponse,\n    navigate,\n  ])\n}\n\nexport { useBriefReportLoadError }\nexport type { UseBriefReportLoadErrorProps }\n"],"names":["useBriefReportLoadError","briefConfigError","historicalBriefReportResponse","latestBriefReportResponse","navigate","useNavigate","enqueueError","useSnackbar","useEffect","historicalErrorMessage","error","message","latestErrorMessage","hasError","response","status","BRIEF_ROUTE","includes","BriefAPIError","BRIEF_REPORT_NOT_FOUND"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAuDSA;;;eAAAA;;;uBAvDiB;gCAEE;uBACuC;2BACvC;wBACA;AAS5B,MAAMA,0BAA0B,CAAC,EAC/BC,gBAAgB,EAChBC,6BAA6B,EAC7BC,yBAAyB,EACI;IAC7B,MAAMC,WAAWC,IAAAA,2BAAW;IAC5B,MAAM,EAAEC,YAAY,EAAE,GAAGC,IAAAA,sBAAW;IAEpCC,IAAAA,gBAAS,EAAC;YACuBN,sCACJC,kCAMvBF;QAPJ,MAAMQ,yBAAyBP,EAAAA,uCAAAA,8BAA8BQ,KAAK,cAAnCR,2DAAAA,qCAAqCS,OAAO,KAAI;QAC/E,MAAMC,qBAAqBT,EAAAA,mCAAAA,0BAA0BO,KAAK,cAA/BP,uDAAAA,iCAAiCQ,OAAO,KAAI;QAEvE,MAAME,WAAW,CAAC,CAACZ,oBAAoB,CAAC,CAACQ,0BAA0B,CAAC,CAACG;QAErE,IAAI,CAACC,UAAU;QAEf,IAAIZ,CAAAA,6BAAAA,wCAAAA,6BAAAA,iBAAkBa,QAAQ,cAA1Bb,iDAAAA,2BAA4Bc,MAAM,MAAK,KAAK;YAC9CT,aAAa;YACbF,SAASY,mBAAW;YACpB;QACF;QAEA,IACE;YAACP;YAAwBG;SAAmB,CAACK,QAAQ,CAACC,oBAAa,CAACC,sBAAsB,GAC1F;YACAb,aAAa;YACbF,SAASY,mBAAW;YACpB;QACF;QAEAV,aAAa;QACbF,SAASY,mBAAW;IACtB,GAAG;QACDf;QACAK;QACAJ;QACAC;QACAC;KACD;AACH"}