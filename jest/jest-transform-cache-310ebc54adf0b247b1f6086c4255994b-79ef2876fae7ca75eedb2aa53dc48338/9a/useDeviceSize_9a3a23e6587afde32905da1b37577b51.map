{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/hooks/src/useDeviceSize.ts"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\"\nimport { useTheme } from \"@mui/styles\"\nimport { RPThemeProps } from \"@rp/react/theme\"\nimport { Breakpoint } from \"@rp/react/web/mui/core\"\n\nconst getWidth = () => {\n  const hasScrollbar = window.innerWidth > document.body.clientWidth\n  if (window.visualViewport?.width) return window.visualViewport?.width + (hasScrollbar ? 15 : 0)\n  return window.innerWidth\n}\nconst getHeight = () => window.visualViewport?.height ?? window.innerHeight\nconst minKeyboardHeight = 300\nconst isPortrait = () => {\n  switch (window.screen?.orientation?.type) {\n    case \"landscape-primary\":\n      return false\n    case \"landscape-secondary\":\n      return false\n    default:\n      return true\n  }\n}\n\nconst useDeviceSize = () => {\n  const [width, setWidth] = useState<number>(getWidth())\n  const [height, setHeight] = useState<number>(getHeight())\n  const [isDeviceKeyboardOpen, setIsDeviceKeyboardOpen] = useState(false)\n\n  const theme = useTheme<RPThemeProps>()\n\n  const recalculate = useCallback(() => {\n    setWidth(getWidth())\n    setHeight(getHeight())\n    setIsDeviceKeyboardOpen(() => {\n      const height = isPortrait() ? window.screen.height : window.screen.width\n      return height - minKeyboardHeight > getHeight()\n    })\n  }, [])\n\n  useEffect(() => {\n    window.visualViewport?.addEventListener(\"resize\", recalculate)\n    window.addEventListener(\"resize\", recalculate)\n    recalculate()\n    return () => {\n      window.visualViewport?.removeEventListener(\"resize\", recalculate)\n      window.removeEventListener(\"resize\", recalculate)\n    }\n  }, [recalculate])\n\n  return {\n    width,\n    height,\n    isDeviceKeyboardOpen,\n    between: (from: Breakpoint, to?: Breakpoint) => {\n      if (!to) return width >= theme.breakpoints.values[from]\n      return width >= theme.breakpoints.values[from] && width < theme.breakpoints.values[to]\n    },\n  }\n}\n\nexport { useDeviceSize }\n"],"names":["useDeviceSize","getWidth","window","hasScrollbar","innerWidth","document","body","clientWidth","visualViewport","width","getHeight","height","innerHeight","minKeyboardHeight","isPortrait","screen","orientation","type","setWidth","useState","setHeight","isDeviceKeyboardOpen","setIsDeviceKeyboardOpen","theme","useTheme","recalculate","useCallback","useEffect","addEventListener","removeEventListener","between","from","to","breakpoints","values"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA4DSA;;;eAAAA;;;uBA5DwC;wBACxB;AAIzB,MAAMC,WAAW;QAEXC,wBAAqCA;IADzC,MAAMC,eAAeD,OAAOE,UAAU,GAAGC,SAASC,IAAI,CAACC,WAAW;IAClE,KAAIL,yBAAAA,OAAOM,cAAc,cAArBN,6CAAAA,uBAAuBO,KAAK,EAAE,OAAOP,EAAAA,0BAAAA,OAAOM,cAAc,cAArBN,8CAAAA,wBAAuBO,KAAK,IAAIN,CAAAA,eAAe,KAAK,CAAA;IAC7F,OAAOD,OAAOE,UAAU;AAC1B;AACA,MAAMM,YAAY;QAAMR;QAAAA;WAAAA,CAAAA,iCAAAA,yBAAAA,OAAOM,cAAc,cAArBN,6CAAAA,uBAAuBS,MAAM,cAA7BT,2CAAAA,gCAAiCA,OAAOU,WAAW;AAAD;AAC1E,MAAMC,oBAAoB;AAC1B,MAAMC,aAAa;QACTZ,4BAAAA;IAAR,QAAQA,iBAAAA,OAAOa,MAAM,cAAbb,sCAAAA,6BAAAA,eAAec,WAAW,cAA1Bd,iDAAAA,2BAA4Be,IAAI;QACtC,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT;YACE,OAAO;IACX;AACF;AAEA,MAAMjB,gBAAgB;IACpB,MAAM,CAACS,OAAOS,SAAS,GAAGC,IAAAA,eAAQ,EAASlB;IAC3C,MAAM,CAACU,QAAQS,UAAU,GAAGD,IAAAA,eAAQ,EAAST;IAC7C,MAAM,CAACW,sBAAsBC,wBAAwB,GAAGH,IAAAA,eAAQ,EAAC;IAEjE,MAAMI,QAAQC,IAAAA,gBAAQ;IAEtB,MAAMC,cAAcC,IAAAA,kBAAW,EAAC;QAC9BR,SAASjB;QACTmB,UAAUV;QACVY,wBAAwB;YACtB,MAAMX,SAASG,eAAeZ,OAAOa,MAAM,CAACJ,MAAM,GAAGT,OAAOa,MAAM,CAACN,KAAK;YACxE,OAAOE,SAASE,oBAAoBH;QACtC;IACF,GAAG,EAAE;IAELiB,IAAAA,gBAAS,EAAC;YACRzB;SAAAA,yBAAAA,OAAOM,cAAc,cAArBN,6CAAAA,uBAAuB0B,gBAAgB,CAAC,UAAUH;QAClDvB,OAAO0B,gBAAgB,CAAC,UAAUH;QAClCA;QACA,OAAO;gBACLvB;aAAAA,yBAAAA,OAAOM,cAAc,cAArBN,6CAAAA,uBAAuB2B,mBAAmB,CAAC,UAAUJ;YACrDvB,OAAO2B,mBAAmB,CAAC,UAAUJ;QACvC;IACF,GAAG;QAACA;KAAY;IAEhB,OAAO;QACLhB;QACAE;QACAU;QACAS,SAAS,CAACC,MAAkBC;YAC1B,IAAI,CAACA,IAAI,OAAOvB,SAASc,MAAMU,WAAW,CAACC,MAAM,CAACH,KAAK;YACvD,OAAOtB,SAASc,MAAMU,WAAW,CAACC,MAAM,CAACH,KAAK,IAAItB,QAAQc,MAAMU,WAAW,CAACC,MAAM,CAACF,GAAG;QACxF;IACF;AACF"}