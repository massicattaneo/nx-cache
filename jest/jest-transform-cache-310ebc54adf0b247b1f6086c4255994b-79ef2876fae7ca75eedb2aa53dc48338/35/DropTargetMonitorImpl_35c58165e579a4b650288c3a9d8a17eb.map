{"version":3,"sources":["../../src/internals/DropTargetMonitorImpl.ts"],"sourcesContent":["import { invariant } from '@react-dnd/invariant'\nimport type {\n\tDragDropManager,\n\tDragDropMonitor,\n\tIdentifier,\n\tListener,\n\tUnsubscribe,\n\tXYCoord,\n} from 'dnd-core'\n\nimport type { DropTargetMonitor } from '../types/index.js'\n\nlet isCallingCanDrop = false\n\nexport class DropTargetMonitorImpl implements DropTargetMonitor {\n\tprivate internalMonitor: DragDropMonitor\n\tprivate targetId: Identifier | null = null\n\n\tpublic constructor(manager: DragDropManager) {\n\t\tthis.internalMonitor = manager.getMonitor()\n\t}\n\n\tpublic receiveHandlerId(targetId: Identifier | null): void {\n\t\tthis.targetId = targetId\n\t}\n\n\tpublic getHandlerId(): Identifier | null {\n\t\treturn this.targetId\n\t}\n\n\tpublic subscribeToStateChange(\n\t\tlistener: Listener,\n\t\toptions?: { handlerIds?: Identifier[] },\n\t): Unsubscribe {\n\t\treturn this.internalMonitor.subscribeToStateChange(listener, options)\n\t}\n\n\tpublic canDrop(): boolean {\n\t\t// Cut out early if the target id has not been set. This should prevent errors\n\t\t// where the user has an older version of dnd-core like in\n\t\t// https://github.com/react-dnd/react-dnd/issues/1310\n\t\tif (!this.targetId) {\n\t\t\treturn false\n\t\t}\n\t\tinvariant(\n\t\t\t!isCallingCanDrop,\n\t\t\t'You may not call monitor.canDrop() inside your canDrop() implementation. ' +\n\t\t\t\t'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor',\n\t\t)\n\n\t\ttry {\n\t\t\tisCallingCanDrop = true\n\t\t\treturn this.internalMonitor.canDropOnTarget(this.targetId)\n\t\t} finally {\n\t\t\tisCallingCanDrop = false\n\t\t}\n\t}\n\n\tpublic isOver(options?: { shallow?: boolean }): boolean {\n\t\tif (!this.targetId) {\n\t\t\treturn false\n\t\t}\n\t\treturn this.internalMonitor.isOverTarget(this.targetId, options)\n\t}\n\n\tpublic getItemType(): Identifier | null {\n\t\treturn this.internalMonitor.getItemType()\n\t}\n\n\tpublic getItem(): any {\n\t\treturn this.internalMonitor.getItem()\n\t}\n\n\tpublic getDropResult(): any {\n\t\treturn this.internalMonitor.getDropResult()\n\t}\n\n\tpublic didDrop(): boolean {\n\t\treturn this.internalMonitor.didDrop()\n\t}\n\n\tpublic getInitialClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getInitialClientOffset()\n\t}\n\n\tpublic getInitialSourceClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getInitialSourceClientOffset()\n\t}\n\n\tpublic getSourceClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getSourceClientOffset()\n\t}\n\n\tpublic getClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getClientOffset()\n\t}\n\n\tpublic getDifferenceFromInitialOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getDifferenceFromInitialOffset()\n\t}\n}\n"],"names":["DropTargetMonitorImpl","isCallingCanDrop","receiveHandlerId","targetId","getHandlerId","subscribeToStateChange","listener","options","internalMonitor","canDrop","invariant","canDropOnTarget","isOver","isOverTarget","getItemType","getItem","getDropResult","didDrop","getInitialClientOffset","getInitialSourceClientOffset","getSourceClientOffset","getClientOffset","getDifferenceFromInitialOffset","constructor","manager","getMonitor"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAcaA;;;eAAAA;;;2BAda;AAY1B,IAAIC,mBAAmB;AAEhB,MAAMD;IAQZE,iBAAwBC,QAA2B,EAAQ;QAC1D,IAAI,CAACA,QAAQ,GAAGA;;IAGjBC,eAAyC;QACxC,OAAO,IAAI,CAACD,QAAQ;;IAGrBE,uBACCC,QAAkB,EAClBC,OAAuC,EACzB;QACd,OAAO,IAAI,CAACC,eAAe,CAACH,sBAAsB,CAACC,UAAUC;;IAG9DE,UAA0B;QACzB,8EAA8E;QAC9E,0DAA0D;QAC1D,qDAAqD;QACrD,IAAI,CAAC,IAAI,CAACN,QAAQ,EAAE;YACnB,OAAO;;QAERO,IAAAA,oBAAS,EACR,CAACT,kBACD,8EACC;QAGF,IAAI;YACHA,mBAAmB;YACnB,OAAO,IAAI,CAACO,eAAe,CAACG,eAAe,CAAC,IAAI,CAACR,QAAQ;iBAChD;YACTF,mBAAmB;;;IAIrBW,OAAcL,OAA+B,EAAW;QACvD,IAAI,CAAC,IAAI,CAACJ,QAAQ,EAAE;YACnB,OAAO;;QAER,OAAO,IAAI,CAACK,eAAe,CAACK,YAAY,CAAC,IAAI,CAACV,QAAQ,EAAEI;;IAGzDO,cAAwC;QACvC,OAAO,IAAI,CAACN,eAAe,CAACM,WAAW;;IAGxCC,UAAsB;QACrB,OAAO,IAAI,CAACP,eAAe,CAACO,OAAO;;IAGpCC,gBAA4B;QAC3B,OAAO,IAAI,CAACR,eAAe,CAACQ,aAAa;;IAG1CC,UAA0B;QACzB,OAAO,IAAI,CAACT,eAAe,CAACS,OAAO;;IAGpCC,yBAAgD;QAC/C,OAAO,IAAI,CAACV,eAAe,CAACU,sBAAsB;;IAGnDC,+BAAsD;QACrD,OAAO,IAAI,CAACX,eAAe,CAACW,4BAA4B;;IAGzDC,wBAA+C;QAC9C,OAAO,IAAI,CAACZ,eAAe,CAACY,qBAAqB;;IAGlDC,kBAAyC;QACxC,OAAO,IAAI,CAACb,eAAe,CAACa,eAAe;;IAG5CC,iCAAwD;QACvD,OAAO,IAAI,CAACd,eAAe,CAACc,8BAA8B;;IAhF3DC,YAAmBC,OAAwB,CAAE;QAF7C,IAAA,CAAQrB,QAAQ,GAAsB;QAGrC,IAAI,CAACK,eAAe,GAAGgB,QAAQC,UAAU"}