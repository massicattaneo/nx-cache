{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/common/utils/src/lib/serialization-utils.ts"],"sourcesContent":["import { GenericObject, isArray, isObject, isString } from \"./generic-object.types\"\n\nconst serialize = (current: GenericObject, addCurlyBrackets = false): string => {\n  let result = \"\"\n  if (current instanceof RegExp) {\n    return `\"${current}\"`\n  } else if (typeof current === \"string\") {\n    return `\"${current}\"`\n  } else if (!isObject(current) && isString(current)) {\n    return current\n  } else if (!isObject(current) && !isNaN(Number(current.toString()))) {\n    return current.toString()\n  } else if (!isObject(current) && current === true) {\n    return current.toString()\n  } else if (!isObject(current) && current === false) {\n    return current.toString()\n  }\n\n  Object.keys(current).forEach((key, index, arr) => {\n    if ([\"__proto__\", \"constructor\", \"prototype\"].includes(key)) {\n      return\n    }\n    const obj = isObject(current) ? current[key] : current\n    if (isArray(obj)) {\n      result += `\"${key}\":[${obj.map((item: GenericObject) => serializeObject(item)).join(\",\")}]`\n    } else if (isObject(obj)) {\n      result += `\"${key}\":${serialize(obj, true)}`\n    } else {\n      if (typeof obj === \"string\") {\n        result += `\"${key}\":${serialize(obj)}`\n      } else {\n        result += `\"${key}\":${serialize(obj)}`\n      }\n    }\n    result += index < arr.length - 1 ? \",\" : \"\"\n  })\n  if (addCurlyBrackets) return \"{\" + result + \"}\"\n  return result\n}\n\nfunction serializeObject(current: GenericObject) {\n  return serialize(current, true)\n}\n\nfunction deserializeRegex(current: string) {\n  const regExp = current.match(/\\/(.*)\\/(.*)/)\n  if (regExp) return new RegExp(regExp[1], regExp[2])\n  return current\n}\n\nfunction replaceRegExp(current: GenericObject) {\n  if (typeof current === \"string\") return deserializeRegex(current)\n  if (!isObject(current)) return current\n  Object.keys(current).forEach(key => {\n    if ([\"__proto__\", \"constructor\", \"prototype\"].includes(key)) {\n      return\n    }\n    const obj = current[key]\n    if (isObject(current) && isArray(obj) && Array.isArray(obj)) {\n      Object.assign(current, {\n        [key]: obj.map((item: GenericObject) => {\n          if (isString(item)) {\n            return deserializeRegex(item)\n          }\n          return replaceRegExp(item)\n        }),\n      })\n    } else if (isObject(current[key])) {\n      replaceRegExp(current[key])\n    } else if (isString(obj)) {\n      Object.assign(current, { [key]: deserializeRegex(obj) })\n    }\n  })\n  return current\n}\n\nfunction deserializeObject<T>(current: string): T {\n  const results = replaceRegExp(JSON.parse(current))\n  return results as T\n}\n\nexport { serializeObject, deserializeObject }\n"],"names":["deserializeObject","serializeObject","serialize","current","addCurlyBrackets","result","RegExp","isObject","isString","isNaN","Number","toString","Object","keys","forEach","key","index","arr","includes","obj","isArray","map","item","join","length","deserializeRegex","regExp","match","replaceRegExp","Array","assign","results","JSON","parse"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"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"}