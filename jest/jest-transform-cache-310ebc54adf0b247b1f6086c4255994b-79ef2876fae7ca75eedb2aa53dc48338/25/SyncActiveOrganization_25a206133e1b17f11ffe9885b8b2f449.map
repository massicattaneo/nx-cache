{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/common/hooks/src/lib/SyncActiveOrganization.tsx"],"sourcesContent":["import { useEffect } from \"react\"\nimport { useAuth, useOrganizationList } from \"@clerk/clerk-react\"\n\n/**\n * All users need to be part of an organization.\n * Synchronizes the active organization based on the user's memberships.\n * This component uses the `useAuth` and `useOrganizationList` hooks from the `@clerk/clerk-react` library.\n * It sets the active organization to the first organization in the user's memberships list,\n * if it is different from the current active organization.\n */\n\nexport function SyncActiveOrganization() {\n  const { orgId, isLoaded: isLoadedAuth } = useAuth()\n\n  const {\n    setActive,\n    isLoaded: isLoadedOrgs,\n    userMemberships,\n  } = useOrganizationList({\n    userMemberships: {\n      infinite: true,\n      keepPreviousData: true,\n    },\n  })\n\n  const firstOrg = userMemberships?.data?.[0]?.organization.id ?? null\n\n  useEffect(() => {\n    if (!isLoadedAuth || !isLoadedOrgs) {\n      return\n    }\n\n    if (firstOrg && firstOrg !== orgId && setActive) {\n      setActive({ organization: firstOrg })\n    }\n  }, [firstOrg, isLoadedAuth, isLoadedOrgs, orgId, setActive])\n\n  return null\n}\n"],"names":["SyncActiveOrganization","userMemberships","orgId","isLoaded","isLoadedAuth","useAuth","setActive","isLoadedOrgs","useOrganizationList","infinite","keepPreviousData","firstOrg","data","organization","id","useEffect"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAWgBA;;;eAAAA;;;uBAXU;4BACmB;AAUtC,SAASA;QAcGC,wBAAAA;IAbjB,MAAM,EAAEC,KAAK,EAAEC,UAAUC,YAAY,EAAE,GAAGC,IAAAA,mBAAO;IAEjD,MAAM,EACJC,SAAS,EACTH,UAAUI,YAAY,EACtBN,eAAe,EAChB,GAAGO,IAAAA,+BAAmB,EAAC;QACtBP,iBAAiB;YACfQ,UAAU;YACVC,kBAAkB;QACpB;IACF;QAEiBT;IAAjB,MAAMU,WAAWV,CAAAA,yCAAAA,4BAAAA,uCAAAA,wBAAAA,gBAAiBW,IAAI,cAArBX,6CAAAA,yBAAAA,qBAAuB,CAAC,EAAE,cAA1BA,6CAAAA,uBAA4BY,YAAY,CAACC,EAAE,cAA3Cb,oDAAAA,yCAA+C;IAEhEc,IAAAA,gBAAS,EAAC;QACR,IAAI,CAACX,gBAAgB,CAACG,cAAc;YAClC;QACF;QAEA,IAAII,YAAYA,aAAaT,SAASI,WAAW;YAC/CA,UAAU;gBAAEO,cAAcF;YAAS;QACrC;IACF,GAAG;QAACA;QAAUP;QAAcG;QAAcL;QAAOI;KAAU;IAE3D,OAAO;AACT"}