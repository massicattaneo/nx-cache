0ff178567ef8fe902041a1289a9d8cee
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    LoadingSourceDisplay: function() {
        return LoadingSourceDisplay;
    },
    SourceDisplay: function() {
        return SourceDisplay;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
const _settings = require("@rp/common/settings");
const _utils = require("@rp/common/utils");
const _cqsbyids = require("@rp/react/tanstack-api/cqs-by-ids");
const _core = require("@rp/react/web/mui/core");
const _DocumentIcon = require("../DocumentIcon");
const _EllipsisTooltip = require("../EllipsisTooltip");
const _SourceImageDisplay = require("./SourceImageDisplay");
const LoadingSourceDisplay = ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)(_core.Skeleton, {
        width: 302,
        height: 92,
        variant: "rectangular",
        sx: {
            borderRadius: 1,
            transform: "none"
        }
    });
const SourceDisplay = ({ isLoading, source, onClick, showTooltips = true, name, ts })=>{
    var _ids_srcKey;
    const { hd, srcKey } = source;
    const { ids, addByIds } = (0, _cqsbyids.useCqsByIdsContext)();
    // TODO: Retrieve this info from BE
    const documentScope = "news";
    const isPrivate = srcKey === "000000";
    (0, _react.useEffect)(()=>{
        if (srcKey) {
            addByIds([
                {
                    key: srcKey,
                    queryType: "source"
                }
            ]);
        }
    }, [
        srcKey,
        addByIds,
        ids
    ]);
    if (isLoading || ((_ids_srcKey = ids[srcKey]) === null || _ids_srcKey === void 0 ? void 0 : _ids_srcKey.isLoading)) {
        return /*#__PURE__*/ (0, _jsxruntime.jsx)(LoadingSourceDisplay, {});
    }
    const height = _settings.BIG_SUMMARY_SOURCE_HEIGHT - 2;
    var _hd_match;
    const [ext = ""] = (_hd_match = hd.match(/\.[0-9a-z]+$/i)) !== null && _hd_match !== void 0 ? _hd_match : [];
    return srcKey && name ? /*#__PURE__*/ (0, _jsxruntime.jsxs)(_core.Box, {
        onClick: onClick,
        sx: (theme)=>({
                zIndex: 0,
                width: 276,
                height,
                border: `1px solid ${theme.palette.outline.border}`,
                borderRadius: 2,
                display: "flex",
                "&:hover": {
                    cursor: "pointer",
                    backgroundColor: "elevation.dp08"
                }
            }),
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_core.Box, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SourceImageDisplay.SourceImageDisplay, {
                    sx: {
                        p: 0,
                        height,
                        "& img": {
                            maxWidth: "130px",
                            height,
                            objectFit: "cover",
                            borderRadius: "8px 0 0 8px"
                        }
                    },
                    height: height,
                    sources: [
                        source
                    ],
                    isSummaryCompleted: true
                })
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsxs)(_core.Box, {
                sx: {
                    flexGrow: 0,
                    p: "12px",
                    overflow: "hidden"
                },
                children: [
                    showTooltips ? /*#__PURE__*/ (0, _jsxruntime.jsx)(_EllipsisTooltip.EllipsisTooltip, {
                        vertical: true,
                        tooltipText: hd,
                        typographyProps: {
                            style: {
                                lineHeight: 1.2,
                                minHeight: 40
                            }
                        },
                        children: hd
                    }) : hd,
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)(_core.Box, {
                        sx: {
                            pt: 1,
                            display: "flex",
                            "& span": {
                                color: "text.secondary"
                            }
                        },
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_DocumentIcon.DocumentIcon, {
                                documentScope: isPrivate ? "files" : documentScope,
                                srcKey: srcKey,
                                contentType: ext.replace(".", ""),
                                text: name
                            }),
                            ts ? /*#__PURE__*/ (0, _jsxruntime.jsxs)(_core.Typography, {
                                component: "span",
                                sx: {
                                    flexShrink: 0,
                                    fontSize: 12
                                },
                                children: [
                                    "Â· ",
                                    (0, _utils.getTimePassed)(ts)
                                ]
                            }) : null
                        ]
                    })
                ]
            })
        ]
    }) : null;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tY2F0dGFuZW8vd29ya3NwYWNlL2Zyb250ZW5kL2xpYnMvcmVhY3Qvd2ViL2NvbW1vbi9jb21wb3NpdGUtY29tcG9uZW50cy9zcmMvU291cmNlRGlzcGxheS9Tb3VyY2VEaXNwbGF5LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNb3VzZUV2ZW50SGFuZGxlciwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCJcbmltcG9ydCB7IEJJR19TVU1NQVJZX1NPVVJDRV9IRUlHSFQgfSBmcm9tIFwiQHJwL2NvbW1vbi9zZXR0aW5nc1wiXG5pbXBvcnQgeyBnZXRUaW1lUGFzc2VkIH0gZnJvbSBcIkBycC9jb21tb24vdXRpbHNcIlxuaW1wb3J0IHsgdXNlQ3FzQnlJZHNDb250ZXh0IH0gZnJvbSBcIkBycC9yZWFjdC90YW5zdGFjay1hcGkvY3FzLWJ5LWlkc1wiXG5pbXBvcnQgeyBMbG1Eb2N1bWVudFNvdXJjZSB9IGZyb20gXCJAcnAvcmVhY3QvdGFuc3RhY2stYXBpL2xsbS1zdW1tYXJ5XCJcbmltcG9ydCB7IEJveCwgU2tlbGV0b24sIFR5cG9ncmFwaHkgfSBmcm9tIFwiQHJwL3JlYWN0L3dlYi9tdWkvY29yZVwiXG5pbXBvcnQgeyBEb2N1bWVudEljb24gfSBmcm9tIFwiLi4vRG9jdW1lbnRJY29uXCJcbmltcG9ydCB7IEVsbGlwc2lzVG9vbHRpcCB9IGZyb20gXCIuLi9FbGxpcHNpc1Rvb2x0aXBcIlxuaW1wb3J0IHsgU291cmNlSW1hZ2VEaXNwbGF5IH0gZnJvbSBcIi4vU291cmNlSW1hZ2VEaXNwbGF5XCJcblxudHlwZSBMbG1Eb2N1bWVudFNvdXJjZVdpdGhMaW5rcyA9IExsbURvY3VtZW50U291cmNlICYge1xuICB1cmw/OiBzdHJpbmcgfCBudWxsXG4gIGltYWdlVXJscz86IEFycmF5PHN0cmluZz4gfCBudWxsXG59XG5cbnR5cGUgUHJvcHMgPSB7XG4gIGlzTG9hZGluZz86IGJvb2xlYW5cbiAgc291cmNlOiBMbG1Eb2N1bWVudFNvdXJjZVdpdGhMaW5rc1xuICBvbkNsaWNrPzogTW91c2VFdmVudEhhbmRsZXI8SFRNTERpdkVsZW1lbnQ+XG4gIHNob3dUb29sdGlwcz86IGJvb2xlYW5cbiAgbmFtZTogc3RyaW5nXG4gIHRzPzogc3RyaW5nXG59XG5cbmNvbnN0IExvYWRpbmdTb3VyY2VEaXNwbGF5ID0gKCkgPT4gKFxuICA8U2tlbGV0b25cbiAgICB3aWR0aD17MzAyfVxuICAgIGhlaWdodD17OTJ9XG4gICAgdmFyaWFudD1cInJlY3Rhbmd1bGFyXCJcbiAgICBzeD17eyBib3JkZXJSYWRpdXM6IDEsIHRyYW5zZm9ybTogXCJub25lXCIgfX1cbiAgLz5cbilcblxuY29uc3QgU291cmNlRGlzcGxheSA9ICh7IGlzTG9hZGluZywgc291cmNlLCBvbkNsaWNrLCBzaG93VG9vbHRpcHMgPSB0cnVlLCBuYW1lLCB0cyB9OiBQcm9wcykgPT4ge1xuICBjb25zdCB7IGhkLCBzcmNLZXkgfSA9IHNvdXJjZVxuICBjb25zdCB7IGlkcywgYWRkQnlJZHMgfSA9IHVzZUNxc0J5SWRzQ29udGV4dCgpXG5cbiAgLy8gVE9ETzogUmV0cmlldmUgdGhpcyBpbmZvIGZyb20gQkVcbiAgY29uc3QgZG9jdW1lbnRTY29wZSA9IFwibmV3c1wiXG4gIGNvbnN0IGlzUHJpdmF0ZSA9IHNyY0tleSA9PT0gXCIwMDAwMDBcIlxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNyY0tleSkge1xuICAgICAgYWRkQnlJZHMoW3sga2V5OiBzcmNLZXksIHF1ZXJ5VHlwZTogXCJzb3VyY2VcIiB9XSlcbiAgICB9XG4gIH0sIFtzcmNLZXksIGFkZEJ5SWRzLCBpZHNdKVxuXG4gIGlmIChpc0xvYWRpbmcgfHwgaWRzW3NyY0tleV0/LmlzTG9hZGluZykge1xuICAgIHJldHVybiA8TG9hZGluZ1NvdXJjZURpc3BsYXkgLz5cbiAgfVxuXG4gIGNvbnN0IGhlaWdodCA9IEJJR19TVU1NQVJZX1NPVVJDRV9IRUlHSFQgLSAyXG4gIGNvbnN0IFtleHQgPSBcIlwiXSA9IGhkLm1hdGNoKC9cXC5bMC05YS16XSskL2kpID8/IFtdXG5cbiAgcmV0dXJuIHNyY0tleSAmJiBuYW1lID8gKFxuICAgIDxCb3hcbiAgICAgIG9uQ2xpY2s9e29uQ2xpY2t9XG4gICAgICBzeD17dGhlbWUgPT4gKHtcbiAgICAgICAgekluZGV4OiAwLFxuICAgICAgICB3aWR0aDogMjc2LFxuICAgICAgICBoZWlnaHQsXG4gICAgICAgIGJvcmRlcjogYDFweCBzb2xpZCAke3RoZW1lLnBhbGV0dGUub3V0bGluZS5ib3JkZXJ9YCxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAyLFxuICAgICAgICBkaXNwbGF5OiBcImZsZXhcIixcbiAgICAgICAgXCImOmhvdmVyXCI6IHtcbiAgICAgICAgICBjdXJzb3I6IFwicG9pbnRlclwiLFxuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJlbGV2YXRpb24uZHAwOFwiLFxuICAgICAgICB9LFxuICAgICAgfSl9XG4gICAgPlxuICAgICAgPEJveD5cbiAgICAgICAgPFNvdXJjZUltYWdlRGlzcGxheVxuICAgICAgICAgIHN4PXt7XG4gICAgICAgICAgICBwOiAwLFxuICAgICAgICAgICAgaGVpZ2h0LFxuICAgICAgICAgICAgXCImIGltZ1wiOiB7XG4gICAgICAgICAgICAgIG1heFdpZHRoOiBcIjEzMHB4XCIsXG4gICAgICAgICAgICAgIGhlaWdodCxcbiAgICAgICAgICAgICAgb2JqZWN0Rml0OiBcImNvdmVyXCIsXG4gICAgICAgICAgICAgIGJvcmRlclJhZGl1czogXCI4cHggMCAwIDhweFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9fVxuICAgICAgICAgIGhlaWdodD17aGVpZ2h0fVxuICAgICAgICAgIHNvdXJjZXM9e1tzb3VyY2VdfVxuICAgICAgICAgIGlzU3VtbWFyeUNvbXBsZXRlZFxuICAgICAgICAvPlxuICAgICAgPC9Cb3g+XG4gICAgICA8Qm94IHN4PXt7IGZsZXhHcm93OiAwLCBwOiBcIjEycHhcIiwgb3ZlcmZsb3c6IFwiaGlkZGVuXCIgfX0+XG4gICAgICAgIHtzaG93VG9vbHRpcHMgPyAoXG4gICAgICAgICAgPEVsbGlwc2lzVG9vbHRpcFxuICAgICAgICAgICAgdmVydGljYWxcbiAgICAgICAgICAgIHRvb2x0aXBUZXh0PXtoZH1cbiAgICAgICAgICAgIHR5cG9ncmFwaHlQcm9wcz17eyBzdHlsZTogeyBsaW5lSGVpZ2h0OiAxLjIsIG1pbkhlaWdodDogNDAgfSB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtoZH1cbiAgICAgICAgICA8L0VsbGlwc2lzVG9vbHRpcD5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICBoZFxuICAgICAgICApfVxuICAgICAgICA8Qm94IHN4PXt7IHB0OiAxLCBkaXNwbGF5OiBcImZsZXhcIiwgXCImIHNwYW5cIjogeyBjb2xvcjogXCJ0ZXh0LnNlY29uZGFyeVwiIH0gfX0+XG4gICAgICAgICAgPERvY3VtZW50SWNvblxuICAgICAgICAgICAgZG9jdW1lbnRTY29wZT17aXNQcml2YXRlID8gXCJmaWxlc1wiIDogZG9jdW1lbnRTY29wZX1cbiAgICAgICAgICAgIHNyY0tleT17c3JjS2V5fVxuICAgICAgICAgICAgY29udGVudFR5cGU9e2V4dC5yZXBsYWNlKFwiLlwiLCBcIlwiKX1cbiAgICAgICAgICAgIHRleHQ9e25hbWV9XG4gICAgICAgICAgLz5cblxuICAgICAgICAgIHt0cyA/IChcbiAgICAgICAgICAgIDxUeXBvZ3JhcGh5IGNvbXBvbmVudD1cInNwYW5cIiBzeD17eyBmbGV4U2hyaW5rOiAwLCBmb250U2l6ZTogMTIgfX0+XG4gICAgICAgICAgICAgIMK3IHtnZXRUaW1lUGFzc2VkKHRzKX1cbiAgICAgICAgICAgIDwvVHlwb2dyYXBoeT5cbiAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgPC9Cb3g+XG4gICAgICA8L0JveD5cbiAgICA8L0JveD5cbiAgKSA6IG51bGxcbn1cblxuZXhwb3J0IHsgU291cmNlRGlzcGxheSwgTG9hZGluZ1NvdXJjZURpc3BsYXkgfVxuIl0sIm5hbWVzIjpbIkxvYWRpbmdTb3VyY2VEaXNwbGF5IiwiU291cmNlRGlzcGxheSIsIlNrZWxldG9uIiwid2lkdGgiLCJoZWlnaHQiLCJ2YXJpYW50Iiwic3giLCJib3JkZXJSYWRpdXMiLCJ0cmFuc2Zvcm0iLCJpc0xvYWRpbmciLCJzb3VyY2UiLCJvbkNsaWNrIiwic2hvd1Rvb2x0aXBzIiwibmFtZSIsInRzIiwiaWRzIiwiaGQiLCJzcmNLZXkiLCJhZGRCeUlkcyIsInVzZUNxc0J5SWRzQ29udGV4dCIsImRvY3VtZW50U2NvcGUiLCJpc1ByaXZhdGUiLCJ1c2VFZmZlY3QiLCJrZXkiLCJxdWVyeVR5cGUiLCJCSUdfU1VNTUFSWV9TT1VSQ0VfSEVJR0hUIiwiZXh0IiwibWF0Y2giLCJCb3giLCJ0aGVtZSIsInpJbmRleCIsImJvcmRlciIsInBhbGV0dGUiLCJvdXRsaW5lIiwiZGlzcGxheSIsImN1cnNvciIsImJhY2tncm91bmRDb2xvciIsIlNvdXJjZUltYWdlRGlzcGxheSIsInAiLCJtYXhXaWR0aCIsIm9iamVjdEZpdCIsInNvdXJjZXMiLCJpc1N1bW1hcnlDb21wbGV0ZWQiLCJmbGV4R3JvdyIsIm92ZXJmbG93IiwiRWxsaXBzaXNUb29sdGlwIiwidmVydGljYWwiLCJ0b29sdGlwVGV4dCIsInR5cG9ncmFwaHlQcm9wcyIsInN0eWxlIiwibGluZUhlaWdodCIsIm1pbkhlaWdodCIsInB0IiwiY29sb3IiLCJEb2N1bWVudEljb24iLCJjb250ZW50VHlwZSIsInJlcGxhY2UiLCJ0ZXh0IiwiVHlwb2dyYXBoeSIsImNvbXBvbmVudCIsImZsZXhTaHJpbmsiLCJmb250U2l6ZSIsImdldFRpbWVQYXNzZWQiXSwicmFuZ2VNYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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