{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/brief/src/hooks/useBriefDetailsViewData/useBriefDetailsViewData.ts"],"sourcesContent":["import { useParams } from \"react-router-dom\"\nimport {\n  type BriefConfig,\n  type BriefReport,\n  useBriefConfigById,\n  useHistoricalBriefReport,\n  useLatestBriefReport,\n} from \"@rp/react/tanstack-api/brief\"\nimport { useBriefReportLoadError } from \"../useBriefReportLoadError\"\n\ntype UseBriefDetailsViewDataState = {\n  briefName: string | undefined\n  briefConfig: BriefConfig | null\n  isLatestBriefReportRetrying: boolean\n  briefReport: BriefReport | null\n}\n\nconst useBriefDetailsViewData = (): UseBriefDetailsViewDataState => {\n  const { briefId, reportId } = useParams()\n  const isHistoricalBriefReport = !!reportId\n\n  const {\n    data: briefConfig = null,\n\n    error: briefConfigError,\n  } = useBriefConfigById({ briefId })\n\n  const briefName = briefConfig?.briefName\n\n  const historicalBriefReportResponse = useHistoricalBriefReport(briefConfig?.id, reportId)\n  const latestBriefReportResponse = useLatestBriefReport(briefConfig?.id, !isHistoricalBriefReport)\n\n  useBriefReportLoadError({\n    briefConfigError,\n    historicalBriefReportResponse,\n    latestBriefReportResponse,\n  })\n\n  const isLatestBriefReportRetrying =\n    !isHistoricalBriefReport &&\n    !!latestBriefReportResponse.isPending &&\n    latestBriefReportResponse.failureCount > 0\n\n  const briefReport =\n    (isHistoricalBriefReport\n      ? historicalBriefReportResponse.data\n      : latestBriefReportResponse.data?.report) || null\n\n  return {\n    briefName,\n    briefReport,\n    briefConfig,\n    isLatestBriefReportRetrying,\n  }\n}\n\nexport { useBriefDetailsViewData }\nexport type { UseBriefDetailsViewDataState }\n"],"names":["useBriefDetailsViewData","latestBriefReportResponse","briefId","reportId","useParams","isHistoricalBriefReport","data","briefConfig","error","briefConfigError","useBriefConfigById","briefName","historicalBriefReportResponse","useHistoricalBriefReport","id","useLatestBriefReport","useBriefReportLoadError","isLatestBriefReportRetrying","isPending","failureCount","briefReport","report"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAwDSA;;;eAAAA;;;gCAxDiB;uBAOnB;yCACiC;AASxC,MAAMA,0BAA0B;QA6BxBC;IA5BN,MAAM,EAAEC,OAAO,EAAEC,QAAQ,EAAE,GAAGC,IAAAA,yBAAS;IACvC,MAAMC,0BAA0B,CAAC,CAACF;IAElC,MAAM,EACJG,MAAMC,cAAc,IAAI,EAExBC,OAAOC,gBAAgB,EACxB,GAAGC,IAAAA,yBAAkB,EAAC;QAAER;IAAQ;IAEjC,MAAMS,YAAYJ,wBAAAA,kCAAAA,YAAaI,SAAS;IAExC,MAAMC,gCAAgCC,IAAAA,+BAAwB,EAACN,wBAAAA,kCAAAA,YAAaO,EAAE,EAAEX;IAChF,MAAMF,4BAA4Bc,IAAAA,2BAAoB,EAACR,wBAAAA,kCAAAA,YAAaO,EAAE,EAAE,CAACT;IAEzEW,IAAAA,gDAAuB,EAAC;QACtBP;QACAG;QACAX;IACF;IAEA,MAAMgB,8BACJ,CAACZ,2BACD,CAAC,CAACJ,0BAA0BiB,SAAS,IACrCjB,0BAA0BkB,YAAY,GAAG;IAE3C,MAAMC,cACJ,AAACf,CAAAA,0BACGO,8BAA8BN,IAAI,IAClCL,kCAAAA,0BAA0BK,IAAI,cAA9BL,sDAAAA,gCAAgCoB,MAAM,AAAD,KAAM;IAEjD,OAAO;QACLV;QACAS;QACAb;QACAU;IACF;AACF"}