{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/brief/src/hooks/useCreateBriefWatchlistCheck/useCreateBriefWatchlistCheck.ts"],"sourcesContent":["import { useEffect } from \"react\"\nimport { useBriefConfigForm } from \"@rp/react/common/brief\"\nimport { useWatchlistEntities } from \"@rp/react/tanstack-api/watchlist\"\nimport { useSnackbar } from \"@rp/react/web/common/providers\"\n\ntype UseCreateBriefWatchlistCheckState = {\n  isLoadingWatchlistEntities: boolean\n  hasCompanies: boolean\n  isFetchingWatchlistEntities: boolean\n  isError: boolean\n}\n\n// This hook is a temporary solution for the briefs to confirm if a watchlist\n// has a company or not. We expect this to be obsolete in the next few months.\n\nconst useCreateBriefWatchlistCheck = (): UseCreateBriefWatchlistCheckState => {\n  const { form } = useBriefConfigForm()\n  const {\n    entities,\n    isLoadingWatchlist: isLoadingWatchlistEntities,\n    isLoadingEntities: isFetchingWatchlistEntities,\n    isError,\n  } = useWatchlistEntities(form.watchlistId)\n  const { enqueueError } = useSnackbar()\n\n  const hasCompanies = entities.some(item => item.category === \"Companies\")\n\n  useEffect(() => {\n    if (\n      !isLoadingWatchlistEntities &&\n      !hasCompanies &&\n      form.watchlistId &&\n      !isFetchingWatchlistEntities\n    ) {\n      enqueueError(\"Watchlists without companies cannot be used to generate the Brief.\")\n    }\n  }, [isLoadingWatchlistEntities, hasCompanies, enqueueError, form, isFetchingWatchlistEntities])\n\n  return {\n    isError,\n    isLoadingWatchlistEntities,\n    hasCompanies,\n    isFetchingWatchlistEntities,\n  }\n}\n\nexport { useCreateBriefWatchlistCheck }\nexport type { UseCreateBriefWatchlistCheckState }\n"],"names":["useCreateBriefWatchlistCheck","form","useBriefConfigForm","entities","isLoadingWatchlist","isLoadingWatchlistEntities","isLoadingEntities","isFetchingWatchlistEntities","isError","useWatchlistEntities","watchlistId","enqueueError","useSnackbar","hasCompanies","some","item","category","useEffect"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA8CSA;;;eAAAA;;;uBA9CiB;uBACS;2BACE;2BACT;AAS5B,6EAA6E;AAC7E,8EAA8E;AAE9E,MAAMA,+BAA+B;IACnC,MAAM,EAAEC,IAAI,EAAE,GAAGC,IAAAA,yBAAkB;IACnC,MAAM,EACJC,QAAQ,EACRC,oBAAoBC,0BAA0B,EAC9CC,mBAAmBC,2BAA2B,EAC9CC,OAAO,EACR,GAAGC,IAAAA,+BAAoB,EAACR,KAAKS,WAAW;IACzC,MAAM,EAAEC,YAAY,EAAE,GAAGC,IAAAA,sBAAW;IAEpC,MAAMC,eAAeV,SAASW,IAAI,CAACC,CAAAA,OAAQA,KAAKC,QAAQ,KAAK;IAE7DC,IAAAA,gBAAS,EAAC;QACR,IACE,CAACZ,8BACD,CAACQ,gBACDZ,KAAKS,WAAW,IAChB,CAACH,6BACD;YACAI,aAAa;QACf;IACF,GAAG;QAACN;QAA4BQ;QAAcF;QAAcV;QAAMM;KAA4B;IAE9F,OAAO;QACLC;QACAH;QACAQ;QACAN;IACF;AACF"}