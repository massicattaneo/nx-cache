{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/apps/client-web/src/app/components/Hub/Files/FileStatusCell/FileStatusCell.tsx"],"sourcesContent":["import { useAccount } from \"@rp/react/common/providers\"\nimport { RPTooltip } from \"@rp/react/web/common/base-components\"\nimport { ActionsMenu } from \"@rp/react/web/common/base-components\"\nimport { useFileActions } from \"@rp/react/web/common/files\"\nimport { ContactSupport } from \"@rp/react/web/common/providers\"\nimport {\n  Box,\n  Button,\n  CircularProgress,\n  IconButton,\n  LinearProgress,\n  Typography,\n} from \"@rp/react/web/mui/core\"\nimport { ReportProblem } from \"@rp/react/web/mui/icons\"\nimport { HintedTypography, SuccessTypography } from \"./FileRowComponents.styles\"\nimport { FileStatusCellProps } from \"./FileRowComponents.types\"\n\nfunction CompleteContent() {\n  return <div />\n}\n\nfunction PendingContent() {\n  return <HintedTypography>Pending</HintedTypography>\n}\n\nfunction ProgressContent({ progress }: { progress: number }) {\n  return (\n    <Box sx={{ display: \"flex\", alignItems: \"center\", height: 24 }}>\n      <Box sx={{ width: \"100%\", mr: 1 }}>\n        <LinearProgress variant=\"determinate\" value={progress} color=\"success\" />\n      </Box>\n      <Box sx={{ minWidth: 35 }}>\n        <Typography variant=\"body2\">{`${Math.round(progress)}%`}</Typography>\n      </Box>\n    </Box>\n  )\n}\n\nfunction AnalyzingContent() {\n  return <HintedTypography>Analyzing</HintedTypography>\n}\n\nfunction DoneContent() {\n  return <SuccessTypography>Done</SuccessTypography>\n}\n\nfunction ErrorContent({ onDelete }: { onDelete: () => void }) {\n  return (\n    <Box\n      sx={{\n        justifyContent: \"center\",\n        display: \"flex\",\n        alignItems: \"center\",\n        gap: \"4px\",\n        height: 24,\n      }}\n    >\n      <RPTooltip\n        disableInteractive={false}\n        title={\n          <>\n            <Typography>Something went wrong.</Typography>\n            <Typography>Try to upload the file again or</Typography>\n            <ContactSupport />\n          </>\n        }\n      >\n        <ReportProblem color=\"error\" />\n      </RPTooltip>\n      <Button onClick={onDelete}>DELETE</Button>\n    </Box>\n  )\n}\n\nfunction ActionCell(props: FileStatusCellProps) {\n  const { actions } = useFileActions()\n  const { hasEntitlement } = useAccount()\n\n  return (\n    <>\n      {hasEntitlement(\"chat:file\") && !props.shouldHideChatIcon ? (\n        <RPTooltip title=\"Chat\" placement=\"top\">\n          <IconButton\n            sx={{ mr: 1 }}\n            onClick={ev => {\n              ev.stopPropagation()\n              actions.chat.onClick(props.item)\n            }}\n          >\n            {actions.chat.icon}\n          </IconButton>\n        </RPTooltip>\n      ) : null}\n      <ActionsMenu\n        onActionClick={props.onActionClick}\n        actions={props.actions}\n        open={props.isOpenMenu}\n        setOpen={props.setIsOpenMenu}\n        item={props.item}\n      />\n    </>\n  )\n}\n\nfunction FileStatusCell(props: FileStatusCellProps) {\n  let cellContent\n  const { item, rowIsHovered, onDelete, isMiniRow = false } = props\n\n  if (isMiniRow) {\n    if (![\"done\", \"completed\"].includes(item.status)) {\n      return <CircularProgress size={18} sx={{ ml: 0.75 }} />\n    }\n    return <ActionCell {...props} />\n  }\n\n  const shouldDisplayControls =\n    (rowIsHovered && item.status === \"done\") || item.status === \"completed\"\n\n  switch (item.status?.toLowerCase()) {\n    case \"completed\":\n      cellContent = shouldDisplayControls ? <ActionCell {...props} /> : <CompleteContent />\n      break\n    case \"pending\":\n      cellContent = <PendingContent />\n      break\n    case \"progress\":\n      cellContent = <ProgressContent progress={item.progress || 0} />\n      break\n    case \"analyzing\":\n    case \"processing\":\n      cellContent = <AnalyzingContent />\n      break\n    case \"done\":\n      cellContent = shouldDisplayControls ? <ActionCell {...props} /> : <DoneContent />\n      break\n    default:\n      cellContent = <ErrorContent onDelete={onDelete} />\n      break\n  }\n\n  return <Box textAlign={shouldDisplayControls ? \"right\" : \"center\"}>{cellContent}</Box>\n}\n\nexport { FileStatusCell, ProgressContent }\n"],"names":["FileStatusCell","ProgressContent","CompleteContent","div","PendingContent","HintedTypography","progress","Box","sx","display","alignItems","height","width","mr","LinearProgress","variant","value","color","minWidth","Typography","Math","round","AnalyzingContent","DoneContent","SuccessTypography","ErrorContent","onDelete","justifyContent","gap","RPTooltip","disableInteractive","title","ContactSupport","ReportProblem","Button","onClick","ActionCell","props","actions","useFileActions","hasEntitlement","useAccount","shouldHideChatIcon","placement","IconButton","ev","stopPropagation","chat","item","icon","ActionsMenu","onActionClick","open","isOpenMenu","setOpen","setIsOpenMenu","cellContent","rowIsHovered","isMiniRow","includes","status","CircularProgress","size","ml","shouldDisplayControls","toLowerCase","textAlign"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"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"}