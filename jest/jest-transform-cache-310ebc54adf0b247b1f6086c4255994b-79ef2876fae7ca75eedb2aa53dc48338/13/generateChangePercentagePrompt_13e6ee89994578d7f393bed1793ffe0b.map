{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/common/watchlists/src/lib/generateChangePercentagePrompt.ts"],"sourcesContent":["import { format, isToday, isYesterday } from \"date-fns\"\nimport { z } from \"zod\"\nimport { financialDataSchemas } from \"@rp/common/zod-contracts/financial-data\"\nimport { generatePercentagePrompt } from \"./generatePercentagePrompt\"\n\ntype Data = z.infer<typeof financialDataSchemas.companyQuote>\n\nfunction generateChangePercentagePrompt(name: string, data: Data) {\n  const ts = new Date(data.timestamp ?? Date.now()).getTime()\n  const percentage = Math.round((data?.changePercentage ?? 0) * 100) / 100\n  const whenDefault = `on past ${format(ts, \"cccc\")}`\n  const whenToday = isToday(ts) ? \"today\" : undefined\n  const whenYesterday = isYesterday(ts) ? \"yesterday\" : undefined\n  const verb = isToday(ts) ? \"is\" : \"was\"\n  const options = whenToday ?? whenYesterday ?? whenDefault\n  return generatePercentagePrompt(name, verb, percentage, options)\n}\n\nexport { generateChangePercentagePrompt }\n"],"names":["generateChangePercentagePrompt","name","data","ts","Date","timestamp","now","getTime","percentage","Math","round","changePercentage","whenDefault","format","whenToday","isToday","undefined","whenYesterday","isYesterday","verb","options","generatePercentagePrompt"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAkBSA;;;eAAAA;;;yBAlBoC;0CAGJ;AAIzC,SAASA,+BAA+BC,IAAY,EAAEC,IAAU;QAC1CA;IAApB,MAAMC,KAAK,IAAIC,KAAKF,CAAAA,kBAAAA,KAAKG,SAAS,cAAdH,6BAAAA,kBAAkBE,KAAKE,GAAG,IAAIC,OAAO;QAC1BL;IAA/B,MAAMM,aAAaC,KAAKC,KAAK,CAAC,AAACR,CAAAA,CAAAA,yBAAAA,iBAAAA,2BAAAA,KAAMS,gBAAgB,cAAtBT,oCAAAA,yBAA0B,CAAA,IAAK,OAAO;IACrE,MAAMU,cAAc,CAAC,QAAQ,EAAEC,IAAAA,eAAM,EAACV,IAAI,QAAQ,CAAC;IACnD,MAAMW,YAAYC,IAAAA,gBAAO,EAACZ,MAAM,UAAUa;IAC1C,MAAMC,gBAAgBC,IAAAA,oBAAW,EAACf,MAAM,cAAca;IACtD,MAAMG,OAAOJ,IAAAA,gBAAO,EAACZ,MAAM,OAAO;QAClBW;IAAhB,MAAMM,UAAUN,CAAAA,OAAAA,sBAAAA,uBAAAA,YAAaG,2BAAbH,kBAAAA,OAA8BF;IAC9C,OAAOS,IAAAA,kDAAwB,EAACpB,MAAMkB,MAAMX,YAAYY;AAC1D"}