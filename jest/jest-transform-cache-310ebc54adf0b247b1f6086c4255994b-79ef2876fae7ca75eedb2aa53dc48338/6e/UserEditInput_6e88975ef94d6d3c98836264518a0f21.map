{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/chat/src/lib/Chat/Chat/UserInput/UserEditInput.tsx"],"sourcesContent":["import { useState } from \"react\"\nimport { useDeviceInfo } from \"@rp/react/web/common/hooks\"\nimport { Box, Button, TextareaAutosize } from \"@rp/react/web/mui/core\"\n\ntype Props = {\n  initialPrompt: string\n  onUpdate: (prompt: string) => void\n  onClose: () => void\n}\n\nconst UserEditInput = ({ initialPrompt, onUpdate, onClose }: Props) => {\n  const [prompt, setPrompt] = useState(initialPrompt)\n  const { isMobile } = useDeviceInfo()\n\n  const submitPrompt = () => {\n    if (prompt === initialPrompt || prompt.length === 0) {\n      return\n    }\n    onUpdate(prompt)\n    onClose()\n  }\n\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement | HTMLTextAreaElement>) => {\n    if (event.key === \"Enter\" && !isMobile && event.shiftKey === false) {\n      event.preventDefault()\n      submitPrompt()\n    }\n\n    if (event.key === \"Escape\") {\n      event.preventDefault()\n      onClose()\n    }\n  }\n\n  return (\n    <Box\n      sx={{\n        width: \"100%\",\n        \"& textarea\": {\n          backgroundColor: \"transparent\",\n          width: \"100%\",\n          borderRadius: 0.5,\n          fontSize: isMobile ? 18 : 17,\n          color: \"text.primary\",\n          py: 1,\n          px: 1.5,\n          fontFamily: \"body1.fontFamily\",\n          resize: \"none\",\n        },\n\n        \"& textarea:focus\": {\n          outline: \"none\",\n          borderColor: \"primary.main\",\n        },\n      }}\n    >\n      <TextareaAutosize\n        maxRows={5}\n        value={prompt}\n        onChange={event => setPrompt(event.target.value)}\n        onKeyDown={handleKeyDown}\n        onFocus={event => event.target.setSelectionRange(prompt.length, prompt.length)}\n        autoFocus\n        maxLength={5000}\n      />\n      <Box sx={{ display: \"flex\", mt: 2, gap: 2 }}>\n        <Button onClick={onClose}>Cancel</Button>\n        <Button\n          onClick={submitPrompt}\n          variant=\"contained\"\n          data-testid=\"question-update\"\n          disabled={initialPrompt === prompt}\n        >\n          Update\n        </Button>\n      </Box>\n    </Box>\n  )\n}\n\nexport { UserEditInput }\n"],"names":["UserEditInput","initialPrompt","onUpdate","onClose","prompt","setPrompt","useState","isMobile","useDeviceInfo","submitPrompt","length","handleKeyDown","event","key","shiftKey","preventDefault","Box","sx","width","backgroundColor","borderRadius","fontSize","color","py","px","fontFamily","resize","outline","borderColor","TextareaAutosize","maxRows","value","onChange","target","onKeyDown","onFocus","setSelectionRange","autoFocus","maxLength","display","mt","gap","Button","onClick","variant","data-testid","disabled"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAgFSA;;;eAAAA;;;;uBAhFgB;uBACK;sBACgB;AAQ9C,MAAMA,gBAAgB,CAAC,EAAEC,aAAa,EAAEC,QAAQ,EAAEC,OAAO,EAAS;IAChE,MAAM,CAACC,QAAQC,UAAU,GAAGC,IAAAA,eAAQ,EAACL;IACrC,MAAM,EAAEM,QAAQ,EAAE,GAAGC,IAAAA,oBAAa;IAElC,MAAMC,eAAe;QACnB,IAAIL,WAAWH,iBAAiBG,OAAOM,MAAM,KAAK,GAAG;YACnD;QACF;QACAR,SAASE;QACTD;IACF;IAEA,MAAMQ,gBAAgB,CAACC;QACrB,IAAIA,MAAMC,GAAG,KAAK,WAAW,CAACN,YAAYK,MAAME,QAAQ,KAAK,OAAO;YAClEF,MAAMG,cAAc;YACpBN;QACF;QAEA,IAAIG,MAAMC,GAAG,KAAK,UAAU;YAC1BD,MAAMG,cAAc;YACpBZ;QACF;IACF;IAEA,qBACE,sBAACa,SAAG;QACFC,IAAI;YACFC,OAAO;YACP,cAAc;gBACZC,iBAAiB;gBACjBD,OAAO;gBACPE,cAAc;gBACdC,UAAUd,WAAW,KAAK;gBAC1Be,OAAO;gBACPC,IAAI;gBACJC,IAAI;gBACJC,YAAY;gBACZC,QAAQ;YACV;YAEA,oBAAoB;gBAClBC,SAAS;gBACTC,aAAa;YACf;QACF;;0BAEA,qBAACC,sBAAgB;gBACfC,SAAS;gBACTC,OAAO3B;gBACP4B,UAAUpB,CAAAA,QAASP,UAAUO,MAAMqB,MAAM,CAACF,KAAK;gBAC/CG,WAAWvB;gBACXwB,SAASvB,CAAAA,QAASA,MAAMqB,MAAM,CAACG,iBAAiB,CAAChC,OAAOM,MAAM,EAAEN,OAAOM,MAAM;gBAC7E2B,SAAS;gBACTC,WAAW;;0BAEb,sBAACtB,SAAG;gBAACC,IAAI;oBAAEsB,SAAS;oBAAQC,IAAI;oBAAGC,KAAK;gBAAE;;kCACxC,qBAACC,YAAM;wBAACC,SAASxC;kCAAS;;kCAC1B,qBAACuC,YAAM;wBACLC,SAASlC;wBACTmC,SAAQ;wBACRC,eAAY;wBACZC,UAAU7C,kBAAkBG;kCAC7B;;;;;;AAMT"}