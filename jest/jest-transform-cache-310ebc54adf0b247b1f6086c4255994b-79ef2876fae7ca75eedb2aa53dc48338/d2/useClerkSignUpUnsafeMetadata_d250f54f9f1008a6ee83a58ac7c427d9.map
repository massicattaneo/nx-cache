{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/hooks/src/useClerkSignUpUnsafeMetadata.ts"],"sourcesContent":["import { useSearchParams } from \"react-router-dom\"\nimport { z } from \"zod\"\n\nconst UtmSchema = z.object({\n  utm_source: z.string().optional(),\n  utm_medium: z.string().optional(),\n  utm_campaign: z.string().optional(),\n  utm_term: z.string().optional(),\n  utm_content: z.string().optional(),\n})\n\ntype UtmData = z.infer<typeof UtmSchema>\n\nfunction useUtmParams() {\n  const [searchParams] = useSearchParams()\n\n  const paramObject = Object.fromEntries(searchParams.entries())\n  const result = UtmSchema.safeParse(paramObject)\n\n  if (!result.success) {\n    return {}\n  }\n\n  return result.data\n}\n\ntype ClerkUnsafeMetadata = {\n  self_registered: true\n  requireOnboarding: true\n  source: \"web-client\"\n  initialLogin: true\n  marketingAccepted?: boolean\n  utm: UtmData\n}\n\nexport const useClerkSignUpUnsafeMetadata = (marketingAccepted?: boolean): ClerkUnsafeMetadata => {\n  const utm = useUtmParams()\n  return {\n    self_registered: true,\n    requireOnboarding: true,\n    source: \"web-client\",\n    initialLogin: true,\n    ...(marketingAccepted !== undefined && { marketingAccepted }),\n    utm,\n  }\n}\n\nexport { type UtmData, type ClerkUnsafeMetadata }\n"],"names":["useClerkSignUpUnsafeMetadata","UtmSchema","z","object","utm_source","string","optional","utm_medium","utm_campaign","utm_term","utm_content","useUtmParams","searchParams","useSearchParams","paramObject","Object","fromEntries","entries","result","safeParse","success","data","marketingAccepted","utm","self_registered","requireOnboarding","source","initialLogin","undefined"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAmCaA;;;eAAAA;;;gCAnCmB;qBACd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAElB,MAAMC,YAAYC,MAAC,CAACC,MAAM,CAAC;IACzBC,YAAYF,MAAC,CAACG,MAAM,GAAGC,QAAQ;IAC/BC,YAAYL,MAAC,CAACG,MAAM,GAAGC,QAAQ;IAC/BE,cAAcN,MAAC,CAACG,MAAM,GAAGC,QAAQ;IACjCG,UAAUP,MAAC,CAACG,MAAM,GAAGC,QAAQ;IAC7BI,aAAaR,MAAC,CAACG,MAAM,GAAGC,QAAQ;AAClC;AAIA,SAASK;IACP,MAAM,CAACC,aAAa,GAAGC,IAAAA,+BAAe;IAEtC,MAAMC,cAAcC,OAAOC,WAAW,CAACJ,aAAaK,OAAO;IAC3D,MAAMC,SAASjB,UAAUkB,SAAS,CAACL;IAEnC,IAAI,CAACI,OAAOE,OAAO,EAAE;QACnB,OAAO,CAAC;IACV;IAEA,OAAOF,OAAOG,IAAI;AACpB;AAWO,MAAMrB,+BAA+B,CAACsB;IAC3C,MAAMC,MAAMZ;IACZ,OAAO;QACLa,iBAAiB;QACjBC,mBAAmB;QACnBC,QAAQ;QACRC,cAAc;OACVL,sBAAsBM,aAAa;QAAEN;IAAkB;QAC3DC;;AAEJ"}