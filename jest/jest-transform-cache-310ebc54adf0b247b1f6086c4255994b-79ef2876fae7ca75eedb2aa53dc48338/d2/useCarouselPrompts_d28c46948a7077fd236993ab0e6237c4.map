{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/common/hooks/src/lib/useCarouselPrompts.ts"],"sourcesContent":["import { useMemo } from \"react\"\nimport { DatasetScope } from \"@rp/common/api-types\"\nimport { getDatasetFilter } from \"@rp/common/utils\"\nimport { useSuggestedPrompts } from \"./useSuggestedPrompts\"\nimport { shufflePrompts } from \"./useSuggestedPrompts/shufflePrompts\"\nimport { Filters } from \"./useSuggestedPrompts/suggestedPrompts.types\"\n\ntype Options = {\n  scope?: DatasetScope\n  watchlistPrompts?: boolean\n  hasEntitlement?: Filters[\"hasEntitlement\"]\n}\n\n//Note: hasEntitlement has to be passed as prop instead of using useAccount() to avoid circular dependency\nconst useCarouselPrompts = ({ scope, watchlistPrompts, hasEntitlement }: Options) => {\n  const datasets = useMemo(\n    () => getDatasetFilter(scope, watchlistPrompts),\n    [scope, watchlistPrompts],\n  )\n\n  const filters = useMemo(\n    () => ({\n      datasets,\n      watchlistPrompts,\n      includeTopics: scope || watchlistPrompts ? undefined : { Popular: true },\n      hasEntitlement,\n    }),\n    // TODO: memoize hasEntitlement to add it as a dependency\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [datasets, watchlistPrompts],\n  )\n\n  const { data: suggestedPrompts } = useSuggestedPrompts(filters)\n  const randomPrompts = useMemo(() => {\n    return suggestedPrompts ? shufflePrompts(suggestedPrompts) : undefined\n  }, [suggestedPrompts])\n\n  return randomPrompts\n}\n\nexport { useCarouselPrompts }\n"],"names":["useCarouselPrompts","scope","watchlistPrompts","hasEntitlement","datasets","useMemo","getDatasetFilter","filters","includeTopics","undefined","Popular","data","suggestedPrompts","useSuggestedPrompts","randomPrompts","shufflePrompts"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAwCSA;;;eAAAA;;;uBAxCe;uBAES;qCACG;gCACL;AAS/B,0GAA0G;AAC1G,MAAMA,qBAAqB,CAAC,EAAEC,KAAK,EAAEC,gBAAgB,EAAEC,cAAc,EAAW;IAC9E,MAAMC,WAAWC,IAAAA,cAAO,EACtB,IAAMC,IAAAA,uBAAgB,EAACL,OAAOC,mBAC9B;QAACD;QAAOC;KAAiB;IAG3B,MAAMK,UAAUF,IAAAA,cAAO,EACrB,IAAO,CAAA;YACLD;YACAF;YACAM,eAAeP,SAASC,mBAAmBO,YAAY;gBAAEC,SAAS;YAAK;YACvEP;QACF,CAAA,GACA,yDAAyD;IACzD,uDAAuD;IACvD;QAACC;QAAUF;KAAiB;IAG9B,MAAM,EAAES,MAAMC,gBAAgB,EAAE,GAAGC,IAAAA,wCAAmB,EAACN;IACvD,MAAMO,gBAAgBT,IAAAA,cAAO,EAAC;QAC5B,OAAOO,mBAAmBG,IAAAA,8BAAc,EAACH,oBAAoBH;IAC/D,GAAG;QAACG;KAAiB;IAErB,OAAOE;AACT"}