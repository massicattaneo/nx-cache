b02fad24901f4ed83edbe260134a3f39
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "DiscoveryPanelWidget", {
    enumerable: true,
    get: function() {
        return DiscoveryPanelWidget;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _discoverysidebar = require("@rp/react/web/common/discovery-sidebar");
const _hooks = require("@rp/react/web/common/hooks");
const _providers = require("@rp/react/web/common/providers");
const _utils = require("@rp/react/web/common/vendors/utils");
const _cqsquerycontext = require("@rp/react/web/cqs-query-context");
const DiscoveryPanelWidget = ({ widgetCategory, widgetActions, mentionsItem, setMentionItem, scrollToWidgetTop, onAddToWatchlist, isFeedbackMode })=>{
    const { isMobile } = (0, _hooks.useDeviceInfo)();
    const { actions: { expression: queryCQSActions }, savedQuery: { saveStatus }, queryId } = (0, _providers.useQueryContext)();
    const handleOnChange = (element)=>{
        const shouldRemove = element.queryRelationship === "direct";
        _utils.tagManagerEvents.queryRefinement({
            action: shouldRemove ? "remove" : "add",
            component: "discoveryPanel",
            queryId,
            queryType: element.queryType,
            savedStatus: saveStatus !== null && saveStatus !== void 0 ? saveStatus : "unsaved"
        });
        const filterItem = (0, _cqsquerycontext.convertDiscoveryPanelItem)(element);
        if (shouldRemove) {
            queryCQSActions.removeItem(filterItem);
            return;
        }
        queryCQSActions.addItem(filterItem);
    };
    const handleExclude = (element)=>{
        const shouldUpdate = element.queryRelationship === "direct";
        _utils.tagManagerEvents.queryRefinement({
            action: shouldUpdate ? "changeOperation" : "add",
            component: "discoveryPanel",
            queryId,
            queryType: element.queryType,
            savedStatus: saveStatus !== null && saveStatus !== void 0 ? saveStatus : "unsaved"
        });
        const filterItem = (0, _cqsquerycontext.convertDiscoveryPanelItem)(element);
        queryCQSActions.excludeItemFromDP(filterItem, !shouldUpdate);
    };
    return mentionsItem !== undefined ? /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
        children: isMobile ? /*#__PURE__*/ (0, _jsxruntime.jsx)(_discoverysidebar.MentionsPanelMobile, {
            isFeedbackMode: isFeedbackMode,
            title: widgetCategory.label,
            rowData: mentionsItem,
            handleClose: ()=>setMentionItem === null || setMentionItem === void 0 ? void 0 : setMentionItem(widgetCategory.id, undefined),
            onChange: ()=>handleOnChange(mentionsItem)
        }) : /*#__PURE__*/ (0, _jsxruntime.jsx)(_discoverysidebar.MentionsPanel, {
            isFeedbackMode: isFeedbackMode,
            title: widgetCategory.label,
            rowData: mentionsItem,
            handleClose: ()=>setMentionItem === null || setMentionItem === void 0 ? void 0 : setMentionItem(widgetCategory.id, undefined),
            onChange: ()=>handleOnChange(mentionsItem),
            onAddToWatchlist: onAddToWatchlist,
            onExclude: handleExclude
        })
    }) : /*#__PURE__*/ (0, _jsxruntime.jsx)(_discoverysidebar.GenericGroup, {
        widgetCategory: widgetCategory,
        onChange: handleOnChange,
        onClick: (item)=>{
            setMentionItem === null || setMentionItem === void 0 ? void 0 : setMentionItem(widgetCategory.id, item);
            scrollToWidgetTop === null || scrollToWidgetTop === void 0 ? void 0 : scrollToWidgetTop();
        },
        onExclude: handleExclude,
        widgetActions: widgetActions,
        onAddToWatchlist: onAddToWatchlist
    }, widgetCategory.label);
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tY2F0dGFuZW8vd29ya3NwYWNlL2Zyb250ZW5kL2xpYnMvcmVhY3Qvd2ViL2Rpc2NvdmVyeS1zaWRlYmFyL2Rpc2NvdmVyeS1wYW5lbC9zcmMvRGlzY292ZXJ5UGFuZWwvRGlzY292ZXJ5UGFuZWxXaWRnZXQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENxc0l0ZW0gfSBmcm9tIFwiQHJwL2NvbW1vbi9hcGktdHlwZXNcIlxuaW1wb3J0IHsgV2F0Y2hsaXN0IH0gZnJvbSBcIkBycC9jb21tb24vYXBpLXR5cGVzXCJcbmltcG9ydCB7XG4gIENhdGVnb3J5V2lkZ2V0QWN0aW9ucyxcbiAgR2VuZXJpY0dyb3VwLFxuICBXaWRnZXRDYXRlZ29yeSxcbn0gZnJvbSBcIkBycC9yZWFjdC93ZWIvY29tbW9uL2Rpc2NvdmVyeS1zaWRlYmFyXCJcbmltcG9ydCB7IE1lbnRpb25zUGFuZWwsIE1lbnRpb25zUGFuZWxNb2JpbGUgfSBmcm9tIFwiQHJwL3JlYWN0L3dlYi9jb21tb24vZGlzY292ZXJ5LXNpZGViYXJcIlxuaW1wb3J0IHsgdXNlRGV2aWNlSW5mbyB9IGZyb20gXCJAcnAvcmVhY3Qvd2ViL2NvbW1vbi9ob29rc1wiXG5pbXBvcnQgeyB1c2VRdWVyeUNvbnRleHQgfSBmcm9tIFwiQHJwL3JlYWN0L3dlYi9jb21tb24vcHJvdmlkZXJzXCJcbmltcG9ydCB7IHRhZ01hbmFnZXJFdmVudHMgfSBmcm9tIFwiQHJwL3JlYWN0L3dlYi9jb21tb24vdmVuZG9ycy91dGlsc1wiXG5pbXBvcnQgeyBjb252ZXJ0RGlzY292ZXJ5UGFuZWxJdGVtIH0gZnJvbSBcIkBycC9yZWFjdC93ZWIvY3FzLXF1ZXJ5LWNvbnRleHRcIlxuXG50eXBlIERpc2NvdmVyeVBhbmVsV2lkZ2V0UHJvcHMgPSB7XG4gIHdpZGdldENhdGVnb3J5OiBXaWRnZXRDYXRlZ29yeVxuICB3aWRnZXRBY3Rpb25zOiBDYXRlZ29yeVdpZGdldEFjdGlvbnNcbiAgbWVudGlvbnNJdGVtPzogQ3FzSXRlbSB8IHVuZGVmaW5lZFxuICBzZXRNZW50aW9uSXRlbT86IChjYXRlZ29yeTogc3RyaW5nLCB2YWx1ZTogQ3FzSXRlbSB8IHVuZGVmaW5lZCkgPT4gdm9pZFxuICBzY3JvbGxUb1dpZGdldFRvcD86ICgpID0+IHZvaWRcbiAgb25BZGRUb1dhdGNobGlzdD86ICh3YXRjaGxpc3Q6IFdhdGNobGlzdCkgPT4gdm9pZFxuICBpc0ZlZWRiYWNrTW9kZTogYm9vbGVhblxufVxuXG5jb25zdCBEaXNjb3ZlcnlQYW5lbFdpZGdldCA9ICh7XG4gIHdpZGdldENhdGVnb3J5LFxuICB3aWRnZXRBY3Rpb25zLFxuICBtZW50aW9uc0l0ZW0sXG4gIHNldE1lbnRpb25JdGVtLFxuICBzY3JvbGxUb1dpZGdldFRvcCxcbiAgb25BZGRUb1dhdGNobGlzdCxcbiAgaXNGZWVkYmFja01vZGUsXG59OiBEaXNjb3ZlcnlQYW5lbFdpZGdldFByb3BzKSA9PiB7XG4gIGNvbnN0IHsgaXNNb2JpbGUgfSA9IHVzZURldmljZUluZm8oKVxuXG4gIGNvbnN0IHtcbiAgICBhY3Rpb25zOiB7IGV4cHJlc3Npb246IHF1ZXJ5Q1FTQWN0aW9ucyB9LFxuICAgIHNhdmVkUXVlcnk6IHsgc2F2ZVN0YXR1cyB9LFxuICAgIHF1ZXJ5SWQsXG4gIH0gPSB1c2VRdWVyeUNvbnRleHQoKVxuXG4gIGNvbnN0IGhhbmRsZU9uQ2hhbmdlID0gKGVsZW1lbnQ6IENxc0l0ZW0pID0+IHtcbiAgICBjb25zdCBzaG91bGRSZW1vdmUgPSBlbGVtZW50LnF1ZXJ5UmVsYXRpb25zaGlwID09PSBcImRpcmVjdFwiXG5cbiAgICB0YWdNYW5hZ2VyRXZlbnRzLnF1ZXJ5UmVmaW5lbWVudCh7XG4gICAgICBhY3Rpb246IHNob3VsZFJlbW92ZSA/IFwicmVtb3ZlXCIgOiBcImFkZFwiLFxuICAgICAgY29tcG9uZW50OiBcImRpc2NvdmVyeVBhbmVsXCIsXG4gICAgICBxdWVyeUlkLFxuICAgICAgcXVlcnlUeXBlOiBlbGVtZW50LnF1ZXJ5VHlwZSxcbiAgICAgIHNhdmVkU3RhdHVzOiBzYXZlU3RhdHVzID8/IFwidW5zYXZlZFwiLFxuICAgIH0pXG5cbiAgICBjb25zdCBmaWx0ZXJJdGVtID0gY29udmVydERpc2NvdmVyeVBhbmVsSXRlbShlbGVtZW50KVxuICAgIGlmIChzaG91bGRSZW1vdmUpIHtcbiAgICAgIHF1ZXJ5Q1FTQWN0aW9ucy5yZW1vdmVJdGVtKGZpbHRlckl0ZW0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgcXVlcnlDUVNBY3Rpb25zLmFkZEl0ZW0oZmlsdGVySXRlbSlcbiAgfVxuXG4gIGNvbnN0IGhhbmRsZUV4Y2x1ZGUgPSAoZWxlbWVudDogQ3FzSXRlbSkgPT4ge1xuICAgIGNvbnN0IHNob3VsZFVwZGF0ZSA9IGVsZW1lbnQucXVlcnlSZWxhdGlvbnNoaXAgPT09IFwiZGlyZWN0XCJcblxuICAgIHRhZ01hbmFnZXJFdmVudHMucXVlcnlSZWZpbmVtZW50KHtcbiAgICAgIGFjdGlvbjogc2hvdWxkVXBkYXRlID8gXCJjaGFuZ2VPcGVyYXRpb25cIiA6IFwiYWRkXCIsXG4gICAgICBjb21wb25lbnQ6IFwiZGlzY292ZXJ5UGFuZWxcIixcbiAgICAgIHF1ZXJ5SWQsXG4gICAgICBxdWVyeVR5cGU6IGVsZW1lbnQucXVlcnlUeXBlLFxuICAgICAgc2F2ZWRTdGF0dXM6IHNhdmVTdGF0dXMgPz8gXCJ1bnNhdmVkXCIsXG4gICAgfSlcblxuICAgIGNvbnN0IGZpbHRlckl0ZW0gPSBjb252ZXJ0RGlzY292ZXJ5UGFuZWxJdGVtKGVsZW1lbnQpXG4gICAgcXVlcnlDUVNBY3Rpb25zLmV4Y2x1ZGVJdGVtRnJvbURQKGZpbHRlckl0ZW0sICFzaG91bGRVcGRhdGUpXG4gIH1cblxuICByZXR1cm4gbWVudGlvbnNJdGVtICE9PSB1bmRlZmluZWQgPyAoXG4gICAgPGRpdj5cbiAgICAgIHtpc01vYmlsZSA/IChcbiAgICAgICAgPE1lbnRpb25zUGFuZWxNb2JpbGVcbiAgICAgICAgICBpc0ZlZWRiYWNrTW9kZT17aXNGZWVkYmFja01vZGV9XG4gICAgICAgICAgdGl0bGU9e3dpZGdldENhdGVnb3J5LmxhYmVsfVxuICAgICAgICAgIHJvd0RhdGE9e21lbnRpb25zSXRlbX1cbiAgICAgICAgICBoYW5kbGVDbG9zZT17KCkgPT4gc2V0TWVudGlvbkl0ZW0/Lih3aWRnZXRDYXRlZ29yeS5pZCwgdW5kZWZpbmVkKX1cbiAgICAgICAgICBvbkNoYW5nZT17KCkgPT4gaGFuZGxlT25DaGFuZ2UobWVudGlvbnNJdGVtKX1cbiAgICAgICAgLz5cbiAgICAgICkgOiAoXG4gICAgICAgIDxNZW50aW9uc1BhbmVsXG4gICAgICAgICAgaXNGZWVkYmFja01vZGU9e2lzRmVlZGJhY2tNb2RlfVxuICAgICAgICAgIHRpdGxlPXt3aWRnZXRDYXRlZ29yeS5sYWJlbH1cbiAgICAgICAgICByb3dEYXRhPXttZW50aW9uc0l0ZW19XG4gICAgICAgICAgaGFuZGxlQ2xvc2U9eygpID0+IHNldE1lbnRpb25JdGVtPy4od2lkZ2V0Q2F0ZWdvcnkuaWQsIHVuZGVmaW5lZCl9XG4gICAgICAgICAgb25DaGFuZ2U9eygpID0+IGhhbmRsZU9uQ2hhbmdlKG1lbnRpb25zSXRlbSl9XG4gICAgICAgICAgb25BZGRUb1dhdGNobGlzdD17b25BZGRUb1dhdGNobGlzdH1cbiAgICAgICAgICBvbkV4Y2x1ZGU9e2hhbmRsZUV4Y2x1ZGV9XG4gICAgICAgIC8+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApIDogKFxuICAgIDxHZW5lcmljR3JvdXBcbiAgICAgIGtleT17d2lkZ2V0Q2F0ZWdvcnkubGFiZWx9XG4gICAgICB3aWRnZXRDYXRlZ29yeT17d2lkZ2V0Q2F0ZWdvcnl9XG4gICAgICBvbkNoYW5nZT17aGFuZGxlT25DaGFuZ2V9XG4gICAgICBvbkNsaWNrPXsoaXRlbTogQ3FzSXRlbSkgPT4ge1xuICAgICAgICBzZXRNZW50aW9uSXRlbT8uKHdpZGdldENhdGVnb3J5LmlkLCBpdGVtKVxuICAgICAgICBzY3JvbGxUb1dpZGdldFRvcD8uKClcbiAgICAgIH19XG4gICAgICBvbkV4Y2x1ZGU9e2hhbmRsZUV4Y2x1ZGV9XG4gICAgICB3aWRnZXRBY3Rpb25zPXt3aWRnZXRBY3Rpb25zfVxuICAgICAgb25BZGRUb1dhdGNobGlzdD17b25BZGRUb1dhdGNobGlzdH1cbiAgICAvPlxuICApXG59XG5cbmV4cG9ydCB7IERpc2NvdmVyeVBhbmVsV2lkZ2V0IH1cbmV4cG9ydCB0eXBlIHsgRGlzY292ZXJ5UGFuZWxXaWRnZXRQcm9wcyB9XG4iXSwibmFtZXMiOlsiRGlzY292ZXJ5UGFuZWxXaWRnZXQiLCJ3aWRnZXRDYXRlZ29yeSIsIndpZGdldEFjdGlvbnMiLCJtZW50aW9uc0l0ZW0iLCJzZXRNZW50aW9uSXRlbSIsInNjcm9sbFRvV2lkZ2V0VG9wIiwib25BZGRUb1dhdGNobGlzdCIsImlzRmVlZGJhY2tNb2RlIiwiaXNNb2JpbGUiLCJ1c2VEZXZpY2VJbmZvIiwiYWN0aW9ucyIsImV4cHJlc3Npb24iLCJxdWVyeUNRU0FjdGlvbnMiLCJzYXZlZFF1ZXJ5Iiwic2F2ZVN0YXR1cyIsInF1ZXJ5SWQiLCJ1c2VRdWVyeUNvbnRleHQiLCJoYW5kbGVPbkNoYW5nZSIsImVsZW1lbnQiLCJzaG91bGRSZW1vdmUiLCJxdWVyeVJlbGF0aW9uc2hpcCIsInRhZ01hbmFnZXJFdmVudHMiLCJxdWVyeVJlZmluZW1lbnQiLCJhY3Rpb24iLCJjb21wb25lbnQiLCJxdWVyeVR5cGUiLCJzYXZlZFN0YXR1cyIsImZpbHRlckl0ZW0iLCJjb252ZXJ0RGlzY292ZXJ5UGFuZWxJdGVtIiwicmVtb3ZlSXRlbSIsImFkZEl0ZW0iLCJoYW5kbGVFeGNsdWRlIiwic2hvdWxkVXBkYXRlIiwiZXhjbHVkZUl0ZW1Gcm9tRFAiLCJ1bmRlZmluZWQiLCJkaXYiLCJNZW50aW9uc1BhbmVsTW9iaWxlIiwidGl0bGUiLCJsYWJlbCIsInJvd0RhdGEiLCJoYW5kbGVDbG9zZSIsImlkIiwib25DaGFuZ2UiLCJNZW50aW9uc1BhbmVsIiwib25FeGNsdWRlIiwiR2VuZXJpY0dyb3VwIiwib25DbGljayIsIml0ZW0iXSwicmFuZ2VNYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7IiwibWFwcGluZ3MiOiI7Ozs7K0JBZ0hTQTs7O2VBQUFBOzs7O2tDQTFHRjt1QkFFdUI7MkJBQ0U7dUJBQ0M7aUNBQ1M7QUFZMUMsTUFBTUEsdUJBQXVCLENBQUMsRUFDNUJDLGNBQWMsRUFDZEMsYUFBYSxFQUNiQyxZQUFZLEVBQ1pDLGNBQWMsRUFDZEMsaUJBQWlCLEVBQ2pCQyxnQkFBZ0IsRUFDaEJDLGNBQWMsRUFDWTtJQUMxQixNQUFNLEVBQUVDLFFBQVEsRUFBRSxHQUFHQyxJQUFBQSxvQkFBYTtJQUVsQyxNQUFNLEVBQ0pDLFNBQVMsRUFBRUMsWUFBWUMsZUFBZSxFQUFFLEVBQ3hDQyxZQUFZLEVBQUVDLFVBQVUsRUFBRSxFQUMxQkMsT0FBTyxFQUNSLEdBQUdDLElBQUFBLDBCQUFlO0lBRW5CLE1BQU1DLGlCQUFpQixDQUFDQztRQUN0QixNQUFNQyxlQUFlRCxRQUFRRSxpQkFBaUIsS0FBSztRQUVuREMsdUJBQWdCLENBQUNDLGVBQWUsQ0FBQztZQUMvQkMsUUFBUUosZUFBZSxXQUFXO1lBQ2xDSyxXQUFXO1lBQ1hUO1lBQ0FVLFdBQVdQLFFBQVFPLFNBQVM7WUFDNUJDLGFBQWFaLHVCQUFBQSx3QkFBQUEsYUFBYztRQUM3QjtRQUVBLE1BQU1hLGFBQWFDLElBQUFBLDBDQUF5QixFQUFDVjtRQUM3QyxJQUFJQyxjQUFjO1lBQ2hCUCxnQkFBZ0JpQixVQUFVLENBQUNGO1lBQzNCO1FBQ0Y7UUFDQWYsZ0JBQWdCa0IsT0FBTyxDQUFDSDtJQUMxQjtJQUVBLE1BQU1JLGdCQUFnQixDQUFDYjtRQUNyQixNQUFNYyxlQUFlZCxRQUFRRSxpQkFBaUIsS0FBSztRQUVuREMsdUJBQWdCLENBQUNDLGVBQWUsQ0FBQztZQUMvQkMsUUFBUVMsZUFBZSxvQkFBb0I7WUFDM0NSLFdBQVc7WUFDWFQ7WUFDQVUsV0FBV1AsUUFBUU8sU0FBUztZQUM1QkMsYUFBYVosdUJBQUFBLHdCQUFBQSxhQUFjO1FBQzdCO1FBRUEsTUFBTWEsYUFBYUMsSUFBQUEsMENBQXlCLEVBQUNWO1FBQzdDTixnQkFBZ0JxQixpQkFBaUIsQ0FBQ04sWUFBWSxDQUFDSztJQUNqRDtJQUVBLE9BQU83QixpQkFBaUIrQiwwQkFDdEIscUJBQUNDO2tCQUNFM0IseUJBQ0MscUJBQUM0QixxQ0FBbUI7WUFDbEI3QixnQkFBZ0JBO1lBQ2hCOEIsT0FBT3BDLGVBQWVxQyxLQUFLO1lBQzNCQyxTQUFTcEM7WUFDVHFDLGFBQWEsSUFBTXBDLDJCQUFBQSxxQ0FBQUEsZUFBaUJILGVBQWV3QyxFQUFFLEVBQUVQO1lBQ3ZEUSxVQUFVLElBQU16QixlQUFlZDsyQkFHakMscUJBQUN3QywrQkFBYTtZQUNacEMsZ0JBQWdCQTtZQUNoQjhCLE9BQU9wQyxlQUFlcUMsS0FBSztZQUMzQkMsU0FBU3BDO1lBQ1RxQyxhQUFhLElBQU1wQywyQkFBQUEscUNBQUFBLGVBQWlCSCxlQUFld0MsRUFBRSxFQUFFUDtZQUN2RFEsVUFBVSxJQUFNekIsZUFBZWQ7WUFDL0JHLGtCQUFrQkE7WUFDbEJzQyxXQUFXYjs7dUJBS2pCLHFCQUFDYyw4QkFBWTtRQUVYNUMsZ0JBQWdCQTtRQUNoQnlDLFVBQVV6QjtRQUNWNkIsU0FBUyxDQUFDQztZQUNSM0MsMkJBQUFBLHFDQUFBQSxlQUFpQkgsZUFBZXdDLEVBQUUsRUFBRU07WUFDcEMxQyw4QkFBQUEsd0NBQUFBO1FBQ0Y7UUFDQXVDLFdBQVdiO1FBQ1g3QixlQUFlQTtRQUNmSSxrQkFBa0JBO09BVGJMLGVBQWVxQyxLQUFLO0FBWS9CIn0=