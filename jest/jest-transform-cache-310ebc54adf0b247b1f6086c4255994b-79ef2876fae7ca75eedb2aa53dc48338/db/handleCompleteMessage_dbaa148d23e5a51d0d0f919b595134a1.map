{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/common/hooks/src/lib/useAgent/handlers/handleCompleteMessage.ts"],"sourcesContent":["import { chatCustomerIo } from \"@rp/react/common/customer-io\"\nimport { AgentMessageState } from \"../useAgent.types\"\n\nfunction handleCompleteMessage(\n  agentState: AgentMessageState,\n  { chatId, executionMode }: { chatId: string; executionMode?: \"chat\" | \"research\" },\n): AgentMessageState {\n  if (agentState.answerStream.length > 0) {\n    chatCustomerIo.agentSummaryCompleted({\n      chatId,\n      interactionTimestamp: new Date().toISOString(),\n      executionMode: executionMode ?? \"research\",\n      requestId: agentState.requestId,\n    })\n  }\n  return {\n    ...agentState,\n    closed: true,\n  }\n}\n\nexport { handleCompleteMessage }\n"],"names":["handleCompleteMessage","agentState","chatId","executionMode","answerStream","length","chatCustomerIo","agentSummaryCompleted","interactionTimestamp","Date","toISOString","requestId","closed"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAqBSA;;;eAAAA;;;4BArBsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAG/B,SAASA,sBACPC,UAA6B,EAC7B,EAAEC,MAAM,EAAEC,aAAa,EAA2D;IAElF,IAAIF,WAAWG,YAAY,CAACC,MAAM,GAAG,GAAG;QACtCC,0BAAc,CAACC,qBAAqB,CAAC;YACnCL;YACAM,sBAAsB,IAAIC,OAAOC,WAAW;YAC5CP,eAAeA,0BAAAA,2BAAAA,gBAAiB;YAChCQ,WAAWV,WAAWU,SAAS;QACjC;IACF;IACA,OAAO,wCACFV;QACHW,QAAQ;;AAEZ"}