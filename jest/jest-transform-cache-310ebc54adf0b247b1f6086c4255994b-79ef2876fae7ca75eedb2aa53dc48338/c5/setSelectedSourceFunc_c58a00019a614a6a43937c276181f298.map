{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/common/source-selector/src/utils/setSelectedSourceFunc.ts"],"sourcesContent":["import { SetStateAction } from \"react\"\nimport { AutosuggestSource } from \"@rp/react/tanstack-api/content\"\nimport { SourceSelectorSelectedSourceInfo } from \"../sourceSelector.types\"\n\ntype SetSelectedSourceFuncProps = {\n  source: AutosuggestSource\n  selectedSources: Array<SourceSelectorSelectedSourceInfo>\n  setSelectedSources: (value: SetStateAction<Array<SourceSelectorSelectedSourceInfo>>) => void\n  planComparisonHandleOpen: () => void\n}\n\nfunction setSelectedSourceFunc({\n  source,\n  selectedSources,\n  setSelectedSources,\n  planComparisonHandleOpen,\n}: SetSelectedSourceFuncProps): void {\n  if (!source.entitled) {\n    planComparisonHandleOpen()\n    return\n  }\n\n  const idx = selectedSources.findIndex(s => s.id === source.id)\n\n  if (idx === -1) {\n    const newSource: SourceSelectorSelectedSourceInfo = {\n      id: source.id,\n      name: source.name,\n      packageIDs: source.rpPackageId,\n    }\n    setSelectedSources(prev => [newSource, ...prev])\n  } else {\n    setSelectedSources(prev => [...prev.slice(0, idx), ...prev.slice(idx + 1)])\n  }\n}\n\nexport { setSelectedSourceFunc }\n"],"names":["setSelectedSourceFunc","source","selectedSources","setSelectedSources","planComparisonHandleOpen","entitled","idx","findIndex","s","id","newSource","name","packageIDs","rpPackageId","prev","slice"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAoCSA;;;eAAAA;;;AAzBT,SAASA,sBAAsB,EAC7BC,MAAM,EACNC,eAAe,EACfC,kBAAkB,EAClBC,wBAAwB,EACG;IAC3B,IAAI,CAACH,OAAOI,QAAQ,EAAE;QACpBD;QACA;IACF;IAEA,MAAME,MAAMJ,gBAAgBK,SAAS,CAACC,CAAAA,IAAKA,EAAEC,EAAE,KAAKR,OAAOQ,EAAE;IAE7D,IAAIH,QAAQ,CAAC,GAAG;QACd,MAAMI,YAA8C;YAClDD,IAAIR,OAAOQ,EAAE;YACbE,MAAMV,OAAOU,IAAI;YACjBC,YAAYX,OAAOY,WAAW;QAChC;QACAV,mBAAmBW,CAAAA,OAAQ;gBAACJ;mBAAcI;aAAK;IACjD,OAAO;QACLX,mBAAmBW,CAAAA,OAAQ;mBAAIA,KAAKC,KAAK,CAAC,GAAGT;mBAASQ,KAAKC,KAAK,CAACT,MAAM;aAAG;IAC5E;AACF"}