{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/node_modules/react-markdown/lib/index.js"],"sourcesContent":["// Register `Raw` in tree:\n/// <reference types=\"mdast-util-to-hast\" />\n\n/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').ElementContent} ElementContent\n * @typedef {import('hast').Nodes} Nodes\n * @typedef {import('hast').Parents} Parents\n * @typedef {import('hast').Root} Root\n * @typedef {import('hast-util-to-jsx-runtime').Components} JsxRuntimeComponents\n * @typedef {import('remark-rehype').Options} RemarkRehypeOptions\n * @typedef {import('unist-util-visit').BuildVisitor<Root>} Visitor\n * @typedef {import('unified').PluggableList} PluggableList\n */\n\n/**\n * @callback AllowElement\n *   Filter elements.\n * @param {Readonly<Element>} element\n *   Element to check.\n * @param {number} index\n *   Index of `element` in `parent`.\n * @param {Readonly<Parents> | undefined} parent\n *   Parent of `element`.\n * @returns {boolean | null | undefined}\n *   Whether to allow `element` (default: `false`).\n *\n * @typedef {Partial<JsxRuntimeComponents>} Components\n *   Map tag names to components.\n *\n * @typedef Deprecation\n *   Deprecation.\n * @property {string} from\n *   Old field.\n * @property {string} id\n *   ID in readme.\n * @property {keyof Options} [to]\n *   New field.\n *\n * @typedef Options\n *   Configuration.\n * @property {AllowElement | null | undefined} [allowElement]\n *   Filter elements (optional);\n *   `allowedElements` / `disallowedElements` is used first.\n * @property {ReadonlyArray<string> | null | undefined} [allowedElements]\n *   Tag names to allow (default: all tag names);\n *   cannot combine w/ `disallowedElements`.\n * @property {string | null | undefined} [children]\n *   Markdown.\n * @property {string | null | undefined} [className]\n *   Wrap in a `div` with this class name.\n * @property {Components | null | undefined} [components]\n *   Map tag names to components.\n * @property {ReadonlyArray<string> | null | undefined} [disallowedElements]\n *   Tag names to disallow (default: `[]`);\n *   cannot combine w/ `allowedElements`.\n * @property {PluggableList | null | undefined} [rehypePlugins]\n *   List of rehype plugins to use.\n * @property {PluggableList | null | undefined} [remarkPlugins]\n *   List of remark plugins to use.\n * @property {Readonly<RemarkRehypeOptions> | null | undefined} [remarkRehypeOptions]\n *   Options to pass through to `remark-rehype`.\n * @property {boolean | null | undefined} [skipHtml=false]\n *   Ignore HTML in markdown completely (default: `false`).\n * @property {boolean | null | undefined} [unwrapDisallowed=false]\n *   Extract (unwrap) what’s in disallowed elements (default: `false`);\n *   normally when say `strong` is not allowed, it and it’s children are dropped,\n *   with `unwrapDisallowed` the element itself is replaced by its children.\n * @property {UrlTransform | null | undefined} [urlTransform]\n *   Change URLs (default: `defaultUrlTransform`)\n *\n * @callback UrlTransform\n *   Transform all URLs.\n * @param {string} url\n *   URL.\n * @param {string} key\n *   Property name (example: `'href'`).\n * @param {Readonly<Element>} node\n *   Node.\n * @returns {string | null | undefined}\n *   Transformed URL (optional).\n */\n\nimport {unreachable} from 'devlop'\nimport {toJsxRuntime} from 'hast-util-to-jsx-runtime'\nimport {urlAttributes} from 'html-url-attributes'\n// @ts-expect-error: untyped.\nimport {Fragment, jsx, jsxs} from 'react/jsx-runtime'\nimport remarkParse from 'remark-parse'\nimport remarkRehype from 'remark-rehype'\nimport {unified} from 'unified'\nimport {visit} from 'unist-util-visit'\nimport {VFile} from 'vfile'\n\nconst changelog =\n  'https://github.com/remarkjs/react-markdown/blob/main/changelog.md'\n\n/** @type {PluggableList} */\nconst emptyPlugins = []\n/** @type {Readonly<RemarkRehypeOptions>} */\nconst emptyRemarkRehypeOptions = {allowDangerousHtml: true}\nconst safeProtocol = /^(https?|ircs?|mailto|xmpp)$/i\n\n// Mutable because we `delete` any time it’s used and a message is sent.\n/** @type {ReadonlyArray<Readonly<Deprecation>>} */\nconst deprecations = [\n  {from: 'astPlugins', id: 'remove-buggy-html-in-markdown-parser'},\n  {from: 'allowDangerousHtml', id: 'remove-buggy-html-in-markdown-parser'},\n  {\n    from: 'allowNode',\n    id: 'replace-allownode-allowedtypes-and-disallowedtypes',\n    to: 'allowElement'\n  },\n  {\n    from: 'allowedTypes',\n    id: 'replace-allownode-allowedtypes-and-disallowedtypes',\n    to: 'allowedElements'\n  },\n  {\n    from: 'disallowedTypes',\n    id: 'replace-allownode-allowedtypes-and-disallowedtypes',\n    to: 'disallowedElements'\n  },\n  {from: 'escapeHtml', id: 'remove-buggy-html-in-markdown-parser'},\n  {from: 'includeElementIndex', id: '#remove-includeelementindex'},\n  {\n    from: 'includeNodeIndex',\n    id: 'change-includenodeindex-to-includeelementindex'\n  },\n  {from: 'linkTarget', id: 'remove-linktarget'},\n  {from: 'plugins', id: 'change-plugins-to-remarkplugins', to: 'remarkPlugins'},\n  {from: 'rawSourcePos', id: '#remove-rawsourcepos'},\n  {from: 'renderers', id: 'change-renderers-to-components', to: 'components'},\n  {from: 'source', id: 'change-source-to-children', to: 'children'},\n  {from: 'sourcePos', id: '#remove-sourcepos'},\n  {from: 'transformImageUri', id: '#add-urltransform', to: 'urlTransform'},\n  {from: 'transformLinkUri', id: '#add-urltransform', to: 'urlTransform'}\n]\n\n/**\n * Component to render markdown.\n *\n * @param {Readonly<Options>} options\n *   Props.\n * @returns {JSX.Element}\n *   React element.\n */\nexport function Markdown(options) {\n  const allowedElements = options.allowedElements\n  const allowElement = options.allowElement\n  const children = options.children || ''\n  const className = options.className\n  const components = options.components\n  const disallowedElements = options.disallowedElements\n  const rehypePlugins = options.rehypePlugins || emptyPlugins\n  const remarkPlugins = options.remarkPlugins || emptyPlugins\n  const remarkRehypeOptions = options.remarkRehypeOptions\n    ? {...options.remarkRehypeOptions, ...emptyRemarkRehypeOptions}\n    : emptyRemarkRehypeOptions\n  const skipHtml = options.skipHtml\n  const unwrapDisallowed = options.unwrapDisallowed\n  const urlTransform = options.urlTransform || defaultUrlTransform\n\n  const processor = unified()\n    .use(remarkParse)\n    .use(remarkPlugins)\n    .use(remarkRehype, remarkRehypeOptions)\n    .use(rehypePlugins)\n\n  const file = new VFile()\n\n  if (typeof children === 'string') {\n    file.value = children\n  } else {\n    unreachable(\n      'Unexpected value `' +\n        children +\n        '` for `children` prop, expected `string`'\n    )\n  }\n\n  if (allowedElements && disallowedElements) {\n    unreachable(\n      'Unexpected combined `allowedElements` and `disallowedElements`, expected one or the other'\n    )\n  }\n\n  for (const deprecation of deprecations) {\n    if (Object.hasOwn(options, deprecation.from)) {\n      unreachable(\n        'Unexpected `' +\n          deprecation.from +\n          '` prop, ' +\n          (deprecation.to\n            ? 'use `' + deprecation.to + '` instead'\n            : 'remove it') +\n          ' (see <' +\n          changelog +\n          '#' +\n          deprecation.id +\n          '> for more info)'\n      )\n    }\n  }\n\n  const mdastTree = processor.parse(file)\n  /** @type {Nodes} */\n  let hastTree = processor.runSync(mdastTree, file)\n\n  // Wrap in `div` if there’s a class name.\n  if (className) {\n    hastTree = {\n      type: 'element',\n      tagName: 'div',\n      properties: {className},\n      // Assume no doctypes.\n      children: /** @type {Array<ElementContent>} */ (\n        hastTree.type === 'root' ? hastTree.children : [hastTree]\n      )\n    }\n  }\n\n  visit(hastTree, transform)\n\n  return toJsxRuntime(hastTree, {\n    Fragment,\n    components,\n    ignoreInvalidStyle: true,\n    jsx,\n    jsxs,\n    passKeys: true,\n    passNode: true\n  })\n\n  /** @type {Visitor} */\n  function transform(node, index, parent) {\n    if (node.type === 'raw' && parent && typeof index === 'number') {\n      if (skipHtml) {\n        parent.children.splice(index, 1)\n      } else {\n        parent.children[index] = {type: 'text', value: node.value}\n      }\n\n      return index\n    }\n\n    if (node.type === 'element') {\n      /** @type {string} */\n      let key\n\n      for (key in urlAttributes) {\n        if (\n          Object.hasOwn(urlAttributes, key) &&\n          Object.hasOwn(node.properties, key)\n        ) {\n          const value = node.properties[key]\n          const test = urlAttributes[key]\n          if (test === null || test.includes(node.tagName)) {\n            node.properties[key] = urlTransform(String(value || ''), key, node)\n          }\n        }\n      }\n    }\n\n    if (node.type === 'element') {\n      let remove = allowedElements\n        ? !allowedElements.includes(node.tagName)\n        : disallowedElements\n        ? disallowedElements.includes(node.tagName)\n        : false\n\n      if (!remove && allowElement && typeof index === 'number') {\n        remove = !allowElement(node, index, parent)\n      }\n\n      if (remove && parent && typeof index === 'number') {\n        if (unwrapDisallowed && node.children) {\n          parent.children.splice(index, 1, ...node.children)\n        } else {\n          parent.children.splice(index, 1)\n        }\n\n        return index\n      }\n    }\n  }\n}\n\n/**\n * Make a URL safe.\n *\n * @satisfies {UrlTransform}\n * @param {string} value\n *   URL.\n * @returns {string}\n *   Safe URL.\n */\nexport function defaultUrlTransform(value) {\n  // Same as:\n  // <https://github.com/micromark/micromark/blob/929275e/packages/micromark-util-sanitize-uri/dev/index.js#L34>\n  // But without the `encode` part.\n  const colon = value.indexOf(':')\n  const questionMark = value.indexOf('?')\n  const numberSign = value.indexOf('#')\n  const slash = value.indexOf('/')\n\n  if (\n    // If there is no protocol, it’s relative.\n    colon < 0 ||\n    // If the first colon is after a `?`, `#`, or `/`, it’s not a protocol.\n    (slash > -1 && colon > slash) ||\n    (questionMark > -1 && colon > questionMark) ||\n    (numberSign > -1 && colon > numberSign) ||\n    // It is a protocol, it should be allowed.\n    safeProtocol.test(value.slice(0, colon))\n  ) {\n    return value\n  }\n\n  return ''\n}\n"],"names":["Markdown","defaultUrlTransform","changelog","emptyPlugins","emptyRemarkRehypeOptions","allowDangerousHtml","safeProtocol","deprecations","from","id","to","options","allowedElements","allowElement","children","className","components","disallowedElements","rehypePlugins","remarkPlugins","remarkRehypeOptions","skipHtml","unwrapDisallowed","urlTransform","processor","unified","use","remarkParse","remarkRehype","file","VFile","value","unreachable","deprecation","Object","hasOwn","mdastTree","parse","hastTree","runSync","type","tagName","properties","visit","transform","toJsxRuntime","Fragment","ignoreInvalidStyle","jsx","jsxs","passKeys","passNode","node","index","parent","splice","key","urlAttributes","test","includes","String","remove","colon","indexOf","questionMark","numberSign","slash","slice"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"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"}