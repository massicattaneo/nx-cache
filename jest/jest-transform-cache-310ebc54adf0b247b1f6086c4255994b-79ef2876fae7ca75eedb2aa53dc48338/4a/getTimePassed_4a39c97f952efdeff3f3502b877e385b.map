{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/common/utils/src/lib/getTimePassed.ts"],"sourcesContent":["import { differenceInDays, differenceInHours, differenceInMinutes } from \"date-fns\"\nimport { format, utcToZonedTime } from \"date-fns-tz\"\nimport i18next from \"i18next\"\n\nconst DATA_FORMAT = \"MMM dd, yyyy\"\n\nconst getTimePassed = (timestamp: string) => {\n  const userTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone\n  const storyDate = utcToZonedTime(timestamp, userTimeZone)\n  const now = Date.now()\n\n  const daysPassed = differenceInDays(now, storyDate.getTime())\n\n  if (daysPassed > 2) return format(new Date(timestamp), DATA_FORMAT)\n  if (daysPassed) return i18next.t(\"chatPage.dayAgo\", { count: daysPassed })\n\n  const hoursPassed = differenceInHours(now, storyDate.getTime())\n\n  if (hoursPassed) return i18next.t(\"chatPage.hourAgo\", { count: hoursPassed })\n\n  const minutesPassed = differenceInMinutes(now, storyDate.getTime())\n\n  if (minutesPassed) return i18next.t(\"chatPage.minAgo\", { count: minutesPassed })\n\n  return i18next.t(\"chatPage.now\")\n}\n\nexport { getTimePassed }\n"],"names":["getTimePassed","DATA_FORMAT","timestamp","userTimeZone","Intl","DateTimeFormat","resolvedOptions","timeZone","storyDate","utcToZonedTime","now","Date","daysPassed","differenceInDays","getTime","format","i18next","t","count","hoursPassed","differenceInHours","minutesPassed","differenceInMinutes"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA2BSA;;;eAAAA;;;yBA3BgE;2BAClC;gEACnB;;;;;;AAEpB,MAAMC,cAAc;AAEpB,MAAMD,gBAAgB,CAACE;IACrB,MAAMC,eAAeC,KAAKC,cAAc,GAAGC,eAAe,GAAGC,QAAQ;IACrE,MAAMC,YAAYC,IAAAA,yBAAc,EAACP,WAAWC;IAC5C,MAAMO,MAAMC,KAAKD,GAAG;IAEpB,MAAME,aAAaC,IAAAA,yBAAgB,EAACH,KAAKF,UAAUM,OAAO;IAE1D,IAAIF,aAAa,GAAG,OAAOG,IAAAA,iBAAM,EAAC,IAAIJ,KAAKT,YAAYD;IACvD,IAAIW,YAAY,OAAOI,gBAAO,CAACC,CAAC,CAAC,mBAAmB;QAAEC,OAAON;IAAW;IAExE,MAAMO,cAAcC,IAAAA,0BAAiB,EAACV,KAAKF,UAAUM,OAAO;IAE5D,IAAIK,aAAa,OAAOH,gBAAO,CAACC,CAAC,CAAC,oBAAoB;QAAEC,OAAOC;IAAY;IAE3E,MAAME,gBAAgBC,IAAAA,4BAAmB,EAACZ,KAAKF,UAAUM,OAAO;IAEhE,IAAIO,eAAe,OAAOL,gBAAO,CAACC,CAAC,CAAC,mBAAmB;QAAEC,OAAOG;IAAc;IAE9E,OAAOL,gBAAO,CAACC,CAAC,CAAC;AACnB"}