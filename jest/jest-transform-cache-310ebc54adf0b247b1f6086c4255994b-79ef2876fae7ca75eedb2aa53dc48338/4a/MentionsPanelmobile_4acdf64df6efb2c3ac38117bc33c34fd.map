{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/discovery-sidebar/src/Mentions/MentionsPanel.mobile.tsx"],"sourcesContent":["import { CqsChunkStory, CqsItem, CqsStory, isChunkStory } from \"@rp/common/api-types\"\nimport { Watchlist } from \"@rp/common/api-types\"\nimport { ShowMoreList } from \"@rp/react/web/common/composite-components\"\nimport { useEntitiesStyles } from \"@rp/react/web/common/document-viewer\"\nimport { useQueryContext } from \"@rp/react/web/common/providers\"\nimport { capitalize } from \"@rp/react/web/mui/core\"\nimport { RpJsonAnnotationStyles } from \"@rp/react/web/rpjson\"\nimport { useMentionPreview } from \"../hooks/useMentionPreview\"\nimport { LoadingMentions } from \"./LoadingMentions\"\nimport { MentionHeader } from \"./MentionHeader\"\nimport { MentionsList } from \"./Mentions.styles\"\nimport { MentionsCard } from \"./MentionsCard\"\n\ntype Props = {\n  rowData: CqsItem\n  handleClose: () => void\n  onChange: (item: CqsItem) => void\n  title: string\n  onAddToWatchlist?: (watchlist: Watchlist) => void\n  isFeedbackMode: boolean\n}\n\nconst MentionsPanelMobile = ({ rowData, handleClose, onChange, title, isFeedbackMode }: Props) => {\n  const {\n    stories,\n    fetchNextPage,\n    isFetchingNextPage,\n    hasNextPage,\n    isLoading: isLoadingMentions,\n  } = useMentionPreview(rowData)\n  const { searchQuery, queryId } = useQueryContext()\n\n  const highlights = [\n    ...useEntitiesStyles([rowData.key], [\"entity\", \"rp_topic\"].includes(rowData.queryType)),\n  ]\n\n  return (\n    <>\n      <MentionHeader\n        onClose={handleClose}\n        item={rowData}\n        backButtonTitle={`Back to ${capitalize(title)}`}\n        onChange={onChange}\n      />\n      {isLoadingMentions ? (\n        <LoadingMentions />\n      ) : (\n        <RpJsonAnnotationStyles highlights={highlights}>\n          <MentionsList>\n            <ShowMoreList<CqsStory | CqsChunkStory>\n              renderItem={(item, index) => {\n                if (isChunkStory(item)) {\n                  return <div key={item.id}>Chunks on mentions not implemented yet.</div>\n                }\n\n                return (\n                  <MentionsCard\n                    isFeedbackMode={isFeedbackMode}\n                    key={item.id}\n                    story={item}\n                    query={searchQuery}\n                    index={index}\n                    queryId={queryId}\n                  />\n                )\n              }}\n              items={stories}\n              loading={isFetchingNextPage}\n              fetchNextPage={fetchNextPage}\n              hasNextPage={hasNextPage}\n            />\n          </MentionsList>\n        </RpJsonAnnotationStyles>\n      )}\n    </>\n  )\n}\n\nexport { MentionsPanelMobile }\n"],"names":["MentionsPanelMobile","rowData","handleClose","onChange","title","isFeedbackMode","stories","fetchNextPage","isFetchingNextPage","hasNextPage","isLoading","isLoadingMentions","useMentionPreview","searchQuery","queryId","useQueryContext","highlights","useEntitiesStyles","key","includes","queryType","MentionHeader","onClose","item","backButtonTitle","capitalize","LoadingMentions","RpJsonAnnotationStyles","MentionsList","ShowMoreList","renderItem","index","isChunkStory","div","id","MentionsCard","story","query","items","loading"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA8ESA;;;eAAAA;;;;0BA9EsD;qCAElC;gCACK;2BACF;sBACL;wBACY;mCACL;iCACF;+BACF;gCACD;8BACA;AAW7B,MAAMA,sBAAsB,CAAC,EAAEC,OAAO,EAAEC,WAAW,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,cAAc,EAAS;IAC3F,MAAM,EACJC,OAAO,EACPC,aAAa,EACbC,kBAAkB,EAClBC,WAAW,EACXC,WAAWC,iBAAiB,EAC7B,GAAGC,IAAAA,oCAAiB,EAACX;IACtB,MAAM,EAAEY,WAAW,EAAEC,OAAO,EAAE,GAAGC,IAAAA,0BAAe;IAEhD,MAAMC,aAAa;WACdC,IAAAA,iCAAiB,EAAC;YAAChB,QAAQiB,GAAG;SAAC,EAAE;YAAC;YAAU;SAAW,CAACC,QAAQ,CAAClB,QAAQmB,SAAS;KACtF;IAED,qBACE;;0BACE,qBAACC,4BAAa;gBACZC,SAASpB;gBACTqB,MAAMtB;gBACNuB,iBAAiB,CAAC,QAAQ,EAAEC,IAAAA,gBAAU,EAACrB,OAAO,CAAC;gBAC/CD,UAAUA;;YAEXQ,kCACC,qBAACe,gCAAe,sBAEhB,qBAACC,8BAAsB;gBAACX,YAAYA;0BAClC,cAAA,qBAACY,4BAAY;8BACX,cAAA,qBAACC,iCAAY;wBACXC,YAAY,CAACP,MAAMQ;4BACjB,IAAIC,IAAAA,sBAAY,EAACT,OAAO;gCACtB,qBAAO,qBAACU;8CAAkB;mCAATV,KAAKW,EAAE;4BAC1B;4BAEA,qBACE,qBAACC,0BAAY;gCACX9B,gBAAgBA;gCAEhB+B,OAAOb;gCACPc,OAAOxB;gCACPkB,OAAOA;gCACPjB,SAASA;+BAJJS,KAAKW,EAAE;wBAOlB;wBACAI,OAAOhC;wBACPiC,SAAS/B;wBACTD,eAAeA;wBACfE,aAAaA;;;;;;AAO3B"}