{"version":3,"sources":["../../src/reducers/dragOperation.ts"],"sourcesContent":["import {\n\tBEGIN_DRAG,\n\tDROP,\n\tEND_DRAG,\n\tHOVER,\n\tPUBLISH_DRAG_SOURCE,\n} from '../actions/dragDrop/index.js'\nimport { REMOVE_TARGET } from '../actions/registry.js'\nimport type { Action, Identifier } from '../interfaces.js'\nimport { without } from '../utils/js_utils.js'\n\nexport interface State {\n\titemType: Identifier | Identifier[] | null\n\titem: any\n\tsourceId: string | null\n\ttargetIds: string[]\n\tdropResult: any\n\tdidDrop: boolean\n\tisSourcePublic: boolean | null\n}\n\nconst initialState: State = {\n\titemType: null,\n\titem: null,\n\tsourceId: null,\n\ttargetIds: [],\n\tdropResult: null,\n\tdidDrop: false,\n\tisSourcePublic: null,\n}\n\nexport function reduce(\n\tstate: State = initialState,\n\taction: Action<{\n\t\titemType: Identifier | Identifier[]\n\t\titem: any\n\t\tsourceId: string\n\t\ttargetId: string\n\t\ttargetIds: string[]\n\t\tisSourcePublic: boolean\n\t\tdropResult: any\n\t}>,\n): State {\n\tconst { payload } = action\n\tswitch (action.type) {\n\t\tcase BEGIN_DRAG:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\titemType: payload.itemType,\n\t\t\t\titem: payload.item,\n\t\t\t\tsourceId: payload.sourceId,\n\t\t\t\tisSourcePublic: payload.isSourcePublic,\n\t\t\t\tdropResult: null,\n\t\t\t\tdidDrop: false,\n\t\t\t}\n\t\tcase PUBLISH_DRAG_SOURCE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisSourcePublic: true,\n\t\t\t}\n\t\tcase HOVER:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttargetIds: payload.targetIds,\n\t\t\t}\n\t\tcase REMOVE_TARGET:\n\t\t\tif (state.targetIds.indexOf(payload.targetId) === -1) {\n\t\t\t\treturn state\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttargetIds: without(state.targetIds, payload.targetId),\n\t\t\t}\n\t\tcase DROP:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tdropResult: payload.dropResult,\n\t\t\t\tdidDrop: true,\n\t\t\t\ttargetIds: [],\n\t\t\t}\n\t\tcase END_DRAG:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\titemType: null,\n\t\t\t\titem: null,\n\t\t\t\tsourceId: null,\n\t\t\t\tdropResult: null,\n\t\t\t\tdidDrop: false,\n\t\t\t\tisSourcePublic: null,\n\t\t\t\ttargetIds: [],\n\t\t\t}\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n"],"names":["reduce","_defineProperty","obj","key","value","initialState","itemType","item","sourceId","targetIds","dropResult","didDrop","isSourcePublic","state","action","payload","type","BEGIN_DRAG","_objectSpread","PUBLISH_DRAG_SOURCE","HOVER","REMOVE_TARGET","indexOf","targetId","without","DROP","END_DRAG"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA+BgBA;;;eAAAA;;;uBAzBT;0BACuB;0BAEN;AATxB,SAAAC,gBAAAC,GAAA,EAAAC,GAAA,EAAAC,KAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqBA,MAAMC,eAAsB;IAC3BC,UAAU;IACVC,MAAM;IACNC,UAAU;IACVC,WAAW,EAAE;IACbC,YAAY;IACZC,SAAS;IACTC,gBAAgB;;AAGV,SAASZ,OACfa,QAAeR,YAAY,EAC3BS,MAQE;IAEF,MAAM,EAAEC,OAAO,EAAE,GAAGD;IACpB,OAAQA,OAAOE,IAAI;QAClB,KAAKC,iBAAU;YACd,OAAOC,cAAA,CAAA,GACHL,OAAK;gBACRP,UAAUS,QAAQT,QAAQ;gBAC1BC,MAAMQ,QAAQR,IAAI;gBAClBC,UAAUO,QAAQP,QAAQ;gBAC1BI,gBAAgBG,QAAQH,cAAc;gBACtCF,YAAY;gBACZC,SAAS;;QAEX,KAAKQ,0BAAmB;YACvB,OAAOD,cAAA,CAAA,GACHL,OAAK;gBACRD,gBAAgB;;QAElB,KAAKQ,YAAK;YACT,OAAOF,cAAA,CAAA,GACHL,OAAK;gBACRJ,WAAWM,QAAQN,SAAS;;QAE9B,KAAKY,uBAAa;YACjB,IAAIR,MAAMJ,SAAS,CAACa,OAAO,CAACP,QAAQQ,QAAQ,MAAM,CAAC,GAAG;gBACrD,OAAOV;;YAER,OAAOK,cAAA,CAAA,GACHL,OAAK;gBACRJ,WAAWe,IAAAA,iBAAO,EAACX,MAAMJ,SAAS,EAAEM,QAAQQ,QAAQ;;QAEtD,KAAKE,WAAI;YACR,OAAOP,cAAA,CAAA,GACHL,OAAK;gBACRH,YAAYK,QAAQL,UAAU;gBAC9BC,SAAS;gBACTF,WAAW,EAAE;;QAEf,KAAKiB,eAAQ;YACZ,OAAOR,cAAA,CAAA,GACHL,OAAK;gBACRP,UAAU;gBACVC,MAAM;gBACNC,UAAU;gBACVE,YAAY;gBACZC,SAAS;gBACTC,gBAAgB;gBAChBH,WAAW,EAAE;;QAEf;YACC,OAAOI"}