{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/hooks/src/useAddToWatchlistReset.ts"],"sourcesContent":["import { useCallback } from \"react\"\nimport { Watchlist } from \"@rp/common/api-types\"\nimport { RpqlFilter } from \"@rp/common/api-types\"\nimport { QUERY_KEY_FEATURE_FLAG } from \"@rp/common/settings\"\nimport { getExpressionIds } from \"@rp/react/tanstack-api/user-data-queries\"\nimport { useQueryClient } from \"@tanstack/react-query\"\n\nconst useAddToWatchlistReset = (\n  expression: RpqlFilter | undefined,\n  queryId: string | undefined,\n) => {\n  const queryClient = useQueryClient()\n  return useCallback(\n    (watchlist: Watchlist) => {\n      const watchlistIds = expression ? getExpressionIds(expression) : []\n      if (watchlistIds.includes(watchlist.id)) {\n        queryClient.resetQueries({\n          queryKey: [\"query\", queryId],\n        })\n        queryClient.resetQueries({\n          queryKey: [QUERY_KEY_FEATURE_FLAG, \"rpjson-document-matches\"],\n        })\n        queryClient.resetQueries({\n          queryKey: [\"cqs-summary\", queryId],\n        })\n      }\n    },\n    [queryClient, queryId, expression],\n  )\n}\n\nexport { useAddToWatchlistReset }\n"],"names":["useAddToWatchlistReset","expression","queryId","queryClient","useQueryClient","useCallback","watchlist","watchlistIds","getExpressionIds","includes","id","resetQueries","queryKey","QUERY_KEY_FEATURE_FLAG"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA+BSA;;;eAAAA;;;uBA/BmB;0BAGW;iCACN;4BACF;AAE/B,MAAMA,yBAAyB,CAC7BC,YACAC;IAEA,MAAMC,cAAcC,IAAAA,0BAAc;IAClC,OAAOC,IAAAA,kBAAW,EAChB,CAACC;QACC,MAAMC,eAAeN,aAAaO,IAAAA,iCAAgB,EAACP,cAAc,EAAE;QACnE,IAAIM,aAAaE,QAAQ,CAACH,UAAUI,EAAE,GAAG;YACvCP,YAAYQ,YAAY,CAAC;gBACvBC,UAAU;oBAAC;oBAASV;iBAAQ;YAC9B;YACAC,YAAYQ,YAAY,CAAC;gBACvBC,UAAU;oBAACC,gCAAsB;oBAAE;iBAA0B;YAC/D;YACAV,YAAYQ,YAAY,CAAC;gBACvBC,UAAU;oBAAC;oBAAeV;iBAAQ;YACpC;QACF;IACF,GACA;QAACC;QAAaD;QAASD;KAAW;AAEtC"}