{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/node_modules/mdast-util-to-markdown/lib/handle/list.js"],"sourcesContent":["/**\n * @typedef {import('mdast').List} List\n * @typedef {import('mdast').Parents} Parents\n * @typedef {import('../types.js').Info} Info\n * @typedef {import('../types.js').State} State\n */\n\nimport {checkBullet} from '../util/check-bullet.js'\nimport {checkBulletOther} from '../util/check-bullet-other.js'\nimport {checkBulletOrdered} from '../util/check-bullet-ordered.js'\nimport {checkRule} from '../util/check-rule.js'\n\n/**\n * @param {List} node\n * @param {Parents | undefined} parent\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function list(node, parent, state, info) {\n  const exit = state.enter('list')\n  const bulletCurrent = state.bulletCurrent\n  /** @type {string} */\n  let bullet = node.ordered ? checkBulletOrdered(state) : checkBullet(state)\n  /** @type {string} */\n  const bulletOther = node.ordered\n    ? bullet === '.'\n      ? ')'\n      : '.'\n    : checkBulletOther(state)\n  let useDifferentMarker =\n    parent && state.bulletLastUsed ? bullet === state.bulletLastUsed : false\n\n  if (!node.ordered) {\n    const firstListItem = node.children ? node.children[0] : undefined\n\n    // If there’s an empty first list item directly in two list items,\n    // we have to use a different bullet:\n    //\n    // ```markdown\n    // * - *\n    // ```\n    //\n    // …because otherwise it would become one big thematic break.\n    if (\n      // Bullet could be used as a thematic break marker:\n      (bullet === '*' || bullet === '-') &&\n      // Empty first list item:\n      firstListItem &&\n      (!firstListItem.children || !firstListItem.children[0]) &&\n      // Directly in two other list items:\n      state.stack[state.stack.length - 1] === 'list' &&\n      state.stack[state.stack.length - 2] === 'listItem' &&\n      state.stack[state.stack.length - 3] === 'list' &&\n      state.stack[state.stack.length - 4] === 'listItem' &&\n      // That are each the first child.\n      state.indexStack[state.indexStack.length - 1] === 0 &&\n      state.indexStack[state.indexStack.length - 2] === 0 &&\n      state.indexStack[state.indexStack.length - 3] === 0\n    ) {\n      useDifferentMarker = true\n    }\n\n    // If there’s a thematic break at the start of the first list item,\n    // we have to use a different bullet:\n    //\n    // ```markdown\n    // * ---\n    // ```\n    //\n    // …because otherwise it would become one big thematic break.\n    if (checkRule(state) === bullet && firstListItem) {\n      let index = -1\n\n      while (++index < node.children.length) {\n        const item = node.children[index]\n\n        if (\n          item &&\n          item.type === 'listItem' &&\n          item.children &&\n          item.children[0] &&\n          item.children[0].type === 'thematicBreak'\n        ) {\n          useDifferentMarker = true\n          break\n        }\n      }\n    }\n  }\n\n  if (useDifferentMarker) {\n    bullet = bulletOther\n  }\n\n  state.bulletCurrent = bullet\n  const value = state.containerFlow(node, info)\n  state.bulletLastUsed = bullet\n  state.bulletCurrent = bulletCurrent\n  exit()\n  return value\n}\n"],"names":["list","node","parent","state","info","exit","enter","bulletCurrent","bullet","ordered","checkBulletOrdered","checkBullet","bulletOther","checkBulletOther","useDifferentMarker","bulletLastUsed","firstListItem","children","undefined","stack","length","indexStack","checkRule","index","item","type","value","containerFlow"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"AAAA;;;;;CAKC;;;;+BAceA;;;eAAAA;;;6BAZU;kCACK;oCACE;2BACT;AASjB,SAASA,KAAKC,IAAI,EAAEC,MAAM,EAAEC,KAAK,EAAEC,IAAI;IAC5C,MAAMC,OAAOF,MAAMG,KAAK,CAAC;IACzB,MAAMC,gBAAgBJ,MAAMI,aAAa;IACzC,mBAAmB,GACnB,IAAIC,SAASP,KAAKQ,OAAO,GAAGC,IAAAA,sCAAkB,EAACP,SAASQ,IAAAA,wBAAW,EAACR;IACpE,mBAAmB,GACnB,MAAMS,cAAcX,KAAKQ,OAAO,GAC5BD,WAAW,MACT,MACA,MACFK,IAAAA,kCAAgB,EAACV;IACrB,IAAIW,qBACFZ,UAAUC,MAAMY,cAAc,GAAGP,WAAWL,MAAMY,cAAc,GAAG;IAErE,IAAI,CAACd,KAAKQ,OAAO,EAAE;QACjB,MAAMO,gBAAgBf,KAAKgB,QAAQ,GAAGhB,KAAKgB,QAAQ,CAAC,EAAE,GAAGC;QAEzD,kEAAkE;QAClE,qCAAqC;QACrC,EAAE;QACF,cAAc;QACd,QAAQ;QACR,MAAM;QACN,EAAE;QACF,6DAA6D;QAC7D,IAEE,AADA,mDAAmD;QAClDV,CAAAA,WAAW,OAAOA,WAAW,GAAE,KAChC,yBAAyB;QACzBQ,iBACC,CAAA,CAACA,cAAcC,QAAQ,IAAI,CAACD,cAAcC,QAAQ,CAAC,EAAE,AAAD,KACrD,oCAAoC;QACpCd,MAAMgB,KAAK,CAAChB,MAAMgB,KAAK,CAACC,MAAM,GAAG,EAAE,KAAK,UACxCjB,MAAMgB,KAAK,CAAChB,MAAMgB,KAAK,CAACC,MAAM,GAAG,EAAE,KAAK,cACxCjB,MAAMgB,KAAK,CAAChB,MAAMgB,KAAK,CAACC,MAAM,GAAG,EAAE,KAAK,UACxCjB,MAAMgB,KAAK,CAAChB,MAAMgB,KAAK,CAACC,MAAM,GAAG,EAAE,KAAK,cACxC,iCAAiC;QACjCjB,MAAMkB,UAAU,CAAClB,MAAMkB,UAAU,CAACD,MAAM,GAAG,EAAE,KAAK,KAClDjB,MAAMkB,UAAU,CAAClB,MAAMkB,UAAU,CAACD,MAAM,GAAG,EAAE,KAAK,KAClDjB,MAAMkB,UAAU,CAAClB,MAAMkB,UAAU,CAACD,MAAM,GAAG,EAAE,KAAK,GAClD;YACAN,qBAAqB;QACvB;QAEA,mEAAmE;QACnE,qCAAqC;QACrC,EAAE;QACF,cAAc;QACd,QAAQ;QACR,MAAM;QACN,EAAE;QACF,6DAA6D;QAC7D,IAAIQ,IAAAA,oBAAS,EAACnB,WAAWK,UAAUQ,eAAe;YAChD,IAAIO,QAAQ,CAAC;YAEb,MAAO,EAAEA,QAAQtB,KAAKgB,QAAQ,CAACG,MAAM,CAAE;gBACrC,MAAMI,OAAOvB,KAAKgB,QAAQ,CAACM,MAAM;gBAEjC,IACEC,QACAA,KAAKC,IAAI,KAAK,cACdD,KAAKP,QAAQ,IACbO,KAAKP,QAAQ,CAAC,EAAE,IAChBO,KAAKP,QAAQ,CAAC,EAAE,CAACQ,IAAI,KAAK,iBAC1B;oBACAX,qBAAqB;oBACrB;gBACF;YACF;QACF;IACF;IAEA,IAAIA,oBAAoB;QACtBN,SAASI;IACX;IAEAT,MAAMI,aAAa,GAAGC;IACtB,MAAMkB,QAAQvB,MAAMwB,aAAa,CAAC1B,MAAMG;IACxCD,MAAMY,cAAc,GAAGP;IACvBL,MAAMI,aAAa,GAAGA;IACtBF;IACA,OAAOqB;AACT"}