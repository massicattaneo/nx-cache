55cafb7ae05b29ceed046d2206862275
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "useCollector", {
    enumerable: true,
    get: function() {
        return useCollector;
    }
});
const _fastdeepequal = /*#__PURE__*/ _interop_require_default(require("fast-deep-equal"));
const _react = require("react");
const _useIsomorphicLayoutEffect = require("./useIsomorphicLayoutEffect.js");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function useCollector(monitor, collect, onUpdate) {
    const [collected, setCollected] = (0, _react.useState)(()=>collect(monitor));
    const updateCollected = (0, _react.useCallback)(()=>{
        const nextValue = collect(monitor);
        // This needs to be a deep-equality check because some monitor-collected values
        // include XYCoord objects that may be equivalent, but do not have instance equality.
        if (!(0, _fastdeepequal.default)(collected, nextValue)) {
            setCollected(nextValue);
            if (onUpdate) {
                onUpdate();
            }
        }
    }, [
        collected,
        monitor,
        onUpdate
    ]);
    // update the collected properties after react renders.
    // Note that the "Dustbin Stress Test" fails if this is not
    // done when the component updates
    (0, _useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)(updateCollected);
    return [
        collected,
        updateCollected
    ];
} //# sourceMappingURL=useCollector.js.map

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9ob29rcy91c2VDb2xsZWN0b3IudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGVxdWFsIGZyb20gJ2Zhc3QtZGVlcC1lcXVhbCdcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuXG5pbXBvcnQgeyB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0IH0gZnJvbSAnLi91c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0LmpzJ1xuXG4vKipcbiAqXG4gKiBAcGFyYW0gbW9uaXRvciBUaGUgbW9uaXRvciB0byBjb2xsZWN0IHN0YXRlIGZyb21cbiAqIEBwYXJhbSBjb2xsZWN0IFRoZSBjb2xsZWN0aW5nIGZ1bmN0aW9uXG4gKiBAcGFyYW0gb25VcGRhdGUgQSBtZXRob2QgdG8gaW52b2tlIHdoZW4gdXBkYXRlcyBvY2N1clxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlQ29sbGVjdG9yPFQsIFM+KFxuXHRtb25pdG9yOiBULFxuXHRjb2xsZWN0OiAobW9uaXRvcjogVCkgPT4gUyxcblx0b25VcGRhdGU/OiAoKSA9PiB2b2lkLFxuKTogW1MsICgpID0+IHZvaWRdIHtcblx0Y29uc3QgW2NvbGxlY3RlZCwgc2V0Q29sbGVjdGVkXSA9IHVzZVN0YXRlKCgpID0+IGNvbGxlY3QobW9uaXRvcikpXG5cblx0Y29uc3QgdXBkYXRlQ29sbGVjdGVkID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuXHRcdGNvbnN0IG5leHRWYWx1ZSA9IGNvbGxlY3QobW9uaXRvcilcblx0XHQvLyBUaGlzIG5lZWRzIHRvIGJlIGEgZGVlcC1lcXVhbGl0eSBjaGVjayBiZWNhdXNlIHNvbWUgbW9uaXRvci1jb2xsZWN0ZWQgdmFsdWVzXG5cdFx0Ly8gaW5jbHVkZSBYWUNvb3JkIG9iamVjdHMgdGhhdCBtYXkgYmUgZXF1aXZhbGVudCwgYnV0IGRvIG5vdCBoYXZlIGluc3RhbmNlIGVxdWFsaXR5LlxuXHRcdGlmICghZXF1YWwoY29sbGVjdGVkLCBuZXh0VmFsdWUpKSB7XG5cdFx0XHRzZXRDb2xsZWN0ZWQobmV4dFZhbHVlKVxuXHRcdFx0aWYgKG9uVXBkYXRlKSB7XG5cdFx0XHRcdG9uVXBkYXRlKClcblx0XHRcdH1cblx0XHR9XG5cdH0sIFtjb2xsZWN0ZWQsIG1vbml0b3IsIG9uVXBkYXRlXSlcblxuXHQvLyB1cGRhdGUgdGhlIGNvbGxlY3RlZCBwcm9wZXJ0aWVzIGFmdGVyIHJlYWN0IHJlbmRlcnMuXG5cdC8vIE5vdGUgdGhhdCB0aGUgXCJEdXN0YmluIFN0cmVzcyBUZXN0XCIgZmFpbHMgaWYgdGhpcyBpcyBub3Rcblx0Ly8gZG9uZSB3aGVuIHRoZSBjb21wb25lbnQgdXBkYXRlc1xuXHR1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0KHVwZGF0ZUNvbGxlY3RlZClcblxuXHRyZXR1cm4gW2NvbGxlY3RlZCwgdXBkYXRlQ29sbGVjdGVkXVxufVxuIl0sIm5hbWVzIjpbInVzZUNvbGxlY3RvciIsIm1vbml0b3IiLCJjb2xsZWN0Iiwib25VcGRhdGUiLCJjb2xsZWN0ZWQiLCJzZXRDb2xsZWN0ZWQiLCJ1c2VTdGF0ZSIsInVwZGF0ZUNvbGxlY3RlZCIsInVzZUNhbGxiYWNrIiwibmV4dFZhbHVlIiwiZXF1YWwiLCJ1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0Il0sInJhbmdlTWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsiLCJtYXBwaW5ncyI6Ijs7OzsrQkFXZ0JBOzs7ZUFBQUE7OztzRUFYRTt1QkFDb0I7MkNBRUk7Ozs7OztBQVFuQyxTQUFTQSxhQUNmQyxPQUFVLEVBQ1ZDLE9BQTBCLEVBQzFCQyxRQUFxQjtJQUVyQixNQUFNLENBQUNDLFdBQVdDLGFBQWEsR0FBR0MsSUFBQUEsZUFBUSxFQUFDLElBQU1KLFFBQVFEO0lBRXpELE1BQU1NLGtCQUFrQkMsSUFBQUEsa0JBQVcsRUFBQztRQUNuQyxNQUFNQyxZQUFZUCxRQUFRRDtRQUMxQiwrRUFBK0U7UUFDL0UscUZBQXFGO1FBQ3JGLElBQUksQ0FBQ1MsSUFBQUEsc0JBQUssRUFBQ04sV0FBV0ssWUFBWTtZQUNqQ0osYUFBYUk7WUFDYixJQUFJTixVQUFVO2dCQUNiQTs7O09BR0E7UUFBQ0M7UUFBV0g7UUFBU0U7S0FBUztJQUVqQyx1REFBdUQ7SUFDdkQsMkRBQTJEO0lBQzNELGtDQUFrQztJQUNsQ1EsSUFBQUEsb0RBQXlCLEVBQUNKO0lBRTFCLE9BQU87UUFBQ0g7UUFBV0c7S0FBZ0IifQ==