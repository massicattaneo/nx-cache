{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/tanstack-api/brief/src/briefReport/briefReport.hooks.ts"],"sourcesContent":["import { useQuery } from \"@tanstack/react-query\"\nimport { BriefAPIError } from \"../brief.types\"\nimport { loadHistoricalBriefReport, loadLatestBriefReport } from \"./briefReport.services\"\n\nconst briefReportQueryKeys = {\n  all: () => [\"briefReport\"],\n  briefReport: (context: string, briefId: string | undefined, reportId?: string) =>\n    [\"briefReport\", context, briefId, reportId] as const,\n}\n\nconst useLatestBriefReport = (briefId: string | undefined, isEnabled: boolean) => {\n  return useQuery({\n    enabled: !!briefId && isEnabled,\n    queryKey: briefReportQueryKeys.briefReport(\"latest\", briefId),\n    queryFn: () => loadLatestBriefReport(briefId),\n    gcTime: Infinity,\n    staleTime: Infinity,\n    retry: (_retryCount, error) => error.message === BriefAPIError.BRIEF_REPORT_STILL_LOADING,\n    retryDelay: 10_000,\n  })\n}\n\nconst useHistoricalBriefReport = (briefId: string | undefined, reportId: string | undefined) => {\n  return useQuery({\n    enabled: !!briefId && !!reportId,\n    queryKey: briefReportQueryKeys.briefReport(\"historical\", briefId, reportId),\n    queryFn: () => loadHistoricalBriefReport(briefId, reportId),\n    gcTime: Infinity,\n    staleTime: Infinity,\n    retry: false,\n  })\n}\n\nexport { useLatestBriefReport, useHistoricalBriefReport }\n"],"names":["useHistoricalBriefReport","useLatestBriefReport","briefReportQueryKeys","all","briefReport","context","briefId","reportId","isEnabled","useQuery","enabled","queryKey","queryFn","loadLatestBriefReport","gcTime","Infinity","staleTime","retry","_retryCount","error","message","BriefAPIError","BRIEF_REPORT_STILL_LOADING","retryDelay","loadHistoricalBriefReport"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;IAiC+BA,wBAAwB;eAAxBA;;IAAtBC,oBAAoB;eAApBA;;;4BAjCgB;4BACK;qCACmC;AAEjE,MAAMC,uBAAuB;IAC3BC,KAAK,IAAM;YAAC;SAAc;IAC1BC,aAAa,CAACC,SAAiBC,SAA6BC,WAC1D;YAAC;YAAeF;YAASC;YAASC;SAAS;AAC/C;AAEA,MAAMN,uBAAuB,CAACK,SAA6BE;IACzD,OAAOC,IAAAA,oBAAQ,EAAC;QACdC,SAAS,CAAC,CAACJ,WAAWE;QACtBG,UAAUT,qBAAqBE,WAAW,CAAC,UAAUE;QACrDM,SAAS,IAAMC,IAAAA,0CAAqB,EAACP;QACrCQ,QAAQC;QACRC,WAAWD;QACXE,OAAO,CAACC,aAAaC,QAAUA,MAAMC,OAAO,KAAKC,yBAAa,CAACC,0BAA0B;QACzFC,YAAY;IACd;AACF;AAEA,MAAMvB,2BAA2B,CAACM,SAA6BC;IAC7D,OAAOE,IAAAA,oBAAQ,EAAC;QACdC,SAAS,CAAC,CAACJ,WAAW,CAAC,CAACC;QACxBI,UAAUT,qBAAqBE,WAAW,CAAC,cAAcE,SAASC;QAClEK,SAAS,IAAMY,IAAAA,8CAAyB,EAAClB,SAASC;QAClDO,QAAQC;QACRC,WAAWD;QACXE,OAAO;IACT;AACF"}