{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/development/src/lib/trpc/bigdata-api/procedures/financial-procedures.ts"],"sourcesContent":["import { z } from \"zod\"\nimport { bigdataSchemas } from \"@rp/common/contracts\"\nimport { financialDataGenerators } from \"../../../database/generators\"\nimport { bigdataApiProcedure } from \"../bigdata-api-procedure\"\n\nexport const financeProcedures = {\n  companyAnalystRatings: bigdataApiProcedure\n    .meta({ openapi: { method: \"POST\", path: \"/financial-data/company-analyst-ratings\" } })\n    .input(bigdataSchemas.st_bff_data_tools_BFFRequest)\n    .output(bigdataSchemas.st_bff_data_tools_AnalystDataToolResponse)\n    .query(async ({ input }) => {\n      return {\n        result: input.entityIds.reduce((acc, entityId) => {\n          return { ...acc, [entityId]: financialDataGenerators.companyAnalystRatings() }\n        }, {}),\n      }\n    }),\n  companyCurrency: bigdataApiProcedure\n    .meta({ openapi: { method: \"POST\", path: \"/financial-data/company-currency\" } })\n    .input(bigdataSchemas.st_bff_data_tools_BFFRequest)\n    .output(bigdataSchemas.st_bff_data_tools_CurrencyDataToolResponse)\n    .query(async ({ input }) => {\n      return {\n        result: input.entityIds.reduce((acc, entityId) => {\n          return { ...acc, [entityId]: financialDataGenerators.companyCurrency() }\n        }, {}),\n      }\n    }),\n  companyLatestSurprise: bigdataApiProcedure\n    .meta({ openapi: { method: \"POST\", path: \"/financial-data/company-latest-surprise\" } })\n    .input(bigdataSchemas.st_bff_data_tools_BFFRequest)\n    .output(bigdataSchemas.st_bff_data_tools_EarningsSurpriseDataToolResponse)\n    .query(async ({ input }) => {\n      return {\n        result: input.entityIds.reduce((acc, entityId) => {\n          return { ...acc, [entityId]: financialDataGenerators.companyLatestSurprise() }\n        }, {}),\n      }\n    }),\n\n  companyPriceChanges: bigdataApiProcedure\n    .meta({ openapi: { method: \"POST\", path: \"/financial-data/company-price-changes\" } })\n    .input(bigdataSchemas.st_bff_data_tools_BFFRequest)\n    .output(bigdataSchemas.st_bff_data_tools_ChangeDataToolResponse)\n    .query(async ({ input }) => {\n      return {\n        result: input.entityIds.reduce((acc, entityId) => {\n          return { ...acc, [entityId]: financialDataGenerators.companyPriceChanges() }\n        }, {}),\n      }\n    }),\n  companyPriceTarget: bigdataApiProcedure\n    .meta({ openapi: { method: \"POST\", path: \"/financial-data/company-price-target\" } })\n    .input(bigdataSchemas.st_bff_data_tools_BFFRequest)\n    .output(bigdataSchemas.st_bff_data_tools_PriceTargetDataToolResponse)\n    .query(async ({ input }) => {\n      return {\n        result: input.entityIds.reduce((acc, entityId) => {\n          return { ...acc, [entityId]: financialDataGenerators.companyPriceTarget() }\n        }, {}),\n      }\n    }),\n  companyQuote: bigdataApiProcedure\n    .meta({ openapi: { method: \"POST\", path: \"/financial-data/company-quote\" } })\n    .input(bigdataSchemas.st_bff_data_tools_BFFRequest)\n    .output(bigdataSchemas.st_bff_data_tools_QuoteDataToolResponse)\n    .query(async ({ input }) => {\n      return {\n        result: input.entityIds.reduce((acc, entityId) => {\n          return { ...acc, [entityId]: financialDataGenerators.companyQuote() }\n        }, {}),\n      }\n    }),\n  companySentiment: bigdataApiProcedure\n    .meta({ openapi: { method: \"POST\", path: \"/financial-data/company-sentiment\" } })\n    .input(bigdataSchemas.st_bff_data_tools_BFFRequest)\n    .output(\n      z.object({\n        result: z.record(bigdataSchemas.st_bff_data_tools_SentimentBFFToolData),\n      }),\n    )\n    .query(async ({ input }) => {\n      return {\n        result: input.entityIds.reduce((acc, entityId) => {\n          return { ...acc, [entityId]: financialDataGenerators.companySentiment() }\n        }, {}),\n      }\n    }),\n  companyIncomeStatement: bigdataApiProcedure\n    .meta({ openapi: { method: \"POST\", path: \"/financial-data/company-income-statement\" } })\n    .input(bigdataSchemas.st_bff_data_tools_BFFRequest)\n    .output(\n      z.object({\n        result: z.record(bigdataSchemas.st_bff_data_tools_IncomeStatementBFFResponse),\n      }),\n    )\n    .query(async ({ input }) => {\n      return {\n        result: input.entityIds.reduce((acc, entityId) => {\n          return { ...acc, [entityId]: financialDataGenerators.companyIncomeStatement() }\n        }, {}),\n      }\n    }),\n  companyCashFlowStatement: bigdataApiProcedure\n    .meta({ openapi: { method: \"POST\", path: \"/financial-data/company-cash-flow-statement\" } })\n    .input(bigdataSchemas.st_bff_data_tools_BFFRequest)\n    .output(\n      z.object({\n        result: z.record(bigdataSchemas.st_bff_data_tools_CashFlowStatementBFFResponse),\n      }),\n    )\n    .query(async ({ input }) => {\n      return {\n        result: input.entityIds.reduce((acc, entityId) => {\n          return { ...acc, [entityId]: financialDataGenerators.companyCashFlowStatement() }\n        }, {}),\n      }\n    }),\n  companyBalanceStatement: bigdataApiProcedure\n    .meta({ openapi: { method: \"POST\", path: \"/financial-data/company-balance-statement\" } })\n    .input(bigdataSchemas.st_bff_data_tools_BFFRequest)\n    .output(bigdataSchemas.st_bff_data_tools_BalanceStatementBFFResponse)\n    .query(async ({ input }) => {\n      return {\n        result: input.entityIds.reduce((acc, entityId) => {\n          return { ...acc, [entityId]: financialDataGenerators.companyBalanceStatement() }\n        }, {}),\n      }\n    }),\n  companyKeyMetrics: bigdataApiProcedure\n    .meta({ openapi: { method: \"POST\", path: \"/financial-data/company-key-metrics\" } })\n    .input(bigdataSchemas.st_bff_data_tools_BFFRequest)\n    .output(bigdataSchemas.st_bff_data_tools_KeyMetricsDataToolResponse)\n    .query(async ({ input }) => {\n      return {\n        result: input.entityIds.reduce((acc, entityId) => {\n          return { ...acc, [entityId]: financialDataGenerators.companyKeyMetrics() }\n        }, {}),\n      }\n    }),\n  companyRatios: bigdataApiProcedure\n    .meta({ openapi: { method: \"POST\", path: \"/financial-data/company-ratios\" } })\n    .input(bigdataSchemas.st_bff_data_tools_BFFRequest)\n    .output(bigdataSchemas.st_bff_data_tools_RatiosDataToolResponse)\n    .query(async ({ input }) => {\n      return {\n        result: input.entityIds.reduce((acc, entityId) => {\n          return { ...acc, [entityId]: financialDataGenerators.companyRatios() }\n        }, {}),\n      }\n    }),\n}\n"],"names":["financeProcedures","companyAnalystRatings","bigdataApiProcedure","meta","openapi","method","path","input","bigdataSchemas","st_bff_data_tools_BFFRequest","output","st_bff_data_tools_AnalystDataToolResponse","query","result","entityIds","reduce","acc","entityId","financialDataGenerators","companyCurrency","st_bff_data_tools_CurrencyDataToolResponse","companyLatestSurprise","st_bff_data_tools_EarningsSurpriseDataToolResponse","companyPriceChanges","st_bff_data_tools_ChangeDataToolResponse","companyPriceTarget","st_bff_data_tools_PriceTargetDataToolResponse","companyQuote","st_bff_data_tools_QuoteDataToolResponse","companySentiment","z","object","record","st_bff_data_tools_SentimentBFFToolData","companyIncomeStatement","st_bff_data_tools_IncomeStatementBFFResponse","companyCashFlowStatement","st_bff_data_tools_CashFlowStatementBFFResponse","companyBalanceStatement","st_bff_data_tools_BalanceStatementBFFResponse","companyKeyMetrics","st_bff_data_tools_KeyMetricsDataToolResponse","companyRatios","st_bff_data_tools_RatiosDataToolResponse"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"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"}