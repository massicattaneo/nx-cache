{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/common/hooks/src/lib/useWhyDidYouUpdate.ts"],"sourcesContent":["/* eslint-disable no-console */\nimport { useEffect, useRef } from \"react\"\n\ntype Props = Record<string, unknown>\n\nfunction useWhyDidYouUpdate(name: string, props: Props) {\n  // Get a mutable ref object where we can store props ...\n  // ... for comparison next time this hook runs.\n  const previousProps = useRef<Props>({})\n\n  useEffect(() => {\n    if (previousProps.current) {\n      // Get all keys from previous and current props\n      const allKeys = Object.keys({ ...previousProps.current, ...props })\n      // Use this object to keep track of changed props\n      const changesObj: Props = {}\n      // Iterate through keys\n      allKeys.forEach(key => {\n        // If previous is different from current\n        if (previousProps.current[key] !== props[key]) {\n          // Add to changesObj\n          changesObj[key] = {\n            from: previousProps.current[key],\n            to: props[key],\n          }\n        }\n      })\n\n      // If changesObj not empty then output to console\n      if (Object.keys(changesObj).length) {\n        console.log(\"[ü§∑‚Äç‚ôÇÔ∏è why-did-you-update ü§∑‚Äç‚ôÇÔ∏è]\", name, changesObj)\n      }\n    }\n\n    // Finally update previousProps with current props for next hook call\n    previousProps.current = props\n  })\n}\n\nexport { useWhyDidYouUpdate }\n"],"names":["useWhyDidYouUpdate","name","props","previousProps","useRef","useEffect","current","allKeys","Object","keys","changesObj","forEach","key","from","to","length","console","log"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"AAAA,6BAA6B;;;;+BAuCpBA;;;eAAAA;;;uBAtCyB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIlC,SAASA,mBAAmBC,IAAY,EAAEC,KAAY;IACpD,wDAAwD;IACxD,+CAA+C;IAC/C,MAAMC,gBAAgBC,IAAAA,aAAM,EAAQ,CAAC;IAErCC,IAAAA,gBAAS,EAAC;QACR,IAAIF,cAAcG,OAAO,EAAE;YACzB,+CAA+C;YAC/C,MAAMC,UAAUC,OAAOC,IAAI,CAAC,mBAAKN,cAAcG,OAAO,EAAKJ;YAC3D,iDAAiD;YACjD,MAAMQ,aAAoB,CAAC;YAC3B,uBAAuB;YACvBH,QAAQI,OAAO,CAACC,CAAAA;gBACd,wCAAwC;gBACxC,IAAIT,cAAcG,OAAO,CAACM,IAAI,KAAKV,KAAK,CAACU,IAAI,EAAE;oBAC7C,oBAAoB;oBACpBF,UAAU,CAACE,IAAI,GAAG;wBAChBC,MAAMV,cAAcG,OAAO,CAACM,IAAI;wBAChCE,IAAIZ,KAAK,CAACU,IAAI;oBAChB;gBACF;YACF;YAEA,iDAAiD;YACjD,IAAIJ,OAAOC,IAAI,CAACC,YAAYK,MAAM,EAAE;gBAClCC,QAAQC,GAAG,CAAC,oCAAoChB,MAAMS;YACxD;QACF;QAEA,qEAAqE;QACrEP,cAAcG,OAAO,GAAGJ;IAC1B;AACF"}