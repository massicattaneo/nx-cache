{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/tanstack-api/file/src/hooks/useFileMetadata.ts"],"sourcesContent":["import { useEffect } from \"react\"\nimport { FileRowType } from \"@rp/common/utils\"\nimport { useQuery, useQueryClient } from \"@tanstack/react-query\"\nimport { getIndexStatus } from \"../services\"\nimport { filesQueryKeys } from \"../utils\"\nimport {\n  getIsMissingMetaData,\n  getRefetchIntervalForUseFileMetadata,\n  handleEffectMissingMetadata,\n} from \"../utils/fileMetadata.utils\"\n\nconst useFileMetadata = (baseFile: FileRowType) => {\n  const missingMetaData = getIsMissingMetaData(baseFile)\n\n  const queryClient = useQueryClient()\n\n  const results = useQuery({\n    queryKey: filesQueryKeys.indexStatus(baseFile.id),\n    queryFn: () => getIndexStatus(baseFile.id),\n    retry: missingMetaData,\n    refetchInterval: getRefetchIntervalForUseFileMetadata,\n    enabled: missingMetaData,\n  })\n\n  useEffect(\n    () => handleEffectMissingMetadata(baseFile, queryClient, results, missingMetaData),\n    [baseFile, queryClient, results, missingMetaData],\n  )\n\n  return { missingMetaData, ...results }\n}\n\nexport { useFileMetadata }\n"],"names":["useFileMetadata","baseFile","missingMetaData","getIsMissingMetaData","queryClient","useQueryClient","results","useQuery","queryKey","filesQueryKeys","indexStatus","id","queryFn","getIndexStatus","retry","refetchInterval","getRefetchIntervalForUseFileMetadata","enabled","useEffect","handleEffectMissingMetadata"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAgCSA;;;eAAAA;;;uBAhCiB;4BAEe;0BACV;uBACA;mCAKxB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEP,MAAMA,kBAAkB,CAACC;IACvB,MAAMC,kBAAkBC,IAAAA,uCAAoB,EAACF;IAE7C,MAAMG,cAAcC,IAAAA,0BAAc;IAElC,MAAMC,UAAUC,IAAAA,oBAAQ,EAAC;QACvBC,UAAUC,qBAAc,CAACC,WAAW,CAACT,SAASU,EAAE;QAChDC,SAAS,IAAMC,IAAAA,wBAAc,EAACZ,SAASU,EAAE;QACzCG,OAAOZ;QACPa,iBAAiBC,uDAAoC;QACrDC,SAASf;IACX;IAEAgB,IAAAA,gBAAS,EACP,IAAMC,IAAAA,8CAA2B,EAAClB,UAAUG,aAAaE,SAASJ,kBAClE;QAACD;QAAUG;QAAaE;QAASJ;KAAgB;IAGnD,OAAO;QAAEA;OAAoBI;AAC/B"}