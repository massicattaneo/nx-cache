{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/composite-components/src/StoryCardScrollTopButton/StoryCardScrollTopButton.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\"\nimport { styled } from \"@rp/react/theme\"\nimport { RPTooltip } from \"@rp/react/web/common/base-components\"\nimport { useDeviceInfo } from \"@rp/react/web/common/hooks\"\nimport { Fab } from \"@rp/react/web/mui/core\"\nimport { ArrowUpward } from \"@rp/react/web/mui/icons\"\n\nconst PREFIX = \"StoryCardScroll\"\n\nconst classes = {\n  storyCardScrollTopButtonRoot: `${PREFIX}-storyCardScrollTopButtonRoot`,\n  scrollButtonOnBody: `${PREFIX}-scrollButtonOnBody`,\n  scrollTopFab: `${PREFIX}-scrollTopFab`,\n}\n\nconst StoryCardScrollStyled = styled(\"div\")(({ theme }) => ({\n  [`&.${classes.storyCardScrollTopButtonRoot}`]: {\n    position: \"absolute\",\n    bottom: 6,\n    right: 10,\n  },\n  [`&.${classes.scrollButtonOnBody}`]: {\n    position: \"fixed\",\n    bottom: theme.spacing(1),\n    left: \"50%\",\n  },\n  [`& .${classes.scrollTopFab}`]: {\n    color: theme.palette.common.white,\n    backgroundColor: theme.palette.grey[500],\n    \"&:hover\": {\n      backgroundColor: theme.palette.grey[600],\n    },\n  },\n}))\n\ntype StoryCardScrollTopButtonProps = {\n  infiniteScrollContainerRef: React.RefObject<HTMLElement | null>\n  scrollBody?: boolean\n}\nconst StoryCardScrollTopButton = ({\n  infiniteScrollContainerRef,\n  scrollBody = false,\n}: StoryCardScrollTopButtonProps) => {\n  const [show, handleShow] = useState(false)\n  const { isMobile } = useDeviceInfo()\n  useEffect(() => {\n    const scrollListener = () => {\n      let scrollY = 0\n\n      if (scrollBody) {\n        scrollY =\n          window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0\n      } else {\n        scrollY = infiniteScrollContainerRef.current?.scrollTop ?? 0\n      }\n\n      if (scrollY > 0) {\n        handleShow(true)\n      } else handleShow(false)\n    }\n    window.addEventListener(\"scroll\", scrollListener, true)\n    return () => {\n      window.removeEventListener(\"scroll\", scrollListener, true)\n    }\n  })\n\n  const handleScrollToTop = () => {\n    scrollBody\n      ? window.scrollTo({ top: 0, behavior: \"smooth\" })\n      : infiniteScrollContainerRef?.current?.scroll({ top: 0, behavior: \"smooth\" })\n  }\n\n  if (isMobile) return null\n\n  return (\n    <StoryCardScrollStyled\n      className={scrollBody ? classes.scrollButtonOnBody : classes.storyCardScrollTopButtonRoot}\n    >\n      {show && (\n        <RPTooltip title=\"Go to top\">\n          <Fab\n            size=\"small\"\n            variant=\"circular\"\n            color=\"inherit\"\n            aria-label=\"scroll-to-top\"\n            role=\"scroll-to-top-button\"\n            className={classes.scrollTopFab}\n            onClick={handleScrollToTop}\n          >\n            <ArrowUpward />\n          </Fab>\n        </RPTooltip>\n      )}\n    </StoryCardScrollStyled>\n  )\n}\n\nexport { StoryCardScrollTopButton }\n"],"names":["StoryCardScrollTopButton","PREFIX","classes","storyCardScrollTopButtonRoot","scrollButtonOnBody","scrollTopFab","StoryCardScrollStyled","styled","theme","position","bottom","right","spacing","left","color","palette","common","white","backgroundColor","grey","infiniteScrollContainerRef","scrollBody","show","handleShow","useState","isMobile","useDeviceInfo","useEffect","scrollListener","scrollY","window","pageYOffset","document","documentElement","scrollTop","body","current","addEventListener","removeEventListener","handleScrollToTop","scrollTo","top","behavior","scroll","className","RPTooltip","title","Fab","size","variant","aria-label","role","onClick","ArrowUpward"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAiGSA;;;eAAAA;;;;+DAjGkC;uBACpB;gCACG;uBACI;sBACV;uBACQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAE5B,MAAMC,SAAS;AAEf,MAAMC,UAAU;IACdC,8BAA8B,CAAC,EAAEF,OAAO,6BAA6B,CAAC;IACtEG,oBAAoB,CAAC,EAAEH,OAAO,mBAAmB,CAAC;IAClDI,cAAc,CAAC,EAAEJ,OAAO,aAAa,CAAC;AACxC;AAEA,MAAMK,wBAAwBC,IAAAA,aAAM,EAAC,OAAO,CAAC,EAAEC,KAAK,EAAE,GAAM,CAAA;QAC1D,CAAC,CAAC,EAAE,EAAEN,QAAQC,4BAA4B,CAAC,CAAC,CAAC,EAAE;YAC7CM,UAAU;YACVC,QAAQ;YACRC,OAAO;QACT;QACA,CAAC,CAAC,EAAE,EAAET,QAAQE,kBAAkB,CAAC,CAAC,CAAC,EAAE;YACnCK,UAAU;YACVC,QAAQF,MAAMI,OAAO,CAAC;YACtBC,MAAM;QACR;QACA,CAAC,CAAC,GAAG,EAAEX,QAAQG,YAAY,CAAC,CAAC,CAAC,EAAE;YAC9BS,OAAON,MAAMO,OAAO,CAACC,MAAM,CAACC,KAAK;YACjCC,iBAAiBV,MAAMO,OAAO,CAACI,IAAI,CAAC,IAAI;YACxC,WAAW;gBACTD,iBAAiBV,MAAMO,OAAO,CAACI,IAAI,CAAC,IAAI;YAC1C;QACF;IACF,CAAA;AAMA,MAAMnB,2BAA2B,CAAC,EAChCoB,0BAA0B,EAC1BC,aAAa,KAAK,EACY;IAC9B,MAAM,CAACC,MAAMC,WAAW,GAAGC,IAAAA,eAAQ,EAAC;IACpC,MAAM,EAAEC,QAAQ,EAAE,GAAGC,IAAAA,oBAAa;IAClCC,IAAAA,gBAAS,EAAC;QACR,MAAMC,iBAAiB;YACrB,IAAIC,UAAU;YAEd,IAAIR,YAAY;gBACdQ,UACEC,OAAOC,WAAW,IAAIC,SAASC,eAAe,CAACC,SAAS,IAAIF,SAASG,IAAI,CAACD,SAAS,IAAI;YAC3F,OAAO;oBACKd;oBAAAA;gBAAVS,UAAUT,CAAAA,iDAAAA,sCAAAA,2BAA2BgB,OAAO,cAAlChB,0DAAAA,oCAAoCc,SAAS,cAA7Cd,2DAAAA,gDAAiD;YAC7D;YAEA,IAAIS,UAAU,GAAG;gBACfN,WAAW;YACb,OAAOA,WAAW;QACpB;QACAO,OAAOO,gBAAgB,CAAC,UAAUT,gBAAgB;QAClD,OAAO;YACLE,OAAOQ,mBAAmB,CAAC,UAAUV,gBAAgB;QACvD;IACF;IAEA,MAAMW,oBAAoB;YAGpBnB;QAFJC,aACIS,OAAOU,QAAQ,CAAC;YAAEC,KAAK;YAAGC,UAAU;QAAS,KAC7CtB,uCAAAA,kDAAAA,sCAAAA,2BAA4BgB,OAAO,cAAnChB,0DAAAA,oCAAqCuB,MAAM,CAAC;YAAEF,KAAK;YAAGC,UAAU;QAAS;IAC/E;IAEA,IAAIjB,UAAU,OAAO;IAErB,qBACE,qBAACnB;QACCsC,WAAWvB,aAAanB,QAAQE,kBAAkB,GAAGF,QAAQC,4BAA4B;kBAExFmB,sBACC,qBAACuB,yBAAS;YAACC,OAAM;sBACf,cAAA,qBAACC,SAAG;gBACFC,MAAK;gBACLC,SAAQ;gBACRnC,OAAM;gBACNoC,cAAW;gBACXC,MAAK;gBACLP,WAAW1C,QAAQG,YAAY;gBAC/B+C,SAASb;0BAET,cAAA,qBAACc,kBAAW;;;;AAMxB"}