{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/node_modules/swiper/modules/history/history.js"],"sourcesContent":["import { getWindow } from 'ssr-window';\nexport default function History({\n  swiper,\n  extendParams,\n  on\n}) {\n  extendParams({\n    history: {\n      enabled: false,\n      root: '',\n      replaceState: false,\n      key: 'slides',\n      keepQuery: false\n    }\n  });\n  let initialized = false;\n  let paths = {};\n  const slugify = text => {\n    return text.toString().replace(/\\s+/g, '-').replace(/[^\\w-]+/g, '').replace(/--+/g, '-').replace(/^-+/, '').replace(/-+$/, '');\n  };\n  const getPathValues = urlOverride => {\n    const window = getWindow();\n    let location;\n    if (urlOverride) {\n      location = new URL(urlOverride);\n    } else {\n      location = window.location;\n    }\n    const pathArray = location.pathname.slice(1).split('/').filter(part => part !== '');\n    const total = pathArray.length;\n    const key = pathArray[total - 2];\n    const value = pathArray[total - 1];\n    return {\n      key,\n      value\n    };\n  };\n  const setHistory = (key, index) => {\n    const window = getWindow();\n    if (!initialized || !swiper.params.history.enabled) return;\n    let location;\n    if (swiper.params.url) {\n      location = new URL(swiper.params.url);\n    } else {\n      location = window.location;\n    }\n    const slide = swiper.slides[index];\n    let value = slugify(slide.getAttribute('data-history'));\n    if (swiper.params.history.root.length > 0) {\n      let root = swiper.params.history.root;\n      if (root[root.length - 1] === '/') root = root.slice(0, root.length - 1);\n      value = `${root}/${key ? `${key}/` : ''}${value}`;\n    } else if (!location.pathname.includes(key)) {\n      value = `${key ? `${key}/` : ''}${value}`;\n    }\n    if (swiper.params.history.keepQuery) {\n      value += location.search;\n    }\n    const currentState = window.history.state;\n    if (currentState && currentState.value === value) {\n      return;\n    }\n    if (swiper.params.history.replaceState) {\n      window.history.replaceState({\n        value\n      }, null, value);\n    } else {\n      window.history.pushState({\n        value\n      }, null, value);\n    }\n  };\n  const scrollToSlide = (speed, value, runCallbacks) => {\n    if (value) {\n      for (let i = 0, length = swiper.slides.length; i < length; i += 1) {\n        const slide = swiper.slides[i];\n        const slideHistory = slugify(slide.getAttribute('data-history'));\n        if (slideHistory === value) {\n          const index = swiper.getSlideIndex(slide);\n          swiper.slideTo(index, speed, runCallbacks);\n        }\n      }\n    } else {\n      swiper.slideTo(0, speed, runCallbacks);\n    }\n  };\n  const setHistoryPopState = () => {\n    paths = getPathValues(swiper.params.url);\n    scrollToSlide(swiper.params.speed, paths.value, false);\n  };\n  const init = () => {\n    const window = getWindow();\n    if (!swiper.params.history) return;\n    if (!window.history || !window.history.pushState) {\n      swiper.params.history.enabled = false;\n      swiper.params.hashNavigation.enabled = true;\n      return;\n    }\n    initialized = true;\n    paths = getPathValues(swiper.params.url);\n    if (!paths.key && !paths.value) {\n      if (!swiper.params.history.replaceState) {\n        window.addEventListener('popstate', setHistoryPopState);\n      }\n      return;\n    }\n    scrollToSlide(0, paths.value, swiper.params.runCallbacksOnInit);\n    if (!swiper.params.history.replaceState) {\n      window.addEventListener('popstate', setHistoryPopState);\n    }\n  };\n  const destroy = () => {\n    const window = getWindow();\n    if (!swiper.params.history.replaceState) {\n      window.removeEventListener('popstate', setHistoryPopState);\n    }\n  };\n  on('init', () => {\n    if (swiper.params.history.enabled) {\n      init();\n    }\n  });\n  on('destroy', () => {\n    if (swiper.params.history.enabled) {\n      destroy();\n    }\n  });\n  on('transitionEnd _freeModeNoMomentumRelease', () => {\n    if (initialized) {\n      setHistory(swiper.params.history.key, swiper.activeIndex);\n    }\n  });\n  on('slideChange', () => {\n    if (initialized && swiper.params.cssMode) {\n      setHistory(swiper.params.history.key, swiper.activeIndex);\n    }\n  });\n}"],"names":["History","swiper","extendParams","on","history","enabled","root","replaceState","key","keepQuery","initialized","paths","slugify","text","toString","replace","getPathValues","urlOverride","window","getWindow","location","URL","pathArray","pathname","slice","split","filter","part","total","length","value","setHistory","index","params","url","slide","slides","getAttribute","includes","search","currentState","state","pushState","scrollToSlide","speed","runCallbacks","i","slideHistory","getSlideIndex","slideTo","setHistoryPopState","init","hashNavigation","addEventListener","runCallbacksOnInit","destroy","removeEventListener","activeIndex","cssMode"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BACA;;;eAAwBA;;;2BADE;AACX,SAASA,QAAQ,EAC9BC,MAAM,EACNC,YAAY,EACZC,EAAE,EACH;IACCD,aAAa;QACXE,SAAS;YACPC,SAAS;YACTC,MAAM;YACNC,cAAc;YACdC,KAAK;YACLC,WAAW;QACb;IACF;IACA,IAAIC,cAAc;IAClB,IAAIC,QAAQ,CAAC;IACb,MAAMC,UAAUC,CAAAA;QACd,OAAOA,KAAKC,QAAQ,GAAGC,OAAO,CAAC,QAAQ,KAAKA,OAAO,CAAC,YAAY,IAAIA,OAAO,CAAC,QAAQ,KAAKA,OAAO,CAAC,OAAO,IAAIA,OAAO,CAAC,OAAO;IAC7H;IACA,MAAMC,gBAAgBC,CAAAA;QACpB,MAAMC,SAASC,IAAAA,oBAAS;QACxB,IAAIC;QACJ,IAAIH,aAAa;YACfG,WAAW,IAAIC,IAAIJ;QACrB,OAAO;YACLG,WAAWF,OAAOE,QAAQ;QAC5B;QACA,MAAME,YAAYF,SAASG,QAAQ,CAACC,KAAK,CAAC,GAAGC,KAAK,CAAC,KAAKC,MAAM,CAACC,CAAAA,OAAQA,SAAS;QAChF,MAAMC,QAAQN,UAAUO,MAAM;QAC9B,MAAMrB,MAAMc,SAAS,CAACM,QAAQ,EAAE;QAChC,MAAME,QAAQR,SAAS,CAACM,QAAQ,EAAE;QAClC,OAAO;YACLpB;YACAsB;QACF;IACF;IACA,MAAMC,aAAa,CAACvB,KAAKwB;QACvB,MAAMd,SAASC,IAAAA,oBAAS;QACxB,IAAI,CAACT,eAAe,CAACT,OAAOgC,MAAM,CAAC7B,OAAO,CAACC,OAAO,EAAE;QACpD,IAAIe;QACJ,IAAInB,OAAOgC,MAAM,CAACC,GAAG,EAAE;YACrBd,WAAW,IAAIC,IAAIpB,OAAOgC,MAAM,CAACC,GAAG;QACtC,OAAO;YACLd,WAAWF,OAAOE,QAAQ;QAC5B;QACA,MAAMe,QAAQlC,OAAOmC,MAAM,CAACJ,MAAM;QAClC,IAAIF,QAAQlB,QAAQuB,MAAME,YAAY,CAAC;QACvC,IAAIpC,OAAOgC,MAAM,CAAC7B,OAAO,CAACE,IAAI,CAACuB,MAAM,GAAG,GAAG;YACzC,IAAIvB,OAAOL,OAAOgC,MAAM,CAAC7B,OAAO,CAACE,IAAI;YACrC,IAAIA,IAAI,CAACA,KAAKuB,MAAM,GAAG,EAAE,KAAK,KAAKvB,OAAOA,KAAKkB,KAAK,CAAC,GAAGlB,KAAKuB,MAAM,GAAG;YACtEC,QAAQ,CAAC,EAAExB,KAAK,CAAC,EAAEE,MAAM,CAAC,EAAEA,IAAI,CAAC,CAAC,GAAG,GAAG,EAAEsB,MAAM,CAAC;QACnD,OAAO,IAAI,CAACV,SAASG,QAAQ,CAACe,QAAQ,CAAC9B,MAAM;YAC3CsB,QAAQ,CAAC,EAAEtB,MAAM,CAAC,EAAEA,IAAI,CAAC,CAAC,GAAG,GAAG,EAAEsB,MAAM,CAAC;QAC3C;QACA,IAAI7B,OAAOgC,MAAM,CAAC7B,OAAO,CAACK,SAAS,EAAE;YACnCqB,SAASV,SAASmB,MAAM;QAC1B;QACA,MAAMC,eAAetB,OAAOd,OAAO,CAACqC,KAAK;QACzC,IAAID,gBAAgBA,aAAaV,KAAK,KAAKA,OAAO;YAChD;QACF;QACA,IAAI7B,OAAOgC,MAAM,CAAC7B,OAAO,CAACG,YAAY,EAAE;YACtCW,OAAOd,OAAO,CAACG,YAAY,CAAC;gBAC1BuB;YACF,GAAG,MAAMA;QACX,OAAO;YACLZ,OAAOd,OAAO,CAACsC,SAAS,CAAC;gBACvBZ;YACF,GAAG,MAAMA;QACX;IACF;IACA,MAAMa,gBAAgB,CAACC,OAAOd,OAAOe;QACnC,IAAIf,OAAO;YACT,IAAK,IAAIgB,IAAI,GAAGjB,SAAS5B,OAAOmC,MAAM,CAACP,MAAM,EAAEiB,IAAIjB,QAAQiB,KAAK,EAAG;gBACjE,MAAMX,QAAQlC,OAAOmC,MAAM,CAACU,EAAE;gBAC9B,MAAMC,eAAenC,QAAQuB,MAAME,YAAY,CAAC;gBAChD,IAAIU,iBAAiBjB,OAAO;oBAC1B,MAAME,QAAQ/B,OAAO+C,aAAa,CAACb;oBACnClC,OAAOgD,OAAO,CAACjB,OAAOY,OAAOC;gBAC/B;YACF;QACF,OAAO;YACL5C,OAAOgD,OAAO,CAAC,GAAGL,OAAOC;QAC3B;IACF;IACA,MAAMK,qBAAqB;QACzBvC,QAAQK,cAAcf,OAAOgC,MAAM,CAACC,GAAG;QACvCS,cAAc1C,OAAOgC,MAAM,CAACW,KAAK,EAAEjC,MAAMmB,KAAK,EAAE;IAClD;IACA,MAAMqB,OAAO;QACX,MAAMjC,SAASC,IAAAA,oBAAS;QACxB,IAAI,CAAClB,OAAOgC,MAAM,CAAC7B,OAAO,EAAE;QAC5B,IAAI,CAACc,OAAOd,OAAO,IAAI,CAACc,OAAOd,OAAO,CAACsC,SAAS,EAAE;YAChDzC,OAAOgC,MAAM,CAAC7B,OAAO,CAACC,OAAO,GAAG;YAChCJ,OAAOgC,MAAM,CAACmB,cAAc,CAAC/C,OAAO,GAAG;YACvC;QACF;QACAK,cAAc;QACdC,QAAQK,cAAcf,OAAOgC,MAAM,CAACC,GAAG;QACvC,IAAI,CAACvB,MAAMH,GAAG,IAAI,CAACG,MAAMmB,KAAK,EAAE;YAC9B,IAAI,CAAC7B,OAAOgC,MAAM,CAAC7B,OAAO,CAACG,YAAY,EAAE;gBACvCW,OAAOmC,gBAAgB,CAAC,YAAYH;YACtC;YACA;QACF;QACAP,cAAc,GAAGhC,MAAMmB,KAAK,EAAE7B,OAAOgC,MAAM,CAACqB,kBAAkB;QAC9D,IAAI,CAACrD,OAAOgC,MAAM,CAAC7B,OAAO,CAACG,YAAY,EAAE;YACvCW,OAAOmC,gBAAgB,CAAC,YAAYH;QACtC;IACF;IACA,MAAMK,UAAU;QACd,MAAMrC,SAASC,IAAAA,oBAAS;QACxB,IAAI,CAAClB,OAAOgC,MAAM,CAAC7B,OAAO,CAACG,YAAY,EAAE;YACvCW,OAAOsC,mBAAmB,CAAC,YAAYN;QACzC;IACF;IACA/C,GAAG,QAAQ;QACT,IAAIF,OAAOgC,MAAM,CAAC7B,OAAO,CAACC,OAAO,EAAE;YACjC8C;QACF;IACF;IACAhD,GAAG,WAAW;QACZ,IAAIF,OAAOgC,MAAM,CAAC7B,OAAO,CAACC,OAAO,EAAE;YACjCkD;QACF;IACF;IACApD,GAAG,4CAA4C;QAC7C,IAAIO,aAAa;YACfqB,WAAW9B,OAAOgC,MAAM,CAAC7B,OAAO,CAACI,GAAG,EAAEP,OAAOwD,WAAW;QAC1D;IACF;IACAtD,GAAG,eAAe;QAChB,IAAIO,eAAeT,OAAOgC,MAAM,CAACyB,OAAO,EAAE;YACxC3B,WAAW9B,OAAOgC,MAAM,CAAC7B,OAAO,CAACI,GAAG,EAAEP,OAAOwD,WAAW;QAC1D;IACF;AACF"}