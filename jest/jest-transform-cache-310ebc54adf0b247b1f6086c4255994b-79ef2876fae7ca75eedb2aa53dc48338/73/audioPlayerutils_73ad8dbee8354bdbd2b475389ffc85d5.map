{"version":3,"sources":["/Users/mcattaneo/workspace/frontend/libs/react/web/common/base-components/src/AudioPlayer/audioPlayer.utils.ts"],"sourcesContent":["import { Dispatch, SetStateAction } from \"react\"\n\nconst convertSecondsToTime = (time: number): string => {\n  if (time < 0 || isNaN(time)) return \"\"\n\n  const hours = Math.floor(time / 3600)\n  const timeWithoutHours = time % 3600\n  const minutes = Math.floor(timeWithoutHours / 60)\n  const seconds = Math.floor(timeWithoutHours % 60)\n\n  if (hours)\n    return `${hours}:${minutes.toString().padStart(2, \"0\")}:${seconds.toString().padStart(2, \"0\")}`\n\n  if (minutes) return `${minutes}:${seconds.toString().padStart(2, \"0\")}`\n\n  return `0:${seconds.toString().padStart(2, \"0\")}`\n}\n\nconst normalizeCurrentTimeChange = (newValue: Array<number> | number): number =>\n  Array.isArray(newValue) ? newValue[0] : newValue\n\nconst initializeAudioPlayer = (\n  url: string | undefined,\n  audio: HTMLAudioElement | null,\n  setAudio: Dispatch<SetStateAction<HTMLAudioElement | null>>,\n): void => {\n  if (!url || audio) return\n\n  const newAudio = new Audio(url)\n  setAudio(newAudio)\n}\n\nconst createOnTimeUpdateAudioPlayer =\n  (\n    audio: HTMLAudioElement | null,\n    setCurrentTime: Dispatch<SetStateAction<number>>,\n    setDuration: Dispatch<SetStateAction<number>>,\n    duration: number,\n  ) =>\n  (): void => {\n    if (!audio) return undefined\n\n    setCurrentTime(Math.round(audio.currentTime))\n\n    if (!duration) {\n      setDuration(Math.round(audio.duration))\n    }\n  }\n\nconst playAudioPlayer = (\n  audio: HTMLAudioElement | null,\n  setIsPlaying: Dispatch<SetStateAction<boolean>>,\n  setAreControlsVisible: Dispatch<SetStateAction<boolean>>,\n): void => {\n  if (!audio) return\n\n  audio.play()\n  setIsPlaying(true)\n  setAreControlsVisible(true)\n}\n\nconst pauseAudioPlayer = (\n  audio: HTMLAudioElement | null,\n  setIsPlaying: Dispatch<SetStateAction<boolean>>,\n): void => {\n  if (!audio) return\n\n  audio.pause()\n  setIsPlaying(false)\n}\n\nconst closeAudioPlayerControls = (\n  audio: HTMLAudioElement | null,\n  setIsPlaying: Dispatch<SetStateAction<boolean>>,\n  setAreControlsVisible: Dispatch<SetStateAction<boolean>>,\n): void => {\n  if (!audio) return\n\n  audio.pause()\n  setIsPlaying(false)\n  setAreControlsVisible(false)\n}\n\nexport {\n  closeAudioPlayerControls,\n  convertSecondsToTime,\n  createOnTimeUpdateAudioPlayer,\n  initializeAudioPlayer,\n  normalizeCurrentTimeChange,\n  pauseAudioPlayer,\n  playAudioPlayer,\n}\n"],"names":["closeAudioPlayerControls","convertSecondsToTime","createOnTimeUpdateAudioPlayer","initializeAudioPlayer","normalizeCurrentTimeChange","pauseAudioPlayer","playAudioPlayer","time","isNaN","hours","Math","floor","timeWithoutHours","minutes","seconds","toString","padStart","newValue","Array","isArray","url","audio","setAudio","newAudio","Audio","setCurrentTime","setDuration","duration","undefined","round","currentTime","setIsPlaying","setAreControlsVisible","play","pause"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;IAoFEA,wBAAwB;eAAxBA;;IACAC,oBAAoB;eAApBA;;IACAC,6BAA6B;eAA7BA;;IACAC,qBAAqB;eAArBA;;IACAC,0BAA0B;eAA1BA;;IACAC,gBAAgB;eAAhBA;;IACAC,eAAe;eAAfA;;;AAxFF,MAAML,uBAAuB,CAACM;IAC5B,IAAIA,OAAO,KAAKC,MAAMD,OAAO,OAAO;IAEpC,MAAME,QAAQC,KAAKC,KAAK,CAACJ,OAAO;IAChC,MAAMK,mBAAmBL,OAAO;IAChC,MAAMM,UAAUH,KAAKC,KAAK,CAACC,mBAAmB;IAC9C,MAAME,UAAUJ,KAAKC,KAAK,CAACC,mBAAmB;IAE9C,IAAIH,OACF,OAAO,CAAC,EAAEA,MAAM,CAAC,EAAEI,QAAQE,QAAQ,GAAGC,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAEF,QAAQC,QAAQ,GAAGC,QAAQ,CAAC,GAAG,KAAK,CAAC;IAEjG,IAAIH,SAAS,OAAO,CAAC,EAAEA,QAAQ,CAAC,EAAEC,QAAQC,QAAQ,GAAGC,QAAQ,CAAC,GAAG,KAAK,CAAC;IAEvE,OAAO,CAAC,EAAE,EAAEF,QAAQC,QAAQ,GAAGC,QAAQ,CAAC,GAAG,KAAK,CAAC;AACnD;AAEA,MAAMZ,6BAA6B,CAACa,WAClCC,MAAMC,OAAO,CAACF,YAAYA,QAAQ,CAAC,EAAE,GAAGA;AAE1C,MAAMd,wBAAwB,CAC5BiB,KACAC,OACAC;IAEA,IAAI,CAACF,OAAOC,OAAO;IAEnB,MAAME,WAAW,IAAIC,MAAMJ;IAC3BE,SAASC;AACX;AAEA,MAAMrB,gCACJ,CACEmB,OACAI,gBACAC,aACAC,WAEF;QACE,IAAI,CAACN,OAAO,OAAOO;QAEnBH,eAAef,KAAKmB,KAAK,CAACR,MAAMS,WAAW;QAE3C,IAAI,CAACH,UAAU;YACbD,YAAYhB,KAAKmB,KAAK,CAACR,MAAMM,QAAQ;QACvC;IACF;AAEF,MAAMrB,kBAAkB,CACtBe,OACAU,cACAC;IAEA,IAAI,CAACX,OAAO;IAEZA,MAAMY,IAAI;IACVF,aAAa;IACbC,sBAAsB;AACxB;AAEA,MAAM3B,mBAAmB,CACvBgB,OACAU;IAEA,IAAI,CAACV,OAAO;IAEZA,MAAMa,KAAK;IACXH,aAAa;AACf;AAEA,MAAM/B,2BAA2B,CAC/BqB,OACAU,cACAC;IAEA,IAAI,CAACX,OAAO;IAEZA,MAAMa,KAAK;IACXH,aAAa;IACbC,sBAAsB;AACxB"}